

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>After Effects SDK Guide 1.0.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/extra.css" type="text/css" />
  <link rel="stylesheet" href="_static/_static/css/theme.css" type="text/css" />
    <link rel="author" title="About these documents" href="index.html#document-about" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html#document-index" class="icon icon-home"> After Effects SDK Guide
          

          
          </a>

          
            
            
            
              <div class="version">
                latest
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
            
              <!-- Local TOC -->
              <div class="local-toc"><p class="caption"><span class="caption-text">About</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-about">About this Document</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-history">Version History</a></li>
</ul>
<p class="caption"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-intro/intro">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-intro/what-can-i-do">What Can I Do With This SDK?</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-intro/other-integration-possibilities">Other Integration Possibilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-intro/sdk-audience">SDK Audience</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-intro/whats-new">What’s New</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-intro/how-to-start-creating-plug-ins">How To Start Creating Plug-ins</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-intro/sample-projects">Sample Projects</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-intro/debugging-plug-ins">Debugging Plug-ins</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-intro/compatibility-across-multiple-versions">Compatibility Across Multiple Versions?</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-intro/third-party-plug-in-hosts">Third-party Plug-in Hosts?</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-intro/pipl-resources">PiPL Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-intro/exceptions">Exceptions</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-intro/where-installers-should-put-plug-ins">Where Installers Should Put Plug-ins</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-intro/localization">Localization</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-intro/next-steps">Next Steps</a></li>
</ul>
<p class="caption"><span class="caption-text">Effect Basics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-effect-basics/effect-basics">Effect Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-effect-basics/entry-point">Entry Point</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-effect-basics/command-selectors">Command Selectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-effect-basics/PF_InData">PF_InData</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-effect-basics/PF_OutData">PF_OutData</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-effect-basics/parameters">Parameters</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-effect-basics/PF_ParamDef">PF_ParamDef</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-effect-basics/PF_EffectWorld">PF_EffectWorld / PF_LayerDef</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-effect-basics/errors">Errors</a></li>
</ul>
<p class="caption"><span class="caption-text">Effect Details</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-effect-details/multi-frame-rendering-in-ae">Multi-Frame Rendering in AE</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-effect-details/effect-details">Effect Details</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-effect-details/accessing-function-suites">Accessing the After Effects Function Suites</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-effect-details/memory-allocation">Memory Allocation</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-effect-details/image-buffer-management-functions">Image Buffer Management Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-effect-details/iteration-suites">Iteration Suites</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-effect-details/graphics-utility-suites">Graphics Utility Suites</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-effect-details/interaction-callback-functions">Interaction Callback Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-effect-details/pixel-aspect-ratio">Pixel Aspect Ratio</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-effect-details/parameters-floating-point-values">Parameters &amp; Floating Point Values</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-effect-details/parameter-supervision">Parameter Supervision</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-effect-details/global-sequence-frame-data">Global, Sequence, &amp; Frame Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-effect-details/arbitrary-data-parameters">Arbitrary Data Parameters</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-effect-details/useful-utility-functions">Useful Utility Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-effect-details/motion-blur">Motion Blur</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-effect-details/working-with-paths">Working With Paths</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-effect-details/accessing-camera-light-information">Accessing Camera &amp; Light Information</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-effect-details/color-space-conversion">Color Space Conversion</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-effect-details/changing-parameter-orders">Changing Parameter Orders, the Nice Way</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-effect-details/tips-tricks">Tips &amp; Tricks</a></li>
</ul>
<p class="caption"><span class="caption-text">SmartFX</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-smartfx/smartfx">SmartFX</a></li>
</ul>
<p class="caption"><span class="caption-text">Effect UI &amp; Events</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-effect-ui-events/effect-ui-events">Effect UI &amp; Events</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-effect-ui-events/PF_EventExtra">PF_EventExtra</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-effect-ui-events/PF_EventUnion">PF_EventUnion</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-effect-ui-events/custom-ui-and-drawbot">Custom UI &amp; Drawbot</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-effect-ui-events/ui-callbacks">UI Callbacks</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-effect-ui-events/tips-and-tricks">Tips &amp; Tricks</a></li>
</ul>
<p class="caption"><span class="caption-text">Audio</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-audio/audio">Audio</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-audio/global-outflags">Global Outflags</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-audio/audio-data-structures">Audio Data Structures</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-audio/audio-specific-float-slider-variables">Audio-Specific Float Slider Variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-audio/accessing-audio-data">Accessing Audio Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-audio/audio-considerations">Audio Considerations</a></li>
</ul>
<p class="caption"><span class="caption-text">AEGPs</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-aegps/aegps">AEGPs</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-aegps/overview">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-aegps/data-types">Data Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-aegps/implementation">Implementation</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-aegps/aegp-suites">AEGP Suites</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-aegps/cheating-effect-usage-of-aegp-suites">Cheating Effect Usage of AEGP Suites</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-aegps/aegp-details">AEGP Details</a></li>
</ul>
<p class="caption"><span class="caption-text">Artisans</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-artisans/artisans">Artisans</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-artisans/artisan-data-types">Artisan Data Types</a></li>
</ul>
<p class="caption"><span class="caption-text">AEIOs</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-aeios/aeios">AEIOs</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-aeios/calling-sequence">Calling Sequence</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-aeios/AEIO_ModuleInfo">AEIO_ModuleInfo</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-aeios/new-kids-on-the-function-block">New Kids On The Function Block</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-aeios/implementation-details">Implementation Details</a></li>
</ul>
<p class="caption"><span class="caption-text">Premiere Pro</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-ppro/ppro">Premiere Pro &amp; Other Hosts</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-ppro/plug-in-installation">Plug-in Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-ppro/basic-host-differences">Basic Host Differences</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-ppro/multithreading">Multithreading</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-ppro/bigger-differences">Bigger Differences</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-ppro/plug-ins-reloaded">Plug-Ins… Reloaded</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#effects-presets">Effects Presets</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#custom-ecw-ui-over-a-standard-data-type">Custom ECW UI Over A Standard Data Type</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-ppro/premiere-elements">Premiere Elements</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-ppro/unsupported-features">Unsupported Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-ppro/other-hosts">Other Hosts</a></li>
</ul>
</div>
            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html#document-index">After Effects SDK Guide</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html#document-index">Docs</a> &raquo;</li>
        
      <li>After Effects SDK Guide 1.0.0 documentation</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://bitbucket.org/motiondesign/ae-plugin-sdk-guide/src/master/docs/index.rst?mode=view" class="fa fa-bitbucket"> Edit on Bitbucket</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="welcome-to-the-adobe-after-effects-sdk-guide">
<h1>After Effects SDKガイドへようこそ<a class="headerlink" href="#welcome-to-the-adobe-after-effects-sdk-guide" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
<span id="document-about"></span><div class="section" id="about-this-document">
<span id="about"></span><h2>このドキュメントについて<a class="headerlink" href="#about-this-document" title="Permalink to this headline">¶</a></h2>
<p>このドキュメントは、長年の間に大きく変化してきました。ときには百科事典として、ときにはhow-toガイドとして、20年ものAPIの開発と改良の過程において情報を蓄積してきました。</p>
<p>After EffectsのAPIにおけるどんな取るに足らないことにも情報を得られる１つの情報源が必要とされることでしょう。しかしながら、同時にそんな文書は誰も読みたいとは思わないでしょうから、皆さんが関心を持つことができるような形となるように努めています。 </p>
<p>できる限り、図や表、写真などを用いてAPIの説明をできるよう心がけています。</p>
<p>あなたにとって学習がやりやすく、価値のあるものとならんことを。</p>
<p>訳者(altnoi)による注釈: )  このドキュメントのオリジナルはhttps://bitbucket.org/motiondesign/ae-plugin-sdk-guide.gitであり、これは非公式に翻訳したものとなります(2020/11/01現在の最新版を翻訳しています)。翻訳の精度、正確性は一切保証しませんしこれを参考にしたことが原因で発生した直接的・間接的な被害について一切責任を負えません。おそらく、かなりの飛躍した意訳も含まれます。もし、違和感を持ったなら皆様の手でも修正を加えていただければよりよいものとなるはずです。ご協力をよろしくお願いいたします。また、これはAdobe社並びに先述のリポジトリーの承認を特にとっていないため権利者からのclaimにより閉鎖される可能性もあります。その場合はご了承ください。そして、これを書いてる私自身も目下勉強中です。何かあれば教えていただければ幸いです。</p>
<hr class="docutils" />
<div class="section" id="organization">
<h3>概要<a class="headerlink" href="#organization" title="Permalink to this headline">¶</a></h3>
<p>この<a class="reference internal" href="index.html#intro-intro"><span class="std std-ref">イントロダクション</span></a> ではAfter Effectでできることの概要について集約しています。 それは、プラグインは何であるのかそしてどのように作用するかの説明であり、sampleプロジェクトの解説やどうすれば改良できるかと言ったこともです。また、どこへインストールすればいいのかどのような情報を参考にすればいいのかといったことです。</p>
<p>エフェクトプラグインの基礎については、<a class="reference internal" href="index.html#effect-basics-effect-basics"><span class="std std-ref">エフェクトの基礎</span></a>にて。ここでは関数上でどのようにパラメータが渡されるのかエフェクトプラグインのエントリーポイントについてなどが語られます。capability flagsやeffect parameters、そしてimage buffersについて語られています。</p>
<p><a class="reference internal" href="index.html#effect-details-effect-details"><span class="std std-ref">エフェクトの詳細</span></a>ではたくさんのcallback関数を駆使しつつエフェクトのさらなる深みを目指します。また、たくさんのプラグインを安定的にする考えかたもまた得ることができます。</p>
<p><a class="reference internal" href="index.html#smartfx-smartfx"><span class="std std-ref">SmartFX</span></a>とは、32bit floating point image にエフェクトプラグインを対応させるための拡張機能です。</p>
<p><a class="reference internal" href="index.html#effect-ui-events-effect-ui-events"><span class="std std-ref">Effect UIとEvents</span></a>ではeffect plug-inに同データが送られるか、ユーザーインターフェイスのカスタムの仕方や、パラメータの管理、カスタムUIからの独自型でのパラメータ送信についてもわかります。</p>
<p><a class="reference internal" href="index.html#audio-audio"><span class="std std-ref">Audio</span></a> effectsについては<a class="reference internal" href="index.html#audio-audio"><span class="std std-ref">Audio</span></a>を見てください。</p>
<p><a class="reference internal" href="index.html#aegps-aegps"><span class="std std-ref">AEGPs</span></a>の章ではAfter Effects General Plug-in (AEGP) APIについて説明しています。ここではコールバック関数や内部メッセージングへのフック、オープンプロジェクトのコンテンツにおける内容の操作やメニューコマンドの使い方について述べられています。</p>
<p><a class="reference internal" href="index.html#artisans-artisans"><span class="std std-ref">Artisans</span></a>はAEPGsの3Dレンダリングを取り扱うのに特化したプラグインです。</p>
<p><a class="reference internal" href="index.html#aeios-aeios"><span class="std std-ref">AEIOs</span></a>は、input、outputに特化したAEGPsです。</p>
<p><a class="reference internal" href="index.html#ppro-ppro"><span class="std std-ref">Premiere Proや他のホストアプリケーション</span></a>の章ではAfter Effects PluginにPremire Proや他のソフトでも使えるよう互換性をもたせる場合に注意しなければいけない点などについてお話します。</p>
</div>
<hr class="docutils" />
<div class="section" id="documentation-conventions">
<h3>ドキュメント内規則<a class="headerlink" href="#documentation-conventions" title="Permalink to this headline">¶</a></h3>
<p>CやC++のコードの関数や構造名はMyStructやMyFunction();という形が取られます。</p>
<p>青いテキストはハイパーリンクです。</p>
<p>コマンドセレクタは大文字化されています。<em>PF_Cmd_RENDER</em></p>
</div>
<hr class="docutils" />
<div class="section" id="a-note-about-coding-style">
<h3>コーディングスタイルについて<a class="headerlink" href="#a-note-about-coding-style" title="Permalink to this headline">¶</a></h3>
<p>パブリックAPIを用いて私達はPlug-inを作るのですから、どうコーディングしていくかはSDKの中の形を参考にすることができます。ここでは、私達が使っているpseudo-neo-post-Hungrian natation(訳者注: 疑似ハンガリアン記法と言いたいものと思われる)について説明します。もちろん、縛られる必要はありません、好きな記法を使っていただいていいのですが。もし、あなたがコーディング規約で変更すべき点があると強く感じた際はhttp://comp.sys.programmer.better.things.to.do.with.your.timeにリクエストしてください。慎重に検討してから変更しません。（ジョークでしょう）</p>
<div class="section" id="coding-conventions">
<h4>コード規則<a class="headerlink" href="#coding-conventions" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="62%" />
<col width="14%" />
<col width="25%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Suffix</th>
<th class="head">例</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Handle</td>
<td><strong>H</strong></td>
<td><code class="docutils literal notranslate"><span class="pre">fooH</span></code></td>
</tr>
<tr class="row-odd"><td>pointer (to)</td>
<td><strong>P</strong></td>
<td><code class="docutils literal notranslate"><span class="pre">fooP</span></code></td>
</tr>
<tr class="row-even"><td>Boolean</td>
<td><strong>B</strong></td>
<td><code class="docutils literal notranslate"><span class="pre">visibleB</span></code></td>
</tr>
<tr class="row-odd"><td>Float</td>
<td><strong>F</strong></td>
<td><code class="docutils literal notranslate"><span class="pre">degreesF</span></code></td>
</tr>
<tr class="row-even"><td>Long</td>
<td><strong>L</strong></td>
<td><code class="docutils literal notranslate"><span class="pre">offsetL</span></code></td>
</tr>
<tr class="row-odd"><td>unsigned long</td>
<td><strong>Lu</strong></td>
<td><code class="docutils literal notranslate"><span class="pre">countLu</span></code></td>
</tr>
<tr class="row-even"><td>short</td>
<td><strong>S</strong></td>
<td><code class="docutils literal notranslate"><span class="pre">indexS</span></code></td>
</tr>
<tr class="row-odd"><td>char</td>
<td><strong>C</strong></td>
<td><code class="docutils literal notranslate"><span class="pre">digitC</span></code></td>
</tr>
<tr class="row-even"><td>unsigned char</td>
<td><strong>Cu</strong></td>
<td><code class="docutils literal notranslate"><span class="pre">redCu</span></code></td>
</tr>
<tr class="row-odd"><td>function pointer</td>
<td><strong>_func</strong></td>
<td><code class="docutils literal notranslate"><span class="pre">sample_func</span></code></td>
</tr>
<tr class="row-even"><td>time value</td>
<td><strong>T</strong></td>
<td><code class="docutils literal notranslate"><span class="pre">durationT</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">char*</span></code> (NULL-terminated C string)</td>
<td><strong>Z</strong></td>
<td><code class="docutils literal notranslate"><span class="pre">nameZ</span></code></td>
</tr>
<tr class="row-even"><td>rectangle</td>
<td><strong>R</strong></td>
<td><code class="docutils literal notranslate"><span class="pre">boundsR</span></code></td>
</tr>
<tr class="row-odd"><td>fixed rectangle</td>
<td><strong>FiR</strong></td>
<td><code class="docutils literal notranslate"><span class="pre">boundsFiR</span></code></td>
</tr>
<tr class="row-even"><td>float rectangle</td>
<td><strong>FR</strong></td>
<td><code class="docutils literal notranslate"><span class="pre">boundsFR</span></code></td>
</tr>
<tr class="row-odd"><td>ratio</td>
<td><strong>Rt</strong></td>
<td><code class="docutils literal notranslate"><span class="pre">scale_factorRt</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">void*</span></code></td>
<td><strong>PV</strong></td>
<td><code class="docutils literal notranslate"><span class="pre">refconPV</span></code></td>
</tr>
<tr class="row-odd"><td>optional parameter (must be passed, can be NULL)</td>
<td><strong>0</strong></td>
<td><code class="docutils literal notranslate"><span class="pre">extra_flags0</span></code></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<span id="document-history"></span><div class="section" id="version-history">
<span id="history"></span><h2>Version History<a class="headerlink" href="#version-history" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="7%" />
<col width="10%" />
<col width="82%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">改定日</th>
<th class="head">Documentor</th>
<th class="head">注釈</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>2020年<br>6月1日</td>
<td>Field Kuang</td>
<td>マルチフレームレンダリングが、AEのBetaビルドでサポートされる。<br>詳しくは<a class="reference internal" href="index.html#effect-details-multi-frame-rendering-in-ae"><span class="std std-ref">AEにおけるマルチフレームレンダリング</span></a> を参照してください。</td>
</tr>
<tr class="row-odd"><td>2018年<br>11月1日</td>
<td>Bruce Bullis</td>
<td>16.0をリリース。</td>
</tr>
<tr class="row-even"><td>2017年<br>11月10日</td>
<td>Zac Lam</td>
<td>15.0をリリース。</td>
</tr>
<tr class="row-odd"><td>2017年<br>5月12日</td>
<td>Zac Lam</td>
<td>CC 2017.1 (14.2)をリリース。</td>
</tr>
<tr class="row-even"><td>2016年<br>11月2日</td>
<td>Zac Lam</td>
<td>CC 2017 (14.0)をリリース。</td>
</tr>
<tr class="row-odd"><td>2015年<br>6月21日</td>
<td>Zac Lam</td>
<td>CC 2015 (13.5)をリリース。</td>
</tr>
<tr class="row-even"><td>2014年<br>6月12日</td>
<td>Zac Lam</td>
<td>CC 2014 (13.0)をリリース。正確性のための修正。古いバージョンの参照を削除。</td>
</tr>
<tr class="row-odd"><td>2013年<br>6月15日</td>
<td>Zac Lam</td>
<td>CC (12.0)をリリース。APIバージョンが変更されました、小さな変更ですが、詳しくは<a class="reference internal" href="index.html#aeios-aeios"><span class="std std-ref">AEIOs</span></a>で確認できます。</td>
</tr>
<tr class="row-even"><td>2012年<br>4月26日</td>
<td>Zac Lam</td>
<td>CS6 (11.0)をリリース。全面的な改定が<a class="reference internal" href="index.html#aegps-aegps"><span class="std std-ref">AEGPs</span></a>と<a class="reference internal" href="index.html#artisans-artisans"><span class="std std-ref">Artisans</span></a>に加えられています。</td>
</tr>
<tr class="row-odd"><td>2011年<br>5月2日</td>
<td>Zac Lam</td>
<td>CS5.5 (10.5)をリリース。</td>
</tr>
<tr class="row-even"><td>2010年<br>4月28日</td>
<td>Zac Lam</td>
<td>CS5 (10.0)をリリース。64bit移植。Drawbot.</td>
</tr>
<tr class="row-odd"><td>2009年<br>5月4日</td>
<td>Zac Lam</td>
<td>CS4 (9.0)をリリース。最初の3章を完全に再構成。Premiere Proのドキュメントを充実させました。</td>
</tr>
<tr class="row-even"><td>2007年<br>7月1日</td>
<td>Bruce Bullis</td>
<td>CS3 (8.0)をリリース。</td>
</tr>
<tr class="row-odd"><td>2006年<br>4月4日</td>
<td>Bruce Bullis</td>
<td>リファレンスの新しいシステム要件についてとxcodeにおける問題の修正についてを更新。その他、軽微な修正。</td>
</tr>
<tr class="row-even"><td>2005年<br>12月1日</td>
<td>Bruce Bullis</td>
<td>7.0にアップデート。SmartFXのドキュメントの追加。現状のsuiteのバージョン番号を記載しました。大幅な編集。新しいAEGP suiteの機能をドキュメント化しました。</td>
</tr>
<tr class="row-odd"><td>2004年<br>4月4日</td>
<td>Bruce Bullis</td>
<td>6.5にアップデート。ドキュメント全体の拡張と訂正。新しいAEGP suiteの機能をドキュメント化しました。</td>
</tr>
<tr class="row-even"><td>2003年<br>7月20日</td>
<td>Bruce Bullis</td>
<td>After Effects 6.0に大幅アップデート。新規のsuite(と一部古いもの)をドキュメントに追加しました。エフェクトについて追記しました。</td>
</tr>
<tr class="row-odd"><td>2002年<br>4月4日</td>
<td>Bruce Bullis</td>
<td>Mac OS Xの詳細についてアップデート、AEIOとAEGPのドキュメントを拡張しました。</td>
</tr>
<tr class="row-even"><td>2001年<br>12月1日</td>
<td>Bruce Bullis</td>
<td>5.5をリリース。新しいoutflagsについて、PiPLの変更、それとAEGP APIの追加と変更をドキュメントに追加しました。その他、多くの修正。</td>
</tr>
<tr class="row-odd"><td>2001年<br>2月2日</td>
<td>Bruce Bullis</td>
<td>5.0をリリース。ドキュメント全体の再構成と編集。16bitチャンネルのカラーとパラメーター管理のセクション、AEGPのチャプター全体を大幅に拡張しました。</td>
</tr>
<tr class="row-even"><td>1999年<br>10月9日</td>
<td>Bruce Bullis</td>
<td>4.1に改定。一般のplug-inとAEGPについての情報を追加しました。新しいセレクター並びにリサイズハンドルについての情報を追加しました。</td>
</tr>
<tr class="row-odd"><td>1999年<br>7月1日</td>
<td>Bruce Bullis</td>
<td>Version 4.0 SDK Release 1 - 新しい、global flagsについてと、カスタムデータ型、PICA suiteのユーティリティーについての情報を追加しました。CustomUI messaging and parameter supervision, new callbacks. many editorial changes.</td>
</tr>
<tr class="row-even"><td>1 May 1998</td>
<td>Bruce Bullis</td>
<td>Version 3.1 SDK Release 6 - Editorial changes only</td>
</tr>
<tr class="row-odd"><td>17 April 1997</td>
<td>Brian Andrews</td>
<td>Version 3.1 SDK Release 3 – First public release (really a pre-release) of the SDK for Windows development.</td>
</tr>
<tr class="row-even"><td>13 Nov. 1996</td>
<td>Brian Andrews</td>
<td>Version 3.1 SDK Release 2 – Minor updates.</td>
</tr>
<tr class="row-odd"><td>21 June 1996</td>
<td>Brian Andrews</td>
<td>Version 3.1 – Final 3.x release.</td>
</tr>
<tr class="row-even"><td>5 March 1996</td>
<td>Brian Andrews</td>
<td>Version 3.0 – Preliminary release for the After Effects developer kitchen.</td>
</tr>
<tr class="row-odd"><td>August 1994</td>
<td>Dave Herbstman Dan Wilk</td>
<td>Version 2.0.1 – Added support for PowerPC.</td>
</tr>
<tr class="row-even"><td>January 1994</td>
<td>Dan Wilk</td>
<td>Version 2.0 – Updates.</td>
</tr>
<tr class="row-odd"><td>January 1993</td>
<td>Russell Belfer</td>
<td>Version 1.0 – Initial SDK release.</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="toctree-wrapper compound">
<span id="document-intro/intro"></span><div class="section" id="introduction">
<span id="intro-intro"></span><h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>Welcome to the Adobe® After Effects® Software Development Kit!</p>
<p>This is a living document, and is constantly being updated and edited. The latest public version of the SDK is available at: <a class="reference external" href="https://www.adobe.io/apis/creativecloud/aftereffects.html">https://www.adobe.io/apis/creativecloud/aftereffects.html</a></p>
<p>While we’ve tried to organize this document in a logical order and provide plenty of cross references, your specific needs may vary. Searching through this document based on keywords will often lead you to your answer.</p>
<p>If you need more information, your question may already be answered on the After Effects SDK forum: <a class="reference external" href="https://community.adobe.com/t5/after-effects/bd-p/after-effects?page=1&amp;sort=latest_replies&amp;filter=all&amp;topics=label-sdk">After Effects SDK Forum</a></p>
<p>Use the search box there, and post a new question if your question hasn’t already been answered.</p>
</div>
<span id="document-intro/what-can-i-do"></span><div class="section" id="what-can-i-do-with-this-sdk">
<span id="intro-what-can-i-do"></span><h2>What Can I Do With This SDK?<a class="headerlink" href="#what-can-i-do-with-this-sdk" title="Permalink to this headline">¶</a></h2>
<p>This SDK describes the Application Programming Interface (API) that developers use to build plug-ins. These plug-ins can extend the capabilities of After Effects and other applications that support the After Effects API. Plug-ins may also be used to bridge the gap between After Effects and another application.</p>
<hr class="docutils" />
<div class="section" id="what-plug-ins-can-i-build-with-this-sdk">
<h3>What Plug-Ins Can I Build With This SDK?<a class="headerlink" href="#what-plug-ins-can-i-build-with-this-sdk" title="Permalink to this headline">¶</a></h3>
<p><em>Effect plug-ins</em> can be applied to video or audio in a composition, to process video and/or audio data. Some examples of built-in effects are Brightness and Contast, Hue/Saturation, Gaussian Blur, and Warp Stabilizer. Effect plug-ins can provide a set of parameter controls for the user to fine-tune the effect. These parameter values can vary over time, and effects may use other layers and parameters at different times to calculate the output. It’s often thought that all plug-ins are effects. But effects are just one type of plug-in used by After Effects.</p>
<p>See a quickstart video on building an effect (on macOS): <a class="reference external" href="https://adobe.ly/2sjMDwM">adobe.ly/2sjMDwM</a></p>
<p><em>After Effects General Plug-ins (AEGPs)</em> can read and modify nearly every element of After Effects projects and preferences. They can add menu items, ‘hook’ (register themselves to receive) and trigger After Effects’ internal commands, and add new panels that dock and resize within the After Effects UI. They can work with markers and keyframes, and manage the render queue. They can even run scripts. Some examples of built-in AEGPs are the AAF importer, and the SWF exporter. Automatic Duck Pro Import AE is another well-known AEGP.</p>
<p><em>After Effects Input/Output (AEIO) plug-ins</em> provide support for new media file types. Unless you need a custom setup dialog to specify interpretation settings, the <a class="reference internal" href="index.html#intro-other-integration-possibilities-premiere-pro-importers"><span class="std std-ref">Premiere Pro Importers</span></a> API provides similar functionality, and is preferable in many cases. AEIOs use the AEGP API along with certain APIs specific to AEIOs. While After Effects still supports Photoshop format plug-ins and filters, as well as Foreign Project Format (FPF) plug-ins, these APIs have been long deprecated in favor of the AEIO API.</p>
<p><em>BlitHook</em> plug-ins output video to external hardware for broadcast quality monitoring and playback to tape. The EMP sample project provides a starting point. In After Effects CC 2014 and later, <a class="reference internal" href="index.html#intro-other-integration-possibilities-mercury-transmit"><span class="std std-ref">Mercury Transmit</span></a> is the recommended API.</p>
<p><em>Artisans</em> provide rendered output of 3D layers, taking over 3D rendering from After Effects (which still handles all rendering of 2D layers). Artisans use the AEGP API along with certain APIs specific to Artisans.</p>
<p>Didn’t see the type of integration you need described above? After Effects is very flexible, and there are several other ways to integrate with After Effects. See: <a class="reference internal" href="index.html#intro-other-integration-possibilities"><span class="std std-ref">Other Integration Possibilities</span></a>.</p>
</div>
<hr class="docutils" />
<div class="section" id="where-do-plug-ins-appear-in-after-effects">
<h3>Where Do Plug-ins Appear In After Effects?<a class="headerlink" href="#where-do-plug-ins-appear-in-after-effects" title="Permalink to this headline">¶</a></h3>
<p>Effects plug-ins appear in both the <em>Effect</em> menu and the Effects &amp; Presets panel, in the effect category specified in their PiPL. Once they’re applied, the effect’s parameter controls (sliders, pop-ups, etc.) appear in the Effect Controls panel (ECP).</p>
<p>After Effects General Plug-ins (AEGPs) can add items to any After Effects menu, and additional panels listed in the Window menu. These menu items are indistinguishable from After Effects’ own menu items.</p>
<p><a class="reference internal" href="index.html#aeios-aeios"><span class="std std-ref">AEIOs</span></a> and Photoshop Format plug-ins can appear in the <em>File &gt; Import</em> menu, or in the <em>Import File</em> dialog in the <em>Files of type</em> drop-down, depending on the type of importer. AEIOs and Format plug-ins can also appear as available output formats in the render queue.</p>
<p>BlitHook plug-ins are automatically loaded and used by AE, but do not appear in any menu or dialog. The plug-in may optionally provide a menu item that opens it’s own custom settings dialog. It would register and update the menu item using the AEGP API.</p>
<p>It can registered to be called by After Effects to update the menu with <code class="docutils literal notranslate"><span class="pre">AEGP_RegisterUpdateMenuHook()</span></code>, and it can dim/activate the menu item using <code class="docutils literal notranslate"><span class="pre">AEGP_EnableCommand()</span></code>/<code class="docutils literal notranslate"><span class="pre">DisableCommand()</span></code>.</p>
<p>Artisans appear in the <em>Rendering Plug-in</em> drop-down in the <em>Advanced</em> tab of the <em>Composition Settings</em> dialog.</p>
</div>
<hr class="docutils" />
<div class="section" id="how-does-after-effects-interact-with-plug-ins">
<h3>How Does After Effects Interact With Plug-ins?<a class="headerlink" href="#how-does-after-effects-interact-with-plug-ins" title="Permalink to this headline">¶</a></h3>
<p>Plug-ins, written in C or C++, are bundle packages on macOS and DLLs on Windows. They must contain a Plug-in Property List (<a class="reference internal" href="index.html#intro-pipl-resources"><span class="std std-ref">PiPL Resources</span></a>) resource on both platforms. The plug-ins must be located in one of a few specific folders in order to be loaded and used by After Effects.</p>
<p>For effects plug-ins, After Effects sends command selectors (and relevant information) to the plug-in <a class="reference internal" href="index.html#effect-basics-entry-point"><span class="std std-ref">Entry Point</span></a> designated in the effects’ <a class="reference internal" href="index.html#intro-pipl-resources"><span class="std std-ref">PiPL Resources</span></a> resource. Selectors are sent in response to actions the user takes—applying the effect, changing parameters, scrubbing through frames in the timeline, and rendering all prompt different sequences of selectors.</p>
<p>After Effects creates multiple instances of effects, with settings and input data unique to each sequence. All instances share the same global data, and can share data between all frames within their sequence. After Effects doesn’t process all image data as soon as the user applies an effect; it invokes effects only when their output is required.</p>
<p>After Effects General Plug-ins (AEGPs) have their entry point function called during application launch, and register for whatever messaging they need at that time. Further calls to the AEGP are initiated by user actions, as part of the plug-in’s response to menu commands or UI events. Depending on their features, plug-ins may need to respond to OS-specific entry points as well, for UI work and thread management.</p>
<p>For BlitHook plug-ins, frames are pushed as they’re displayed in the Composition panel. Users can initiate a RAM preview on an area of the timeline so that it is rendered to RAM, and then it all gets played out at full speed.</p>
</div>
<hr class="docutils" />
<div class="section" id="sdk-contents">
<h3>SDK Contents<a class="headerlink" href="#sdk-contents" title="Permalink to this headline">¶</a></h3>
<p>The SDK contains headers defining the After Effects APIs, sample projects demonstrating integration features, and this SDK Guide.</p>
<p>They are compiled with the SDK header files, which expose various After Effects functionality to be used by the plug-in.</p>
</div>
</div>
<span id="document-intro/other-integration-possibilities"></span><div class="section" id="other-integration-possibilities">
<span id="intro-other-integration-possibilities"></span><h2>Other Integration Possibilities<a class="headerlink" href="#other-integration-possibilities" title="Permalink to this headline">¶</a></h2>
<p>Although this SDK describes the majority of integration possibilities with After Effects, there are other possibilities not to be overlooked.</p>
<hr class="docutils" />
<div class="section" id="scripting">
<h3>Scripting<a class="headerlink" href="#scripting" title="Permalink to this headline">¶</a></h3>
<p>Scripting is a relatively nimble and lightweight means to perform automated tasks with After Effects. ScriptUI is one way you can provide UI integration with custom dialogs and panels (see <a class="reference internal" href="#intro-other-integration-possibilities-html5"><span class="std std-ref">HTML5 Panels</span></a> too). And scripting may be used in tandem with plug-in development, in the cases where a certain function is made available via scripting and not via the C APIs described in this document.</p>
<p>Scripting in After Effects is done using ExtendScript, based on JavaScript. After Effects includes the ExtendScript ToolKit, a convenient interface for creating and testing your own scripts. Scripts may be compiled into .jsxbin binary files, to protect intellectual property.</p>
<p>You can access the After Effects Scripting Guide, and find a link to the scripting forums, on the Adobe I/O website at: <a class="reference external" href="https://www.adobe.io/apis/creativecloud/aftereffects.html">https://www.adobe.io/apis/creativecloud/aftereffects.html</a></p>
<p>After Effects can be driven by executing scripts from the commandline. In your script, you can open the project and run script actions on it. So for example, you can execute the following statement to run a script from the command line directly:</p>
<p>AfterFX -s “app.quit()”</p>
<p>Or you can execute this statement to run a .jsx script that includes a quit at the end:</p>
<p>AfterFX -r path_to_jsx_script</p>
<p>On Windows, AfterFX.com is the way to get feedback to the console, because AfterFX.com is a command line application.</p>
<hr class="docutils" />
</div>
<div class="section" id="html5-panels">
<span id="intro-other-integration-possibilities-html5"></span><h3>HTML5 Panels<a class="headerlink" href="#html5-panels" title="Permalink to this headline">¶</a></h3>
<p>In CC 2014 and later, After Effects supports HTML5 panels. They are accessed in After Effects from Window &gt; Extensions &gt; (your panel name). Panels can be resized and docked just like any other panel in After Effects. Panels are built using HTML5, After Effects Scripting, and JavaScript. You may download the After Effects Panel SDK from the the Adobe I/O website at: <a class="reference external" href="https://www.adobe.io/apis/creativecloud/aftereffects.html">https://www.adobe.io/apis/creativecloud/aftereffects.html</a></p>
</div>
<hr class="docutils" />
<div class="section" id="aerender">
<h3>AERender<a class="headerlink" href="#aerender" title="Permalink to this headline">¶</a></h3>
<p>Closely coupled with scripting is the command line interface offered by aerender. aerender is primarily suited to allow automated renders, but can be used to execute any sequence of scripting commands from the command line. An overview is available in the After Effects help documents here: <a class="reference external" href="https://helpx.adobe.com/after-effects/using/automated-rendering-network-rendering.html">https://helpx.adobe.com/after-effects/using/automated-rendering-</a> <a class="reference external" href="https://helpx.adobe.com/after-effects/using/automated-rendering-network-rendering.html">network-rendering.html</a></p>
<hr class="docutils" />
</div>
<div class="section" id="premiere-pro-importers">
<span id="intro-other-integration-possibilities-premiere-pro-importers"></span><h3>Premiere Pro Importers<a class="headerlink" href="#premiere-pro-importers" title="Permalink to this headline">¶</a></h3>
<p>Premiere Pro importers provide support for importing media into applications across most applications in the Adobe Creative Cloud, including Premiere Pro, Media Encoder, Prelude, and Audition. Because of this broader compatibility, unless you need very specific integration with After Effects only available via the AEIO API in this SDK, we recommend developing a Premiere Pro importer. The Premiere Pro SDK is available at: <a class="reference external" href="https://www.adobe.io/apis/creativecloud/premierepro.html">https://www.adobe.io/apis/</a> <a class="reference external" href="https://www.adobe.io/apis/creativecloud/premierepro.html">creativecloud/premierepro.html</a></p>
<p>One advantage of MediaCore importer plug-ins over AEIOs is its priority system: The highest priority importer gets first crack at importing a file, and if the particular imported file isn’t supported, the next-highest priority importer will then have the opportunity to try importing it, and so on.</p>
<hr class="docutils" />
</div>
<div class="section" id="mercury-transmit">
<span id="intro-other-integration-possibilities-mercury-transmit"></span><h3>Mercury Transmit<a class="headerlink" href="#mercury-transmit" title="Permalink to this headline">¶</a></h3>
<p>Mercury Transmit plug-ins are used for sending video to output hardware for broadcast-quality monitoring. Transmitters are supported across most applications in the Adobe Creative Cloud, including Premiere Pro, After Effects, Prelude, and Character Animator. The Mercury Transmit API is documented in the Premiere Pro SDK, available at: <a class="reference external" href="https://www.adobe.io/apis/creativecloud/premierepro.html">https://</a> <a class="reference external" href="https://www.adobe.io/apis/creativecloud/premierepro.html">www.adobe.io/apis/creativecloud/premierepro.html</a></p>
</div>
</div>
<span id="document-intro/sdk-audience"></span><div class="section" id="sdk-audience">
<span id="intro-sdk-audience"></span><h2>SDK Audience<a class="headerlink" href="#sdk-audience" title="Permalink to this headline">¶</a></h2>
<p>You must be a proficient C/C++ programmer to write After Effects plug-ins. While we’ll help with issues specific to the After Effects API, we can’t help you learn your IDE or basic programming concepts.</p>
<p>This SDK guide assumes you understand After Effects from a user’s perspective, and basic motion graphics terminology. If you don’t, get the <a class="reference external" href="http://www.adobepress.com/store/adobe-after-effects-cc-classroom-in-a-book-2017-release-9780134665320">Adobe After Effects Classroom in a Book</a>, or any of the other fine instructional books on the market. It will help you understand necessary</p>
<p>topics such as alpha channels, pixel aspect ratio, interlacing, color spaces, and more for After Effects.</p>
<hr class="docutils" />
<div class="section" id="development-requirements">
<h3>Development Requirements<a class="headerlink" href="#development-requirements" title="Permalink to this headline">¶</a></h3>
<p>The system requirements for After Effects are here: <a class="reference external" href="https://helpx.adobe.com/after-effects/system-requirements.html">https://helpx.adobe.com/after-effects/system-requirements.html</a></p>
<p>If you require support for obsolete versions of the application or API, use an old SDK (which we don’t maintain or provide). Six months after the current version is released, we will no longer provide or support the previous version’s SDK.</p>
<p>The SDK samples are created for Xcode 7.3 on macOS 10.11, and Microsoft Visual Studio 2015 update 3 on Windows 7 64 or Windows 10. Yes, we’re being pretty stringent about using the required IDE. No, it’s never pleasant to move to a new compiler, but no, we’re not going to continue to help with older build environments.</p>
<p>In order to use Visual Studio, you may need to adjust some installation settings to install the components for compiling 64-bit plug-ins. Visual Studio Express may be used, but will also require an additional installation to compile 64-bit plug-ins, as described here: <a class="reference external" href="http://msdn.microsoft.com/en-us/library/9yb4317s.aspx">http://msdn.microsoft.com/en-us/library/9yb4317s.aspx</a></p>
<p>To compile using newer versions of Xcode on newer versions of macOS, often all that is required is to update the Base SDK in the Build Settings.</p>
</div>
</div>
<span id="document-intro/whats-new"></span><div class="section" id="what-s-new">
<span id="intro-whats-new"></span><h2>What’s New<a class="headerlink" href="#what-s-new" title="Permalink to this headline">¶</a></h2>
<p>If this is your first time developing an After Effects plug-in, you can skip the What’s New section and go directly to <a class="reference internal" href="index.html#intro-how-to-start-creating-plug-ins"><span class="std std-ref">How To Start Creating Plug-ins</span></a>.</p>
<hr class="docutils" />
<div class="section" id="what-s-new-in-after-effects-beta-builds-after-june-2020">
<h3>What’s New In After Effects Beta builds after June 2020<a class="headerlink" href="#what-s-new-in-after-effects-beta-builds-after-june-2020" title="Permalink to this headline">¶</a></h3>
<p>AE (currently only in Beta builds) now supports Multi-Frame rendering. See <a class="reference internal" href="index.html#effect-details-multi-frame-rendering-in-ae"><span class="std std-ref">Multi-Frame Rendering in AE</span></a> for more details.</p>
</div>
<hr class="docutils" />
<div class="section" id="what-s-new-in-cc-2019-16-0">
<h3>What’s New In CC 2019 (16.0)?<a class="headerlink" href="#what-s-new-in-cc-2019-16-0" title="Permalink to this headline">¶</a></h3>
<p>We’ve made some changes to how GPU effects are handled. See “GPU Effects Changes” for details.</p>
</div>
<hr class="docutils" />
<div class="section" id="what-s-new-in-15-0">
<h3>What’s New In 15.0?<a class="headerlink" href="#what-s-new-in-15-0" title="Permalink to this headline">¶</a></h3>
<p>After Effects now supports the <em>GPU effect rendering</em> previously supported in Premiere Pro. Note that unknown effects with a match name that includes “ADBE ” will be excluded from GPU rendering, so make sure any of your GPU effects have your own custom match name. Effects that support GPU rendering will receive the GPU badge in the Effect panel.</p>
<p>The GPU effect sample projects in the Premiere Pro SDK have been updated to register as GPU effects in AE, although the render output still needs work.</p>
<p>A new entry point has been defined, to allow effects to register basic information with the host at runtime, without relying on legacy PiPL resources. An effect can register multiple entry points in a single binary this way. Premiere Pro is the first host to support this entry point, and After Effects will support this in a future release.</p>
<p>The effect sample projects have been updated to use this approach, while maintaining the PiPL for backwards compatibility.</p>
<p><code class="docutils literal notranslate"><span class="pre">AEGP_StreamSuite</span></code> is now at version 5, where <a class="reference internal" href="index.html#aegps-aegp-suites-aegp-streamsuite"><span class="std std-ref">AEGP_GetExpression()</span></a> and <a class="reference internal" href="index.html#aegps-aegp-suites-aegp-streamsuite"><span class="std std-ref">AEGP_SetExpression()</span></a> have been upgraded to support Unicode.</p>
<p><code class="docutils literal notranslate"><span class="pre">PF_AdvTimeSuite</span></code> is now at version 4, with a new call <a class="reference internal" href="index.html#effect-details-useful-utility-functions-pf-advtimesuite"><span class="std std-ref">PF_TimeCountFrames()</span></a>, that returns the index of the frame in the current comp.</p>
<p>The new AEGP Math Suite provides helpful calls for matrix multiplication.</p>
<p>The application font is now Adobe Clean. Previously, the fonts used in After Effects’ UI were Tahoma on Windows and Lucida Grande on macOS X. This is a proprietary font, and we can not make it available for use in your UI.</p>
</div>
<hr class="docutils" />
<div class="section" id="what-s-new-in-cc-2017-1-14-2">
<h3>What’s New In CC 2017.1 (14.2)?<a class="headerlink" href="#what-s-new-in-cc-2017-1-14-2" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Layer Params can include Masks and Effects</li>
</ul>
<p>Effects that use layers as an input, such as Set Matte and Displacement Map, can now target the input layer’s masks and effects, instead of only the source of the layer. This means that for there is no need to pre-compose layers just so that they can be referenced by an effect.</p>
<p>Where an effect includes a layer parameter, a new menu to the right of the layer selector allows you to choose whether to target the input layer from its source, masks, or effects:</p>
<ul class="simple">
<li>Source: targets only the source of the layer. Masks and effects are ignored.</li>
<li>Masks: targets the layer after its masks are applied. Effects are ignored.</li>
<li>Effects &amp; Masks: targets the layer after its masks and effects are applied.</li>
</ul>
<p>This control is similar to the View menu at the bottom of the Layer viewer panel, which allows you to render the layer from different positions in the rendering order: from its source, from its masks, or from its individual effects.</p>
<p>As this is a user-facing option, the design is intended to be transparent to the effect. From the effect’s perspective, the input simply just includes the upstream effects and masks without any change to the effect. For any effect that uses layer params, here are some testing recommendations:</p>
<ul class="simple">
<li>Effect continues to work as expected.</li>
<li>Using new control in the layer param for Source/Mask/Effects works with effect.</li>
<li>Opening old projects or saving back to a previous version project does not break effect.</li>
<li>Confirm that effect cannot self-reference; meaning cannot use the effects on the layer as input for the same layer.</li>
<li>Suite Enhancements</li>
</ul>
<p>PF_AdvTimeSuite is now at version 3, providing a revised <a class="reference internal" href="index.html#effect-details-useful-utility-functions-pf-advtimesuite"><span class="std std-ref">PF_GetTimeDisplayPref()</span></a> call that uses a revised <code class="docutils literal notranslate"><span class="pre">PF_TimeDisplayPrefVersion</span></code> parameter, that supports higher frame rates.
The previous version 2 of the call can now return an error if there is a problem with the values exceeding the range supported by the structure.</p>
<p>Comp Suite is now at version 11, with a new call, <a class="reference internal" href="index.html#aegps-aegp-suites-aegp-compsuite"><span class="std std-ref">AEGP_ReorderCompSelection()</span></a>, to move a selection to a certain layer index.
It should be used along with <code class="docutils literal notranslate"><span class="pre">AEGP_SetSelection()</span></code>.</p>
</div>
<hr class="docutils" />
<div class="section" id="what-s-new-in-cc-2017-14-1">
<h3>What’s New In CC 2017 (14.1)?<a class="headerlink" href="#what-s-new-in-cc-2017-14-1" title="Permalink to this headline">¶</a></h3>
<p>Unicode support for <a class="reference internal" href="index.html#aegps-aegp-suites-item-suite"><span class="std std-ref">AEGP Item Suite</span></a> and <a class="reference internal" href="index.html#aegps-aegp-suites-render-queue-item-suite"><span class="std std-ref">AEGP Render Queue Item Suite</span></a>.</p>
</div>
<hr class="docutils" />
<div class="section" id="what-s-new-in-cc-2017-14-0">
<h3>What’s New In CC 2017 (14.0)?<a class="headerlink" href="#what-s-new-in-cc-2017-14-0" title="Permalink to this headline">¶</a></h3>
<p>The GLator sample is back! It has been updated to demonstrate proper OpenGL context management in an effect plug-in.</p>
</div>
<hr class="docutils" />
<div class="section" id="what-s-new-in-cc-2015-3-13-8">
<h3>What’s New In CC 2015.3 (13.8)?<a class="headerlink" href="#what-s-new-in-cc-2015-3-13-8" title="Permalink to this headline">¶</a></h3>
<p>PF_OutFlag_I_AM_OBSOLETE is now supported in Premiere Pro. Also, effect custom UI in Premiere Pro now supports high DPI displays, such as Retina Displays.</p>
</div>
<hr class="docutils" />
<div class="section" id="what-s-new-in-cc-2015-13-6">
<h3>What’s New In CC 2015 (13.6)?<a class="headerlink" href="#what-s-new-in-cc-2015-13-6" title="Permalink to this headline">¶</a></h3>
<p>New AEGP Item View Suite. This provides a way to get playback time for item view. Only the composition case is implemented in this release. The time passed back should be the playback time of the view when playing and the current (needle) time otherwise.</p>
<p>AEGP_RenderNewItemSoundData() has been reworked and provides functionality similar to 13.2.</p>
</div>
<hr class="docutils" />
<div class="section" id="what-s-new-in-cc-2015-13-5-1">
<h3>What’s New In CC 2015 (13.5.1)?<a class="headerlink" href="#what-s-new-in-cc-2015-13-5-1" title="Permalink to this headline">¶</a></h3>
<p>This release fixes some audio APIs that broke in 13.5 due to threading changes. In 13.5, when called on the UI thread, AEGP_RenderNewItemSoundData() would return A_Err_GENERIC. This restores the functionality when called on the UI thread.</p>
<p>To avoid a deadlock, in PF_Cmd_UPDATE_PARAMS_UI only, AEGP_RenderNewItemSoundData() will now return silence. This will no longer function as before in this context, but it will continue to work properly elsewhere.</p>
</div>
<hr class="docutils" />
<div class="section" id="what-s-new-in-cc-2015-13-5">
<h3>What’s New In CC 2015 (13.5)?<a class="headerlink" href="#what-s-new-in-cc-2015-13-5" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Separate UI and Render Threads</li>
</ul>
<p>This release of After Effects includes major architectural changes to separate the UI (main) thread from the render thread. The render thread sends selectors such as PF_Cmd_RENDER, PF_Cmd_SMART_PRERENDER, and PF_Cmd_SMART_RENDER to effect plug-ins. The UI thread sends selectors such as PF_Cmd_SEQUENCE_SETUP, PF_Cmd_USER_CHANGED_PARAM, PF_Cmd_DO_DIALOG, and PF_EVENT_DRAW. PF_Cmd_SEQUENCE_RESETUP is</p>
<p>sent on both render and UI threads.</p>
<p>These changes are to improve interactive performance and responsiveness. At the same time, the new design introduces some new requirements and may break assumptions that existing plug-ins relied on. Here are some of the major changes:</p>
<ol class="arabic simple">
<li>The project can no longer be modified by the render thread (and in fact the render thread now has its own local copy of the project)</li>
<li>Rendering cannot pass modified sequence data back to the UI thread for custom UI updates</li>
<li>In general the UI thread should no longer do time-consuming operations such as synchronously rendering frames</li>
</ol>
<p>Is your plug-in affected? Test for these problems:</p>
<ol class="arabic simple">
<li>Render not updating after UI parameter change because it depends on sequence_data, which may not be currently copied to render</li>
<li>Render not updating during click/drag in the Composition Window (similar reasons)</li>
<li>Custom Effect UI not updating because it depends on sequence_data generated in render (which is no longer available to the UI because it is in a different project, the render project is immutable, and cache contains previously-rendered frames)</li>
<li>Errors telling you an operation on the render thread (or UI thread) is not expected</li>
</ol>
<p>Generally, calculations that will persist or update the UI will now have to be pulled from the UI thread rather than pushed from the render thread. These cases can require use of new</p>
<p>13.5 APIs or different solutions than in past releases.</p>
<ul class="simple">
<li>The Need For More Efficient Sequence Data Handling</li>
</ul>
<p>PF_OutFlag2_SUPPORTS_GET_FLATTENED_SEQUENCE_DATA</p>
<p>PF_Cmd_GET_FLATTENED_SEQUENCE_DATA</p>
<p>Up to version 13.2, serializing/flattening sequence_data always involved deallocating and reallocating any data structures. Starting in 13.5, as effect changes are made, serializing/ flattening happens even more often. Why? AE needs to serialize/flatten project changes to send from the UI thread to the render thread, to keep them both synchronized.</p>
<p>To make this process more efficient, starting in 13.5, AE can send PF_Cmd_GET_FLATTENED_SEQUENCE_DATA to request sequence data without requiring the existing data to be deallocated and reallocated. The main difference between this selector and PF_Cmd_SEQUENCE_FLATTEN is that a copy of the correct flattened state is returned without disposing the original structure(s) the effect is currently using. For a code example, refer to the PathMaster sample project.</p>
<p>This will eventually become required for plug-ins that are rebuilt to be thread-safe (see PF_OutFlag2_AE13_5_THREADSAFE below). The venerable PF_Cmd_SEQUENCE_FLATTEN will eventually be unsupported in future versions.</p>
<ul class="simple">
<li>PF_OutFlag_FORCE_RERENDER Changes</li>
</ul>
<p>Where possible, we recommend triggering rerenders using one of the following: GuidMixInPtr() (described in the next section), arb data, or PF_ChangeFlag_CHANGED_VALUE. All of these allow cached frames to be reused after an Undo.</p>
<p>Note: As of 14.0, setting PF_ChangeFlag_CHANGED_VALUE for layer or path params is not triggering a rerender. Instead, you may change set the value using AEGP_StreamSuite-</p>
<p>&gt;AEGP_SetStreamValue().</p>
<p>FORCE_RERENDER is still needed for situations where sequence_data needs to be copied from the UI thread to the render project/effect clone to keep them matched.</p>
<p>FORCE_RERENDER is the trigger for this whether the render request uses the cache or not. Once we have the full set of APIs in place needed to manage render state, we will be able to deprecate FORCE_RERENDER.</p>
<p>FORCE_RERENDER doesn’t work in every situation it did before, because it needs to synchronize the UI copy of sequence_data with the render thread copy.</p>
<p>FORCE_RERENDER works when set during PF_Cmd_USER_CHANGED_PARAM. It also works in CLICK and DRAG events, but only if PF_Cmd_GET_FLATTENED_SEQUENCE_DATA is implemented. This is required to prevent flattening and loss of UI state in the middle of mouse operations. Without GET_FLATTENED, the new FORCE_RERENDER behavior will NOT be turned on.</p>
<ul class="simple">
<li>GUIDs for Cached Frames</li>
</ul>
<p>PF_OutFlag2_I_MIX_GUID_DEPENDENCIES</p>
<p>GuidMixInPtr()</p>
<p>Used by SmartFX only. Use this if custom UI or PF_Cmd_DO_DIALOG changes sequence data, or if the render result depends on anything else not factored in, and rerendering may be needed. During PF_Cmd_SMART_PRERENDER, the effect can call GuidMixInPtr() to mix any additional state that affects the render into our internal GUID for the cached frame. Using this GUID, AE can tell whether the frame already exists or if it needs to be rendered. See an example in SmartyPants sample project.</p>
<p>This is an improvement over the older mechanisms PF_OutFlag_FORCE_RERENDER and PF_Cmd_DO_DIALOG, which would remove the frame from the cache because the host didn’t know what else the plug-in was factoring into the rendering. This can also be used rather than PF_OutFlag2_OUTPUT_IS_WATERMARKED.</p>
<ul class="simple">
<li>Request Frames Asynchronously Without Blocking the UI</li>
</ul>
<p>PF_OutFlag2_CUSTOM_UI_ASYNC_MANAGER</p>
<p>PF_GetContextAsyncManager() AEGP_CheckoutOrRender_ItemFrame_AsyncManager() AEGP_CheckoutOrRender_LayerFrame_AsyncManager()</p>
<p>For cases where such renders formerly were triggered by side-effect or cancelled implicity</p>
<p>(such as custom UI histogram drawing), and lifetime is less clear from inside the plug-in, use the new “Async Manager” which can handle multiple simultaneous async requests for effect Custom UI and will automatically support interactions with other AE UI behavior.</p>
<p>Note: Async retrieval of frames is preferred for handling passive drawing situations, but not when a user action will update the project state. If you are (1) responding to a specific user click, AND 2) you need to update the project as a result, the synchronous AEGP_RenderAndCheckoutLayerFrame() is recommended.</p>
<p>The new HistoGrid sample in the SDK shows how to do completely asynchronous custom UI DRAW event handling on the UI thread when 1 or more frame renders are needed. e.g. for calculating histograms that are shown in the effect pane. Please note there is still a known bug where drag-changing an upstream param may not refresh the histogram draw until the mouse hovers over it.</p>
<ul class="simple">
<li>Get Rendered Output of an Effect from its UI</li>
</ul>
<p>Effects such as keyers or those that draw histograms of post-processed video can retrieve the needed AEGP_LayerRenderOptionsH using the new function AEGP_NewFromDownstreamOfEffect() in AEGP_LayerRenderOptionsSuite. This function may only be called from the UI thread.</p>
<ul class="simple">
<li>AEGP Usage on Render Thread</li>
</ul>
<p>We’ve tightened validation of when AEGP calls could be used dangerously (such as from the wrong thread or making a change to the project state in render). You may see new errors if code is hitting such cases. For example, making these calls on the render thread will result in an error:</p>
<p>suites.UtilitySuite5()-&gt;AEGP_StartUndoGroup() suites.StreamSuite2()-&gt;AEGP_GetStreamName() suites.StreamSuite2()-&gt;AEGP_SetExpressionState() suites.StreamSuite2()-&gt;AEGP_SetExpression() suites.StreamSuite2()-&gt;AEGP_GetNewLayerStream() suites.StreamSuite2()-&gt;AEGP_DisposeStream() suites.EffectSuite3()-&gt;AEGP_DisposeEffect() suites.UtilitySuite5()-&gt;AEGP_EndUndoGroup()</p>
<p>The solution is to move these calls to the UI thread. Selectors for passive UI updates (such as PF_EVENT_DRAW) are not a place to make changes to project state.</p>
<p>Another example of more strict requirements is AEGP_RegisterWithAEGP(). The documentation has always noted that this function must be called on PF_Cmd_GLOBAL_SETUP. However in previous versions, plug-ins were able to call this function at other times without running into trouble. Not anymore in 13.5! Calling this function at other times can cause crashes!</p>
<ul class="simple">
<li>PF_Cmd_SEQUENCE_RESETUP Called on UI or Render Thread?</li>
</ul>
<p>There is now a PF_InFlag_PROJECT_IS_RENDER_ONLY flag that is only valid in PF_Cmd_SEQUENCE_RESETUP that will tell you if the effect instance is for render-only purposes. If so, the project should be treated as completely read-only, and you will not be receiving UI related selectors on that effect instance. This can be used to optimize away any UI-only initialization that render does not need. If this flag is false, you should setup UI as normal. This should not be used to avoid reporting errors in render. Errors in render should be reported as usual via existing SDK mechanisms.</p>
<ul class="simple">
<li>Changes to Avoid Deadlocks</li>
</ul>
<p>During development, it was noticed that deadlocks could occur in specific call usage. Seatbelts have been introduced to avoid this. The cases occur in PF_Cmd_UPDATE_PARAMS_UI when using particular calls because of deprecated synchronous behavior in these calls when used in the UI:</p>
<p>In PF_Cmd_UPDATE_PARAMS_UI only, PF_PARAM_CHECKOUT() for layer parameters will behave as before except that it will return a black frame of the same size, etc., rather than actual rendered pixels. Code that used this for enable/disable detection of parameters should still work as before. Code that used this for getting analysis frames, etc. outside of PF_Cmd_UPDATE_PARAMS_UI will work as before.</p>
<p>In PF_Cmd_UPDATE_PARAMS_UI only, PF_GetCurrentState() will now return a random GUID. This will no longer function as before in this context, but it will continue to work properly elsewhere.</p>
<p>The above uses should be rare, but if this affects you please contact us about workarounds.</p>
<ul class="simple">
<li>Deprecated</li>
</ul>
<p>AEGP_RenderAndCheckoutFrame() (on the UI Thread). This call should generally not be used on the UI thread since synchronous renders block interactivity.</p>
<p>Use in the render thread is fine. The one case where this may still be useful on the UI thread is a case like a UI button that requires a frame to calculate a parameter which then updates the AE project.</p>
<p>For example, an “Auto Color” button that takes a frame and then adjusts effect params as a result.</p>
<p>A beta of a progress dialog for this blocking operation if it is slow has been implemented, but using this call on the UI thread should be limited to this special cases. The dialog design is not final.</p>
<ul class="simple">
<li>Flag for Thread-Safe Effects</li>
</ul>
<p>PF_OutFlag2_AE13_5_THREADSAFE</p>
<p>Plug-ins updated for threading should use this flag to tell AE that the plug-in is expected to be UI thread &lt;&gt; Render thread safe.</p>
<p>This flag tells AE that different threads on different AE project copies can be in the effect at the same time but not accessing the same instance. While multiple render threads are not yet in use, this will be useful in future releases.</p>
<ul class="simple">
<li>Support for Effect Version greater than 7 (new max is MAJOR version 127)</li>
</ul>
<p>Effects greater than version 7 will now report properly in 13.5 if built with the current SDK headers. It is possible to use these recompiled effects in AE versions older than 13.5, but internally the version number will wrap modulo 8 (e.g. AE will internally see effect version 8 as version 0).</p>
<p>This can affect the version shown in error dialog display by older AE and affect usage reporting.</p>
<p>Since many older plug-ins were made unloadable in AE with the shift to 64-bit, it should be unlikely this wrapping would cause ambiguity with actual plug-ins in current use (unless these plug-ins have been rapidly increasing version number over the last few years).</p>
<p>However, building with an older SDK and using an 8 or higher version will result in the plug-in reporting an incorrect version to AE, which will then cause mismatch with the PiPL version check for the effect which will have the higher bits set. This is not supported.</p>
<p>If built with an older SDK, you will need to keep the effect version at 7 or below. Increase in version max has been accomplished by adding 4 new higher significant bits to the version that only AE 13.5 and above “sees”. These new high version bits are not contiguous with the original, preexisting MAJOR version bits – just ignore the intermediate bits. The new version layout looks like this in hexadecimal or binary.</p>
<p>0x 3C38 0000</p>
<p>^^ original MAJOR version bits as a hex mask 0-7</p>
<p>^^ new HIGH bits extending the original MAJOR version bits 8-127</p>
<p>0b 0011 1100 0011 1000 0000 0000 0000 0000</p>
<p>^^ ^ original MAJOR version bits as a hex mask 0-7</p>
<p>^^ ^^ ignore / do not use</p>
<p>^^ ^^ new HIGH bits extend the original MAJOR version bits 8-127.</p>
<p>These bits are ignored in AE versions older than 13.5.</p>
<ul class="simple">
<li>New Installer Hints for macOS</li>
</ul>
<p>Developers can find paths to the default location of plug-ins, scripts, and presets on macOS X in a new plist file (same as the paths in the Windows registry): /Library/Preferences/ com.Adobe.After Effects.paths.plist</p>
<p>You can use the values in this plist to direct where your installers or scripts write files, in the same way that you would use the paths keys in the registry on Windows: HKEY_LOCAL_MACHINESOFTWAREAdobeAfter Effects13.5</p>
<ul class="simple">
<li>Work In Progress</li>
</ul>
<p>AEGP_RenderAndCheckoutLayerFrame_Async() AEGP_CancelAsyncRequest()</p>
<p>This APIs are in progress, and should not be used yet.</p>
</div>
<hr class="docutils" />
<div class="section" id="what-s-new-in-cc-2014-1-13-1">
<h3>What’s New In CC 2014.1 (13.1)?<a class="headerlink" href="#what-s-new-in-cc-2014-1-13-1" title="Permalink to this headline">¶</a></h3>
<p>PF_CreateNewAppProgressDialog()</p>
<p>It won’t open the dialog unless it detects a slow render. (2 seconds timeout).</p>
</div>
<hr class="docutils" />
<div class="section" id="what-s-new-in-cc-2014-13-0">
<h3>What’s New In CC 2014 (13.0)?<a class="headerlink" href="#what-s-new-in-cc-2014-13-0" title="Permalink to this headline">¶</a></h3>
<p>Starting in CC 2014, After Effects will now honor a change to a custom UI height made using <a class="reference internal" href="index.html#effect-detals-parameter-supervision-pf-paramutilsuite"><span class="std std-ref">PF_UpdateParamUI</span></a>.</p>
<p><a class="reference internal" href="index.html#aegps-aegp-suites-effect-suite"><span class="std std-ref">AEGP Effect Suite</span></a> is now at version 4, adding new functions to work with effect masks. <a class="reference internal" href="index.html#aegps-aegp-suites-aegp-rendersuite"><span class="std std-ref">AEGP_RenderSuite</span></a> is now at version 4, adding a new function <code class="docutils literal notranslate"><span class="pre">AEGP_RenderAndCheckoutLayerFrame</span></code>, which allows frame checkout of the current</p>
<p>layer with effects applied at non-render time. This is useful for an operation that requires the frame, for example, when a button is clicked and it is acceptable to wait for a moment while it is rendering.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Since it is not asynchronous, it will not solve the general problem where custom UI needs to draw based on the frame.</p>
</div>
<p>The layer render options are specified using the new <a class="reference internal" href="index.html#aegps-aegp-suites-aegp-layerrenderoptionssuite"><span class="std std-ref">AEGP_LayerRenderOptionsSuite</span></a>.</p>
<p><a class="reference internal" href="index.html#intro-other-integration-possibilities-mercury-transmit"><span class="std std-ref">Mercury Transmit</span></a> plug-ins and <a class="reference internal" href="index.html#intro-other-integration-possibilities-html5"><span class="std std-ref">HTML5 Panels</span></a> are now supported.</p>
</div>
<hr class="docutils" />
<div class="section" id="what-s-new-in-cc-12-0">
<h3>What’s New In CC (12.0)?<a class="headerlink" href="#what-s-new-in-cc-12-0" title="Permalink to this headline">¶</a></h3>
<p>Effect names can now be up to 47 characters long, up from 31 characters previously.</p>
<p>We added the <a class="reference internal" href="index.html#effect-details-parameters-floating-point-values-pf-angleparamsuite"><span class="std std-ref">PF_AngleParamSuite</span></a>, providing a way to get floating point values for angle parameters. <a class="reference internal" href="index.html#effect-details-useful-utility-functions"><span class="std std-ref">PF App Suite</span></a> version 5 adds <code class="docutils literal notranslate"><span class="pre">PF_AppGetLanguage</span></code> to query the current language so that a plug-in can use the correct language string, as well as several new PF_App_ColorType enum values for new elements whose colors can be queried.</p>
<p><a class="reference internal" href="index.html#aegps-aegp-suites-persistent-data-suite"><span class="std std-ref">AEGP Persistent Data Suite</span></a> is now at version 4, adding a new parameter to AEGP_GetApplicationBlob to choose between retrieving several different application blobs. There are also new functions to get/set time and ARGB values.</p>
<p><a class="reference internal" href="index.html#aegps-aegp-suites-composition-suite"><span class="std std-ref">AEGP Composition Suite</span></a> is now at version 10, adding new functions to check/modify whether layer names or source names are shown, and whether the blend modes column is shown or not. Also added are new functions to get and set the Motion Blur Adaptive Sample Limit.</p>
<p><a class="reference internal" href="index.html#aegps-aegp-suites-layer-suite"><span class="std std-ref">AEGP Layer Suite</span></a> is now at version 8, adding new functions to set/get the layer sampling quality. <a class="reference internal" href="index.html#artisans-artisan-data-types-aegp-canvassuite"><span class="std std-ref">AEGP_CanvasSuite</span></a> is also now at version 8. The new function <code class="docutils literal notranslate"><span class="pre">AEGP_MapCompToLayerTime</span></code> handles time remapping with collapsed or nested comps, unlike AEGP_ConvertCompToLayerTime.</p>
<p><a class="reference internal" href="index.html#aegps-aegp-suites-aegp-utilitysuite"><span class="std std-ref">AEGP_UtilitySuite</span></a> is now at version 6, adding a new Unicode-aware function: <code class="docutils literal notranslate"><span class="pre">AEGP_ReportInfoUnicode</span></code>. Another new function, <code class="docutils literal notranslate"><span class="pre">AEGP_GetPluginPaths</span></code>, provides some useful paths related to the plug-in and the After Effects executable itself.</p>
<p>The behavior for <code class="docutils literal notranslate"><span class="pre">AEGP_NewPlaceholderFootageWithPath</span></code> has been updated, so that the file_type should now be properly set, otherwise a warning will appear.</p>
<p><code class="docutils literal notranslate"><span class="pre">AEGP_InsertMenuCommand</span></code> can now insert menu items in the File&gt;New submenu.</p>
<p><a class="reference internal" href="index.html#aeios-new-kids-on-the-function-block-aegp-ioinsuite"><span class="std std-ref">AEGP_IOInSuite</span></a> is now at version 5, adding new functions to get/set/clear the native start time, and to get/set the drop-frame setting of footage.</p>
</div>
<hr class="docutils" />
<div class="section" id="what-s-new-in-cs6-0-1-11-0-1">
<h3>What’s New In CS6.0.1 (11.0.1)?<a class="headerlink" href="#what-s-new-in-cs6-0-1-11-0-1" title="Permalink to this headline">¶</a></h3>
<p>New in 11.0.1, the AE effect API version has been incremented to 13.3.</p>
<p>This allows effects to distinguish between 11.0 and 11.0.1.</p>
<p>There is a bug in 11.0 with the Global Performance Cache, when a SmartFX effect uses both <code class="docutils literal notranslate"><span class="pre">PF_OutFlag2_AUTOMATIC_WIDE_TIME_INPUT</span></code> &amp; <code class="docutils literal notranslate"><span class="pre">PF_OutFlag_NON_PARAM_VARY</span></code>.</p>
<p>Calling <code class="docutils literal notranslate"><span class="pre">checkout_layer</span></code> during <code class="docutils literal notranslate"><span class="pre">PF_Cmd_SMART_PRE_RENDER</span></code> returns empty rects in <code class="docutils literal notranslate"><span class="pre">PF_CheckoutResult</span></code>.</p>
<p>The workaround is to simply make the call again. This workaround is no longer needed in 11.0.1.</p>
</div>
<hr class="docutils" />
<div class="section" id="what-s-new-in-cs6-11-0">
<h3>What’s New In CS6 (11.0)?<a class="headerlink" href="#what-s-new-in-cs6-11-0" title="Permalink to this headline">¶</a></h3>
<p>We’ve made several refinements for better parameter UI handling. <code class="docutils literal notranslate"><span class="pre">PF_PUI_INVISIBLE</span></code> parameter UI flag is now supported in After Effects, which is useful if your plug-in needs hidden parameters that affect rendering. Now when a plug-in disables a parameter using <a class="reference internal" href="index.html#effect-detals-parameter-supervision-pf-paramutilsuite"><span class="std std-ref">PF_UpdateParamUI</span></a>, we now save that state in the UI flags so that the plug-in can check the flag in the future to see if it is disabled. A new flag, <code class="docutils literal notranslate"><span class="pre">PF_ParamFlag_SKIP_REVEAL_WHEN_UNHIDDEN</span></code>, allows a parameter to be unhidden without twirling open any parents and without scrolling the parameter into view in the Effect Controls panel and the Timeline panel.</p>
<p>Effects that render a watermark over the output when the plug-in is in trial mode can now tell After Effects whether watermark rendering mode is on or off, using the new <code class="docutils literal notranslate"><span class="pre">PF_OutFlag2_OUTPUT_IS_WATERMARKED</span></code>.</p>
<p>The new Global Performance Cache means you must tell After Effects to discard old cached frames <a class="reference internal" href="index.html#effect-details-tips-tricks-caching-behavior"><span class="std std-ref">when changing your effect’s rendering</span></a>.</p>
<p>We’ve removed <code class="docutils literal notranslate"><span class="pre">PF_HasParamChanged</span></code> and <code class="docutils literal notranslate"><span class="pre">PF_HaveInputsChangedOverTimeSpan</span></code>, providing <a class="reference internal" href="index.html#effect-detals-parameter-supervision-pf-paramutilsuite"><span class="std std-ref">PF_AreStatesIdentical</span></a> instead.</p>
<p>Effects that provide custom UI can now receive <code class="docutils literal notranslate"><span class="pre">PF_Event_MOUSE_EXITED</span></code>, to gain notification that the mouse exited the layer or comp panel. <code class="docutils literal notranslate"><span class="pre">PF_ParamUtilsSuite</span></code> is now at version 3.</p>
<p><code class="docutils literal notranslate"><span class="pre">PF_GET_PLATFORM_DATA</span></code> now has new selectors for getting the wide character path of the executable and resource file: <code class="docutils literal notranslate"><span class="pre">PF_PlatData_EXE_FILE_PATH_W</span></code> and <code class="docutils literal notranslate"><span class="pre">PF_PlatData_RES_FILE_PATH_W</span></code>. The previous non-wide selectors are now deprecated.</p>
<p>3D is a major theme of AE CS6. A new <code class="docutils literal notranslate"><span class="pre">AEGP_LayerFlag_ENVIRONMENT_LAYER</span></code> has been added. Many new <a class="reference internal" href="index.html#aegps-aegp-suites-stream-suite"><span class="std std-ref">layer streams</span></a> were added.</p>
<p>Additionally, <code class="docutils literal notranslate"><span class="pre">AEGP_LayerStream_SPECULAR_COEFF</span></code> was renamed to <code class="docutils literal notranslate"><span class="pre">AEGP_LayerStream_SPECULAR_INTENSITY</span></code>, <code class="docutils literal notranslate"><span class="pre">AEGP_LayerStream_SHININESS_COEFF</span></code> was renamed to <code class="docutils literal notranslate"><span class="pre">AEGP_LayerStream_SPECULAR_SHININESS</span></code>, and <code class="docutils literal notranslate"><span class="pre">AEGP_LayerStream_METAL_COEFF</span></code> was renamed to just <code class="docutils literal notranslate"><span class="pre">AEGP_LayerStream_METAL</span></code>.</p>
<p>A new suite, <a class="reference internal" href="index.html#aegps-aegp-suites-render-queue-monitor-suite"><span class="std std-ref">AEGP_RenderQueueMonitorSuite</span></a>, provides all the info a render queue manager needs to figure out what is happening at any point in a render.</p>
<p><a class="reference internal" href="index.html#aegps-aegp-suites-mask-suite"><span class="std std-ref">AEGP Mask Suite</span></a> is now at version 6, and provides functions to get and set the mask feather falloff type. <a class="reference internal" href="index.html#aegps-aegp-suites-mask-outline-suite"><span class="std std-ref">AEGP Mask Outline Suite</span></a> is now at version 3, and provides access to get and set mask outline feather information.</p>
<p>Effects that depend on masks now have a new flag available, <code class="docutils literal notranslate"><span class="pre">PF_OutFlag2_DEPENDS_ON_UNREFERENCED_MASKS</span></code>.</p>
<p><a class="reference internal" href="index.html#aegps-aegp-suites-composition-suite"><span class="std std-ref">AEGP Composition Suite</span></a> is now at version 9. AEGP_CreateTextLayerInComp and</p>
<p>AEGP_CreateBoxTextLayerInComp now have a new parameter, select_new_layerB.</p>
<p><a class="reference internal" href="index.html#aegps-aegp-suites-render-suite"><span class="std std-ref">AEGP Render Suite</span></a> is now at version 3, adding a new function to get the GUID for a render receipt.</p>
<p>Finally, we have added two new read-only <a class="reference internal" href="index.html#aegps-aegp-suites-dynamic-stream-suite"><span class="std std-ref">Dynamic Stream</span></a> flags: <code class="docutils literal notranslate"><span class="pre">AEGP_DynStreamFlag_SHOWN_WHEN_EMPTY</span></code> and <code class="docutils literal notranslate"><span class="pre">AEGP_DynStreamFlag_SKIP_REVEAL_WHEN_UNHIDDEN</span></code>.</p>
<p>For effects running in Premiere Pro CS6, we have added the ability to get 32-bit float and YUV frames from <code class="docutils literal notranslate"><span class="pre">PF_CHECKOUT_PARAM</span></code>.</p>
</div>
<hr class="docutils" />
<div class="section" id="and-what-was-new-before-cs6">
<h3>…and what was new before CS6?<a class="headerlink" href="#and-what-was-new-before-cs6" title="Permalink to this headline">¶</a></h3>
<p>For history this far back, see obsolete copies of the SDK (which we don’t provide; if someone wants you do develop for antique software, they’d best provide the SDK).</p>
</div>
</div>
<span id="document-intro/how-to-start-creating-plug-ins"></span><div class="section" id="how-to-start-creating-plug-ins">
<span id="intro-how-to-start-creating-plug-ins"></span><h2>How To Start Creating Plug-ins<a class="headerlink" href="#how-to-start-creating-plug-ins" title="Permalink to this headline">¶</a></h2>
<div class="section" id="play">
<h3>Play!<a class="headerlink" href="#play" title="Permalink to this headline">¶</a></h3>
<p>Before you write a line of code, Spend some significant time playing with After Effects, and with the <a class="reference internal" href="index.html#intro-sample-projects"><span class="std std-ref">Sample Projects</span></a>. Build the plug-ins into the right folder. Set lots of breakpoints, read the amusing and informative comments.</p>
<p>See a quickstart video on building an effect (on macOS): <a class="reference external" href="https://adobe.ly/2sjMDwM">adobe.ly/2sjMDwM</a></p>
</div>
<hr class="docutils" />
<div class="section" id="plan">
<h3>Plan!<a class="headerlink" href="#plan" title="Permalink to this headline">¶</a></h3>
<p>Be clear on what your plug-in will attempt to do.</p>
</div>
<hr class="docutils" />
<div class="section" id="hack">
<h3>Hack!<a class="headerlink" href="#hack" title="Permalink to this headline">¶</a></h3>
<p>After experimenting with the samples, find one that does something <em>like</em> what you want to do. The temptation to start from scratch may be strong; fight it! For effects, use the Skeleton template project. Avoid the headache of reconstructing projects (including the troublesome custom build steps for Windows PiPL resource generation) by grafting your code into an existing project.</p>
</div>
<hr class="docutils" />
<div class="section" id="steal">
<h3>Steal!<a class="headerlink" href="#steal" title="Permalink to this headline">¶</a></h3>
<p>To make the Skeleton sample your own, copy the entire \Skeleton directory, renaming it to (for example) \WhizBang. Using your text editor of choice, search \WhizBang*.* (yes, that includes .NET and Xcode project files) for occurrences of Skeleton and SKELETON, and replace them with WhizBang and WHIZBANG.</p>
<p>You now have a compiling and running plug-in that responds to common commands, handles 8 and 16-bpc color, uses our AEGP_SuiteHandler utility code, and responds to 3D light and camera information. There, was that so hard?</p>
<p>AEGP developers will do well to start with Projector (for After Effects project creation support), Easy Cheese for a keyframe assistant, IO for media file format support, and Persisto for a simple menu command and working with preferences.</p>
</div>
<hr class="docutils" />
<div class="section" id="test">
<h3>Test!<a class="headerlink" href="#test" title="Permalink to this headline">¶</a></h3>
<p>If only for testing convenience, you should have a project saved with your effect applied, and all its parameters keyframed to strange values. Between these projects which stress your plug-in, and the tools provided by your development environment, you’re well on your way to shipping some tested code.</p>
</div>
<hr class="docutils" />
<div class="section" id="blame">
<h3>Blame!<a class="headerlink" href="#blame" title="Permalink to this headline">¶</a></h3>
<p>If you run into behavior that seems wrong, see if you can reproduce the behavior using one of the unmodified sample projects. This can save you a lot of time, if you can determine whether the bug behavior was introduced by your modifications, or was already there to begin with.</p>
</div>
<hr class="docutils" />
<div class="section" id="developers-matter">
<h3>Developers Matter<a class="headerlink" href="#developers-matter" title="Permalink to this headline">¶</a></h3>
<p>Third party developers drive API and SDK improvement and expansion. Your products enable After Effects to do things we’d never considered. Your efforts make After Effects better; keep it up!</p>
<p>We work hard on the SDK, and welcome your comments and feedback. Almost every change we make to the API is suggested by developers like you. <a class="reference external" href="https://community.adobe.com/t5/after-effects/bd-p/after-effects?page=1&amp;sort=latest_replies&amp;filter=all&amp;topics=label-sdkcom">Give us feedback</a></p>
</div>
</div>
<span id="document-intro/sample-projects"></span><div class="section" id="sample-projects">
<span id="intro-sample-projects"></span><h2>Sample Projects<a class="headerlink" href="#sample-projects" title="Permalink to this headline">¶</a></h2>
<p>There is at least one sample of every type of plug-in supported by the current API, as well as projects to illustrate particular concepts.</p>
<p>In the sample projects, we’ve kept the code as simple as possible. A showy implementation might get us good grades in a programming class, but won’t help you understand how to use API features.</p>
<p>After the break, we explain how to build the sample projects, so keep reading below!</p>
<hr class="docutils" />
<div class="section" id="sample-project-descriptions">
<h3>Sample Project Descriptions<a class="headerlink" href="#sample-project-descriptions" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Project</strong></th>
<th class="head"><strong>Description</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>AEGPs</td>
<td>AEGPs hook directly into After Effects’ menus and other areas in the UI.
See below for specifics on where the AEGP appears in the UI.</td>
</tr>
<tr class="row-odd"><td>Artie</td>
<td>Artie the Artisan takes over rendering of all 3D layers in a given composition.
This is the same API used by our internal 3D renderers; it is very complex, and exposes a great deal of tacit information about the After Effects rendering pipeline.
Unless you have a compelling reason to replace the way After Effects handles 3D rendering, you need never work with this sample.
Artisans appear in Composition &gt; Composition Settings, in the Advanced tab, in the Rendering Plug-in drop-down.</td>
</tr>
<tr class="row-even"><td>Easy Cheese</td>
<td>A keyframer (which shows up on the Animation &gt; Keyframe Assistant submenu), Easy Cheese shows how to manipulate various characteristics of keyframes
(in a way that, uncannily, resembles our shipping plug-in, Easy Ease…)</td>
</tr>
<tr class="row-odd"><td>FBIO</td>
<td>Exercises the After Effects Input/Output (AEIO) API. Similar to the IO sample, but supports the frame-based .ffk file format.
Note that we now recommend developing a <a class="reference internal" href="index.html#intro-other-integration-possibilities-premiere-pro-importers"><span class="std std-ref">Premiere Pro Importers</span></a> instead.</td>
</tr>
<tr class="row-even"><td>Grabba</td>
<td>Gets frames (formatted as the plug-in requests) from any composition in the project.</td>
</tr>
<tr class="row-odd"><td>IO</td>
<td><p class="first">Exercises the After Effects Input/Output (AEIO) API. Supports the fictitious</p>
<p class="last">.fak file format, and handles all requests from After Effects for retrieving data from or outputting to such files.
Note that we now recommend developing a <a class="reference internal" href="index.html#intro-other-integration-possibilities-premiere-pro-importers"><span class="std std-ref">Premiere Pro Importers</span></a> instead.</p>
</td>
</tr>
<tr class="row-even"><td>Mangler</td>
<td>Mangler is a keyframer demonstrating the use of an ADM palette, just like our own.</td>
</tr>
<tr class="row-odd"><td>Panelator</td>
<td>Creates a panel that can be docked along with the rest of the standard panels.
Note: It is far more work to create a panel this way than using the HTML5 Panel SDK.
We recommend starting with that SDK instead.</td>
</tr>
<tr class="row-even"><td>Persisto</td>
<td>Shows how to read and write information from the After Effects preferences file.</td>
</tr>
<tr class="row-odd"><td>ProjDumper</td>
<td>Creates a text file representing every element in an After Effects project.</td>
</tr>
<tr class="row-even"><td>Projector</td>
<td>Imports the (fictitious) .sdk file format, and creates a project using AEGP API calls.
Whenever you’re wondering how to get or set some characteristic of a project element, look here first.
Note: There are some hardcoded paths in Projector.h. If you don’t set these to refer to actual media on disk, you WILL get errors while running this plug-in. Don’t blame us; change them!</td>
</tr>
<tr class="row-odd"><td>QueueBert</td>
<td>Pronounced “Cue-BARE!”, QueueBert manipulates all aspects of render queue items and the output modules associated with them.</td>
</tr>
<tr class="row-even"><td>Streamie</td>
<td>Manipulates streams, both dynamic and fixed.</td>
</tr>
<tr class="row-odd"><td>Sweetie</td>
<td>Sweetie uses the PICA (or “Suite Pea”) API to provide a function Suite, for use by other plug-ins.
If you’re writing multiple plug-ins that rely on the same image processing library, you could provide the library functionality using such a suite.</td>
</tr>
<tr class="row-even"><td>Text Twiddler</td>
<td>Manipulates text layers and their contents.</td>
</tr>
<tr class="row-odd"><td>Effects</td>
<td>All effects appear in the Effects &amp; Presets panel, and in the Effect menu.</td>
</tr>
<tr class="row-even"><td>Checkout</td>
<td>Checks out (of After Effects’ frame cache) a frame of input from another layer, at a specified time.
This is an important concept for all effects with layer parameters. Premiere Pro compatible.</td>
</tr>
<tr class="row-odd"><td>Convolutrix</td>
<td>Exercises our image convolution callbacks. Premiere Pro compatible.</td>
</tr>
<tr class="row-even"><td>Gamma Table</td>
<td>Shows how to manage sequence data, and uses our iteration callbacks.
For nostalgia’s sake, we’re leaving this one sample in C; it’s also compatible with many third-party plug-in hosts, due to its reliance on version 3.x API features.</td>
</tr>
<tr class="row-odd"><td>GLator</td>
<td>New for CC 2017. Demonstrates proper OpenGL context management in an effect plug-in.</td>
</tr>
<tr class="row-even"><td>Paramarama</td>
<td>Exercises wayward param types not used in other sample. Premiere Pro compatible.</td>
</tr>
<tr class="row-odd"><td>PathMaster</td>
<td>Shows how to access paths from within an effect.</td>
</tr>
<tr class="row-even"><td>Portable</td>
<td>Shows how to detect and respond to several different plug-in hosts. Premiere Pro compatible.</td>
</tr>
<tr class="row-odd"><td>Resizer</td>
<td>Resizer resizes (surprise!) the output buffer. This is useful for effects like glows and drop shadows, which would be truncated at the layer’s edges if they didn’t expand the output buffer.
Premiere Pro compatible.</td>
</tr>
<tr class="row-even"><td>SDK Backwards</td>
<td>Reverses a layer’s audio, and mixes it with a keyframe-able sine wave.</td>
</tr>
<tr class="row-odd"><td>SDK Noise</td>
<td>Premiere Pro compatible, demonstrates 32-bit and YUV rendering in Premiere Pro.</td>
</tr>
<tr class="row-even"><td>Shifter</td>
<td>Shifts an image in the output buffer, and exercises our transform_world and subpixel sampling functions.</td>
</tr>
<tr class="row-odd"><td>SmartyPants</td>
<td>Demonstrates the SmartFX API, required for support of floating point pixels.</td>
</tr>
<tr class="row-even"><td>Transformer</td>
<td>Exercises our image transformation callbacks.</td>
</tr>
<tr class="row-odd"><td>Effect Template</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>Skeleton</td>
<td>Skeleton is the starting point for developing effects. Premiere Pro compatible.</td>
</tr>
<tr class="row-odd"><td>Effects with Custom UI</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>CCU</td>
<td>Implements a custom user interface in the composition and layer windows, supporting pixel aspect ratio and downsample ratios. Premiere Pro compatible.</td>
</tr>
<tr class="row-odd"><td>ColorGrid</td>
<td>Shows how to use arbitrary data type parameters. Also has a nice custom UI. Premiere Pro compatible.</td>
</tr>
<tr class="row-even"><td>Custom ECW UI</td>
<td>Implements a very boring custom user interface in the effect controls window, and shows how to respond to numerous UI events.</td>
</tr>
<tr class="row-odd"><td>Histogrid</td>
<td>New for CC 2015 (13.5). An example of how custom UI can access asynchronously-rendered upstream frames for lightweight processing in CC 2015 and later.
This effect calculates a sampled 10x10 color grid from the upstream frame, and displays a preview of that color grid.
In render, a higher-quality grid is calculated and used to modify the output image, creating a blend of a color grid with the original image.</td>
</tr>
<tr class="row-even"><td>Supervisor</td>
<td>Shows how to control parameters (both values and UI) based on the value of other parameters. Premiere Pro compatible.</td>
</tr>
<tr class="row-odd"><td>BlitHook</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>EMP</td>
<td>External Monitor Preview. Use this as a starting point for adding support to output video from the composition panel to video hardware.</td>
</tr>
</tbody>
</table>
</div>
<hr class="docutils" />
<div class="section" id="building-the-sample-projects">
<h3>Building The Sample Projects<a class="headerlink" href="#building-the-sample-projects" title="Permalink to this headline">¶</a></h3>
<p>We’ve combined the sample projects into a single master project, stored in the Examples folder of the SDK. For macOS, it is Buildall.xcodeproj; for Windows, it is BuildAll.sln.</p>
<p>In your IDE, you’ll need to change the output folder of your project to build into After Effects’ plug-in folder.</p>
<p>For development, we recommend using the following path for macOS: <code class="docutils literal notranslate"><span class="pre">/Library/Application</span> <span class="pre">Support/Adobe/Common/Plug-ins/[version]/MediaCore/</span></code></p>
<p>Version is locked at 7.0 for all CC versions, or CSx for earlier versions.</p>
<p>for example: <code class="docutils literal notranslate"><span class="pre">/Library/Application</span> <span class="pre">Support/Adobe/Common/Plug-ins/7.0/MediaCore/</span></code></p>
<p>or: <code class="docutils literal notranslate"><span class="pre">/Library/Application</span> <span class="pre">Support/Adobe/Common/Plug-ins/CS6/MediaCore/</span></code></p>
<p>and the following path for Windows: <code class="docutils literal notranslate"><span class="pre">[Program</span> <span class="pre">Files]\Adobe\Common\Plug-ins\[version]\MediaCore\</span></code></p>
<p>for example: <code class="docutils literal notranslate"><span class="pre">C:\Program</span> <span class="pre">Files\Adobe\Common\Plug-ins\7.0\MediaCore\</span></code></p>
<p>or: <code class="docutils literal notranslate"><span class="pre">C:\Program</span> <span class="pre">Files\Adobe\Common\Plug-ins\CS6\MediaCore\</span></code></p>
<p>Note that this Windows path is only recommended for development purposes. Windows installers should follow the guidelines here: <a class="reference internal" href="index.html#intro-where-installers-should-put-plug-ins"><span class="std std-ref">Where Installers Should Put Plug-ins</span></a>.</p>
<p>In Xcode, you can set this path once for all projects in the Xcode Preferences &gt; Locations &gt; Derived Data &gt; Advanced. Under <em>Build Location</em> choose <em>Custom</em>, and fill in the path.</p>
<p>In Visual Studio, for convenience, we have specified the output path for all sample projects using the environment variable AE_PLUGIN_BUILD_DIR. You’ll need to set this as a user environment variable for your system. On Windows 7, right-click <em>My Computer</em> &gt; <em>Properties</em></p>
<p>&gt;and in the left sidebar choose <em>Advanced System Settings</em>. In the new dialog, hit the <em>Environment Variables</em> button. In the User variables area, create a New variable named AE_PLUGIN_BUILD_DIR, and with the path described above. Log out of Windows and log back in so that the variable will be set.</p>
<p>Alternatively, you can set output path for each project individually in Visual Studio by right-clicking a project in the Solution Explorer, choosing Properties, and then in Configuration Properties &gt; Linker &gt; General, set the Output File.</p>
<p>When compiling the plug-ins, if you see a link error such as:</p>
<p>“Cannot open file “[MediaCore plug-ins path]plugin.prm”, make sure to launch Visual Studio in administrator mode. In your Visual Studio installation, right-click devenv.exe, Properties &gt; Compatibility &gt; Privilege Level, click “Run this program as an administrator”.</p>
</div>
</div>
<span id="document-intro/debugging-plug-ins"></span><div class="section" id="debugging-plug-ins">
<span id="intro-debugging-plug-ins"></span><h2>Debugging Plug-ins<a class="headerlink" href="#debugging-plug-ins" title="Permalink to this headline">¶</a></h2>
<p>The best way to learn the interaction(s) between After Effects and plug-ins is running the samples in your debugger. Spending some quality time in your compiler’s debugger, and a sample project that closely resembles your plug-in, can really pay off.</p>
<p>Once you’ve got the plug-in building directly into the plug-ins folder as explained above, here’s how to specify After Effects as the application to run during debug sessions:</p>
<p>On Windows:</p>
<ol class="arabic simple">
<li>In the Visual Studio solution, in the Solution Explorer panel, choose the project you want to debug</li>
<li>Right-click it and choose Set as StartUp Project</li>
<li>Right-click it again and choose Properties</li>
<li>In Configuration Properties &gt; Debugging &gt; Command, provide the path to the executable file of the host application the plug-ins will be running in (this may be After Effects or Premiere Pro)</li>
<li>From there you can either hit the Play button, or you can launch the application and later at any point choose Debug &gt; Attach to Process…</li>
</ol>
<p>On macOS:</p>
<ol class="arabic simple">
<li>In Xcode, in the Project Navigator, choose the xcodeproj you want to debug</li>
<li>Choose Product &gt; Scheme &gt; Edit Scheme…</li>
<li>Under Run, in the Info tab, for Executable, choose the host application the plug-ins will be running in (this may be After Effects or Premiere Pro)</li>
<li>From there you can either hit the Play button to build and run the current scheme, or you can launch the application and later at any point choose Debug &gt; Attach to Process.</li>
</ol>
<hr class="docutils" />
<div class="section" id="deleting-preferences">
<span id="intro-debugging-plug-ins-deleting-preferences"></span><h3>Deleting Preferences<a class="headerlink" href="#deleting-preferences" title="Permalink to this headline">¶</a></h3>
<p>During the course of developing a plug-in, your plug-in may pass settings information to After Effects, which is then stored in its preferences file.</p>
<p>You may delete the preferences and restart After Effects with a clean slate by holding down Ctrl-Alt-Shift / Cmd-Opt-Shift during launch.</p>
<p>On Windows, the preferences are stored here: <code class="docutils literal notranslate"><span class="pre">[user</span> <span class="pre">folder]\AppData\Roaming\Adobe\After</span> <span class="pre">Effects\[version]\Adobe</span> <span class="pre">After</span> <span class="pre">Effects</span> <span class="pre">[version]-x64</span> <span class="pre">Prefs.txt</span></code></p>
<p>On macOS, they are stored here: <code class="docutils literal notranslate"><span class="pre">~/Library/Preferences/Adobe/After</span> <span class="pre">Effects/[version]/Adobe</span> <span class="pre">After</span> <span class="pre">Effects</span> <span class="pre">[version]-x64</span> <span class="pre">Prefs</span></code></p>
</div>
</div>
<span id="document-intro/compatibility-across-multiple-versions"></span><div class="section" id="compatibility-across-multiple-versions">
<span id="intro-compatibility-across-multiple-versions"></span><h2>Compatibility Across Multiple Versions?<a class="headerlink" href="#compatibility-across-multiple-versions" title="Permalink to this headline">¶</a></h2>
<p>Generally, you should compile your plug-ins with the latest After Effects SDK headers. This makes the latest suites and API functionality available to your plug-ins. When a new version of After Effects is released, you generally will not need to provide a new version unless you wish to take advantage of new functionality exposed through the new SDK. However, you should always test your plug-in in new versions of After Effects before claiming compatibility with new versions.</p>
<p>You should test your plug-in thoroughly in each version of After Effects supported by your plug-in. If you need to add a conditional block of code to be run only in specific versions of After Effects, you can always check the API version in <a class="reference internal" href="index.html#effect-basics-pf-indata"><span class="std std-ref">PF_InData</span></a>.version for effects, or in the major and minor_versionL passed into your AEGP in the <a class="reference internal" href="index.html#aegps-implementation-entry-point"><span class="std std-ref">Entry Point</span></a>.</p>
<p>For even more precise version checking, a plug-in can run a script using <code class="docutils literal notranslate"><span class="pre">AEGP_ExecuteScript</span></code> (<a class="reference internal" href="index.html#aegps-aegp-suites-aegp-utilitysuite"><span class="std std-ref">AEGP_UtilitySuite6</span></a>), querying one of the following attributes:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">app</span><span class="p">.</span><span class="n">version</span> <span class="o">-</span> <span class="n">e</span><span class="p">.</span><span class="n">g</span><span class="p">.</span> <span class="mf">11.0.1</span><span class="n">x12</span>
<span class="n">app</span><span class="p">.</span><span class="n">buildNumber</span> <span class="o">-</span> <span class="n">e</span><span class="p">.</span><span class="n">g</span><span class="p">.</span> <span class="mf">12.</span>
</pre></div>
</div>
<hr class="docutils" />
<div class="section" id="api-versions">
<span id="intro-compatibility-across-multiple-versions-api-versions"></span><h3>API Versions<a class="headerlink" href="#api-versions" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="15%" />
<col width="71%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Release</strong></th>
<th class="head"><strong>Effect API Version</strong></th>
<th class="head"><strong>AEGP API Version</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>15.0</td>
<td>13.15</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>CC 2017.1 (14.2)</td>
<td>13.14</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>CC 2017 (14.0)</td>
<td>13.13</td>
<td>114.0</td>
</tr>
<tr class="row-odd"><td>CC 2015.3 (13.8)</td>
<td>13.11</td>
<td>113.8</td>
</tr>
<tr class="row-even"><td>CC 2015 (13.7)</td>
<td>13.10</td>
<td>113.7</td>
</tr>
<tr class="row-odd"><td>CC 2015 (13.6)</td>
<td>13.10</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>CC 2015 (13.5, 13.5.1)</td>
<td>13.9</td>
<td>113.5</td>
</tr>
<tr class="row-odd"><td>CC 2014 (13.0-13.2)</td>
<td>13.7</td>
<td>113</td>
</tr>
<tr class="row-even"><td>CC (12.2)</td>
<td>13.6</td>
<td>112.2</td>
</tr>
<tr class="row-odd"><td>CC (12.1)</td>
<td>13.5</td>
<td>112.1</td>
</tr>
<tr class="row-even"><td>CC (12.0)</td>
<td>13.4</td>
<td>112.0</td>
</tr>
<tr class="row-odd"><td>CS6.0.1 (11.0.1)</td>
<td>13.3</td>
<td>111.0</td>
</tr>
<tr class="row-even"><td>CS6 (11.0)</td>
<td>13.2</td>
<td>111.0</td>
</tr>
<tr class="row-odd"><td>CS5.5 (10.5)</td>
<td>13.1</td>
<td>17.0</td>
</tr>
<tr class="row-even"><td>CS5 (10.0)</td>
<td>13.0</td>
<td>17.0</td>
</tr>
<tr class="row-odd"><td>CS4 (9.0)</td>
<td>12.14</td>
<td>16.24</td>
</tr>
<tr class="row-even"><td>CS3 (8.0)</td>
<td>12.13</td>
<td>16.24</td>
</tr>
<tr class="row-odd"><td>7.0</td>
<td>12.12</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>6.5, 6.0</td>
<td>12.10 (Check for the presence of updated AEGP suites, should you need to differentiate between 6.0 and 6.5.)</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>5.0</td>
<td>12.5</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>4.1</td>
<td>12.2</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>3.1</td>
<td>11.6</td>
<td>&#160;</td>
</tr>
</tbody>
</table>
</div>
</div>
<span id="document-intro/third-party-plug-in-hosts"></span><div class="section" id="third-party-plug-in-hosts">
<span id="intro-third-party-plug-in-hosts"></span><h2>Third-party Plug-in Hosts?<a class="headerlink" href="#third-party-plug-in-hosts" title="Permalink to this headline">¶</a></h2>
<p>Some developers are wary of using each After Effects release’s new API features, to maintain compatibility with hosts with partial implementations. You can distinguish between host applications by checking <a class="reference internal" href="index.html#effect-basics-pf-indata"><span class="std std-ref">PF_InData</span></a>&gt;appl_id. After Effects uses the appl_id ‘FXTC’.</p>
<p>Premiere Pro uses ‘PrMr’. As of this writing, no third party hosts support SmartFX, or our AEGP functions.</p>
<p>Also, see the <a class="reference internal" href="index.html#ppro-ppro"><span class="std std-ref">Premiere Pro &amp; Other Hosts</span></a> section.</p>
</div>
<span id="document-intro/pipl-resources"></span><div class="section" id="pipl-resources">
<span id="intro-pipl-resources"></span><h2>PiPL Resources<a class="headerlink" href="#pipl-resources" title="Permalink to this headline">¶</a></h2>
<p>Originating in Adobe Photoshop over two decades ago, Plug-In Property Lists, or PiPLs, are resources which provide basic information about a plug-in’s behavior, without executing the plug-in. PiPLs have been largely supplanted within After Effects by <code class="docutils literal notranslate"><span class="pre">PF_Cmd_GLOBAL_SETUP</span></code> (see <a class="reference internal" href="index.html#effect-basics-command-selectors-global-selectors"><span class="std std-ref">Global Selectors</span></a>) and dynamic outflags. However, for archaeological reasons, the behaviors indicated during <code class="docutils literal notranslate"><span class="pre">PF_Cmd_GLOBAL_SETUP</span></code> must agree with those in the PiPL.</p>
<p>A PiPL specifies the entry point of a plug-in, the display name, as well as the plug-in’s match name. The match name is a unique, constant identifier, unlike a plug-in’s display name, which may be changed dynamically. Starting in CC, display names can be up to 47 characters long. Previously, they were limited to 31 characters.</p>
<p>In the interest of cross-platform compatibility, use a single .r file for both macOS and Windows versions of your plug-in, like the samples do. PiPL properties must always be in macOS-specific byte order. On Windows, PiPLs are compiled by processing a .r file through pipltool.exe, which converts the .r file into a binary .rc file. The Windows sample projects all contain custom build steps which generate a .rc file, using a cross-platform .r file and our cnvtpipl.exe command line utility. Base your development on an existing sample plug-in and the build step will be correctly implemented.</p>
<hr class="docutils" />
<div class="section" id="entry-point">
<h3>Entry Point<a class="headerlink" href="#entry-point" title="Permalink to this headline">¶</a></h3>
<p>Your plug-in’s entry point is exported through the PiPL on Windows and macOS. If the plug-in supports multiple platforms, then multiple entry points must be defined in the PiPL. There is no need for a Windows .def file or manual exports, unless you’re also designating some other OS-specific entry point.</p>
<p>The macros defined in entry.h (in the \SDKExamplesHeaders directory) take care of exporting each sample’s entry point function. All the sample project entry point functions are EffectMain() for effects, or EntryPointFunc()for AEGPs.</p>
</div>
<hr class="docutils" />
<div class="section" id="pipl-resources-and-microsoft-visual-studio">
<h3>PiPL Resources And Microsoft Visual Studio<a class="headerlink" href="#pipl-resources-and-microsoft-visual-studio" title="Permalink to this headline">¶</a></h3>
<p>To use resources from Microsoft Visual Studio .NET with pipltool-generated resources,</p>
<p>#include the output of the custom build steps into the Microsoft-generated .rc file.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// in file WhizBang.rc, generated by .NET.</span>
<span class="cp">#include</span> <span class="cpf">&quot;WhizBang_PiPL_temp.rc&quot; // pipltool.exe&#39;s output</span><span class="cp"></span>
</pre></div>
</div>
<p>If modifying a sample plug-in, change the name of the file generated by pipltool.exe to something like WhizBang_PiPL_temp.rc, or it will overwrite the Microsoft resources each time you build; not good.</p>
</div>
<hr class="docutils" />
<div class="section" id="multiple-pipls">
<h3>Multiple PiPLs<a class="headerlink" href="#multiple-pipls" title="Permalink to this headline">¶</a></h3>
<p>It is possible, but not recommended, to include multiple plug-ins (both AEGPs and effects) in the same file, using multiple PiPLs. If there are PiPLs for both AEGPs and effects in the same file, the AEGPs must come first!</p>
<p>No other hosts (not even Premiere Pro) support multiple PiPLs pointing to multiple effects within the same .dll or code fragment. Also, if you need to update one plug-in, do you really want to ship a new build of all your plug-ins? We recommend one PiPL, and one plug-in, per code fragment.</p>
</div>
<hr class="docutils" />
<div class="section" id="super-secret-pipl-bit">
<h3>Super Secret PiPL Bit<a class="headerlink" href="#super-secret-pipl-bit" title="Permalink to this headline">¶</a></h3>
<p>For those of you who use C++ and simply <em>must</em> keep your plug-ins loaded all the time (to avoid having your v-tables trashed, among other hazards), set the PiPL’s AE_Reserved_Info member to 8. Over the years we’ve been quite stringent, insisting that plug-ins be good memory citizens and respond gracefully to getting unloaded. We know there are cases in which being unloaded with no warning can really ruin a plug-in’s day (and v-tables), and so have provided this work-around. Be nice, perform scrupulous memory management, and only use your powers for good.</p>
</div>
<hr class="docutils" />
<div class="section" id="why-do-i-need-to-know-all-this">
<h3>Why Do I Need To Know All This?<a class="headerlink" href="#why-do-i-need-to-know-all-this" title="Permalink to this headline">¶</a></h3>
<p>You don’t; After Effects does. If you follow our advice and base your projects on the SDK samples, you can simply change the .r file containing your PiPL definition(s), and your plug-in’s resources will be automagically updated the next time you build. Feel the love. Or, if you ever tinker with the custom build steps, feel the pain.</p>
</div>
</div>
<span id="document-intro/exceptions"></span><div class="section" id="exceptions">
<span id="intro-exceptions"></span><h2>Exceptions<a class="headerlink" href="#exceptions" title="Permalink to this headline">¶</a></h2>
<p>Handle all exceptions generated by your plug-in’s code, <em>within</em> your plug-in. Pass those which didn’t originate in your plug-in’s code to After Effects.</p>
<p>After Effects’ APIs are designed for plug-ins written in C, and don’t expect exceptions. After Effects will crash immediately if one is thrown from within a plug-in.</p>
<p>The effect samples use a firewall around the switch statement in the <code class="docutils literal notranslate"><span class="pre">main()</span></code> function, and the AEGPs wrap their function hooks in try/catch blocks.</p>
</div>
<span id="document-intro/where-installers-should-put-plug-ins"></span><div class="section" id="where-installers-should-put-plug-ins">
<span id="intro-where-installers-should-put-plug-ins"></span><h2>Where Installers Should Put Plug-ins<a class="headerlink" href="#where-installers-should-put-plug-ins" title="Permalink to this headline">¶</a></h2>
<p>Installing your plug-ins in the common location will allow them to be loaded by Premiere Pro, if installed.</p>
<p>On Windows, the common plug-ins folder can be found (as an explicit path) in the following registry entry: <code class="docutils literal notranslate"><span class="pre">HKLM\SOFTWARE\Adobe\After</span> <span class="pre">Effects\[version]\CommonPluginInstallPath</span></code></p>
<p>On Mac, the common plug-ins folder is at: <code class="docutils literal notranslate"><span class="pre">/Library/Application</span> <span class="pre">Support/Adobe/Common/Plug-ins/[version]/MediaCore</span></code></p>
<p>Version is locked at 7.0 for all CC versions, or CSx for earlier versions. For example: <code class="docutils literal notranslate"><span class="pre">/Library/Application</span> <span class="pre">Support/Adobe/Common/Plug-ins/7.0/MediaCore/</span></code></p>
<p>Do not use macOS aliases or Windows shortcuts, as these are not traversed by Premiere Pro.</p>
<hr class="docutils" />
<div class="section" id="do-i-have-to-install-the-plug-ins-to-the-common-folder">
<h3>Do I Have To Install The Plug-ins To The Common Folder?<a class="headerlink" href="#do-i-have-to-install-the-plug-ins-to-the-common-folder" title="Permalink to this headline">¶</a></h3>
<p>You may have good reason to install your plug-in for only After Effects, for example, if your plug-in depends on suites and functionality not available in Premiere Pro. We strongly recommend that you use the common folder whenever possible, but for certain cases, the AE-specific plug-in folder is still available.</p>
<p>On Windows, the app-specific plug-ins folder can be found (as an explicit path) in the following registry entry: <code class="docutils literal notranslate"><span class="pre">\\HKEY_LOCAL_MACHINE\SOFTWARE\Adobe\After</span> <span class="pre">Effects\(version)\PluginInstallPath</span></code></p>
<p>On macOS, the app-specific plug-ins folder is at: <code class="docutils literal notranslate"><span class="pre">/Applications/Adobe</span> <span class="pre">After</span> <span class="pre">Effects</span> <span class="pre">[version]/Plug-ins/</span></code></p>
<p>When launched, After Effects recursively descends 10 levels deep into subdirectories of its path. macOS aliases are traversed, but Windows shortcuts are not. Directories terminated by parentheses or preceded by the symbols ¬ (macOS) or ~ (Windows) are not scanned.</p>
<p>Try as you might to build a fence between AE and Premiere Pro, users will still find ways to get across using our lovely integration goodness - Your effects will still be available to Premiere Pro users who create a dynamically linked AE composition with your effect, and put it in a Premiere Pro sequence.</p>
</div>
</div>
<span id="document-intro/localization"></span><div class="section" id="localization">
<span id="intro-localization"></span><h2>Localization<a class="headerlink" href="#localization" title="Permalink to this headline">¶</a></h2>
<p>Starting in CC, PF App Suite (<a class="reference internal" href="index.html#effect-details-useful-utility-functions"><span class="std std-ref">Useful Utility Functions</span></a>) adds <code class="docutils literal notranslate"><span class="pre">PF_AppGetLanguage()</span></code> to query the current language so that a plug-in can use the correct language string.</p>
<p>When passing strings to AE, some parts of the API accept Unicode. In other areas, for example when specifying effect parameter names during <code class="docutils literal notranslate"><span class="pre">PF_Cmd_PARAM_SETUP</span></code>, you’ll need to pass the names in a char string. For these non-Unicode strings, AE interprets strings as being multi-byte encoded using the application’s current locale. To build these strings, on Windows you can use the <code class="docutils literal notranslate"><span class="pre">WideCharToMultiByte()</span></code> function, specifying <code class="docutils literal notranslate"><span class="pre">CP_OEMCP</span></code> as the first argument. On macOS, use the encoding returned by <code class="docutils literal notranslate"><span class="pre">GetApplicationTextEncoding()</span></code>.</p>
<p>Testing with different languages in AE doesn’t require an OS reinstallation, but it does require a reinstallation of AE:</p>
<p>For Win, change the system locale to the targeted language (control panel &gt; region and language &gt; administrative tab &gt; change system locale), restart machine, and then install AE in the according language.</p>
<p>For Mac, set targeted language to the primary language in the preferred language list, and then install AE in the according language.</p>
</div>
<span id="document-intro/next-steps"></span><div class="section" id="next-steps">
<span id="intro-next-steps"></span><h2>Next Steps<a class="headerlink" href="#next-steps" title="Permalink to this headline">¶</a></h2>
<p>You now have an understanding of what plug-ins are, what they can do, and how After Effects communicates with them.</p>
<p>Next, we will cover the <a class="reference internal" href="index.html#effect-basics-effect-basics"><span class="std std-ref">basics of effects plug-ins</span></a>.</p>
</div>
</div>
<div class="toctree-wrapper compound">
<span id="document-effect-basics/effect-basics"></span><div class="section" id="effect-basics">
<span id="effect-basics-effect-basics"></span><h2>Effect Basics<a class="headerlink" href="#effect-basics" title="Permalink to this headline">¶</a></h2>
<p>This chapter will provide all the information you need to know to understand how a basic effect plug-in works.</p>
<p>These details are fundamental to every effect plug-in.</p>
<p>By the time you finish this chapter, you’ll be ready for the fun stuff; modifying pixels!</p>
</div>
<span id="document-effect-basics/entry-point"></span><div class="section" id="entry-point">
<span id="effect-basics-entry-point"></span><h2>Entry Point<a class="headerlink" href="#entry-point" title="Permalink to this headline">¶</a></h2>
<p>All communication between After Effects and an effect plug-in is initiated by After Effects, and it all happens by the host (After Effects) calling a single entry point function.</p>
<p>For all effect plug-ins, the entry point function must have the following signature:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_Err</span> <span class="n">main</span> <span class="p">(</span>
  <span class="n">PF_Cmd</span>       <span class="n">cmd</span><span class="p">,</span>
  <span class="n">PF_InData</span>    <span class="o">*</span><span class="n">in_data</span><span class="p">,</span>
  <span class="n">PF_OutData</span>   <span class="o">*</span><span class="n">out_data</span><span class="p">,</span>
  <span class="n">PF_ParamDef</span>  <span class="o">*</span><span class="n">params</span><span class="p">[],</span>
  <span class="n">PF_LayerDef</span>  <span class="o">*</span><span class="n">output</span><span class="p">,</span>
  <span class="kt">void</span>         <span class="o">*</span><span class="n">extra</span><span class="p">)</span>
</pre></div>
</div>
<p>The name of the entry point function above is “main”, but it can be whatever is specified in <a class="reference internal" href="index.html#intro-pipl-resources"><span class="std std-ref">PiPL Resources</span></a>.</p>
<p>Before each call to the entry point function, After Effects updates <a class="reference internal" href="index.html#effect-basics-pf-indata"><span class="std std-ref">PF_InData</span></a> and the plug- in’s parameter array PF_ParamDef[] (except as noted).</p>
<p>After the plug-in returns from its call, After Effects checks <a class="reference internal" href="index.html#effect-basics-pf-outdata"><span class="std std-ref">PF_OutData</span></a> for changes and, when appropriate, uses the PF_LayerDef the effect has rendered.</p>
<hr class="docutils" />
<div class="section" id="entry-point-function-parameters">
<h3>Entry Point Function Parameters<a class="headerlink" href="#entry-point-function-parameters" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="75%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Argument</strong></th>
<th class="head"><strong>Purpose</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><a class="reference internal" href="index.html#effect-basics-command-selectors"><span class="std std-ref">cmd</span></a></td>
<td>After Effects sets the <a class="reference internal" href="index.html#effect-basics-command-selectors"><span class="std std-ref">Command Selectors</span></a> to tell the plug-in what to do.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="index.html#effect-basics-pf-indata"><span class="std std-ref">in_data</span></a></td>
<td><p class="first">Information about the application’s state and the data the plug-in is being told to act upon.</p>
<p class="last">Pointers to numerous interface and image manipulation functions are also provided.</p>
</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="index.html#effect-basics-pf-outdata"><span class="std std-ref">out_data</span></a></td>
<td>Pass back information to After Effects by setting fields within out_data.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="index.html#effect-basics-parameters"><span class="std std-ref">params</span></a></td>
<td><p class="first">An array of the plug-in’s parameters at the time provided in in_data&gt; current_time.</p>
<p><code class="docutils literal notranslate"><span class="pre">params[0]</span></code> is the input image (a <a class="reference internal" href="index.html#effect-basics-pf-effectworld"><span class="std std-ref">PF_EffectWorld / PF_LayerDef</span></a>) to which the effect should be applied.</p>
<p>These values are only valid during certain selectors (this is noted in the <a class="reference internal" href="index.html#effect-basics-calling-sequence"><span class="std std-ref">selector descriptions</span></a>).</p>
<p class="last">Parameters are discussed at length here: <a class="reference internal" href="index.html#effect-basics-pf-paramdef"><span class="std std-ref">PF_ParamDef</span></a>.</p>
</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="index.html#effect-basics-pf-effectworld"><span class="std std-ref">output</span></a></td>
<td><p class="first">The output image, to be rendered by the effect plug-in and passed back to After Effects.</p>
<p class="last">Only valid during certain selectors.</p>
</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="index.html#effect-ui-events-pf-eventextra"><span class="std std-ref">extra</span></a></td>
<td><p class="first">The extra parameter varies with the command sent or (in the case of <a class="reference internal" href="index.html#effect-basics-command-selectors-messaging"><span class="std std-ref">PF_Cmd_EVENT</span></a>)
the <a class="reference internal" href="index.html#effect-ui-events-effect-ui-events"><span class="std std-ref">event type</span></a>.</p>
<p class="last">Used primarily for event management and <a class="reference internal" href="index.html#effect-detals-parameter-supervision"><span class="std std-ref">Parameter Supervision</span></a>.</p>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<span id="document-effect-basics/command-selectors"></span><div class="section" id="command-selectors">
<span id="effect-basics-command-selectors"></span><h2>Command Selectors<a class="headerlink" href="#command-selectors" title="Permalink to this headline">¶</a></h2>
<p>Commands are, simply, what After Effects wants your effect to do.</p>
<p>Responses to some selectors are required; most are optional, though recall that we did add them for a <em>reason</em>…</p>
<p>With each command selector sent, effects receive information from After Effects in <a class="reference internal" href="index.html#effect-basics-pf-indata"><span class="std std-ref">PF_InData</span></a>, input and parameter values in PF_ParamDef[] (an array of parameter descriptions including the input layer), and access to callbacks and function suites.</p>
<p>They send information back to After Effects in <a class="reference internal" href="index.html#effect-basics-pf-outdata"><span class="std std-ref">PF_OutData</span></a>, and (when appropriate) render output to a PF_LayerDef, also called a <a class="reference internal" href="index.html#effect-basics-pf-effectworld"><span class="std std-ref">PF_EffectWorld</span></a>.</p>
<p>During events, they receive event-specific information in <a class="reference internal" href="index.html#effect-ui-events-pf-eventextra"><span class="std std-ref">PF_EventExtra</span></a>.</p>
<hr class="docutils" />
<div class="section" id="calling-sequence">
<span id="effect-basics-calling-sequence"></span><h3>Calling Sequence<a class="headerlink" href="#calling-sequence" title="Permalink to this headline">¶</a></h3>
<p>Only the first few command selectors are predictable; the rest of the calling sequence is dictated by user action.</p>
<p>When first applied, a plug-in receives <code class="docutils literal notranslate"><span class="pre">PF_Cmd_GLOBAL_SETUP</span></code>, then <code class="docutils literal notranslate"><span class="pre">PF_Cmd_PARAM_SETUP</span></code>. Each time the user adds the effect to a layer, <code class="docutils literal notranslate"><span class="pre">PF_Cmd_SEQUENCE_SETUP</span></code> is sent.</p>
<p>For each frame rendered by a basic non-SmartFX effect, After Effects sends <code class="docutils literal notranslate"><span class="pre">PF_Cmd_FRAME_SETUP</span></code>, then <code class="docutils literal notranslate"><span class="pre">PF_Cmd_RENDER</span></code>, then <code class="docutils literal notranslate"><span class="pre">PF_Cmd_FRAME_SETDOWN</span></code>.</p>
<p>All effect plug-ins must respond to <code class="docutils literal notranslate"><span class="pre">PF_Cmd_RENDER</span></code></p>
<p>For SmartFX, <code class="docutils literal notranslate"><span class="pre">PF_Cmd_SMART_PRE_RENDER</span></code> may be sent any number of times, before a single <code class="docutils literal notranslate"><span class="pre">PF_Cmd_SMART_RENDER</span></code> is sent.</p>
<p><code class="docutils literal notranslate"><span class="pre">PF_Cmd_SEQUENCE_SETDOWN</span></code> is sent on exit, when the user removes an effect or closes the project. <code class="docutils literal notranslate"><span class="pre">PF_Cmd_SEQUENCE_RESETUP</span></code> is sent when a project is loaded or when the layer to which it’s applied changes. <code class="docutils literal notranslate"><span class="pre">PF_Cmd_SEQUENCE_FLATTEN</span></code> is sent when the After Effects project is written out to disk.</p>
<p><code class="docutils literal notranslate"><span class="pre">PF_Cmd_ABOUT</span></code> is sent when the user chooses <em>About…</em> from the Effect Controls Window (ECW).</p>
<p><code class="docutils literal notranslate"><span class="pre">PF_Cmd_GLOBAL_SETDOWN</span></code> is sent when After Effects closes, or when the last instance of the effect is removed. Do not rely on this message to determine when your plug-in is being removed from memory; use OS-specific entry points.</p>
</div>
<hr class="docutils" />
<div class="section" id="command-selectors-table">
<h3>Command Selectors Table<a class="headerlink" href="#command-selectors-table" title="Permalink to this headline">¶</a></h3>
<div class="section" id="global-selectors">
<span id="effect-basics-command-selectors-global-selectors"></span><h4>Global Selectors<a class="headerlink" href="#global-selectors" title="Permalink to this headline">¶</a></h4>
<p>All plug-ins must respond to these selectors.</p>
<table border="1" class="docutils">
<colgroup>
<col width="15%" />
<col width="85%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Selector</strong></th>
<th class="head"><strong>Response</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_Cmd_ABOUT</span></code></td>
<td><p class="first">Display a dialog describing the plug-in. Populate out_data&gt;return_msg and After Effects will display it in a simple modal dialog.</p>
<p class="last">Include your plug- in’s version information in the dialog. On macOS, the current resource file will be set to your effects module during this selector.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_Cmd_GLOBAL_SETUP</span></code></td>
<td>Set any required flags and <code class="docutils literal notranslate"><span class="pre">PF_OutData</span></code> fields (including out_data&gt;my_version) to describe your plug-in’s behavior.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_Cmd_GLOBAL_SETDOWN</span></code></td>
<td>Free all global data (only required if you allocated some).</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_Cmd_PARAM_SETUP</span></code></td>
<td><p class="first">Describe your parameters and register them using <a class="reference internal" href="index.html#effect-details-interaction-callback-functions-interaction-callbacks"><span class="std std-ref">PF_ADD_PARAM</span></a>.</p>
<p>Also, register custom user interface elements.</p>
<p class="last">Set <a class="reference internal" href="index.html#effect-basics-pf-outdata"><span class="std std-ref">PF_OutData&gt;num_params</span></a> to match your parameter count.</p>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="sequence-selectors">
<span id="effect-basics-command-selectors-sequence-selectors"></span><h4>Sequence Selectors<a class="headerlink" href="#sequence-selectors" title="Permalink to this headline">¶</a></h4>
<p>These control sequence data handling.</p>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="87%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Selector</strong></th>
<th class="head"><strong>Response</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_Cmd_SEQUENCE_SETUP</span></code></td>
<td>Allocate and initialize any sequence-specific data. Sent when the effect is first applied. <a class="reference internal" href="index.html#effect-basics-pf-indata"><span class="std std-ref">PF_InData</span></a> is initialized at this time.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_Cmd_SEQUENCE_RESETUP</span></code></td>
<td><p class="first">Re-create (usually unflatten) sequence data. Sent after sequence data is read from disk, during pre-composition, or when the effect is copied;</p>
<p>After Effects flattens sequence data before duplication. During duplication, <code class="docutils literal notranslate"><span class="pre">PF_Cmd_SEQUENCE_RESETUP</span></code> is sent for both the old and new sequences.</p>
<p class="last">Don’t expect a <code class="docutils literal notranslate"><span class="pre">PF_Cmd_SEQUENCE_FLATTEN</span></code> between <code class="docutils literal notranslate"><span class="pre">PF_Cmd_SEQUENCE_RESETUPs</span></code>.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_Cmd_SEQUENCE_FLATTEN</span></code></td>
<td><p class="first">Sent when saving and when duplicating the sequence. Flatten sequence data containing pointers or handles so it can be written to disk.</p>
<p>This will saved with the project file. Free the unflat data and set the <code class="docutils literal notranslate"><span class="pre">out_data&gt;sequence_data</span></code> to point to the new flattened data. Flat data must be correctly byte-ordered for file storage.</p>
<p>As of 6.0, if an effect’s sequence data has recently been flattened, the effect may be deleted without receiving an additional <code class="docutils literal notranslate"><span class="pre">PF_Cmd_SEQUENCE_SETDOWN</span></code>.</p>
<p class="last">In this case, After Effects will dispose of your flat sequence data.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_Cmd_SEQUENCE_SETDOWN</span></code></td>
<td>Free all sequence data.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="frame-selectors">
<span id="effect-basics-command-selectors-frame-selectors"></span><h4>Frame Selectors<a class="headerlink" href="#frame-selectors" title="Permalink to this headline">¶</a></h4>
<p>Passed for each frame (or set of audio samples) to be rendered by your plug-in.</p>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Selector</strong></th>
<th class="head"><strong>Response</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_Cmd_FRAME_SETUP</span></code></td>
<td><p class="first">Allocate any frame-specific data. This is sent immediately before each frame is rendered, to allow for frame-specific setup data.
If your effect changes the size of its output buffer, specify the new output height, width, and relative origin. All parameters except the input layer are valid.</p>
<p>If you set width and height to 0, After Effects ignores your response to the following <em>PF_Cmd_RENDER</em>.</p>
<p>NOTE: If <a class="reference internal" href="index.html#effect-basics-pf-outdata-pf-outflags"><span class="std std-ref">PF_Outflag_I_EXPAND_BUFFER</span></a> is set, you will receive this selector (and <em>PF_Cmd_FRAME_SETDOWN)</em> twice, once without <em>PF_Cmd_RENDER</em> between them.</p>
<p>This is so we know whether or not the given layer will be visible.</p>
<p class="last">Frame data dates from the days when machines might have 8MB of RAM. Given the calling sequence (above), it’s much more efficient to just allocate during <em>PF_Cmd_RENDER</em>.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_Cmd_RENDER</span></code></td>
<td><p class="first">Render the effect into the output, based on the input frame and any parameters.</p>
<p>This render call can only support 8-bit or 16-bit per channel rendering. 32-bit per channel rendering must be handled in PF_Cmd_SMART_RENDER.</p>
<p>All fields in PF_InData are valid.</p>
<p>If your response to this selector is interrupted (your calls to PF_ABORT or PF_PROGRESS returns an error code), your results will not be used.</p>
<p class="last">You cannot delete frame_data during this selector; you must wait until PF_Cmd_FRAME_SETDOWN.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_Cmd_FRAME_SETDOWN</span></code></td>
<td>Free any frame data allocated during PF_Cmd_FRAME_SETUP.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_Cmd_AUDIO_SETUP</span></code></td>
<td><p class="first">Sent before every audio render. Request a time span of input audio. Allocate and initialize any sequence-specific data.</p>
<p class="last">If your effect requires input from a time span other than the output time span, update the startsampL and endsampL field in PF_OutData.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_Cmd_AUDIO_RENDER</span></code></td>
<td><p class="first">Populate <a class="reference internal" href="index.html#effect-basics-pf-outdata"><span class="std std-ref">PF_OutData.dest_snd</span></a> with effect-ed audio. All fields in PF_InData are valid.</p>
<p class="last">If your response to this selector is interrupted (your calls to <code class="docutils literal notranslate"><span class="pre">PF_ABORT</span></code> or <code class="docutils literal notranslate"><span class="pre">PF_PROGRESS</span></code> returns an error code), your results will not be used.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_Cmd_AUDIO_SETDOWN</span></code></td>
<td>Free memory allocated during PF_Cmd_AUDIO_SETUP.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_Cmd_SMART_PRE_RENDER</span></code></td>
<td><p class="first">SmartFX only. Identify the area(s) of input the effect will need to produce its output, based on whatever criteria the effect implements.</p>
<p>maybe sent up to twice when MediaCore is hosting. The first will come during GetFrameDependencies to collect the inputs.</p>
<p>The source checkouts can return full frame dimensions here. Once the sources are rendered, if they are different in size than the first call
then this selector will be emitted a second time with the actual source sizes in order to get a correct output size.</p>
<p>Note that MediaCore wants all of the output, so PF_PreRenderOutput::max_result_rect will be used.</p>
<p><strong>New in 16.0</strong></p>
<p>Set <code class="docutils literal notranslate"><span class="pre">PF_RenderOutputFlag_GPU_RENDER_POSSIBLE</span></code> in <code class="docutils literal notranslate"><span class="pre">PF_PreRenderOutput</span></code> to render on the GPU.</p>
<p>If this flag is not set the requested render is not possible with the requested GPU, because of parameters or render settings.</p>
<p>The host may re-call PreRender with another what_gpu option (or PF_GPU_Framework_None).</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
  <span class="n">PF_RenderRequest</span>  <span class="n">output_request</span><span class="p">;</span> <span class="c1">// what the effect is being asked to render</span>
  <span class="kt">short</span>             <span class="n">bitdepth</span><span class="p">;</span>       <span class="c1">// bitdepth the effect is being driven in (in bpc)</span>
  <span class="k">const</span>             <span class="kt">void</span> <span class="o">*</span><span class="n">gpu_data</span><span class="p">;</span> <span class="c1">// (new AE 16.0)</span>
  <span class="n">PF_GPU_Framework</span>  <span class="n">what_gpu</span><span class="p">;</span>       <span class="c1">// (new AE 16.0)</span>
  <span class="n">A_u_long</span>          <span class="n">device_index</span><span class="p">;</span>   <span class="c1">// (new AE 16.0) For use in conjunction with PrSDKGPUDeviceSuite</span>
<span class="p">}</span> <span class="n">PF_PreRenderInput</span><span class="p">;</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_Cmd_SMART_RENDER</span></code></td>
<td>SmartFX only. Perform rendering and provide output for the area(s) the effect was asked to render.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="messaging">
<span id="effect-basics-command-selectors-messaging"></span><h4>Messaging<a class="headerlink" href="#messaging" title="Permalink to this headline">¶</a></h4>
<p>The communication channel between After Effects and your plug-in.</p>
<table border="1" class="docutils">
<colgroup>
<col width="18%" />
<col width="82%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Selector</strong></th>
<th class="head"><strong>Response</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_Cmd_EVENT</span></code></td>
<td><p class="first">This selector makes use of the extra parameter; the type of event to be handled is indicated by the e_type field, a member of the structure pointed to by extra.</p>
<p class="last">See <a class="reference internal" href="index.html#effect-ui-events-effect-ui-events"><span class="std std-ref">Effect UI &amp; Events</span></a>.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_Cmd_USER_CHANGED_PARAM</span></code></td>
<td><p class="first">The user changed a parameter value. You will receive this command only if you’ve set the <code class="docutils literal notranslate"><span class="pre">PF_ParamFlag_SUPERVISE</span></code> flag.</p>
<p>You modify the parameter to control values, or make one parameter’s value affect others. A parameter can be modified by different actions.</p>
<p><code class="docutils literal notranslate"><span class="pre">in_data.current_time</span></code> is set to the time of the frame that the user is looking at in the UI
(internally, the current time of the comp converted into layer time) while they are changing the param that triggered the <code class="docutils literal notranslate"><span class="pre">PF_Cmd_USER_CHANGED_PARAM</span></code>.</p>
<p>It’s also the time of a keyframe that is added automatically (if there isn’t one already, and the stopwatch is enabled).</p>
<p class="last">This is usually the same as the value passed for the PF_Cmd_RENDER that follows immediately after (unless caps lock is down), but not necessarily –
there could be other comp windows open that cause a render at a different time in response to the changed param.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_Cmd_UPDATE_PARAMS_UI</span></code></td>
<td><p class="first">The effect controls palette (ECP) needs to be updated. This might occur after opening the ECP or moving to a new time within the composition.</p>
<p>You can modify parameter characteristics (enabling or disabling them, for example) by calling <code class="docutils literal notranslate"><span class="pre">PF_UpdateParamUI()</span></code>.</p>
<p>Only cosmetic changes may be made in response to this command. Don’t change parameter values while responding to <code class="docutils literal notranslate"><span class="pre">PF_Cmd_UPDATE_PARAMS_UI</span></code>;
do so during <code class="docutils literal notranslate"><span class="pre">PF_Cmd_USER_CHANGED_PARAM</span></code> instead.</p>
<p>This command will only be sent regularly if <code class="docutils literal notranslate"><span class="pre">PF_OutFlag_SEND_UPDATE_PARAMS_UI</span></code> was set in the PiPL, and during <code class="docutils literal notranslate"><span class="pre">PF_Cmd_GLOBAL_SETUP</span></code>.</p>
<p class="last">NOTE: Never check out parameters during this selector. Recursive badness is almost guaranteed to result.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_Cmd_DO_DIALOG</span></code></td>
<td><p class="first">Display an options dialog. this is sent when the Options button is clicked (or a menu command has been selected).</p>
<p>This selector will only be sent if the effect has previously indicated that it has a dialog</p>
<p>(by setting the global <code class="docutils literal notranslate"><span class="pre">PF_OutFlag_I_DO_DIALOG</span></code> flag in response to <code class="docutils literal notranslate"><span class="pre">PF_Cmd_GLOBAL_SETUP</span></code>).</p>
<p>In version 3.x, the params passed with <code class="docutils literal notranslate"><span class="pre">PF_Cmd_DO_DIALOG</span></code> were invalid.</p>
<p>This is no longer the case; plug-ins can access non-layer parameters, check out parameters at other times, and perform UI updates during <code class="docutils literal notranslate"><span class="pre">PF_Cmd_DO_DIALOG</span></code>.</p>
<p class="last">They still may not change the parameter’s values.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_Cmd_ARBITRARY_CALLBACK</span></code></td>
<td><p class="first">Manage your arbitrary data type. You’ll only receive this if you’ve registered a custom data type parameter.</p>
<p>The extra parameter indicates which handler function is being called.</p>
<p class="last">Custom data types are discussed further in <a class="reference internal" href="index.html#effect-details-arbitrary-data-parameters-implementing-arbitrary-data"><span class="std std-ref">Implementing Arbitrary Data</span></a>.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_Cmd_GET_EXTERNAL_DEPENDENCIES</span></code></td>
<td><p class="first">Only sent if <code class="docutils literal notranslate"><span class="pre">PF_OutFlag_I_HAVE_EXTERNAL_DEPENDENCIES</span></code> was set during <code class="docutils literal notranslate"><span class="pre">PF_Cmd_GLOBAL_SETUP</span></code>.</p>
<p>Populate a string handle (in the PF_ExtDependenciesExtra pointed to by extra) with a description of your plug-in’s dependencies,
making sure to allocate space for the terminating NULL character.</p>
<p>Return just a <code class="docutils literal notranslate"><span class="pre">NULL</span></code> pointer for the string handle if there are no dependencies to report.</p>
<p>If the check type is <code class="docutils literal notranslate"><span class="pre">PF_DepCheckType_ALL_DEPENDENCIES</span></code>, report everything that might be required for your plug-in to render.</p>
<p class="last">Report only missing items (or a null string if nothing’s missing) if the check type is <code class="docutils literal notranslate"><span class="pre">PF_DepCheckType_MISSING_DEPENDENCIES</span></code>.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_Cmd_COMPLETELY_GENERAL</span></code></td>
<td><p class="first">Respond to an AEGP. The extra parameter points to whatever parameter the AEGP sent.</p>
<p class="last">AEGPs can only communicate with effects which respond to this selector.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_Cmd_QUERY_DYNAMIC_FLAGS</span></code></td>
<td><p class="first">Sent only to plug-ins which have specified <code class="docutils literal notranslate"><span class="pre">PF_OutFlag2_SUPPORTS_QUERY_DYNAMIC_FLAGS</span></code> in <code class="docutils literal notranslate"><span class="pre">PF_OutFlags2</span></code>, in their PiPL and during <code class="docutils literal notranslate"><span class="pre">PF_Cmd_GLOBAL_SETUP</span></code>.</p>
<p>With all of the dynamic flags, if you will ever change them during this command, you must have set the flag on during <code class="docutils literal notranslate"><span class="pre">PF_Cmd_GLOBAL_SETUP</span></code>.</p>
<p>This selector will be sent at arbitrary times.</p>
<p>In response, the effect should access its (non-layer) parameters using <code class="docutils literal notranslate"><span class="pre">PF_CHECKOUT_PARAM</span></code>, and
decide whether any of the flags that support <code class="docutils literal notranslate"><span class="pre">PF_Cmd_QUERY_DYNAMIC_FLAGS</span></code> should be set, such as:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">PF_OutFlag_WIDE_TIME_INPUT</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PF_OutFlag_NON_PARAM_VARY</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PF_OutFlag_PIX_INDEPENDENT</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PF_OutFlag_I_USE_SHUTTER_ANGLE</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PF_OutFlag2_I_USE_3D_CAMERA</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PF_OutFlag2_I_USE_3D_LIGHTS</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PF_OutFlag2_DOESNT_NEED_EMPTY_PIXELS</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PF_OutFlag2_REVEALS_ZERO_ALPHA</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PF_OutFlag2_DEPENDS_ON_UNREFERENCED_MASKS</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PF_OutFlag2_OUTPUT_IS_WATERMARKED</span></code></li>
</ul>
</div></blockquote>
<p class="last">After Effects uses this information for caching and optimization purposes, so try to respond as quickly as possible.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_Cmd_GPU_DEVICE_SETUP</span></code></td>
<td><p class="first">This selector can be called at any time by the host. It will be called not more than once for each GPU device.</p>
<p>Multiple GPU devices may be in the setup state at one time.</p>
<p>It will be called after GlobalSetup and before SequenceSetup.</p>
<p>The intent is for the effect to do GPU initialization if necessary and to give the effect an opportunity to
opt out of a GPU device based solely on the properties of that device, and not any render context (frame size, etc).</p>
<p>If the effect rejects the GPU device it will get called for CPU render.</p>
<p><code class="docutils literal notranslate"><span class="pre">PF_InData::what_gpu</span> <span class="pre">!=</span> <span class="pre">PF_GPU_Framework_None</span></code> is expected.</p>
<p>Effect is expected to set one or both of the <code class="docutils literal notranslate"><span class="pre">PF_OutFlag2_SUPPORTS_GPU_RENDER_Fxx</span></code> flags in <code class="docutils literal notranslate"><span class="pre">PF_OutData::out_flags2</span></code> if the device and framework in what_gpu is supported.</p>
<p>Note that only <code class="docutils literal notranslate"><span class="pre">PF_OutFlag2_SUPPORTS_GPU_RENDER_F32</span></code> will be in AE 16.0.</p>
<p>Effects that do not set flags here will NOT be considered to support GPU rendering for any of these devices.</p>
<p><code class="docutils literal notranslate"><span class="pre">PF_GPUDeviceSetupOutput::gpu_data</span></code> is a plug-in owned pointer that must be released with a the <code class="docutils literal notranslate"><span class="pre">PF_Cmd_GPU_DEVICE_SETDOWN</span></code> selector.</p>
<p class="last">This pointer is also available at render time.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_Cmd_GPU_DEVICE_SETDOWN</span></code></td>
<td><p class="first">Release any resources associated with gpu_data. In AE this will be called just before GPU device release.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
  <span class="kt">void</span>              <span class="o">*</span><span class="n">gpu_data</span><span class="p">;</span>  <span class="c1">// effect must dispose.</span>
  <span class="n">PF_GPU_Framework</span>  <span class="n">what_gpu</span><span class="p">;</span>
  <span class="n">A_u_long</span>          <span class="n">device_index</span><span class="p">;</span> <span class="c1">// For use in conjunction with PrSDKGPUDeviceSuite</span>
<span class="p">}</span> <span class="n">PF_GPUDeviceSetdownInput</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
  <span class="n">PF_GPUDeviceSetdownInput</span>  <span class="n">input</span><span class="p">;</span>
<span class="p">}</span> <span class="n">PF_GPUDeviceSetdownExtra</span><span class="p">;</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_Cmd_GPU_SMART_RENDER_GPU</span></code></td>
<td><p class="first">GPU equivalent to the existing <code class="docutils literal notranslate"><span class="pre">PF_Cmd_SMART_RENDER</span></code> selector.</p>
<p>At render time, either the <code class="docutils literal notranslate"><span class="pre">PF_Cmd_SMART_RENDER</span></code> or the <code class="docutils literal notranslate"><span class="pre">PF_Cmd_SMART_RENDER_GPU</span></code> selector will be called,
depending on whether the effect is expected to produce a CPU or GPU frame as output.</p>
<p><code class="docutils literal notranslate"><span class="pre">PF_Cmd_SMART_RENDER_GPU</span></code> will only be called when <code class="docutils literal notranslate"><span class="pre">what_gpu</span> <span class="pre">!=</span> <span class="pre">PF_GPU_Framework_None</span></code>, and has effects on any input / output <code class="docutils literal notranslate"><span class="pre">PF_LayerDef</span></code>’s.</p>
<p>All frame check-ins and check-outs will operate on GPU frames when this selector is in progress. Note <code class="docutils literal notranslate"><span class="pre">PF_Cmd_SMART_RENDER</span></code> shares the <code class="docutils literal notranslate"><span class="pre">Extra</span></code> structs.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
  <span class="n">PF_RenderRequest</span>  <span class="n">output_request</span><span class="p">;</span>   <span class="c1">// what the effect is being asked to render</span>
  <span class="kt">short</span>             <span class="n">bitdepth</span><span class="p">;</span>         <span class="c1">// bitdepth the effect is being driven in (in bpc)</span>
  <span class="kt">void</span>              <span class="o">*</span><span class="n">pre_render_data</span><span class="p">;</span> <span class="c1">// passed back from value placed in extra-&gt;output-&gt;pre_render_data during PF_Cmd_PRE_RENDER</span>
  <span class="k">const</span> <span class="kt">void</span>        <span class="o">*</span><span class="n">gpu_data</span><span class="p">;</span>        <span class="c1">// (new AE 16.0)</span>
  <span class="n">PF_GPU_Framework</span>  <span class="n">what_gpu</span><span class="p">;</span>         <span class="c1">// (new AE 16.0)</span>
  <span class="n">A_u_long</span>          <span class="n">device_index</span><span class="p">;</span>     <span class="c1">// (new AE 16.0)</span>
<span class="p">}</span> <span class="n">PF_SmartRenderInput</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
  <span class="n">PF_SmartRenderInput</span> <span class="o">*</span><span class="n">input</span><span class="p">;</span>
  <span class="n">PF_SmartRenderCallbacks</span> <span class="o">*</span><span class="n">cb</span><span class="p">;</span>
<span class="p">}</span> <span class="n">PF_SmartRenderExtra</span><span class="p">;</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">what_gpu</span></code> and <code class="docutils literal notranslate"><span class="pre">device_index</span></code> fields are in the extra input for GPU-related selectors indicates to the plug-in the GPU framework to be used for rendering.</p>
<p>Input and output buffers will be prepared on this framework and device.</p>
<p>The device, context, command queue, and other associated GPU state can be queried with <code class="docutils literal notranslate"><span class="pre">PrSDKGPUDeviceSuite::GetDeviceInfo</span></code>.</p>
<p class="last"><code class="docutils literal notranslate"><span class="pre">what_gpu</span></code> will be the same between <code class="docutils literal notranslate"><span class="pre">PF_Cmd_SMART_PRE_RENDER</span></code> and <code class="docutils literal notranslate"><span class="pre">PF_Cmd_SMART_RENDER_GPU</span></code> selector calls.</p>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<hr class="docutils" />
<div class="section" id="what-s-the-difference">
<h3>What’s The Difference?<a class="headerlink" href="#what-s-the-difference" title="Permalink to this headline">¶</a></h3>
<p>There is a subtle difference between <code class="docutils literal notranslate"><span class="pre">PF_Cmd_USER_CHANGED_PARAM</span></code> and <code class="docutils literal notranslate"><span class="pre">PF_Cmd_UPDATE_PARAMS_UI</span></code>.</p>
<p>Effects need to distinguish between the user actually changing a parameter value (<code class="docutils literal notranslate"><span class="pre">PF_Cmd_USER_CHANGED_PARAM</span></code>), and just scrubbing around the timeline (<code class="docutils literal notranslate"><span class="pre">PF_Cmd_UPDATE_PARAMS_UI</span></code>), which is also sent when the plug-in is first loaded).</p>
<p>Only the first few command selectors are predictable; the rest of the calling sequence is dictated by user action.</p>
<p>When first applied, a plug-in receives <code class="docutils literal notranslate"><span class="pre">PF_Cmd_GLOBAL_SETUP</span></code>, then <code class="docutils literal notranslate"><span class="pre">PF_Cmd_PARAM_SETUP</span></code>. Each time the user adds the effect to a layer, <code class="docutils literal notranslate"><span class="pre">PF_Cmd_SEQUENCE_SETUP</span></code> is sent.</p>
<p>For each frame rendered by a basic non-SmartFX effect, After Effects sends <code class="docutils literal notranslate"><span class="pre">PF_Cmd_FRAME_SETUP</span></code>, then <code class="docutils literal notranslate"><span class="pre">PF_Cmd_RENDER</span></code>, then <code class="docutils literal notranslate"><span class="pre">PF_Cmd_FRAME_SETDOWN</span></code>. All effect plug-ins must respond to <code class="docutils literal notranslate"><span class="pre">PF_Cmd_RENDER</span></code><em>.</em></p>
<p>For SmartFX, <code class="docutils literal notranslate"><span class="pre">PF_Cmd_SMART_PRE_RENDER</span></code> may be sent any number of times, before a single <code class="docutils literal notranslate"><span class="pre">PF_Cmd_SMART_RENDER</span></code> is sent.</p>
<p><code class="docutils literal notranslate"><span class="pre">PF_Cmd_SEQUENCE_SETDOWN</span></code> is sent on exit, when the user removes an effect or closes the project. <code class="docutils literal notranslate"><span class="pre">PF_Cmd_SEQUENCE_RESETUP</span></code> is sent when a project is loaded or when the layer to which it’s applied changes. <code class="docutils literal notranslate"><span class="pre">PF_Cmd_SEQUENCE_FLATTEN</span></code> is sent when the After Effects project is written out to disk.</p>
<p><code class="docutils literal notranslate"><span class="pre">PF_Cmd_ABOUT</span></code> is sent when the user chooses <em>About…</em> from the Effect Controls Window (ECW).</p>
<p><code class="docutils literal notranslate"><span class="pre">PF_Cmd_GLOBAL_SETDOWN</span></code> is sent when After Effects closes, or when the last instance of the effect is removed. Do not rely on this message to determine when your plug-in is being removed from memory; use OS-specific entry points.</p>
</div>
</div>
<span id="document-effect-basics/PF_InData"></span><div class="section" id="pf-indata">
<span id="effect-basics-pf-indata"></span><h2>PF_InData<a class="headerlink" href="#pf-indata" title="Permalink to this headline">¶</a></h2>
<p>After Effects communicates system, project, layer and audio information using <code class="docutils literal notranslate"><span class="pre">PF_InData</span></code>. This structure is updated before each command selector is sent to a plug-in.</p>
<p>Fields valid only during specific <a class="reference internal" href="index.html#effect-basics-command-selectors"><span class="std std-ref">PF_Cmds</span></a> are noted.</p>
<p>Also, don’t worry; although <code class="docutils literal notranslate"><span class="pre">PF_InData</span></code> is dauntingly large, you need not memorize each member’s purpose; you’ll use some of the fields some of the time.</p>
<hr class="docutils" />
<div class="section" id="pf-indata-members">
<span id="effect-basics-pf-indata-pf-indata-members"></span><h3>PF_InData Members<a class="headerlink" href="#pf-indata-members" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="14%" />
<col width="86%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Name</strong></th>
<th class="head"><strong>Description</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">inter</span></code></td>
<td><p class="first">Callbacks used for user interaction, adding parameters, checking whether the user has interrupted the effect, displaying a progress bar,
and obtaining source frames and parameter values at times other than the current time being rendered.</p>
<p class="last">This very useful function suite is described in <a class="reference internal" href="index.html#effect-details-interaction-callback-functions"><span class="std std-ref">Interaction Callback Functions</span></a>.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">utils</span></code></td>
<td>Graphical and mathematical callbacks. This pointer is defined at all times.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">effect_ref</span></code></td>
<td><p class="first">Opaque data that must be passed to most of the various callback routines.</p>
<p class="last">After Effects uses this to identify your plug-in.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">quality</span></code></td>
<td><p class="first">The current quality setting, either <code class="docutils literal notranslate"><span class="pre">PF_Quality_HI</span></code> or <code class="docutils literal notranslate"><span class="pre">PF_Quality_LO</span></code>.</p>
<p>Effects should perform faster in LO, and more accurately in HI.</p>
<p>The graphics utility callbacks perform differently between LO and HI quality; so should your effect!</p>
<p class="last">This field is defined during all frame and sequence selectors.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">version</span></code></td>
<td>Effects specification version, Indicate the version you need to run successfully during <code class="docutils literal notranslate"><span class="pre">PF_Cmd_GLOBAL_SETUP</span></code>.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">serial_num</span></code></td>
<td>The serial number of the invoking application.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">appl_id</span></code></td>
<td><p class="first">The identifier of the invoking application.</p>
<p>If your plug-in is running in After Effects, <code class="docutils literal notranslate"><span class="pre">appl_id</span></code> contains the application creator code ‘FXTC’.</p>
<p>If it is running in <a class="reference internal" href="index.html#ppro-ppro"><span class="std std-ref">Premiere Pro &amp; Other Hosts</span></a> it will be ‘PrMr’.</p>
<p class="last">Use this to test whether your plug-in, licensed for use with one application, is being used with another.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">num_params</span></code></td>
<td>Input parameter count.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">what_cpu</span></code></td>
<td>Under macOS this contains the Gestalt value for CPU type (see Inside Macintosh, volume 6). Undefined on Windows.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">what_fpu</span></code></td>
<td><p class="first">Under macOS this contains the Gestalt value for FPU type.</p>
<p class="last">Undefined on Windows.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">current_time</span></code></td>
<td><p class="first">The time of the current frame being rendered, valid during <a class="reference internal" href="index.html#effect-basics-command-selectors-frame-selectors"><span class="std std-ref">PF_Cmd_RENDER</span></a>.
This is the current time in the layer, not in any composition.
If a layer starts at other than time 0 or is time-stretched, layer time and composition time are distinct.</p>
<p>The current frame number is <code class="docutils literal notranslate"><span class="pre">current_time</span></code> divided by <code class="docutils literal notranslate"><span class="pre">time_step</span></code>.
The current time in seconds is <code class="docutils literal notranslate"><span class="pre">current_time</span></code> divided by time_scale.</p>
<p>To handle time stretching, composition frame rate changes, and time remapping, After Effects may ask effects to render at non-integral times (between two frames).</p>
<p>Be prepared for this; don’t assume that you’ll only be asked for frames on frame boundaries.</p>
<p class="last">NOTE: As of CS3 (8.0), effects may be asked to render at negative current times. Deal!</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">time_step</span></code></td>
<td><p class="first">The duration of the current source frame being rendered.</p>
<p>In several situations with nested compositions, this source frame duration may be different than the time span between frames in the layer (<code class="docutils literal notranslate"><span class="pre">local_time_step</span></code>).</p>
<p>This value can be converted to seconds by dividing by time_scale.</p>
<p>When calculating other source frame times, such as for <a class="reference internal" href="index.html#effect-details-interaction-callback-functions-interaction-callbacks"><span class="std std-ref">PF_CHECKOUT_PARAM</span></a>, use this value rather than <code class="docutils literal notranslate"><span class="pre">local_time_step</span></code>.</p>
<p>Can be negative if the layer is time-reversed. Can vary from one frame to the next if time remapping is applied on a nested composition.</p>
<p>Can differ from local_time_step when source material is stretched or remapped in a nested composition.</p>
<p>For example, this could occur when an inner composition is nested within an outer composition with a different frame rate, or time remapping is applied to the outer composition.</p>
<p>This value will be 0 during <a class="reference internal" href="index.html#effect-basics-command-selectors-sequence-selectors"><span class="std std-ref">PF_Cmd_SEQUENCE_SETUP</span></a> if it is not constant for all frames.</p>
<p>It will be set correctly during <code class="docutils literal notranslate"><span class="pre">PF_Cmd_FRAME_SETUP</span></code> and <code class="docutils literal notranslate"><span class="pre">PF_Cmd_FRAME_SETDOWN</span></code> selectors.</p>
<p class="last">WARNING: This can be zero, so check it before you divide.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">total_time</span></code></td>
<td><p class="first">Duration of the layer.</p>
<p>If the layer is time-stretched longer than 100%, the value will be adjusted accordingly; but if the layer is time-stretched shorter, the value will not be affected.</p>
<p>If time remapping is enabled, this value will be the duration of the composition.</p>
<p class="last">This value can be converted to seconds by dividing by <code class="docutils literal notranslate"><span class="pre">time_scale</span></code>.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">local_time_step</span></code></td>
<td><p class="first">Time difference between frames in the layer.</p>
<p>Affected by any time stretch applied to a layer.</p>
<p>Can be negative if the layer is time-reversed.</p>
<p>Unlike <code class="docutils literal notranslate"><span class="pre">time_step</span></code>, this value is constant from one frame to the next.</p>
<p>This value can be converted to seconds by dividing by <code class="docutils literal notranslate"><span class="pre">time_scale</span></code>.</p>
<p class="last">For a step value that is constant over the entire frame range of the layer, use <code class="docutils literal notranslate"><span class="pre">local_time_step</span></code>, which is based on the composition’s framerate and layer stretch.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">time_scale</span></code></td>
<td><p class="first">The units per second that <code class="docutils literal notranslate"><span class="pre">current_time</span></code>, <code class="docutils literal notranslate"><span class="pre">time_step</span></code>, <code class="docutils literal notranslate"><span class="pre">local_time_step</span></code> and <code class="docutils literal notranslate"><span class="pre">total_time</span></code> are in.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">time_scale</span></code> is 30, then the units of <code class="docutils literal notranslate"><span class="pre">current_time</span></code>, <code class="docutils literal notranslate"><span class="pre">time_step</span></code>, <code class="docutils literal notranslate"><span class="pre">local_time_step</span></code> and <code class="docutils literal notranslate"><span class="pre">total_time</span></code> are in 30ths of a second.</p>
<p class="last">The <code class="docutils literal notranslate"><span class="pre">time_step</span></code> might then be 3, indicating that the sequence is actually being rendered at 10 frames per second. <code class="docutils literal notranslate"><span class="pre">total_time</span></code> might be 105, indicating that the sequence is 3.5 seconds long.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">field</span></code></td>
<td><p class="first">Valid only if <a class="reference internal" href="index.html#effect-basics-pf-outdata-pf-outflags"><span class="std std-ref">PF_OutFlag_PIX_INDEPENDENT</span></a> was set during <a class="reference internal" href="index.html#effect-basics-command-selectors-global-selectors"><span class="std std-ref">PF_Cmd_GLOBAL_SETUP</span></a>.</p>
<p class="last">Check this field to see if you can process just the upper or lower field.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">shutter_angle</span></code></td>
<td><p class="first">Motion blur shutter angle. Values range from 0 to 1, which represents 360 degrees.</p>
<p>Will be zero unless motion blur is enabled and checked for the target layer.</p>
<p><code class="docutils literal notranslate"><span class="pre">shutter_angle</span> <span class="pre">==</span> <span class="pre">180</span></code> means the time interval between <code class="docutils literal notranslate"><span class="pre">current_time</span></code> and <code class="docutils literal notranslate"><span class="pre">current_time</span> <span class="pre">+</span> <span class="pre">1/2</span> <span class="pre">time_step</span></code>.</p>
<p>Valid only if <a class="reference internal" href="index.html#effect-basics-pf-outdata-pf-outflags"><span class="std std-ref">PF_OutFlag_I_USE_SHUTTER_ANGLE</span></a> was set during <a class="reference internal" href="index.html#effect-basics-command-selectors-global-selectors"><span class="std std-ref">PF_Cmd_GLOBAL_SETUP</span></a>.</p>
<p class="last">See the section on <a class="reference internal" href="index.html#effect-details-motion-blur"><span class="std std-ref">Motion Blur</span></a> for details on how to implement motion blur in your effect.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">width</span></code></td>
<td><p class="first">Dimensions of the source layer, which are not necessarily the same as the width and height fields in the input image parameter.</p>
<p class="last">Buffer resizing effects can cause this difference. Not affected by downsampling.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">height</span></code></td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">extent_hint</span></code></td>
<td><p class="first">The intersection of the visible portions of the input and output layers; encloses the composition rectangle transformed into layer coordinates.</p>
<p class="last">Iterating over only this rectangle of pixels can speed your effect dramatically. See <a class="reference internal" href="#effect-basics-pf-indata-extent-hint-usage"><span class="std std-ref">extent_hint Usage</span></a> later in this chapter regarding proper usage.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">output_origin_x</span></code></td>
<td>The origin of the output buffer in the input buffer. Non-zero only when the effect changes the origin.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">output_origin_y</span></code></td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">downsample_x</span></code></td>
<td><p class="first">Point control parameters and layer parameter dimensions are automatically adjusted to compensate for a user telling After Effects to render only every nth pixel.</p>
<p>Effects need the downsampling factors to interpret scalar parameters representing pixel distances in the image (like sliders).</p>
<p>For example, a blur of 4 pixels should be interpreted as a blur of 2 pixels if the downsample factor is 1/2 in each direction (downsample factors are represented as ratios.)</p>
<p>Valid only during</p>
<blockquote class="last">
<div><ul class="simple">
<li><a class="reference internal" href="index.html#effect-basics-command-selectors-sequence-selectors"><span class="std std-ref">PF_Cmd_SEQUENCE_SETUP</span></a>,</li>
<li><a class="reference internal" href="index.html#effect-basics-command-selectors-sequence-selectors"><span class="std std-ref">PF_Cmd_SEQUENCE_RESETUP</span></a>,</li>
<li><a class="reference internal" href="index.html#effect-basics-command-selectors-frame-selectors"><span class="std std-ref">PF_Cmd_FRAME_SETUP</span></a>,</li>
<li><a class="reference internal" href="index.html#effect-basics-command-selectors-frame-selectors"><span class="std std-ref">PF_Cmd_RENDER</span></a></li>
</ul>
</div></blockquote>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">downsample_y</span></code></td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">pixel_aspect_ratio</span></code></td>
<td>Pixel aspect ratio (width over height).</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">in_flags</span></code></td>
<td>Unused.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">global_data</span></code></td>
<td>Data stored by your plug-in during other selectors. Locked and unlocked by After Effects before and after calling the plug-in.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">sequence_data</span></code></td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">frame_data</span></code></td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">start_sampL</span></code></td>
<td>Starting sample number, relative to the start of the audio layer.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">dur_sampL</span></code></td>
<td>Duration of audio, expressed as the number of samples. Audio-specific.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">total_sampL</span></code></td>
<td>Samples in the audio layer; equivalent to total_time expressed in samples.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">src_snd</span></code></td>
<td>PF_SoundWorld describing the input sound. Audio-specific.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">pica_basicP</span></code></td>
<td>Pointer to the PICA Basic suite, used to acquire other suites.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">pre_effect_source_origin_x</span></code></td>
<td><p class="first">Origin of the source image in the input buffer. Valid only when sent with a frame selector.</p>
<p>Non-zero only if one or more effects that preceded this effect on the same layer resized the output buffer and moved the origin.</p>
<p>Check for both the resize and the new origin to determine output area.</p>
<p>This is useful for effects which have implicit spatial operations (other than point controls), like flipping a file around an image’s center.</p>
<p class="last">NOTE: Checked-out point parameters are adjusted for the pre-effect origin at the current time, not the time being checked out.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">pre_effect_source_origin_y</span></code></td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">shutter_phase</span></code></td>
<td>Offset from frame time to shutter open time as a percentage of a frame duration.</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
</div>
<div class="section" id="extent-hint-usage">
<span id="effect-basics-pf-indata-extent-hint-usage"></span><h3>extent_hint Usage<a class="headerlink" href="#extent-hint-usage" title="Permalink to this headline">¶</a></h3>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">hint rectangles are much more effective…and complicated…for <a class="reference internal" href="index.html#smartfx-smartfx"><span class="std std-ref">SmartFX</span></a>.</p>
</div>
<p>Use <code class="docutils literal notranslate"><span class="pre">extent_hint</span></code> to process only those pixels for which output is required; this is one of the simplest optimizations you can make.</p>
<p>Tell After Effects you use <code class="docutils literal notranslate"><span class="pre">in_data&gt;extent_hint</span></code> by setting <a class="reference internal" href="index.html#effect-basics-pf-outdata-pf-outflags"><span class="std std-ref">PF_OutFlag_USE_OUTPUT_EXTENT</span></a> in <a class="reference internal" href="index.html#effect-basics-pf-outdata"><span class="std std-ref">PF_OutData</span></a> during <a class="reference internal" href="index.html#effect-basics-command-selectors-global-selectors"><span class="std std-ref">PF_Cmd_GLOBAL_SETUP</span></a> (and in your PiPL).</p>
<p>Disable caching from the preferences menu before testing <code class="docutils literal notranslate"><span class="pre">extent_hint</span></code> code, so After Effects renders your effect whenever anything in your composition changes.</p>
<p>Otherwise, the caching mechanism would obscure your plug-in’s (possibly incorrect) output.</p>
<p>Move the layer within the composition so it’s cropped. The <code class="docutils literal notranslate"><span class="pre">output&gt;extent_hint</span></code> is the portion of the layer which is visible in the composition.</p>
<p>Add a mask to your layer and move it around.</p>
<p>This changes the <code class="docutils literal notranslate"><span class="pre">extent_hint</span></code>, which encloses all of the non-zero alpha areas of the image.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">in_data&gt;extent_hint</span></code> is the intersection of these two rectangles (the composition and the mask), and changes whenever they do.</p>
<p>Extent rectangles are computed in the coordinate space of the original input layer, before resizing and origin shifting, to simplify rectangle intersection between the input and output extents for effects which set <a class="reference internal" href="index.html#effect-basics-pf-outdata-pf-outflags"><span class="std std-ref">PF_OutFlag_PIX_INDEPENDENT</span></a>.</p>
<p>To get the output extent in the coordinate system of the output buffer, offset the <code class="docutils literal notranslate"><span class="pre">extent_hint</span></code> by the <code class="docutils literal notranslate"><span class="pre">PF_InData-&gt;output_origin_x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code> fields.</p>
<p>Account for downsampling when computing output size; users must be able to render at full resolution.</p>
<p>If the output buffer exceeds 30,000 by 30,000, clamp it to that size, and consider displaying an alert dialog.</p>
<p>Once your code behaves correctly, enable the cache and see how frequently the effect needs to re-render.</p>
<p>Consider a drop shadow; users frequently apply a static drop shadow to a still image.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">output&gt;extent_hint</span></code> is ignored, so the cache is used more often.</p>
<p>For buffer-expanding effects, intersect the <code class="docutils literal notranslate"><span class="pre">output&gt;extent_hint</span></code> with your plug-in’s transformed bounds and sets the size accordingly during <a class="reference internal" href="index.html#effect-basics-command-selectors-frame-selectors"><span class="std std-ref">PF_Cmd_FRAME_SETUP</span></a>.</p>
</div>
<hr class="docutils" />
<div class="section" id="now-with-20-more-pixels">
<h3>Now with 20% More Pixels!<a class="headerlink" href="#now-with-20-more-pixels" title="Permalink to this headline">¶</a></h3>
<p>As of 6.0, the extent_hints passed are 20% larger than the layer itself, to help with our predictive rendering decisions.</p>
<p>Numerous effects expand the buffer “just a touch”, and After Effects often uses the hint rectangles later.</p>
</div>
<hr class="docutils" />
<div class="section" id="point-controls-and-buffer-expansion">
<h3>Point Controls And Buffer Expansion<a class="headerlink" href="#point-controls-and-buffer-expansion" title="Permalink to this headline">¶</a></h3>
<p>Effects which expand the output buffer position the original layer’s upper left corner by setting set <code class="docutils literal notranslate"><span class="pre">output_origin_x/y</span></code> in <code class="docutils literal notranslate"><span class="pre">PF_InData</span></code> during <a class="reference internal" href="index.html#effect-basics-command-selectors-frame-selectors"><span class="std std-ref">PF_Cmd_FRAME_SETUP</span></a>.</p>
<p>This shift is reported to subsequent effects in the <code class="docutils literal notranslate"><span class="pre">pre_effect_source_origin_x/y</span></code>. Point parameters are adjusted for this shift automatically.</p>
<p>Apply a buffer expander such as Gaussian Blur or the Resizer SDK sample, <em>before</em> your effect, and use a large resize value.</p>
<p>If your effect is not handling <code class="docutils literal notranslate"><span class="pre">pre_effect_source_origin_x/y</span></code> correctly, turning the blur on and off will shift the position of the output.</p>
<p>All point parameter values (at any time) have shift values described by <code class="docutils literal notranslate"><span class="pre">pre_effect_source_origin_x/y</span></code>. For most effects this works transparently.</p>
<p>However, if a buffer expansion changes over time (as with an animated blur amount), the origin shift will move non-animated points.</p>
<p>Consider this when designing effects which cache point parameter values between frames.</p>
</div>
</div>
<span id="document-effect-basics/PF_OutData"></span><div class="section" id="pf-outdata">
<span id="effect-basics-pf-outdata"></span><h2>PF_OutData<a class="headerlink" href="#pf-outdata" title="Permalink to this headline">¶</a></h2>
<p>Communicate changes made by your plug-in to After Effects using <code class="docutils literal notranslate"><span class="pre">PF_OutData</span></code>. Valid times for altering these fields are noted.</p>
<hr class="docutils" />
<div class="section" id="pf-outdata-members">
<h3>PF_OutData Members<a class="headerlink" href="#pf-outdata-members" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="78%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Field</strong></th>
<th class="head"><strong>Description</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">my_version</span></code></td>
<td><p class="first">Set this flag (using the PF_VERSION macro) to the version of your plug-in code.</p>
<p class="last">After Effects uses this data to decide which of duplicate effects to load.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">name</span></code></td>
<td>Unused.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">global_data</span></code></td>
<td><p class="first">Handle which will be returned to you in <a class="reference internal" href="index.html#effect-basics-pf-indata"><span class="std std-ref">PF_InData</span></a> with every call.</p>
<p class="last">Use After Effects’ memory allocation functions.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">num_params</span></code></td>
<td><p class="first">After Effects checks this field against the number of calls made to</p>
<p class="last">PF_ADD_PARAM, as well as the implicit input layer.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">sequence_data</span></code></td>
<td>Allocatable upon receiving <a class="reference internal" href="index.html#effect-basics-command-selectors-sequence-selectors"><span class="std std-ref">PF_Cmd_SEQUENCE_SETUP</span></a>,
this handle will be passed back to you in <a class="reference internal" href="index.html#effect-basics-pf-indata"><span class="std std-ref">PF_InData</span></a> during all subsequent calls.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">flat_sdata_size</span></code></td>
<td>Unused (After Effects knows the size, because you used its allocation functions to get the memory in the first place).</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">frame_data</span></code></td>
<td><p class="first">Handle you (might have) allocated during <a class="reference internal" href="index.html#effect-basics-command-selectors-frame-selectors"><span class="std std-ref">PF_Cmd_FRAME_SETUP</span></a>.</p>
<p>This is never written to disk; it was used to pass information from your <a class="reference internal" href="index.html#effect-basics-command-selectors-frame-selectors"><span class="std std-ref">PF_Cmd_FRAME_SETUP</span></a> response to your
<a class="reference internal" href="index.html#effect-basics-command-selectors-frame-selectors"><span class="std std-ref">PF_Cmd_RENDER</span></a> or <a class="reference internal" href="index.html#effect-basics-command-selectors-frame-selectors"><span class="std std-ref">PF_Cmd_FRAME_SETDOWN</span></a> (which you must do if you resize the output buffer).</p>
<p class="last">Otherwise, this memory is rarely used.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">width</span></code>, <code class="docutils literal notranslate"><span class="pre">height</span></code>, <code class="docutils literal notranslate"><span class="pre">origin</span></code></td>
<td><p class="first">Set during <a class="reference internal" href="index.html#effect-basics-command-selectors-frame-selectors"><span class="std std-ref">PF_Cmd_FRAME_SETUP</span></a> if the output image size differs from the input.</p>
<p><code class="docutils literal notranslate"><span class="pre">width</span></code> and <code class="docutils literal notranslate"><span class="pre">height</span></code> are the size of the output buffer, and <code class="docutils literal notranslate"><span class="pre">origin</span></code> is the point the input should map to in the output.</p>
<p class="last">To create a 5-pixel drop shadow up and left, set origin to (5, 5).</p>
</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#effect-basics-pf-outdata-pf-outflags"><span class="std std-ref">out_flags</span></a></td>
<td>Send messages to After Effects. OR together multiple values.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">return_msg</span></code></td>
<td>After Effects displays any C string you put here (checked and cleared after every command selector).</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">start_sampL</span></code>,
<code class="docutils literal notranslate"><span class="pre">dur_sampL</span></code>,
<code class="docutils literal notranslate"><span class="pre">dest_snd</span></code></td>
<td>Used only for <a class="reference internal" href="index.html#audio-audio"><span class="std std-ref">Audio</span></a> commands</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#effect-basics-pf-outdata-pf-outflags2"><span class="std std-ref">out_flags2</span></a></td>
<td>Send messages to After Effects. OR together multiple values.</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
</div>
<div class="section" id="pf-outflags">
<span id="effect-basics-pf-outdata-pf-outflags"></span><h3>PF_OutFlags<a class="headerlink" href="#pf-outflags" title="Permalink to this headline">¶</a></h3>
<p>These flags communicate capability and status information to After Effects. In previous versions they were also used to send rudimentary messages, e.g. refresh the UI, send an error message.</p>
<p>These capabilities have been supplanted by function suites, and all new messaging functions will come in that format. However, capability flags are still contained in the <a class="reference internal" href="index.html#intro-pipl-resources"><span class="std std-ref">PiPL</span></a>.</p>
<p>Update both the PiPL and your source code when you make a change. Many of these flags can be changed during an After Effects session.</p>
<table border="1" class="docutils">
<colgroup>
<col width="18%" />
<col width="82%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Flag</strong></th>
<th class="head"><strong>Indicates</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_OutFlag_KEEP_RESOURCE_OPEN</span></code></td>
<td><p class="first">The plug-in’s resources must be available during all commands.</p>
<p>During <a class="reference internal" href="index.html#effect-basics-command-selectors-global-selectors"><span class="std std-ref">PF_Cmd_GLOBAL_SETUP</span></a>, the plug-in’s resources are always open, but unavailable at all other times
(except during <a class="reference internal" href="index.html#effect-basics-command-selectors-global-selectors"><span class="std std-ref">PF_Cmd_ABOUT</span></a> and <a class="reference internal" href="index.html#effect-basics-command-selectors-messaging"><span class="std std-ref">PF_Cmd_DO_DIALOG</span></a>), unless this flag has been set.</p>
<p>Set if you need access to resources at any time other than during <a class="reference internal" href="index.html#effect-basics-command-selectors-global-selectors"><span class="std std-ref">PF_Cmd_GLOBAL_SETUP</span></a>.</p>
<p class="last">NOTE: We recommend the plug-in load and store the necessary resources in global data, rather than keeping the file’s resources open.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_OutFlag_WIDE_TIME_INPUT</span></code></td>
<td><p class="first">The effect checks out a parameter at a time other than <code class="docutils literal notranslate"><span class="pre">current_time</span></code>.</p>
<p>If you use a parameter (including layer parameters) from another time, set this flag.</p>
<p>Otherwise, After Effects won’t correctly invalidate cached frames used by your effect.</p>
<p>Set during <a class="reference internal" href="index.html#effect-basics-command-selectors-global-selectors"><span class="std std-ref">PF_Cmd_GLOBAL_SETUP</span></a>.</p>
<p class="last">If you set this flag, we strongly recommend you also set <code class="docutils literal notranslate"><span class="pre">PF_OutFlag2_AUTOMATIC_WIDE_TIME_INPUT</span></code> for better performance.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_OutFlag_NON_PARAM_VARY</span></code></td>
<td><p class="first">With this flag set, After Effects will not cache output when the effect is applied to a still.</p>
<p>Otherwise, After Effects will cache your output to be used to render other frames, if possible.</p>
<p>Set this flag if output varies based on something besides a parameter value.</p>
<p>If the effect produces changing frames when applied to a still image and all parameters are constant,
that’s a sure sign that this bit should be set (e.g. Wave Warp).</p>
<p>Particle effects, for example, will need this.</p>
<p>Set during <a class="reference internal" href="index.html#effect-basics-command-selectors-global-selectors"><span class="std std-ref">PF_Cmd_GLOBAL_SETUP</span></a>.</p>
<p>Can be overridden dynamically if needed during <a class="reference internal" href="index.html#effect-basics-command-selectors-messaging"><span class="std std-ref">PF_Cmd_QUERY_DYNAMIC_FLAGS</span></a>.</p>
<p class="last">Turn this off whenever possible to improve performance.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_OutFlag_RESERVED6</span></code></td>
<td>Unused. Formerly PF_OutFlag_SEND_PARAMS_UPDATE. Replaced by <code class="docutils literal notranslate"><span class="pre">PF_OutFlag_REFRESH_UI</span></code>.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_OutFlag_SEQUENCE_DATA_NEEDS_FLATTENING</span></code></td>
<td><p class="first">Both After Effects and Premiere Pro assume this flag is set.</p>
<p>Flattening is necessary when sequence data contains referencing items (pointers, handles), which must be flattened for storage and unflattened for use.</p>
<p class="last">See <a class="reference internal" href="index.html#effect-basics-command-selectors-sequence-selectors"><span class="std std-ref">PF_Cmd_SEQUENCE_RESETUP</span></a>.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_OutFlag_I_DO_DIALOG</span></code></td>
<td><p class="first">Effect displays a dialog in response to <a class="reference internal" href="index.html#effect-basics-command-selectors-messaging"><span class="std std-ref">PF_Cmd_DO_DIALOG</span></a>.</p>
<p>Set during <a class="reference internal" href="index.html#effect-basics-command-selectors-global-selectors"><span class="std std-ref">PF_Cmd_GLOBAL_SETUP</span></a>, checked during <a class="reference internal" href="index.html#effect-basics-command-selectors-sequence-selectors"><span class="std std-ref">PF_Cmd_SEQUENCE_SETUP</span></a>.</p>
<p class="last">Note: the effect’s response to PF_OutFlag_I_DO_DIALOG is not undoable.
You can use arbitrary data with a custom UI, should such changes become necessary.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_OutFlag_USE_OUTPUT_EXTENT</span></code></td>
<td><p class="first">Effect honors the output <code class="docutils literal notranslate"><span class="pre">extent_rect</span></code>. Set during <a class="reference internal" href="index.html#effect-basics-command-selectors-global-selectors"><span class="std std-ref">PF_Cmd_GLOBAL_SETUP</span></a>.</p>
<p>See details at the end of the chapter for proper usage.</p>
<p class="last">Note: Obsolete for SmartFX.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_OutFlag_SEND_DO_DIALOG</span></code></td>
<td><p class="first">Effect must show dialog to function (added for compatibility with Photoshop plug-ins).</p>
<p>After Effects sends <a class="reference internal" href="index.html#effect-basics-command-selectors-messaging"><span class="std std-ref">PF_Cmd_DO_DIALOG</span></a> after <a class="reference internal" href="index.html#effect-basics-command-selectors-sequence-selectors"><span class="std std-ref">PF_Cmd_SEQUENCE_SETUP</span></a>.</p>
<p class="last">Set during <a class="reference internal" href="index.html#effect-basics-command-selectors-sequence-selectors"><span class="std std-ref">PF_Cmd_SEQUENCE_RESETUP</span></a>, not during <a class="reference internal" href="index.html#effect-basics-command-selectors-global-selectors"><span class="std std-ref">PF_Cmd_GLOBAL_SETUP</span></a>.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_OutFlag_DISPLAY_ERROR_MESSAGE</span></code></td>
<td><p class="first">Display the contents of <code class="docutils literal notranslate"><span class="pre">return_msg</span></code> in an error dialog.</p>
<p>Whenever return_msg is non-NULL, After Effects displays the contents in a dialog, which will be an error dialog if this flag is set.</p>
<p>Set after any command, and can be used during debugging.</p>
<p class="last">This is also a good way to implement nag messages for tryout versions.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_OutFlag_I_EXPAND_BUFFER</span></code></td>
<td><p class="first">Effect expands the output buffer.</p>
<p>Set during <a class="reference internal" href="index.html#effect-basics-command-selectors-global-selectors"><span class="std std-ref">PF_Cmd_GLOBAL_SETUP</span></a>.</p>
<p>Set this flag and <code class="docutils literal notranslate"><span class="pre">PF_OutFlag_USE_OUTPUT_EXTENT</span></code> to use the intersection
of the output <code class="docutils literal notranslate"><span class="pre">extent_rect</span></code> and your new buffer size during <a class="reference internal" href="index.html#effect-basics-command-selectors-frame-selectors"><span class="std std-ref">PF_Cmd_FRAME_SETUP</span></a>.</p>
<p>Use <code class="docutils literal notranslate"><span class="pre">pre_effect_source_origin</span></code> fields to detect other transformations.</p>
<p>Note: Only set this flag if you need to; it drastically reduces caching efficiency.</p>
<p class="last">Note: Obsolete for SmartFX.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_OutFlag_PIX_INDEPENDENT</span></code></td>
<td><p class="first">A given pixel is independent of the pixels around it.</p>
<p>Set during <a class="reference internal" href="index.html#effect-basics-command-selectors-global-selectors"><span class="std std-ref">PF_Cmd_GLOBAL_SETUP</span></a> or <a class="reference internal" href="index.html#effect-basics-command-selectors-messaging"><span class="std std-ref">PF_Cmd_QUERY_DYNAMIC_FLAGS</span></a>.</p>
<p>As an example, color correction effects are typically pixel independent, distortions are not.</p>
<p class="last">NOTE: If your effect doesn’t use the color values of one pixel to affect those of adjacent pixels, set this outflag!
It can provide dramatic performance improvements.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_OutFlag_I_WRITE_INPUT_BUFFER</span></code></td>
<td><p class="first">The effect writes into the input buffer.</p>
<p class="last">This is of limited use; while saving an allocation, it invalidates some pipeline caching. Set during <a class="reference internal" href="index.html#effect-basics-command-selectors-global-selectors"><span class="std std-ref">PF_Cmd_GLOBAL_SETUP</span></a>.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_OutFlag_I_SHRINK_BUFFER</span></code></td>
<td><p class="first">The effect shrinks its buffer based on the <code class="docutils literal notranslate"><span class="pre">extent_rect</span></code> in order to be more memory efficient.</p>
<p>Set during <a class="reference internal" href="index.html#effect-basics-command-selectors-global-selectors"><span class="std std-ref">PF_Cmd_GLOBAL_SETUP</span></a> whenever possible.</p>
<p class="last">Note: Obsolete for SmartFX.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_OutFlag_WORKS_IN_PLACE</span></code></td>
<td>Unused.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_OutFlag_SQUARE_PIX_ONLY</span></code></td>
<td>Unused.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_OutFlag_CUSTOM_UI</span></code></td>
<td><p class="first">The effect has a custom user interface and requires <a class="reference internal" href="index.html#effect-basics-command-selectors-messaging"><span class="std std-ref">PF_Cmd_EVENT</span></a> messages.</p>
<p class="last">Set during <a class="reference internal" href="index.html#effect-basics-command-selectors-global-selectors"><span class="std std-ref">PF_Cmd_GLOBAL_SETUP</span></a>.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_OutFlag_RESERVED5</span></code></td>
<td>Unused.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_OutFlag_REFRESH_UI</span></code></td>
<td><p class="first">Refresh the entire effect controls, composition, and layer windows.</p>
<p>Set during <a class="reference internal" href="index.html#effect-basics-command-selectors-messaging"><span class="std std-ref">PF_Cmd_EVENT</span></a>, <a class="reference internal" href="index.html#effect-basics-command-selectors-frame-selectors"><span class="std std-ref">PF_Cmd_RENDER</span></a>, and <a class="reference internal" href="index.html#effect-basics-command-selectors-messaging"><span class="std std-ref">PF_Cmd_DO_DIALOG</span></a>.</p>
<p class="last">If refreshing custom UI during <code class="docutils literal notranslate"><span class="pre">PF_Cmd_EVENT</span></code>, we recommend using the <a class="reference internal" href="index.html#effect-ui-events-custom-ui-and-drawbot"><span class="std std-ref">new redraw mechanism</span></a> with finer granularity.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_OutFlag_NOP_RENDER</span></code></td>
<td>Set this flag during <a class="reference internal" href="index.html#effect-basics-command-selectors-frame-selectors"><span class="std std-ref">PF_Cmd_FRAME_SETUP</span></a> to invalidate the current render.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_OutFlag_I_USE_SHUTTER_ANGLE</span></code></td>
<td>Indicates rendered images depend upon the value of <code class="docutils literal notranslate"><span class="pre">shutter_angle</span></code>.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_OutFlag_I_USE_AUDIO</span></code></td>
<td>Effect’s parameters depend on audio data, obtained using <a class="reference internal" href="index.html#effect-details-interaction-callback-functions-interaction-callbacks"><span class="std std-ref">PF_CHECKOUT_LAYER_AUDIO</span></a>.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_OutFlag_I_AM_OBSOLETE</span></code></td>
<td>Effect is available for use when working with an old project in which it was originally applied, but doesn’t appear in the effect menu.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_OutFlag_FORCE_RERENDER</span></code></td>
<td>Effect made a change that requires a re-render. PF_ChangeFlag_CHANGED_VALUE also forces a re-render.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_OutFlag_PiPL_OVERRIDES_OUTDATA_OUTFLAGS</span></code></td>
<td>After Effects will use PiPL outflags, and ignore those set during <a class="reference internal" href="index.html#effect-basics-command-selectors-global-selectors"><span class="std std-ref">PF_Cmd_GLOBAL_SETUP</span></a>.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_OutFlag_I_HAVE_EXTERNAL_DEPENDENCIES</span></code></td>
<td><p class="first">Effect depends on an external file (or external font).</p>
<p class="last">If set, After Effects sends <a class="reference internal" href="index.html#effect-basics-command-selectors-messaging"><span class="std std-ref">PF_Cmd_GET_EXTERNAL_DEPENDENCIES</span></a>.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_OutFlag_DEEP_COLOR_AWARE</span></code></td>
<td>The effect handles 16-bpc color.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_OutFlag_SEND_UPDATE_PARAMS_UI</span></code></td>
<td>Set this flag during <a class="reference internal" href="index.html#effect-basics-command-selectors-global-selectors"><span class="std std-ref">PF_Cmd_GLOBAL_SETUP</span></a> to receive <a class="reference internal" href="index.html#effect-basics-command-selectors-messaging"><span class="std std-ref">PF_Cmd_UPDATE_PARAMS_UI</span></a>.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_OutFlag_AUDIO_FLOAT_ONLY</span></code></td>
<td><p class="first">Effect requires audio data in PF_SIGNED_FLOAT format.</p>
<p>After Effects will perform any required format conversion.</p>
<p class="last">You must also set either <code class="docutils literal notranslate"><span class="pre">PF_OutFlag_AUDIO_EFFECT_TOO</span></code> or <code class="docutils literal notranslate"><span class="pre">PF_OutFlag_AUDIO_EFFECT_ONLY</span></code>.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_OutFlag_AUDIO_IIR</span></code></td>
<td><p class="first">Set during <a class="reference internal" href="index.html#effect-basics-command-selectors-global-selectors"><span class="std std-ref">PF_Cmd_GLOBAL_SETUP</span></a> if the (audio) effect is an Infinite Impulse Response filter.</p>
<p>This is true if output at a given time depends on output from previous times.</p>
<p>When an IIR filter receives <a class="reference internal" href="index.html#effect-basics-command-selectors-frame-selectors"><span class="std std-ref">PF_Cmd_AUDIO_RENDER</span></a>, the input audio time span is the same as the output audio time span
(when they intersect with the output time span requested in <a class="reference internal" href="index.html#effect-basics-command-selectors-frame-selectors"><span class="std std-ref">PF_Cmd_AUDIO_SETUP</span></a>).</p>
<p>In response to <a class="reference internal" href="index.html#effect-basics-command-selectors-frame-selectors"><span class="std std-ref">PF_Cmd_AUDIO_SETUP</span></a>, the filter can request audio from earlier times (as for delay effects).</p>
<p>The filter can access parameters from that earlier time, and should cache them (along with interim audio) in sequence data.</p>
<p>If the audio generated does not correspond to the requested output audio’s time, the output audio duration should be set to zero.</p>
<p>The filter can update its delay line using the parameters and the input audio.</p>
<p class="last">Having cached its delay line, request more input audio during <a class="reference internal" href="index.html#effect-basics-command-selectors-frame-selectors"><span class="std std-ref">PF_Cmd_AUDIO_SETUP</span></a>
based on the last cached delay line. Use <a class="reference internal" href="index.html#effect-detals-parameter-supervision-pf-paramutilsuite"><span class="std std-ref">PF_HasParamChanged</span></a> to determine whether or not your cache is valid.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_OutFlag_I_SYNTHESIZE_AUDIO</span></code></td>
<td><p class="first">Set during <a class="reference internal" href="index.html#effect-basics-command-selectors-global-selectors"><span class="std std-ref">PF_Cmd_GLOBAL_SETUP</span></a> time if the effect generates audio, even when passed silence.</p>
<p class="last">You must also set either <code class="docutils literal notranslate"><span class="pre">PF_OutFlag_AUDIO_EFFECT_TOO</span></code> or <code class="docutils literal notranslate"><span class="pre">PF_OutFlag_AUDIO_EFFECT_ONLY</span></code>.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_OutFlag_AUDIO_EFFECT_TOO</span></code></td>
<td>Set during <a class="reference internal" href="index.html#effect-basics-command-selectors-global-selectors"><span class="std std-ref">PF_Cmd_GLOBAL_SETUP</span></a> if the effect alters audio.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_OutFlag_AUDIO_EFFECT_ONLY</span></code></td>
<td>Set during <a class="reference internal" href="index.html#effect-basics-command-selectors-global-selectors"><span class="std std-ref">PF_Cmd_GLOBAL_SETUP</span></a> if the effect alters only audio output.</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
</div>
<div class="section" id="pf-outflags2">
<span id="effect-basics-pf-outdata-pf-outflags2"></span><h3>PF_OutFlags2<a class="headerlink" href="#pf-outflags2" title="Permalink to this headline">¶</a></h3>
<p>We added a second set of outflags in After Effects 5.0; partly for room to expand in the future, and partly to break ourselves of the bad habit of repurposing existing flags.</p>
<p>As with <code class="docutils literal notranslate"><span class="pre">PF_OutFlags</span></code>, many of these flags can be changed during an After Effects session.</p>
<p>And don’t forget to update both the <a class="reference internal" href="index.html#intro-pipl-resources"><span class="std std-ref">PiPL</span></a> and your source code when you make a change.</p>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="84%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Flag</strong></th>
<th class="head"><strong>Indicates</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_OutFlag2_NONE</span></code></td>
<td>Nothing.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_OutFlag2_SUPPORTS_QUERY_DYNAMIC_FLAGS</span></code></td>
<td>The effect responds to <a class="reference internal" href="index.html#effect-basics-command-selectors-messaging"><span class="std std-ref">PF_Cmd_QUERY_DYNAMIC_FLAGS</span></a>. Must be set in the PiPL and during <a class="reference internal" href="index.html#effect-basics-command-selectors-global-selectors"><span class="std std-ref">PF_Cmd_GLOBAL_SETUP</span></a>.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_OutFlag2_I_USE_3D_CAMERA</span></code></td>
<td>The effect accesses 3D camera information.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_OutFlag2_I_USE_3D_LIGHTS</span></code></td>
<td>The effect accesses 3D lighting information.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_OutFlag2_PARAM_GROUP_START_COLLAPSED_FLAG</span></code></td>
<td><p class="first">This flag in itself doesn’t control the state of the param group twirlies.</p>
<p>The initial collapse state of each individual parameter group is set during <a class="reference internal" href="index.html#effect-basics-command-selectors-global-selectors"><span class="std std-ref">PF_Cmd_PARAM_SETUP</span></a>, by setting the <a class="reference internal" href="index.html#effect-basics-pf-paramdef-parameter-flags"><span class="std std-ref">PF_ParamFlag_START_COLLAPSED</span></a> flag in <a class="reference internal" href="index.html#effect-basics-pf-paramdef-parameter-flags"><span class="std std-ref">PF_ParamFlags</span></a>.
but those individual settings will not be honored unless the effect sets this bit.</p>
<p>Otherwise, all parameter groups will be collapsed by default.</p>
<p class="last">Remember to set this flag in both the PiPL and here during <a class="reference internal" href="index.html#effect-basics-command-selectors-global-selectors"><span class="std std-ref">PF_Cmd_GLOBAL_SETUP.</span></a></p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_OutFlag2_I_AM_THREADSAFE</span></code></td>
<td>Currently this does nothing. If this sounds interesting to you, you may be interested in <code class="docutils literal notranslate"><span class="pre">PF_OutFlag2_PPRO_DO_NOT_CLONE_SEQUENCE_DATA_FOR_RENDER</span></code>, described below.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_OutFlag2_CAN_COMBINE_WITH_DESTINATION</span></code></td>
<td>Originally added for Premiere usage, but no longer used.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_OutFlag2_DOESNT_NEED_EMPTY_PIXELS</span></code></td>
<td><p class="first">Added for render optimizations; shrinks the input buffer passed to the effect to exclude any empty pixels
(where empty means “zero alpha” unless <code class="docutils literal notranslate"><span class="pre">PF_OutFlag2_REVEALS_ZERO_ALPHA</span></code> is set, in which case RGB must be zero as well).</p>
<p>Set during <a class="reference internal" href="index.html#effect-basics-command-selectors-global-selectors"><span class="std std-ref">PF_Cmd_GLOBAL_SETUP</span></a> or <a class="reference internal" href="index.html#effect-basics-command-selectors-messaging"><span class="std std-ref">PF_Cmd_QUERY_DYNAMIC_FLAGS</span></a>.</p>
<p>The origin of the trimmed buffer can be found in <code class="docutils literal notranslate"><span class="pre">in_data&gt;pre_effect_source_origin</span></code>.</p>
<p>Effects with both this flag and <code class="docutils literal notranslate"><span class="pre">PF_OutFlag_I_EXPAND_BUFFER</span></code> set may get called with a null input buffer if their input is completely empty, and must be able to handle this case without crashing.</p>
<p>Note: this flag can cause the size of the output buffer to change.</p>
<p class="last">Note: Obsolete for SmartFX.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_OutFlag2_REVEALS_ZERO_ALPHA</span></code></td>
<td><p class="first">This is the one flag implementors need to pay most attention to since it represents a change in the default behavior.</p>
<p>Set this flag if the effect can take pixels with zero alpha and reveal the RGB data in them (like our Set Channels effect).</p>
<p>This tells After Effects not to trim such pixels when determining the input for the effect.</p>
<p>This flag can be changed during <a class="reference internal" href="index.html#effect-basics-command-selectors-messaging"><span class="std std-ref">PF_Cmd_QUERY_DYNAMIC_FLAGS</span></a>.</p>
<p>Note that, while this flag can cause changes to the size of the <code class="docutils literal notranslate"><span class="pre">extent_hint</span></code>, it will not change the image buffer size.</p>
<p>As of 6.0, pixels outside the mask’s bounding box are zeroed.</p>
<p>If your effect can reveal such pixels, tell AE not to throw away these RGB values by setting this flag.</p>
<p>If your effect does not always reveal such pixels, set this bit dynamically.</p>
<p>To see if your effect needs this bit set, apply a mask significantly smaller than the layer to a solid, then apply the effect and set it to its alpha-modifying state.</p>
<p class="last">If the rectangular bounding box of the mask becomes visible, this bit needs to be set.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_OutFlag2_PRESERVES_FULLY_OPAQUE_PIXELS</span></code></td>
<td>Preserve those pixels!</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_OutFlag2_SUPPORTS_SMART_RENDER</span></code></td>
<td>The effect uses the SmartFX API.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_OutFlag2_FLOAT_COLOR_AWARE</span></code></td>
<td><p class="first">The effect supports 32-bpc floating point color representation.</p>
<p class="last">NOTE: <code class="docutils literal notranslate"><span class="pre">PF_OutFlag2_SUPPORTS_SMART_RENDER</span></code> must also be set.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_OutFlag2_I_USE_COLORSPACE_ENUMERATION</span></code></td>
<td>This is for effects which optimized for different color spaces in Premiere Pro. See the Premiere Pro SDK for more details.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_OutFlag2_I_AM_DEPRECATED</span></code></td>
<td><p class="first">Setting this during <a class="reference internal" href="index.html#effect-basics-command-selectors-global-selectors"><span class="std std-ref">PF_Cmd_GLOBAL_SETUP</span></a> puts the effect in the localized “Obsolete” folder in the Effects panel.</p>
<p class="last">Compare to <code class="docutils literal notranslate"><span class="pre">PF_OutFlag_I_AM_OBSOLETE</span></code>.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_OutFlag2_PPRO_DO_NOT_CLONE_SEQUENCE_DATA_FOR_RENDER</span></code></td>
<td><p class="first">Supported in Premiere Pro, and not in After Effects.</p>
<p class="last">This affects how Premiere Pro drives the plug-in using <a class="reference internal" href="index.html#ppro-multithreading"><span class="std std-ref">Multithreading</span></a>.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_OutFlag2_AUTOMATIC_WIDE_TIME_INPUT</span></code></td>
<td><p class="first">Set during <a class="reference internal" href="index.html#effect-basics-command-selectors-global-selectors"><span class="std std-ref">PF_Cmd_GLOBAL_SETUP</span></a>.</p>
<p>Requires setting of <code class="docutils literal notranslate"><span class="pre">PF_OutFlag_WIDE_TIME_INPUT</span></code> (which allows you to support old hosts), but effectively overrides that flag.</p>
<p>When set, all parameter checkouts are tracked so over-time dependencies are known by the host, and much more efficient.</p>
<p>For example, if you set only the old <code class="docutils literal notranslate"><span class="pre">PF_OutFlag_WIDE_TIME_INPUT</span></code>, anytime anything changes at any time upstream from your effect, you will be called to re-render.</p>
<p>With this flag set, if a given frame 17 has checked out things from times 0-17, AE will know that any changes at frames 18+ will not affect that cached frame.</p>
<p>Note that if you use this new flag, you must not cache any time-dependent data in your sequence data (or anywhere else),
unless you also <a class="reference internal" href="index.html#effect-details-global-sequence-frame-data-validating-sequence-data"><span class="std std-ref">validate that cache</span></a> using <code class="docutils literal notranslate"><span class="pre">PF_GetCurrentState()</span></code> / <code class="docutils literal notranslate"><span class="pre">PF_AreStatesIdentical()</span></code> from <a class="reference internal" href="index.html#effect-detals-parameter-supervision-pf-paramutilsuite"><span class="std std-ref">PF_ParamUtilSuite3</span></a> before using the time-dependent data.</p>
<p>This only works for SmartFX (those that set <code class="docutils literal notranslate"><span class="pre">PF_OutFlag2_SUPPORTS_SMART_RENDER</span></code>).</p>
<p class="last">If you haven’t set that, After Effects will silently treat this as <code class="docutils literal notranslate"><span class="pre">PF_OutFlag_WIDE_TIME_INPUT</span></code> instead.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_OutFlag2_I_USE_COMP_TIMECODE</span></code></td>
<td><p class="first">Set during <a class="reference internal" href="index.html#effect-basics-command-selectors-global-selectors"><span class="std std-ref">PF_Cmd_GLOBAL_SETUP</span></a>.</p>
<p class="last">This lets AE know it should rerender an effect if the composition start time and/ or drop-frame setting has been modified.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_OutFlag2_DEPENDS_ON_UNREFERENCED_MASKS</span></code></td>
<td><p class="first">New in CS6. Set this if you are going to look at paths that aren’t directly referenced by a path param, e.g. if you are going to draw a stroke on all masks.</p>
<p>This is needed so After Effects knows to invalidate your output when a mask is modified that doesn’t appear to be referenced by your effect.</p>
<p class="last">Set during <a class="reference internal" href="index.html#effect-basics-command-selectors-global-selectors"><span class="std std-ref">PF_Cmd_GLOBAL_SETUP</span></a> or <a class="reference internal" href="index.html#effect-basics-command-selectors-messaging"><span class="std std-ref">PF_Cmd_QUERY_DYNAMIC_FLAGS</span></a>.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_OutFlag2_OUTPUT_IS_WATERMARKED</span></code></td>
<td><p class="first">New in CS6. Set this during <a class="reference internal" href="index.html#effect-basics-command-selectors-global-selectors"><span class="std std-ref">PF_Cmd_GLOBAL_SETUP</span></a> if your output is going to be watermarked in some way that makes it unsuitable for final use, probably because the user is using an unlicensed demo version.</p>
<p>It is ok to change this state during the course of app session during <a class="reference internal" href="index.html#effect-basics-command-selectors-messaging"><span class="std std-ref">PF_Cmd_QUERY_DYNAMIC_FLAGS</span></a>, if e.g. a floating license status changes.</p>
<p>Plug-in authors that actually do have this state changing asynchronously must be careful to have the next render match the last state returned from <a class="reference internal" href="index.html#effect-basics-command-selectors-messaging"><span class="std std-ref">PF_Cmd_QUERY_DYNAMIC_FLAGS</span></a> otherwise race conditions could cause incorrect frames to be cached.</p>
<p class="last">(This is a non-issue if you only change this in response to <code class="docutils literal notranslate"><span class="pre">DO_DIALOG</span></code>.)</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_OutFlag2_SUPPORTS_GPU_RENDER_F32</span></code></td>
<td><p class="first">New in 16.0 Set during PF_Cmd_GLOBAL_SETUP, this indicates GPU support.</p>
<p>The effect will be called with GPU selectors, and will be badged as GPU-supporting in the GUI.</p>
<p class="last">At <code class="docutils literal notranslate"><span class="pre">PF_Cmd_GPU_DEVICE_SETUP</span></code> time, these flags indicate rendering capabilities for a specific device and framework.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_OutFlag2_SUPPORTS_THREADED_RENDERING</span></code></td>
<td><p class="first">Available in After Effects Beta builds starting June 2020.</p>
<p>Set during PF_Cmd_GLOBAL_SETUP, this indicates the plugin supports Multi-Frame Rendering.</p>
<p><strong>For more information on how to use this flag, please see</strong> <a class="reference internal" href="index.html#effect-details-multi-frame-rendering-in-ae"><span class="std std-ref">Multi-Frame Rendering in AE</span></a> <strong>section under Effect Details.</strong></p>
<p>This flag indicates the effect supports rendering on multiple threads at the same time. Single or multiple applications of this effect on a layer can be called to render at the same time on multiple threads.</p>
<p><strong>If you are using the PF_OutFlag_SEQUENCE_DATA_NEEDS_FLATTENING flag, remember to also set the PF_OutFlag2_SUPPORTS_GET_FLATTENED_SEQUENCE_DATA flag. See the</strong> <a class="reference internal" href="index.html#sequence-data"><span class="std std-ref">Sequence Data in Multi-Frame rendering</span></a> <strong>for more information.</strong></p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><strong>This flag should only be set on plugins that have been tested to be thread-safe with multi-frame rendering enabled in AE.</strong></p>
</div>
<p class="last">For more information on how to use this flag, please see <a class="reference internal" href="index.html#effect-details-multi-frame-rendering-in-ae"><span class="std std-ref">Multi-Frame Rendering in AE</span></a> section under Effect Details.</p>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<span id="document-effect-basics/parameters"></span><div class="section" id="parameters">
<span id="effect-basics-parameters"></span><h2>Parameters<a class="headerlink" href="#parameters" title="Permalink to this headline">¶</a></h2>
<p>Parameters are streams of values that vary with time; the source image, sliders, angles, points, colors, paths, and any arbitrary data types the user can manipulate.</p>
<p>They are passed to the plug-in as an array of PF_ParamDefs, though the values in the array are only valid during certain selectors.</p>
<p>One of the best aspects of the After Effects effect API is the parameter interpolation and management.</p>
<p>How much does the shutter angle change during one-fourth of a 29.97 fps frame? Not your problem; leave it to After Effects.</p>
<p>Describe your plug-in’s parameters during <a class="reference internal" href="index.html#effect-basics-command-selectors-global-selectors"><span class="std std-ref">PF_Cmd_PARAM_SETUP</span></a>, using <a class="reference internal" href="index.html#effect-details-interaction-callback-functions-interaction-callbacks"><span class="std std-ref">PF_ADD_PARAM</span></a>.</p>
<p>You may have up to (approximately) 38 kajillion parameters, or as many as your users are willing to sift through before demanding a refund. Choose wisely.</p>
<p>Avoid countless problems by clearing <cite>PF_ParamDefs</cite> with <cite>AEFX_CLR_STRUCT</cite> (defined in <cite>AE_Macros.h</cite>) before registering them.</p>
<hr class="docutils" />
<div class="section" id="parameter-types">
<span id="effect-basics-parameters-parameter-types"></span><h3>Parameter Types<a class="headerlink" href="#parameter-types" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="8%" />
<col width="15%" />
<col width="8%" />
<col width="8%" />
<col width="61%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Parameter Type</strong></th>
<th class="head"><strong>Parameter Type</strong></th>
<th class="head"><strong>PF_ParamDefUnion Member</strong></th>
<th class="head"><strong>Param Value Data Type</strong></th>
<th class="head"><strong>Description</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_Param_LAYER</span></code></td>
<td><a class="reference internal" href="index.html#effect-basics-pf-effectworld"><span class="std std-ref">PF_LayerDef</span></a></td>
<td><code class="docutils literal notranslate"><span class="pre">ld</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">A_long</span></code></td>
<td><p class="first">Image and audio layers in the composition. All effects automatically have at least 1 layer parameter, param[0], the layer to which they are applied.</p>
<p>When used as effect parameters, these appear as a pull-down menu with which the user selects a layer within the current composition.</p>
<p>The pull-down menu contents are generated by After Effects.</p>
<p class="last">NOTE: This is a reference to a layer which contains pixels and audio samples, not actual pixels and audio samples.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_Param_SLIDER</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">PF_SliderDef</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">sd</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">long</span></code></td>
<td>No longer used.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_Param_FIX_SLIDER</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">PF_FixedSliderDef</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">fd</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">PF_Fixed</span></code></td>
<td><p class="first">Deprecated. For many years, we promoted fixed sliders. We now recommend <code class="docutils literal notranslate"><span class="pre">PF_Param_FLOAT_SLIDERs</span></code>.</p>
<p>The additional precision helps in many situations, and isn’t as expensive as it once was. Plus, we’re just tired of low byte / high byte silliness.</p>
<p class="last"><code class="docutils literal notranslate"><span class="pre">FIX_SLIDERs</span></code> provide higher precision than <code class="docutils literal notranslate"><span class="pre">PF_Param_SLIDER</span></code>. Specify the UI decimal places independently.
Ignore the low word of the <code class="docutils literal notranslate"><span class="pre">PF_Fixed</span></code> to get integral results.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_Param_FLOAT_SLIDER</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">PF_FloatSliderDef</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">fs_d</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">PF_FPLong</span></code></td>
<td><p class="first">Sliders represent numerical values. <code class="docutils literal notranslate"><span class="pre">FLOAT_SLIDERs</span></code> contain values for phase, precision, and curve tolerance for use by audio filters.</p>
<p>Specify a minimum and maximum value, and the user can move a slider or types a number to specify the setting.</p>
<p class="last"><code class="docutils literal notranslate"><span class="pre">PF_Param_FLOAT_SLIDERs</span></code> also respond to slider flags discussed in <a class="reference internal" href="index.html#audio-audio-considerations"><span class="std std-ref">Audio Filters</span></a>.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_Param_ANGLE</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">PF_AngleDef</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">ad</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">PF_Fixed</span></code></td>
<td><p class="first">Angles in (fixed point) degrees, accurate to small fractions of a degree.</p>
<p class="last">Users can specify multiple revolutions, resulting in values greater than 360.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_Param_CHECKBOX</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">PF_CheckBoxDef</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">bd</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">PF_Boolean</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">PF_ParamFlag_CANNOT_INTERP</span></code> is forced on for all checkboxes.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_Param_COLOR</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">PF_ColorDef</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">cd</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">PF_Pixel</span></code></td>
<td><p class="first">RGB value (alpha is not used) that the user can choose either with the standard color picker or with an eye dropper tool.</p>
<p class="last">For floating point accuracy, use <a class="reference internal" href="index.html#effect-details-parameters-floating-point-values-pf-colorparamsuite"><span class="std std-ref">PF_ColorParamSuite1</span></a> to retrieve the values.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_Param_POINT</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">PF_PointDef</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">td</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">PF_Fixed</span></code></td>
<td><p class="first">A two-dimensional point. The point provides x and y values in destination layer space.</p>
<p>The origin of the layer is the upper-left hand corner, with x increasing to the right, y increasing down.</p>
<p>Starting in CS5.5, for floating point accuracy, use <a class="reference internal" href="index.html#effect-details-parameters-floating-point-values-pf-pointparamsuite"><span class="std std-ref">PF_PointParamSuite1</span></a> to retrieve the values.</p>
<p>Dusty history lesson to follow: Prior to API specification version 12.1 (After Effects 4.0),
the default value for the point was between 0 and 100 in fixed point with the radix point at bit 16 (i.e. standard fixed point).</p>
<p>Specifying (50,50) in fixed point yields the center of the image. The value you are returned for a point control is in absolute pixels with some number of bits of fixed point accuracy.</p>
<p>Thus, if you gave (50,50) as the default position and the user applied the effect to a 640 by 480 layer, the default value you would be sent would be (320, 240) in Fixed point.</p>
<p class="last">Plug-ins which specify API versions before 12.1 will still get the old behavior.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_Param_POPUP</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">PF_PopupDef</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">pd</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">A_long</span></code></td>
<td><p class="first">List of choices. Build a string in namesptr containing a list of (read-only) pop-up entries (“Entry1 / Entry2 / Entry3”).</p>
<p>After Effects copies the data and creates a pop-up menu.</p>
<p>These entries cannot be modified once the parameter is added.</p>
<p class="last">An entry of “(-” will result in a separator being drawn between previous and subsequent entries.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_Param_ARBITRARY_DATA</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">PF_ArbitraryDef</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">arb_d</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">???</span></code></td>
<td><p class="first">Custom data type.</p>
<p><a class="reference internal" href="index.html#effect-details-arbitrary-data-parameters"><span class="std std-ref">Arbitrary Data Parameters</span></a> contain an ID (you can use more than one custom data type in a given effect),
a default value (so After Effects knows what your data type should start as), and a handle to your actual parameter.</p>
<p>In AE, must specify either <code class="docutils literal notranslate"><span class="pre">PF_PUI_TOPIC</span></code> / <code class="docutils literal notranslate"><span class="pre">PF_PUI_CONTROL</span></code> or <code class="docutils literal notranslate"><span class="pre">PF_PUI_NO_ECW</span></code>.</p>
<p class="last">In PPro 8.0 and later, it’s okay to set none of those flags, which allows you to
see the parameter’s keyframe track on the right side of Effect Controls without creating a custom control.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_Param_PATH</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">PF_PathDef</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">path_d</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">PF_PathID</span></code></td>
<td><p class="first">Path parameters are references to masks applied to the same layer as the effect.</p>
<p>Path parameter data cannot be accessed directly; use <a class="reference internal" href="index.html#effect-details-working-with-paths-pf-pathquerysuite"><span class="std std-ref">PF_PathQuerySuite1</span></a> and <a class="reference internal" href="index.html#effect-details-working-with-paths-pf-pathdatasuite"><span class="std std-ref">PF_PathDataSuite</span></a> to manage and inquire about paths.</p>
<p><code class="docutils literal notranslate"><span class="pre">PF_PathDef.path_id</span></code> contains the index of the mask selected by the user.</p>
<p class="last">A corresponding <code class="docutils literal notranslate"><span class="pre">AEGP_MaskRefH</span></code> can be obtained using <code class="docutils literal notranslate"><span class="pre">AEGP_GetLayerMaskByIndex</span></code> from <a class="reference internal" href="index.html#aegps-aegp-suites-aegp-masksuite"><span class="std std-ref">AEGP_MaskSuite6</span></a>.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_Param_GROUP_START</span></code>
<code class="docutils literal notranslate"><span class="pre">PF_Param_GROUP_END</span></code></td>
<td>(none)
(none)</td>
<td>&#160;</td>
<td>&#160;</td>
<td><p class="first">Parameter groups (topics) organize parameters into sets.</p>
<p>Each group receives its own twirly and will be indented in the ECP relative to the neighboring parameters or groups.</p>
<p>One group can be nested within another.</p>
<p>Each twirly can be spun open or closed by the user, or programatically by the effect.</p>
<p class="last">The effect may choose to have certain groups initialized with the twirly spun open, and others with the twirly spun closed.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_Param_BUTTON</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">PF_Button</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">button_d</span></code></td>
<td>(no value)</td>
<td><p class="first">A simple push button. Use <a class="reference internal" href="index.html#effect-detals-parameter-supervision"><span class="std std-ref">Parameter Supervision</span></a> to detect when the button is pressed.</p>
<p class="last">New in CS5.5 to After Effects.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_Param_POINT_3D</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">PF_Point3D</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">point3d_d</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">PF_FpLong</span> <span class="pre">(3)</span></code></td>
<td><p class="first">A three-dimensional point.</p>
<p class="last">New in CS5.5. Unsupported in Premiere Pro.</p>
</td>
</tr>
</tbody>
</table>
</div>
<hr class="docutils" />
<div class="section" id="slider-range-issues">
<h3>Slider Range Issues?<a class="headerlink" href="#slider-range-issues" title="Permalink to this headline">¶</a></h3>
<p>If your slider seems disabled but not grayed out, check the valid_min, slider_min, valid_max and slider_max fields. Is the param a <code class="docutils literal notranslate"><span class="pre">PF_Param_FIX_SLIDER</span></code>? If so, did you convert your mins and maxs to reasonable fixed values? If you’re using the macros provided in AE_Macros.h, they’re expecting to receive ints; passing fixed point values won’t work.</p>
</div>
<hr class="docutils" />
<div class="section" id="point-parameter-origin">
<h3>Point Parameter Origin<a class="headerlink" href="#point-parameter-origin" title="Permalink to this headline">¶</a></h3>
<p>After Effects modifies any point parameter to account for origin offset, introduced by “upstream” effects that modify the output dimensions. Even if the ECP UI indicates the value of the point parameter is (0,0), the offset has already been factored in.</p>
</div>
</div>
<span id="document-effect-basics/PF_ParamDef"></span><div class="section" id="pf-paramdef">
<span id="effect-basics-pf-paramdef"></span><h2>PF_ParamDef<a class="headerlink" href="#pf-paramdef" title="Permalink to this headline">¶</a></h2>
<p>After Effects passes effects an array of PF_ParamDefs with each selector, describing the plug-in’s parameters at the current time. The values in the params array are only valid during some selectors (this is noted in the <a class="reference internal" href="index.html#effect-basics-calling-sequence"><span class="std std-ref">selector descriptions</span></a>).</p>
<hr class="docutils" />
<div class="section" id="param-zero">
<span id="effect-basics-pf-paramdef-param-zero"></span><h3>Param Zero<a class="headerlink" href="#param-zero" title="Permalink to this headline">¶</a></h3>
<p>The first parameter, params[0], is the input image (a <a class="reference internal" href="index.html#effect-basics-pf-effectworld"><span class="std std-ref">PF_EffectWorld / PF_LayerDef</span></a>) to which the effect should be applied.</p>
</div>
<hr class="docutils" />
<div class="section" id="the-rest-of-the-parameters">
<h3>The Rest Of The Parameters<a class="headerlink" href="#the-rest-of-the-parameters" title="Permalink to this headline">¶</a></h3>
<p>All parameter types are represented by a PF_ParamDef. Unions are used, so that only the pertinent parts of the PF_ParamDef need be (or should be) populated.</p>
</div>
<div class="section" id="pf-paramdef-members">
<h3>PF_ParamDef Members<a class="headerlink" href="#pf-paramdef-members" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="29%" />
<col width="7%" />
<col width="64%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Data Type</strong></th>
<th class="head"><strong>Name</strong></th>
<th class="head"><strong>Description</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">A_long</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">id</span></code></td>
<td><p class="first">The ID of this parameter. You can re-order parameters in future versions of your plug-in and not cause users to re-apply your effect,</p>
<p class="last">if you maintain the parameter’s ID across versions.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_ChangeFlags</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">change_flags</span></code></td>
<td><p class="first">Set if you’ve changed a parameter value. Only valid during drag (not click!) events,</p>
<p class="last"><a class="reference internal" href="index.html#effect-basics-command-selectors-messaging"><span class="std std-ref">PF_Cmd_USER_CHANGED_PARAM</span></a> or <a class="reference internal" href="index.html#effect-basics-command-selectors-messaging"><span class="std std-ref">PF_Cmd_UPDATE_PARAMS_UI</span></a>.</p>
</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#effect-basics-pf-paramdef-parameter-ui-flags"><span class="std std-ref">PF_ParamUIFlags</span></a></td>
<td><code class="docutils literal notranslate"><span class="pre">ui_flags</span></code></td>
<td><p class="first">Specify a parameter’s UI behavior before adding; only</p>
<p class="last"><code class="docutils literal notranslate"><span class="pre">PF_PUI_DISABLED</span></code> may be set during event handling.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">A_short</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">ui_width</span></code></td>
<td>Width of the parameter’s user interface (for non-standard parameters only).</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">A_short</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">ui_height</span></code></td>
<td>Height of the parameter’s user interface (for non-standard parameters only).</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="index.html#effect-basics-parameters-parameter-types"><span class="std std-ref">PF_ParamType</span></a></td>
<td><code class="docutils literal notranslate"><span class="pre">param_type</span></code></td>
<td>Type of parameter.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">A_char[32]``</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">name</span></code></td>
<td><p class="first">Name of parameter. Can be changed during event handling.</p>
<p>Yes, longer parameter names have been requested since After Effects 1.0.</p>
<p class="last">Think of adequately describing your world-altering effect in 31 mere characters as a language challenge, like haiku.</p>
</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#effect-basics-pf-paramdef-parameter-flags"><span class="std std-ref">PF_ParamFlags</span></a></td>
<td><code class="docutils literal notranslate"><span class="pre">flags</span></code></td>
<td>Specify a parameter’s UI behavior before adding; only <code class="docutils literal notranslate"><span class="pre">PF_ParamFlag_COLLAPSE_TWIRLY</span></code> may be set during event handling.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_ParamDefUnion</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">u</span></code></td>
<td><p class="first">A union of all possible <a class="reference internal" href="index.html#effect-basics-parameters-parameter-types"><span class="std std-ref">Parameter Types</span></a>.</p>
<p class="last">Only the type specified by <code class="docutils literal notranslate"><span class="pre">param_type</span></code> contains meaningful data.</p>
</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
</div>
<div class="section" id="parameter-ui-flags">
<span id="effect-basics-pf-paramdef-parameter-ui-flags"></span><h3>Parameter UI Flags<a class="headerlink" href="#parameter-ui-flags" title="Permalink to this headline">¶</a></h3>
<p>Control a parameter’s user interface with these flags.</p>
<p>Don’t confuse UI flags with behavior flags; they reside in different fields within your parameter’s definition, and will cause unpredictable behavior if misapplied.</p>
<table border="1" class="docutils">
<colgroup>
<col width="15%" />
<col width="85%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Flag</strong></th>
<th class="head"><strong>Description</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_PUI_TOPIC</span></code></td>
<td><p class="first">Set this flag if you handle <code class="docutils literal notranslate"><span class="pre">PF_Cmd_EVENTs</span></code> for the “topic” of the parameter.</p>
<p>The “topic” is the portion of the param UI in the Effect Controls Window (ECW) that is still visible when the twirly-arrow is twirled up for that param.</p>
<p class="last">If you set this flag, you must also set <code class="docutils literal notranslate"><span class="pre">PF_OutFlag_CUSTOM_UI</span></code> at PF_Cmd_GLOBAL_SETUP time.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_PUI_CONTROL</span></code></td>
<td><p class="first">Set this flag if you handle <code class="docutils literal notranslate"><span class="pre">PF_Cmd_EVENTs</span></code> for the control area (area that becomes invisible when you twirl up a parameter’s spinner) in the ECP.</p>
<p>If you set this flag, you must also set <code class="docutils literal notranslate"><span class="pre">PF_OutFlag_CUSTOM_UI</span></code> at <code class="docutils literal notranslate"><span class="pre">PF_Cmd_GLOBAL_SETUP</span></code> time.</p>
<p class="last">See <a class="reference internal" href="index.html#effect-ui-events-effect-ui-events"><span class="std std-ref">Effect UI &amp; Events</span></a> for more details.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_PUI_STD_CONTROL_ONLY</span></code></td>
<td><p class="first">Set this flag if you want the standard control only – No data stream will be associated with this parameter, and thus no keyframes will be available in the Timeline panel.</p>
<p>You might want to do this to control something in your sequence data with a standard control.</p>
<p>Or in your arb data, or custom UI in the comp window, or to group-set multiple other controls.</p>
<p>This flag cannot be used with:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">PF_Param_CUSTOM</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">PF_Param_NO_DATA</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">PF_Param_LAYER</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">PF_Param_ARBITRARY_DATA</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">PF_Param_PATH</span></code>.</li>
</ul>
</div></blockquote>
<p>If you set this flag, you must also set <code class="docutils literal notranslate"><span class="pre">PF_ParamFlag_SUPERVISE</span></code>
(otherwise you would never find out about value changes, and the setting would never be used for anything).</p>
<p>This flag does not require that the <a class="reference internal" href="index.html#effect-basics-pf-outdata-pf-outflags"><span class="std std-ref">PF_OutFlag_CUSTOM_UI</span></a> flag be set.</p>
<p class="last">If you want a standard control for <code class="docutils literal notranslate"><span class="pre">PF_Param_ARBITRARY_DATA</span></code>, just add one (or more) using <code class="docutils literal notranslate"><span class="pre">PF_PUI_STD_CONTROL_ONLY</span></code> with the supported param types,
and then when handling <a class="reference internal" href="index.html#effect-basics-command-selectors-messaging"><span class="std std-ref">PF_Cmd_USER_CHANGED_PARAM</span></a> you can modify your arb data.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_PUI_NO_ECW_UI</span></code></td>
<td><p class="first">Set this flag if you want no UI to appear in the Effect Controls Window.</p>
<p>Presumably, you are setting the value of the parameter through some other method
(e.g. custom UI in the comp window, or while handling <code class="docutils literal notranslate"><span class="pre">PF_Cmd_USER_CHANGED_PARAM</span></code> for a different param with <code class="docutils literal notranslate"><span class="pre">PF_ParamFlag_SUPERVISE</span></code> set).</p>
<p class="last">In AE, this doesn’t affect keyframe visibility in the timeline. In PPro it does remove the entire row, so you won’t see keyframes.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_PUI_ECW_SEPARATOR</span></code></td>
<td><p class="first">Not used in After Effects, but used in Premiere. Set this flag if you’d like a thick line above this parameter in the effect control window.</p>
<p class="last">This is provided so that parameters can be grouped visually, if needed (without adding groups). This flag can be changed at runtime through the <code class="docutils literal notranslate"><span class="pre">PF_UpdateParamUI()</span></code> method.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_PUI_DISABLED</span></code></td>
<td>Disables (grays out) the parameter, usually in response to <a class="reference internal" href="index.html#effect-basics-command-selectors-messaging"><span class="std std-ref">PF_Cmd_USER_CHANGED_PARAM</span></a>.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_PUI_DONT_ERASE_TOPIC</span></code></td>
<td>After Effects won’t erase parameter’s topic.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_PUI_DONT_ERASE_CONTROL</span></code></td>
<td>After Effects won’t erase parameter’s control.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_PUI_RADIO_BUTTON</span></code></td>
<td>Not used in After Effects, but used in Premiere. Display parameter as a radio-button group. Only valid for <code class="docutils literal notranslate"><span class="pre">PF_Param_POPUP</span></code>.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_PUI_INVISIBLE</span></code></td>
<td><p class="first">First supported in Premiere, and now supported in After Effects CS6 and later. This hides the parameter UI in both the Effect Controls and Timeline.</p>
<p class="last">Premiere only: The flag is dynamic and parameter visibility can be toggled during the <a class="reference internal" href="index.html#effect-detals-parameter-supervision-pf-paramutilsuite"><span class="std std-ref">PF_UpdateParamUI</span></a> callback.</p>
</td>
</tr>
</tbody>
</table>
<p>In addition to these flags, an effect parameter may be hidden or shown by using <a class="reference internal" href="index.html#aegps-aegp-suites-dynamic-stream-suite"><span class="std std-ref">AEGP_GetDynamicStreamFlags</span></a>.</p>
<hr class="docutils" />
</div>
<div class="section" id="parameter-flags">
<span id="effect-basics-pf-paramdef-parameter-flags"></span><h3>Parameter Flags<a class="headerlink" href="#parameter-flags" title="Permalink to this headline">¶</a></h3>
<p>Behavior flags and UI flags describe different qualities of a parameter. Set them <em>before</em> adding the parameter during <a class="reference internal" href="index.html#effect-basics-command-selectors-global-selectors"><span class="std std-ref">PF_Cmd_PARAM_SETUP</span></a>. Flags which may be set during events are noted.</p>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="84%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Flag</strong></th>
<th class="head"><strong>Meaning</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_ParamFlag_CANNOT_TIME_VARY</span></code></td>
<td>Parameter does not vary with time; no keyframe control will be provided in the Timeline panel.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_ParamFlag_CANNOT_INTERP</span></code></td>
<td><p class="first">Values are not algebraically interpolated.</p>
<p class="last">You can still use discontinuous (hold) interpolation. Useful for parameters which are either on or off. Accelerates rendering.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_ParamFlag_COLLAPSE_TWIRLY</span></code></td>
<td><p class="first">Set this flag during <a class="reference internal" href="index.html#effect-basics-command-selectors-messaging"><span class="std std-ref">PF_Cmd_USER_CHANGED_PARAM</span></a>.</p>
<p class="last">This bit can now be set &amp; cleared when handling <a class="reference internal" href="index.html#effect-basics-command-selectors-messaging"><span class="std std-ref">PF_Cmd_UPDATE_PARAMS_UI</span></a> and <a class="reference internal" href="index.html#effect-basics-command-selectors-messaging"><span class="std std-ref">PF_Cmd_USER_CHANGED_PARAM</span></a> messages, so as to twirl your parameters and groups up and down at will.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_ParamFlag_SUPERVISE</span></code></td>
<td><p class="first">Set to receive <a class="reference internal" href="index.html#effect-basics-command-selectors-messaging"><span class="std std-ref">PF_Cmd_USER_CHANGED_PARAM</span></a> messages for this parameter.</p>
<p class="last">See <a class="reference internal" href="index.html#effect-detals-parameter-supervision"><span class="std std-ref">Parameter Supervision</span></a> for more information.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_ParamFlag_START_COLLAPSED</span></code></td>
<td><p class="first">Controls the twirl-state of a topic spinner.</p>
<p>Can be changed during parameter supervision, not just during <a class="reference internal" href="index.html#effect-basics-command-selectors-global-selectors"><span class="std std-ref">PF_Cmd_PARAM_SETUP</span></a>.</p>
<p class="last">This flag will not be honored unless <a class="reference internal" href="index.html#effect-basics-pf-outdata-pf-outflags"><span class="std std-ref">PF_OutFlag2_PARAM_GROUP_START_COLLAPSED</span></a> is set.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_ParamFlag_USE_VALUE_FOR_OLD_PROJECTS</span></code></td>
<td><p class="first">This only affects the loading of projects saved with an older version of the effect which lacks parameters added later.</p>
<p>When set, the <code class="docutils literal notranslate"><span class="pre">PF_ParamDef.value</span></code> field set in <code class="docutils literal notranslate"><span class="pre">PF_ADD_PARAM()</span></code> will be used to initialize the missing parameter, but the dephault field will still be used for initial value of the parameter when the effect is newly applied or reset.</p>
<p class="last">This is useful for when you want a parameter to default to one value but need it set to something else to preserve rendering behavior for older projects.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_ParamFlag_LAYER_PARAM_IS_TRACKMATTE</span></code></td>
<td><p class="first">Premiere Pro only: Only valid for layer parameters. Indicates that a layer param is used as a track-matte with applied filters.</p>
<p class="last">Ignored in After Effects.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_ParamFlag_EXCLUDE_FROM_HAVE_INPUTS_CHANGED</span></code></td>
<td>Only relevant if the effect sets <a class="reference internal" href="index.html#effect-basics-pf-outdata-pf-outflags"><span class="std std-ref">PF_OutFlag2_AUTOMATIC_WIDE_TIME_INPUT</span></a> and will call
<a class="reference internal" href="index.html#effect-detals-parameter-supervision-pf-paramutilsuite"><span class="std std-ref">PF_AreStatesIdentical</span></a> or <a class="reference internal" href="index.html#effect-detals-parameter-supervision-pf-paramutilsuite"><span class="std std-ref">PF_HaveInputsChangedOverTimeSpan</span></a></td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_ParamFlag_SKIP_REVEAL_WHEN_UNHIDDEN</span></code></td>
<td><p class="first">New in CS6. If this parameter is unhidden, then this flag tells After Effects to not twirl open any parents and to not scroll the parameter into view in the Effect Controls panel and the Timeline panel.</p>
<p>After Effects uses this behavior internally when paint strokes are made, so as not to distract the user by revealing the parameter.
However, in another case, when turning on Time Remapping, that parameter is revealed.</p>
<p class="last">So we provide you the same control over parameters in your own effects.</p>
</td>
</tr>
</tbody>
</table>
</div>
<hr class="docutils" />
<div class="section" id="pf-valuedisplayflags">
<h3>PF_ValueDisplayFlags<a class="headerlink" href="#pf-valuedisplayflags" title="Permalink to this headline">¶</a></h3>
<p>Within PF_ParamDefUnion, PF_FloatSliderDef and PF_FixedSliderDef both have a member variable, PF_ValueDisplayFlags, which allows them to respond to the user’s pixel value display preference (which they set in the info palette). If this is set, the parameter’s value will be displayed as 0-1, 0-255, 0-32768, or 0.0 to 1.0, depending on the preference. You can also set the first bit (PF_ValueDisplayFlag_PERCENT) to append a percent sign to the parameter’s displayed value.</p>
<p>We know you’d never do anything like this, but if you create a parameter which displays as a percentage, don’t confuse the user by allowing any range other than 0 to 100. Please. Percent means ‘out of one hundred’.</p>
</div>
</div>
<span id="document-effect-basics/PF_EffectWorld"></span><div class="section" id="pf-effectworld-pf-layerdef">
<span id="effect-basics-pf-effectworld"></span><h2>PF_EffectWorld / PF_LayerDef<a class="headerlink" href="#pf-effectworld-pf-layerdef" title="Permalink to this headline">¶</a></h2>
<p>After Effects represents images using PF_EffectWorlds, also called PF_LayerDefs.</p>
<hr class="docutils" />
<div class="section" id="pf-effectworld-structure">
<span id="effect-basics-pf-effectworld-structure"></span><h3>PF_EffectWorld Structure<a class="headerlink" href="#pf-effectworld-structure" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="87%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Item</strong></th>
<th class="head"><strong>Description</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">world_flags</span></code></td>
<td><p class="first">Currently, the only flags are:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">PF_WorldFlag_DEEP</span></code> - set if the world is 16-bpc</li>
<li><code class="docutils literal notranslate"><span class="pre">PF_WorldFlag_WRITEABLE</span></code> - indicates that you are allowed to alter the image data of the world.</li>
</ul>
</div></blockquote>
<p class="last">Normally effects cannot alter input image data; only output.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">data</span></code></td>
<td><p class="first">Pointer to image data, stored as a <code class="docutils literal notranslate"><span class="pre">PF_PixelPtr</span></code>.
Do not access directly; use the <a class="reference internal" href="#effect-basics-pf-effectworld-pf-pixelptr-accessor-macros"><span class="std std-ref">PF_PixelPtr Accessor Macros</span></a>.</p>
<p class="last">Image data in After Effects is always organized in sequential words each containing Alpha, Red, Green, Blue from the low byte to the high byte.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">rowbytes</span></code></td>
<td><p class="first">The length, in bytes, of each row in the image’s block of pixels.
The block of pixels contains height lines each with width pixels followed by some bytes of padding.
The width pixels (times four, because each pixel is four bytes long) plus optional extra padding adds up to rowbytes bytes.
Use this value to traverse the image data.</p>
<p>Platform-specific padding at the end of rows makes it unwise to traverse the entire buffer.
Instead, find the beginning of each row using height and rowbytes.</p>
<p>NOTE: This value does not vary based on whether field rendering is active.</p>
<p class="last">NOTE: Input and output worlds with the same dimensions can use different rowbytes values.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">width</span></code></td>
<td>Width and height of the pixel buffer.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">height</span></code></td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">extent_hint</span></code></td>
<td><p class="first">The smallest rectangle encompassing all opaque (non-zero alpha) pixels in the layer.
This defines the area which needs to be output.</p>
<p class="last">If your plug-in varies with extent (like a diffusion dither), ignore this and render the full frame each time.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">pix_aspect_ratio</span></code></td>
<td><p class="first">The pixel aspect ratio expressed as a <code class="docutils literal notranslate"><span class="pre">PF_Rational</span></code>.</p>
<p class="last">NOTE: Effects can use this value for checked out layers, but must use <code class="docutils literal notranslate"><span class="pre">PF_InData.pixel_aspect_ratio</span></code> for the layer to which they’re applied. Sorry.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">platform_ref</span></code></td>
<td><p class="first">No longer used in CS5.</p>
<p>Platform-specific reference information.
On Windows, this contains an opaque value.
On macOS, <code class="docutils literal notranslate"><span class="pre">PF_GET_PLATFORM_REFS</span></code> provides a <code class="docutils literal notranslate"><span class="pre">CGrafPtr</span></code> and a <code class="docutils literal notranslate"><span class="pre">GDeviceHandle</span></code> from a <code class="docutils literal notranslate"><span class="pre">PF_EffectWorld</span></code>.</p>
<p class="last">NOTE: You cannot acquire a <code class="docutils literal notranslate"><span class="pre">platform_ref</span></code> during <em>PF_Cmd_GLOBAL_SETUP</em>, as there isn’t any output context yet. Patience, my pet.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">dephault</span></code></td>
<td><p class="first">For layer parameters only.</p>
<p class="last">Either <code class="docutils literal notranslate"><span class="pre">PF_LayerDefault_MYSELF</span></code> or <code class="docutils literal notranslate"><span class="pre">PF_LayerDefault_NONE</span></code>.</p>
</td>
</tr>
</tbody>
</table>
</div>
<hr class="docutils" />
<div class="section" id="new-in-16-0">
<h3>New In 16.0<a class="headerlink" href="#new-in-16-0" title="Permalink to this headline">¶</a></h3>
<p>During PF_Cmd_SMART_RENDER_GPU, PF_LayerDef will be filled out the same as it is for regular CPU renders, but PF_LayerDef.data will be null; all other fields will be valid.</p>
</div>
<hr class="docutils" />
<div class="section" id="rowbytes-in-pf-effectworlds">
<h3>Rowbytes In PF_EffectWorlds<a class="headerlink" href="#rowbytes-in-pf-effectworlds" title="Permalink to this headline">¶</a></h3>
<p>Don’t assume that you can get to the next scanline of a <code class="docutils literal notranslate"><span class="pre">PF_EffectWorld</span></code> using <code class="docutils literal notranslate"><span class="pre">(width</span> <span class="pre">*</span> <span class="pre">sizeof(current_pixel_type))</span> <span class="pre">+</span> <span class="pre">4</span></code>, or whatever; use the PF_EffectWorld’s <code class="docutils literal notranslate"><span class="pre">rowbytes</span></code> instead.</p>
<p>Never write outside the indicated region of a PF_EffectWorld; this can corrupt cached image buffers that don’t belong to you.</p>
<p>To test whether your effects are honoring the <code class="docutils literal notranslate"><span class="pre">PF_EffectWorld&gt;rowbytes</span></code>, apply the Grow Bounds effect <em>after</em> your effect.</p>
<p>The output buffer will have larger rowbytes than the input (though it will still have the same logical size).</p>
</div>
<hr class="docutils" />
<div class="section" id="byte-alignment">
<h3>Byte Alignment<a class="headerlink" href="#byte-alignment" title="Permalink to this headline">¶</a></h3>
<p>The pixels in a <code class="docutils literal notranslate"><span class="pre">PF_EffectWorld</span></code> are not guaranteed to be 16-byte-aligned. An effect may get a subregion of a larger PF_EffectWorld. Users of Apple’s sample code for pixel processing optimization, you have been warned.</p>
<p>Beyond 8-bit per channel color, After Effects supports 16 bit and 32-bit float per-channel color.</p>
<p>Effects will never receive input and output worlds with differing bit depths, nor will they receive worlds with higher bit depth than they have claimed to be able to handle.</p>
</div>
<hr class="docutils" />
<div class="section" id="accessor-macros-for-opaque-data-type-pixels">
<h3>Accessor Macros For Opaque (Data Type) Pixels<a class="headerlink" href="#accessor-macros-for-opaque-data-type-pixels" title="Permalink to this headline">¶</a></h3>
<p>Use the following macros to access the data within (opaque) PF_PixelPtrs.</p>
<p>It is, emphatically, <em>not</em> safe to simply cast pointers of one type into another! To make it work at all requires a cast, and there’s nothing that prevents you from casting it incorrectly. We may change its implementation at a later date (at which time you’ll thank us for forcing this level of abstraction).</p>
<hr class="docutils" />
</div>
<div class="section" id="pf-pixelptr-accessor-macros">
<span id="effect-basics-pf-effectworld-pf-pixelptr-accessor-macros"></span><h3>PF_PixelPtr Accessor Macros<a class="headerlink" href="#pf-pixelptr-accessor-macros" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="19%" />
<col width="81%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Macro</strong></th>
<th class="head"><strong>Purpose</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_GET_PIXEL_DATA16</span></code></td>
<td><p class="first">Obtain a pointer to a 16-bpc pixel within the specified world.</p>
<p>The returned pixel pointer will be NULL if the world is not 16-bpc.</p>
<p>The second parameter is optional; if it is not NULL, the returned pixel will be
an interpretation of the values in the passed-in pixel, as if it were in the specified PF_EffectWorld.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_GET_PIXEL_DATA16</span> <span class="p">(</span>
  <span class="n">PF_EffectWorld</span> <span class="n">wP</span><span class="p">,</span>
  <span class="n">PF_PixelPtr</span>    <span class="n">pP0</span><span class="p">,</span>
  <span class="n">PF_Pixel16</span>     <span class="o">*</span><span class="n">outPP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_GET_PIXEL_DATA8</span></code></td>
<td><p class="first">Obtain a pointer to a 8-bpc pixel within the specified world.</p>
<p>The returned pixel pointer will be NULL if the world is not 8- bpc.</p>
<p>The second parameter is optional; if it is not NULL, the returned pixel will be
an interpretation of the values in the passed-in pixel, as if it were in the specified PF_EffectWorld.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_GET_PIXEL_DATA8</span> <span class="p">(</span>
  <span class="n">PF_EffectWorld</span> <span class="n">wP</span><span class="p">,</span>
  <span class="n">PF_PixelPtr</span>    <span class="n">pP0</span><span class="p">,</span>
  <span class="n">PF_Pixel8</span>      <span class="o">*</span><span class="n">outPP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>Think of <code class="docutils literal notranslate"><span class="pre">PF_GET_PIXEL_DATA16</span></code> and <code class="docutils literal notranslate"><span class="pre">PF_GET_PIXEL_DATA8</span></code> as safe (ahem) casting routines.</p>
<p>The code required is actually very simple to get a <code class="docutils literal notranslate"><span class="pre">PF_Pixel16*</span></code> out of the PF_EffectWorld output:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="n">PF_Pixel16</span> <span class="o">*</span><span class="n">deep_pixelP</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
  <span class="n">PF_Err</span>     <span class="n">err</span> <span class="o">=</span> <span class="n">PF_Err_NONE</span><span class="p">;</span>
  <span class="n">err</span> <span class="o">=</span> <span class="n">PF_GET_PIXEL_DATA16</span><span class="p">(</span><span class="n">output</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">deep_pixelP</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This returns deep_pixelP as NULL if the world does not have deep pixels.</p>
<p>The second parameter is not used very often and should be passed as NULL; pass a PF_PixelPtr that is <em>not</em> contained in a PF_EffectWorld to coerce it to the depth of that PF_EffectWorld).</p>
</div>
</div>
<span id="document-effect-basics/errors"></span><div class="section" id="errors">
<span id="effect-basics-errors"></span><h2>Errors<a class="headerlink" href="#errors" title="Permalink to this headline">¶</a></h2>
<p>Always, always, <em>always</em> (always!) return a <code class="docutils literal notranslate"><span class="pre">PF_Err</span></code> from <code class="docutils literal notranslate"><span class="pre">main()</span></code>. Plug-ins must pass all errors back to After Effects.</p>
<p>It is vitally important that you pass any errors (returned to you by callbacks and PICA suites) to After Effects, unless you’ve handled them.</p>
<p>Be vigilant about returning the right error code, and disposing of any memory you’ve allocated.</p>
<p>Really. We’re serious.</p>
<hr class="docutils" />
<div class="section" id="error-codes">
<span id="effect-basics-errors-error-codes"></span><h3>Error Codes<a class="headerlink" href="#error-codes" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="24%" />
<col width="76%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Error</strong></th>
<th class="head"><strong>Meaning</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_Err_NONE</span></code></td>
<td>Success.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_Err_OUT_OF_MEMORY</span></code></td>
<td><p class="first">Memory allocation failed.</p>
<p class="last">Note that RAM preview will cause this condition, so After Effects will be expecting to receive this error from your plug-in.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_Err_INTERNAL_STRUCT_DAMAGED</span></code></td>
<td>Problems using a data structure.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_Err_INVALID_INDEX</span></code></td>
<td>Problems finding/using array member.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_Err_UNRECOGNIZED_PARAM_TYPE</span></code></td>
<td>Problem with parameter data.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_Err_INVALID_CALLBACK</span></code></td>
<td>Problems accessing function through pointer.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_Err_BAD_CALLBACK_PARAM</span></code></td>
<td>Problems using a parameter passed to a callback.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_Interrupt_CANCEL</span></code></td>
<td><p class="first">Both effect and AEGP callbacks can return this to effects, if a user action aborts a render.</p>
<p>If the effect gets this error from a callback, it should stop processing the frame and return the error to the host.</p>
<p class="last">Failure to pass the error back may result in misrendered frames being cached.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_Err_CANNOT_PARSE_KEYFRAME_TEXT</span></code></td>
<td>Return this from <code class="docutils literal notranslate"><span class="pre">PF_Arbitrary_SCAN_FUNC</span></code> when problems occur parsing the clipboard into keyframe data.</td>
</tr>
</tbody>
</table>
</div>
<hr class="docutils" />
<div class="section" id="error-reporting-policy">
<h3>Error Reporting Policy<a class="headerlink" href="#error-reporting-policy" title="Permalink to this headline">¶</a></h3>
<p>After Effects has a consistent policy for error handling; follow it.</p>
<p>If you encounter an error in your plug-in’s code, report it to the user immediately, before returning from your plug-in to After Effects.</p>
<p>After Effects considers errors from the operating system, encountered during your plug-in’s execution, to be yours.</p>
<p>If you get an error code back from one of our callback functions, pass it back to After Effects; we’ve already reported it.</p>
<p>Out-of-memory errors are never reported by After Effects. Error reporting is always suppressed during RAM preview, and when After Effects is running in - noui mode.</p>
<p>To report an error from within a plug-in, set <code class="docutils literal notranslate"><span class="pre">PF_OutFlag_DISPLAY_ERROR_MESSAGE</span></code>, and describe the error in <a class="reference internal" href="index.html#effect-basics-pf-outdata"><span class="std std-ref">PF_OutData&gt;return_msg</span></a>.</p>
<p>Doing so will enter your error into the render log, and prevent system hangs in renders driven by a render engine or scripting.</p>
</div>
<hr class="docutils" />
<div class="section" id="dig-in">
<h3>Dig In!<a class="headerlink" href="#dig-in" title="Permalink to this headline">¶</a></h3>
<p>Now you have a basic understanding of effect plug-ins, and are ready to start experimenting with some real code. Go ahead and get started!</p>
<p>After getting the basics of your plug-in setup, you may have some questions about reuseable code, advanced functionality, and how to optimize your code to make it faster.</p>
<p>To this end, After Effects exposes a tremendous amount of its internal functionality via function suites.</p>
<p>By relying on After Effects code for utility functions, you should be able to get your image processing algorithms implemented quickly.</p>
<p>This will discussed in <a class="reference internal" href="index.html#effect-details-effect-details"><span class="std std-ref">Effect Details</span></a>.</p>
</div>
</div>
</div>
<div class="toctree-wrapper compound">
<span id="document-effect-details/multi-frame-rendering-in-ae"></span><div class="section" id="multi-frame-rendering-in-ae">
<span id="effect-details-multi-frame-rendering-in-ae"></span><h2>Multi-Frame Rendering in AE<a class="headerlink" href="#multi-frame-rendering-in-ae" title="Permalink to this headline">¶</a></h2>
<p>In order to take advantage of modern hardware with more CPU cores and threads, AE (currently only in Beta builds) now supports Multi-Frame rendering. Multi-Frame rendering allows multiple frames to be rendered concurrently thereby speeding up rendering and export of AE compositions.</p>
<p>Third-party effects can also take advantage of this feature through AE Plugin SDK by utilizing this PF_OutFlag:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_OutFlag2_SUPPORTS_THREADED_RENDERING</span>
</pre></div>
</div>
<p>This flag indicates the effect supports rendering on multiple threads at the same time. Single or multiple applications of this effect on a layer can be called to render at the same time on multiple threads.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><strong>This flag should only be set on effects that have been tested to be thread-safe with multi-frame rendering enabled in AE. Please see</strong> <a class="reference internal" href="#ts-effect"><span class="std std-ref">What does it mean for an effect to be thread-safe</span></a> <strong>section below.</strong></p>
</div>
<p>If an effect is not explicitly marked as thread-safe, each render thread will wait until it can safely execute the effect code, effectively forcing rendering back to a single frame at a time​.</p>
<p>UI selectors are still sent on the main thread, however <code class="docutils literal notranslate"><span class="pre">PF_Cmd_SEQUENCE_SETUP</span></code>, <code class="docutils literal notranslate"><span class="pre">PF_Cmd_SEQUENCE_RESETUP</span></code>, <code class="docutils literal notranslate"><span class="pre">PF_Cmd_SEQUENCE_SETDOWN</span></code>, <code class="docutils literal notranslate"><span class="pre">PF_Cmd_SMART_PRE_RENDER</span></code>, <code class="docutils literal notranslate"><span class="pre">PF_Cmd_RENDER</span></code> and <code class="docutils literal notranslate"><span class="pre">PF_Cmd_SMART_RENDER</span></code> may be sent on multiple threads at the same time as the UI selectors are being handled so all of these selectors must be thread safe.</p>
<p><code class="docutils literal notranslate"><span class="pre">PF_Cmd_GLOBAL_SETUP</span></code> and <code class="docutils literal notranslate"><span class="pre">PF_Cmd_GLOBAL_SETDOWN</span></code> selectors will only be sent on the main thread and will not be sent at the same time as any other selectors.</p>
<hr class="docutils" />
<div class="section" id="some-temporary-implementation-details">
<h3>Some Temporary Implementation Details​<a class="headerlink" href="#some-temporary-implementation-details" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li><strong>There is still thread unsafe code in AE so we have enabled mutexes to force all thread unsafe code to run in single-thread mode</strong></li>
</ol>
<blockquote>
<div><ul class="simple">
<li>The mutexes are to make sure rendering is safe and correct, however it has a large impact on performance. Multi-frame rendering is currently slower than single-frame rendering due to this​</li>
<li>Mutexes will be removed as AE’s render code is reviewed and made thread-safe</li>
</ul>
</div></blockquote>
<ol class="arabic simple" start="2">
<li><strong>The UI of AE does not yet know about the multi-frame rendering</strong></li>
</ol>
<blockquote>
<div><ul class="simple">
<li>You can use a debug monitor or the AE log file to monitor the state of previews and export at this time. Please See <a class="reference internal" href="#monitor-mfr"><span class="std std-ref">Monitoring Multi-Frame Renders​</span></a></li>
</ul>
</div></blockquote>
<ol class="arabic simple" start="3">
<li><strong>On preview and export, a fixed number of render threads will be created for the entire render</strong></li>
</ol>
<blockquote>
<div><ul class="simple">
<li>The current implementation uses the number of logical CPU cores to determine the concurrent frames to render, ignoring comp complexity and system resource utilization​</li>
<li>The final implementation will monitor system utilization and dynamically adjust based on the comp being rendered​</li>
</ul>
</div></blockquote>
<ol class="arabic simple" start="4">
<li><strong>After Effects currently duplicates data structures for each render thread</strong></li>
</ol>
<blockquote>
<div><ul class="simple">
<li>This can be time consuming when creating render threads which impacts performance</li>
<li>The shipping implementation will reduce this duplication overhead</li>
</ul>
</div></blockquote>
<hr class="docutils" />
</div>
<div class="section" id="sequence-data-in-multi-frame-rendering">
<span id="sequence-data"></span><h3>Sequence Data in Multi-Frame rendering<a class="headerlink" href="#sequence-data-in-multi-frame-rendering" title="Permalink to this headline">¶</a></h3>
<p>Multi-Frame rendering requires that After Effects marshal <code class="docutils literal notranslate"><span class="pre">sequence_data</span></code> to the render threads. In order to make this efficient for effects with <code class="docutils literal notranslate"><span class="pre">sequence_data</span></code> that require flattening with the <code class="docutils literal notranslate"><span class="pre">PF_OutFlag_SEQUENCE_DATA_NEEDS_FLATTENING</span></code> flag, these effects must now also set the <code class="docutils literal notranslate"><span class="pre">PF_OutFlag2_SUPPORTS_GET_FLATTENED_SEQUENCE_DATA</span> <span class="pre">flag</span></code>.</p>
<p>In addition, as multiple render calls may now happen concurrently, writing to <code class="docutils literal notranslate"><span class="pre">seqeunce_data</span></code> at render time will no longer be allowed. Results will be undefined if <code class="docutils literal notranslate"><span class="pre">sequence_data</span></code> is written at render time. In a future update to After Effects, <code class="docutils literal notranslate"><span class="pre">sequence_data</span></code> will be declared const when accessed at render time for effects that support multi-frame rendering.</p>
<p>In the coming months, After Effects will introduce a new interface for caching data at render time that would have previously been handled with <code class="docutils literal notranslate"><span class="pre">sequence_data</span></code>. The checkout call on these caches will be able to detect if another thread is already creating the same cache entry and thus wait for the entry to be complete rather than duplicating the computing effort.</p>
<hr class="docutils" />
</div>
<div class="section" id="what-does-it-mean-for-an-effect-to-be-thread-safe">
<span id="ts-effect"></span><h3>What does it mean for an effect to be thread-safe<a class="headerlink" href="#what-does-it-mean-for-an-effect-to-be-thread-safe" title="Permalink to this headline">¶</a></h3>
<p><strong>An effect is thread-safe when the implementation and shared data is guaranteed to be free of race conditions and is always in a correct state when accessed concurrently.</strong></p>
<dl class="docutils">
<dt>To be more specific, the effect:</dt>
<dd><ol class="first arabic simple">
<li>Has no static or global variables OR, has static or global variables that are free of race conditions.</li>
<li>Does not write to <code class="docutils literal notranslate"><span class="pre">in_data-&gt;global_data</span></code> at render time. Reading can be done. Write in <code class="docutils literal notranslate"><span class="pre">GlobalSetup</span></code> and <code class="docutils literal notranslate"><span class="pre">GlobalSetdown</span></code> only.</li>
<li>Does not write to <code class="docutils literal notranslate"><span class="pre">in_data-&gt;sequence_data</span></code> at render time or during PF_Cmd_UPDATE_PARAMS_UI event. Reading can be done.</li>
</ol>
<p class="last">(Solutions to 2 and 3 are currently being developed as mentioned in <a class="reference internal" href="#sequence-data"><span class="std std-ref">Sequence Data in Multi-Frame rendering</span></a>)</p>
</dd>
</dl>
</div>
<hr class="docutils" />
<div class="section" id="how-to-locate-the-static-and-global-variables-in-your-effects">
<h3>How to locate the static and global variables in your effects<a class="headerlink" href="#how-to-locate-the-static-and-global-variables-in-your-effects" title="Permalink to this headline">¶</a></h3>
<p>To help you locate the static and global variables in your effect, we’ve developed a <strong>Static Analyzer tool</strong> for you use.
You can find the tool in this Git Repo: <a class="reference external" href="https://github.com/adobe/ae-plugin-thread-safety">https://github.com/adobe/ae-plugin-thread-safety</a></p>
<dl class="docutils">
<dt>If you develop on Mac:</dt>
<dd><ol class="first arabic">
<li><p class="first">Clone/Download the Git Repo at the URL provided above</p>
</li>
<li><p class="first">Find the bash script <code class="docutils literal notranslate"><span class="pre">check_symbols_for_thread_safety.sh</span></code> in the <strong>Mac</strong> folder</p>
</li>
<li><p class="first">Navigate inside the package content of a plugin or effect and locate the binary files. (For example, the <strong>Curves.plugin</strong> has its binary file here: <code class="docutils literal notranslate"><span class="pre">/Applications/Adobe</span> <span class="pre">After</span> <span class="pre">Effects</span> <span class="pre">[your</span> <span class="pre">AE</span> <span class="pre">version]/Plug-ins/Effects/Curves.plugin/Contents/MacOS/Curves</span></code>)</p>
</li>
<li><p class="first">To analyze the binary, run:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">check_symbols_for_thread_safety</span><span class="p">.</span><span class="n">sh</span> <span class="p">[</span><span class="n">Binary</span> <span class="n">location</span><span class="p">]</span>
<span class="n">For</span> <span class="n">example</span><span class="p">,</span> <span class="n">check_symbols_for_thread_safety</span><span class="p">.</span><span class="n">sh</span> <span class="o">/</span><span class="n">Applications</span><span class="o">/</span><span class="n">Adobe</span> <span class="n">After</span> <span class="n">Effects</span> <span class="p">[</span><span class="n">your</span> <span class="n">AE</span> <span class="n">version</span><span class="p">]</span><span class="o">/</span><span class="n">Plug</span><span class="o">-</span><span class="n">ins</span><span class="o">/</span><span class="n">Effects</span><span class="o">/</span><span class="n">Curves</span><span class="p">.</span><span class="n">plugin</span><span class="o">/</span><span class="n">Contents</span><span class="o">/</span><span class="n">MacOS</span><span class="o">/</span><span class="n">Curves</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">You will see output from the tool in this format:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">symbol</span> <span class="n">type</span><span class="p">];</span> <span class="p">[</span><span class="n">symbol</span> <span class="n">name</span><span class="p">]</span>
</pre></div>
</div>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">[symbol</span> <span class="pre">type]</span></code> is an one case-sensitive letter that indicates the type of the variable. You can find all the type information here: <a class="reference external" href="https://linux.die.net/man/1/nm">https://linux.die.net/man/1/nm</a></p>
</li>
<li><p class="first">Here is an example of the output:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">b</span><span class="p">;</span> <span class="n">Deform</span><span class="o">::</span><span class="n">FindSilEdges</span><span class="p">()</span><span class="o">::</span><span class="n">new_kInfinite</span>
</pre></div>
</div>
</li>
</ol>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">b</span></code> shows this symbol is in the uninitialized data section, which indicates it might be a static variable.</p>
<p><code class="docutils literal notranslate"><span class="pre">Deform::FindSilEdges()::new_kInfinite</span></code> is the symbol name where <code class="docutils literal notranslate"><span class="pre">Deform</span></code> is name of the namespace that the variable is located at.</p>
<p><code class="docutils literal notranslate"><span class="pre">FindSilEdges()</span></code> is the function name the variable is in.</p>
<p><code class="docutils literal notranslate"><span class="pre">new_kInfinite</span></code> is the actual variable name. Namespace and function names might not be shown based on where the variable is.</p>
</div></blockquote>
<ol class="last arabic simple" start="8">
<li>Search for each symbol in your code, fix it (see <a class="reference internal" href="#fix-static"><span class="std std-ref">here</span></a> on how) and repeat for every binary file in your solution</li>
</ol>
</dd>
</dl>
<div class="line-block">
<div class="line"><br /></div>
</div>
<dl class="docutils">
<dt>If you develop on Windows:</dt>
<dd><dl class="first last docutils">
<dt><strong>1. Preparation</strong></dt>
<dd><ol class="first last arabic simple" start="0">
<li><strong>In order to run this tool, you need a working installation of Visual Studio</strong></li>
<li>Clone/Download the Git Repo at the URL provided above</li>
<li>Find the <code class="docutils literal notranslate"><span class="pre">register_msdia.cmd</span></code> script in the <strong>Win</strong> folder</li>
<li>Search for <strong>“x64 Native Tools Command Prompt for VS….”</strong> from the <strong>Start Menu</strong></li>
<li>Right click -&gt; Run as an Administrator</li>
<li>In the terminal, <code class="docutils literal notranslate"><span class="pre">cd</span></code> to the directory where your <code class="docutils literal notranslate"><span class="pre">register_msdia.cmd</span></code> is located at</li>
<li>Run <code class="docutils literal notranslate"><span class="pre">.\register_msdia.cmd</span></code></li>
<li>This script will register the <strong>DIA SDK</strong> and some other required dependencies for you</li>
<li>The Static Analyzer should be ready to work</li>
</ol>
</dd>
<dt><strong>2. Using the Windows Static Analyzer</strong></dt>
<dd><ol class="first arabic simple">
<li>Find the executable <code class="docutils literal notranslate"><span class="pre">CheckThreadSafeSymbols.exe</span></code> in the <strong>Win</strong> folder</li>
<li>Compile your effect in <strong>Debug</strong> mode and find its <strong>.pdb</strong> file</li>
<li>You should also find some <strong>.obj</strong> files in the same build directory if you haven’t modified your project build settings</li>
<li>You have <strong>two options</strong> on what to scan through: binaries or source files, using <code class="docutils literal notranslate"><span class="pre">-objfile</span></code> or <code class="docutils literal notranslate"><span class="pre">-source</span></code> flag.</li>
</ol>
<blockquote>
<div><ul class="simple">
<li><strong>You can get the same symbols out of either option.</strong></li>
<li>Use the <code class="docutils literal notranslate"><span class="pre">-source</span></code> option if you don’t know exactly what binaries your source code is ending up in, or if you’d like to keep track of thread safety on a per-source-file basis.</li>
<li>Use the <code class="docutils literal notranslate"><span class="pre">-objfile</span></code> option if you want more fine-grained control over what parts of your project you’re scanning.</li>
</ul>
</div></blockquote>
<ol class="arabic" start="5">
<li><p class="first">To analyze the symbols in an object file, run:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">CheckThreadSafeSymbols</span><span class="p">.</span><span class="n">exe</span> <span class="o">-</span><span class="n">objfile</span> <span class="p">[</span><span class="n">absolute</span> <span class="n">path</span> <span class="n">to</span> <span class="n">the</span> <span class="n">binary</span> <span class="n">you</span> <span class="n">want</span> <span class="n">analyzed</span><span class="p">]</span> <span class="p">[</span><span class="n">absolute</span> <span class="n">path</span> <span class="n">to</span> <span class="p">.</span><span class="n">pdb</span><span class="p">]</span>
</pre></div>
</div>
</li>
<li><p class="first">To analyze the symbols in a source file, run:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">CheckThreadSafeSymbols</span><span class="p">.</span><span class="n">exe</span> <span class="o">-</span><span class="n">source</span> <span class="p">[</span><span class="n">absolute</span> <span class="n">path</span> <span class="n">to</span> <span class="n">the</span> <span class="n">source</span> <span class="n">file</span> <span class="n">you</span> <span class="n">want</span> <span class="n">analyzed</span><span class="p">]</span> <span class="p">[</span><span class="n">absolute</span> <span class="n">path</span> <span class="n">to</span> <span class="p">.</span><span class="n">pdb</span><span class="p">]</span>
</pre></div>
</div>
</li>
<li><p class="first">Global variables aren’t limited to the scope of one file or binary in pdbs, so you’ll have to check over the list of all project globals without filtering. Use the -g output to get a list of all of them:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">CheckThreadSafeSymbols</span><span class="p">.</span><span class="n">exe</span> <span class="o">-</span><span class="n">g</span> <span class="p">[</span><span class="n">absolute</span> <span class="n">path</span> <span class="n">to</span> <span class="p">.</span><span class="n">pdb</span><span class="p">]</span>
</pre></div>
</div>
</li>
<li><p class="first">If you’re unsure of what binaries your effect is outputting, the tool can also output a <strong>(noisy)</strong> list of binaries, along with the source files each pulls data from. Files you’ve changed are likely to be near the top. To see the list, run:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">CheckThreadSafeSymbols</span><span class="p">.</span><span class="n">exe</span> <span class="o">-</span><span class="n">sf</span> <span class="p">[</span><span class="n">absolute</span> <span class="n">path</span> <span class="n">to</span> <span class="p">.</span><span class="n">pdb</span><span class="p">]</span>
</pre></div>
</div>
</li>
<li><p class="first">Output symbols will take the form:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">Symbol</span> <span class="n">name</span><span class="p">],</span> <span class="p">[</span><span class="n">Symbol</span> <span class="n">type</span><span class="p">],</span> <span class="p">[</span><span class="n">Datakind</span><span class="p">],</span> <span class="p">([</span><span class="n">Section</span> <span class="n">type</span> <span class="n">of</span> <span class="n">data</span> <span class="n">location</span><span class="p">],</span> <span class="p">[</span><span class="n">Binary</span> <span class="n">Address</span><span class="p">][</span><span class="n">Binary</span> <span class="n">Address</span> <span class="n">Offset</span><span class="p">])</span>
</pre></div>
</div>
</li>
<li><p class="first">Here is an example of the output:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">menuBuf</span><span class="p">,</span> <span class="nl">Type</span><span class="p">:</span> <span class="kt">char</span><span class="p">[</span><span class="mh">0x1000</span><span class="p">],</span> <span class="n">File</span> <span class="n">Static</span><span class="p">,</span> <span class="p">(</span><span class="k">static</span><span class="p">,</span> <span class="p">[</span><span class="mf">0008F</span><span class="n">CD0</span><span class="p">][</span><span class="mo">0003</span><span class="o">:</span><span class="mo">00001</span><span class="n">CD0</span><span class="p">])</span>
</pre></div>
</div>
</li>
</ol>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">menuBuf</span></code> is the actual variable name.</p>
<p><code class="docutils literal notranslate"><span class="pre">Type:</span> <span class="pre">char[0x1000]</span></code> shows what type of the variable it is. The data here is a <code class="docutils literal notranslate"><span class="pre">char</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">File</span> <span class="pre">Static</span></code> shows what kind of that data it is. The data here is a <strong>File-scoped static variable.</strong> You can find all the data kinds and what they mean on this page <a class="reference external" href="https://docs.microsoft.com/en-us/visualstudio/debugger/debug-interface-access/datakind?view=vs-2019">https://docs.microsoft.com/en-us/visualstudio/debugger/debug-interface-access/datakind?view=vs-2019</a></p>
<p><code class="docutils literal notranslate"><span class="pre">static</span></code> shows that the data is in the static section of the memory.</p>
<p><code class="docutils literal notranslate"><span class="pre">[0008FCD0][0003:00001CD0]</span></code> shows the Binary Address and the Binary Address offset of the data.</p>
</div></blockquote>
<ol class="last arabic simple" start="11">
<li>Search for each symbol in your code, fix it (see <a class="reference internal" href="#fix-static"><span class="std std-ref">here</span></a> on how) and repeat for every binary/source file in your solution</li>
</ol>
</dd>
</dl>
</dd>
</dl>
<hr class="docutils" />
</div>
<div class="section" id="what-to-do-if-you-have-static-and-globals-in-your-effects">
<span id="fix-static"></span><h3>What to do if you have static and globals in your effects<a class="headerlink" href="#what-to-do-if-you-have-static-and-globals-in-your-effects" title="Permalink to this headline">¶</a></h3>
<p>When you see a static or global variable, it would be the best to make it a local variable if possible. But what if that variable has to be static or global?</p>
<dl class="docutils">
<dt>Here are some standard approaches for treating statics or globals:</dt>
<dd><p class="first"><strong>1. Could the data be easily passed between functions instead without a change in behavior?</strong></p>
<blockquote>
<div><div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// Example of a non Thread-Safe code</span>

<span class="k">static</span> <span class="kt">int</span> <span class="n">should_just_be_local</span><span class="p">;</span>

<span class="kt">void</span> <span class="nf">UseState</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">DoComputation</span><span class="p">(</span><span class="n">should_just_be_local</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">SetAndUseState</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">should_just_be_local</span> <span class="o">=</span> <span class="n">DoComputation</span><span class="p">();</span>
  <span class="n">UseState</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Either add it to a struct or expand function arguments to include it</strong></p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// We can fix the above code by passing the should_just_be_local variable through function arguments</span>

<span class="kt">void</span> <span class="nf">UseState</span><span class="p">(</span><span class="kt">int</span> <span class="n">should_just_be_local</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">DoComputation</span><span class="p">(</span><span class="n">should_just_be_local</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">SetAndUseState</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">should_just_be_local</span> <span class="o">=</span> <span class="n">DoComputation</span><span class="p">();</span>
  <span class="n">UseState</span><span class="p">(</span><span class="n">should_just_be_local</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<p><strong>2. Could the data be initialized before you execute your code (e.g. a lookup table, a const variable)?</strong></p>
<blockquote>
<div><div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// Example of a non Thread-Safe code</span>

<span class="c1">// Many places in the code need to read this table but won&#39;t be writing to it</span>
<span class="k">static</span> <span class="kt">int</span> <span class="n">state_with_initializer</span><span class="p">[</span><span class="mi">64</span><span class="p">];</span>

<span class="k">static</span> <span class="kt">bool</span> <span class="n">state_was_initialized</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>

<span class="kt">void</span> <span class="nf">InitializeState</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">64</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">state_with_initializer</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span> <span class="o">*</span> <span class="n">i</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="n">state_was_initialized</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">Main</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">state_was_initialized</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">InitializeState</span><span class="p">();</span>
  <span class="p">}</span>
  <span class="n">DoComputation</span><span class="p">(</span><span class="n">state_with_initializer</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Make it</strong> <code class="docutils literal notranslate"><span class="pre">const</span></code> <strong>or replace it with a macro</strong></p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">std</span><span class="o">::</span><span class="n">array</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="mi">64</span><span class="o">&gt;</span> <span class="n">InitializeState</span><span class="p">()</span> <span class="p">{</span>

  <span class="n">std</span><span class="o">::</span><span class="n">array</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="mi">64</span><span class="o">&gt;</span> <span class="n">temp</span><span class="p">;</span>

  <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">64</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">temp</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span> <span class="o">*</span> <span class="n">i</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="n">temp</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// We can fix the above code by making this table a const and initialize it before using it</span>
<span class="k">static</span> <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">array</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="mi">64</span><span class="o">&gt;</span> <span class="n">state_with_initializer</span> <span class="o">=</span> <span class="n">InitializeState</span><span class="p">();</span>

<span class="kt">void</span> <span class="nf">Main</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">DoComputation</span><span class="p">(</span><span class="n">state_with_initializer</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<p><strong>3. Is the data initialized once at runtime based on data that doesn’t change on subsequent renders?</strong></p>
<blockquote>
<div><div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// Example of a non Thread-Safe code</span>
<span class="k">static</span> <span class="kt">int</span> <span class="n">depends_on_unchanging_runtime_state</span><span class="p">;</span>

<span class="kt">void</span> <span class="nf">UseState</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">DoComputation</span><span class="p">(</span><span class="n">depends_on_unchanging_runtime_state</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">SetAndUseState</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">depends_on_unchanging_runtime_state</span> <span class="o">=</span> <span class="n">DoComputationThatNeedsStateOnlyOnce</span><span class="p">();</span>
  <span class="n">UseState</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Double-check that this state isn’t known before your code executes (case 2), but if you have to initialize at runtime use a const static local. (Note that thread-safe initialization of static local objects is part of the C++ spec)</strong></p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">UseState</span><span class="p">(</span><span class="kt">int</span> <span class="n">depends_on_unchanging_runtime_state</span><span class="p">)</span> <span class="p">{</span>
              <span class="n">DoComputation</span><span class="p">(</span><span class="n">depends_on_unchanging_runtime_state</span><span class="p">);</span>
      <span class="p">}</span>

<span class="kt">void</span> <span class="nf">SetAndUseState</span><span class="p">()</span> <span class="p">{</span>

  <span class="c1">// We can fix the above code by making the variable a const static local</span>
  <span class="k">static</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">depends_on_unchanging_runtime_state</span> <span class="o">=</span> <span class="n">DoComputationThatNeedsStateOnlyOnce</span><span class="p">();</span>

  <span class="n">UseState</span><span class="p">(</span><span class="n">depends_on_unchanging_runtime_state</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<p><strong>4. The data has to stay static/global not being a const. But each render thread can have its own copy of the data.</strong></p>
<blockquote>
<div><div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// This variable has to be static and not a const</span>
<span class="k">static</span> <span class="kt">int</span> <span class="n">this_thread_needs_access</span><span class="p">;</span>

<span class="kt">void</span> <span class="nf">SetState</span><span class="p">(</span><span class="kt">int</span> <span class="n">new_state</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">this_thread_needs_access</span> <span class="o">=</span> <span class="n">new_state</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">UseState</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">DoComputation</span><span class="p">(</span><span class="n">this_thread_needs_access</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Just make the variable thread_local</strong></p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// Make this variable a thread_local variable</span>
<span class="k">thread_local</span> <span class="k">static</span> <span class="kt">int</span> <span class="n">this_thread_needs_access</span><span class="p">;</span>

<span class="kt">void</span> <span class="nf">SetState</span><span class="p">(</span><span class="kt">int</span> <span class="n">new_state</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">this_thread_needs_access</span> <span class="o">=</span> <span class="n">new_state</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">UseState</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">DoComputation</span><span class="p">(</span><span class="n">this_thread_needs_access</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<p><strong>5. The data has to stay static/global not being a const and each thread needs to read and write from the most up-to-date state. (rare)</strong></p>
<blockquote class="last">
<div><div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// This variable has to be static and not a const</span>
<span class="c1">// It also needs to be shared across several threads</span>
<span class="k">static</span> <span class="kt">int</span> <span class="n">every_thread_needs_latest_state</span><span class="p">;</span>

<span class="kt">void</span> <span class="nf">SetState</span><span class="p">(</span><span class="kt">int</span> <span class="n">new_state</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">every_thread_needs_latest_state</span> <span class="o">=</span> <span class="n">new_state</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">UseState</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">DoComputation</span><span class="p">(</span><span class="n">every_thread_needs_latest_state</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>In this case, protect access with a mutex.</strong></p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// Add a mutex (lock)</span>
<span class="k">static</span> <span class="n">std</span><span class="o">::</span><span class="n">mutex</span> <span class="n">ex_lock</span><span class="p">;</span>

<span class="k">static</span> <span class="kt">int</span> <span class="n">every_thread_needs_latest_state</span><span class="p">;</span>

<span class="kt">void</span> <span class="nf">SetState</span><span class="p">(</span><span class="kt">int</span> <span class="n">new_state</span><span class="p">)</span> <span class="p">{</span>
  <span class="p">{</span>
    <span class="c1">// Protect the access with the mutex (lock)</span>
    <span class="n">std</span><span class="o">::</span><span class="n">lock_guard</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">mutex</span><span class="o">&gt;</span> <span class="n">lock</span><span class="p">(</span><span class="n">ex_lock</span><span class="p">);</span>
    <span class="n">every_thread_needs_latest_state</span> <span class="o">=</span> <span class="n">new_state</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">UseState</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">state_capture</span><span class="p">;</span>
  <span class="p">{</span>
    <span class="c1">// Protect the access with the mutex (lock)</span>
    <span class="n">std</span><span class="o">::</span><span class="n">lock_guard</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">mutex</span><span class="o">&gt;</span> <span class="n">lock</span><span class="p">(</span><span class="n">ex_lock</span><span class="p">);</span>
    <span class="n">state_capture</span> <span class="o">=</span> <span class="n">every_thread_needs_latest_state</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="n">DoComputation</span><span class="p">(</span><span class="n">state_capture</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
</dd>
</dl>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><strong>The above examples are the common cases we’ve seen in our effects. You can always come up other methods to treat your statics and globals that best suits your needs.</strong></p>
</div>
</div>
<hr class="docutils" />
<div class="section" id="setting-an-effect-as-thread-safe">
<h3>Setting an Effect as Thread-safe<a class="headerlink" href="#setting-an-effect-as-thread-safe" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Set the <code class="docutils literal notranslate"><span class="pre">PF_OutFlag2_SUPPORTS_THREADED_RENDERING</span></code> flag in <code class="docutils literal notranslate"><span class="pre">GlobalSetup</span></code> to tell After Effects that your effect is Thread-Safe and supports Multi-Frame Rendering.</li>
<li>Update the <code class="docutils literal notranslate"><span class="pre">AE_Effect_Global_OutFlags_2</span></code> magic number. Launch AE with your effect without changing the magic number for the first time, apply your effect and AE will give you the correct number to put in.</li>
<li>If you are using the <code class="docutils literal notranslate"><span class="pre">PF_OutFlag_SEQUENCE_DATA_NEEDS_FLATTENING</span></code> flag, remember to also set the <code class="docutils literal notranslate"><span class="pre">PF_OutFlag2_SUPPORTS_GET_FLATTENED_SEQUENCE_DATA</span></code> flag.</li>
</ul>
</div>
<hr class="docutils" />
<div class="section" id="how-to-test-whether-an-effect-is-thread-safe">
<h3>How to test whether an effect is Thread-Safe<a class="headerlink" href="#how-to-test-whether-an-effect-is-thread-safe" title="Permalink to this headline">¶</a></h3>
<p>Once you have completed the above steps to make your effect Thread-Safe, you should now be ready to do some testing.</p>
<div class="section" id="enable-multi-frame-rendering-in-after-effects-beta">
<h4>Enable Multi-Frame Rendering in After Effects Beta<a class="headerlink" href="#enable-multi-frame-rendering-in-after-effects-beta" title="Permalink to this headline">¶</a></h4>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p><strong>Multi-frame rendering is currently only available in After Effects Beta builds which can be downloaded via the Creative Cloud Desktop application.</strong></p>
<p class="last"><strong>At this time, access to multi-frame rendering is limited to and, recommended only for plugin developers to prepare their effects for multi-frame rendering support in After Effects.</strong></p>
</div>
<ol class="arabic simple">
<li>Download <strong>After Effects Beta</strong> from Creative Cloud Desktop</li>
<li><strong>Shift-Click</strong> the <strong>”What’s New”</strong> beaker icon on the top right of the AE Window</li>
<li>Enter Unlock Code. (Unlock code is distributed privately at this time)</li>
</ol>
<blockquote>
<div><div class="figure">
<a class="reference internal image-reference" href="_images/Unlock.png"><img alt="_images/Unlock.png" src="_images/Unlock.png" style="width: 500px;" /></a>
</div>
</div></blockquote>
<ol class="arabic simple" start="4">
<li>Click Enable. After Effects will quit</li>
<li>Restart After Effects​</li>
<li>Multi-frame rendering will then be enabled</li>
</ol>
</div>
<div class="section" id="configuring-concurrent-frame-count">
<h4>Configuring Concurrent Frame Count<a class="headerlink" href="#configuring-concurrent-frame-count" title="Permalink to this headline">¶</a></h4>
<ol class="arabic">
<li><p class="first">Create a simple comp, apply your effect and run preview once. This first run of Multi-Frame render will create some necessary preference entries</p>
</li>
<li><p class="first">Go to AE Text preferences file:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span>Location on Windows: %APPDATA%\Roaming\Adobe\After Effects (Beta)\17.1\Adobe After Effects 17.1 Prefs.txt​
Location on Mac: ~/Library/Preferences/Adobe/After Effects (Beta)/17.1/Adobe After Effects 17.1 Prefs.txt​
</pre></div>
</div>
</li>
<li><p class="first">Find this preference entry:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span>[&quot;Concurrent Frame Rendering&quot;]​
&quot;Number of Concurrent Frame Renders&quot; = &quot;-1”​
</pre></div>
</div>
</li>
<li><p class="first">Replace the number in quotes with the number of render threads you want to have.</p>
</li>
</ol>
<blockquote>
<div><ol class="loweralpha simple">
<li>“-1” means use the default number render threads. By default, there will be 2-4 render threads created for a multi-frame render.</li>
<li>You can put in any integer in the range from 1 to 99.</li>
</ol>
</div></blockquote>
<ol class="arabic simple" start="5">
<li>Restart AE after you change this preference for it to take effect</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><strong>This preference is temporary and will be removed when Multi-Frame Rendering is released to beta customers</strong></p>
</div>
</div>
<div class="section" id="monitoring-multi-frame-renders">
<span id="monitor-mfr"></span><h4>Monitoring Multi-Frame Renders​<a class="headerlink" href="#monitoring-multi-frame-renders" title="Permalink to this headline">¶</a></h4>
<p>At this time there are two ways to monitor multi-frame renders​.</p>
<dl class="docutils">
<dt>Real-time Debug Monitor through​ Keyboard Shortcut:</dt>
<dd><ol class="first arabic">
<li><p class="first">Delete your current keyboard shortcut file</p>
</li>
<li><p class="first">You can find the files here:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span>Mac: ~/Library/Preferences/Adobe/After Effects (Beta)/17.1/aeks/After Effects Default.txt
Windows: %APPDATA%\Roaming\Adobe\After Effects (Beta)\17.1\aeks\After Effects Default.txt
</pre></div>
</div>
</li>
<li><p class="first">Start AE and Press <strong>Command+Shift+9</strong> or <strong>​Control+Shift+9</strong></p>
</li>
<li><p class="first">Find the AE.MultithreadedRenderer section</p>
</li>
</ol>
<blockquote class="last">
<div><div class="figure">
<a class="reference internal image-reference" href="_images/debugmonitor.png"><img alt="_images/debugmonitor.png" src="_images/debugmonitor.png" style="width: 400px;" /></a>
</div>
</div></blockquote>
</dd>
<dt>AE Log File​:</dt>
<dd><ol class="first arabic simple">
<li>Enable logging (Help Menu -&gt; Enable Logging)​</li>
<li>Restart AE</li>
<li>Search for <strong>Multithreaded render report</strong> in the log</li>
</ol>
<blockquote class="last">
<div><div class="figure">
<a class="reference internal image-reference" href="_images/AE_Log.png"><img alt="_images/AE_Log.png" src="_images/AE_Log.png" style="width: 400px;" /></a>
</div>
</div></blockquote>
</dd>
</dl>
</div>
<div class="section" id="test-your-effect">
<h4>Test your effect<a class="headerlink" href="#test-your-effect" title="Permalink to this headline">¶</a></h4>
<p>Once you have completed the above preparation steps, test your effect thoroughly. Right now we’d suggest simple comps that test the basic rendering and functionality of an effect.</p>
<ol class="arabic simple">
<li>Go through all your existing manual and automated testing plans.</li>
<li>Test all the effect parameters and make sure they are working properly.</li>
<li>Add in some of the AE effects that have already been made thread-safe as appropriate. See the <a class="reference internal" href="#first-party"><span class="std std-ref">Thread-Safe First Party Effects</span></a> section.</li>
<li>Make sure there are no crashes, hang,s render differences or other unexpected changes when rendering with multi-frame rendering enabled.</li>
</ol>
<hr class="docutils" />
</div>
</div>
<div class="section" id="thread-safe-first-party-effects">
<span id="first-party"></span><h3>Thread-Safe First Party Effects<a class="headerlink" href="#thread-safe-first-party-effects" title="Permalink to this headline">¶</a></h3>
<p><strong>As of August 28th the following effects are thread-safe and can be used for testing multi-frame rendering:</strong></p>
<ul class="simple">
<li>Advanced Lightning</li>
<li>Arithmetic</li>
<li>Backwards</li>
<li>Bevel Edges</li>
<li>Blend</li>
<li>Block Dissolve</li>
<li>Broadcast Colors</li>
<li>Brush Strokes</li>
<li>Calculations</li>
<li>Camera Lens Blur</li>
<li>Cell Pattern</li>
<li>Change to Color</li>
<li>Channel Combiner</li>
<li>Channel Mixer</li>
<li>Checkerboard</li>
<li>Circle</li>
<li>Color Balance</li>
<li>Color Key</li>
<li>Color Link</li>
<li>Compound Arithmetic</li>
<li>Compound Blur</li>
<li>Depth Matte</li>
<li>Depth of Field</li>
<li>Difference Matte</li>
<li>Drop Shadow</li>
<li>Echo</li>
<li>Equalize</li>
<li>Exposure</li>
<li>Eyedropper Fill</li>
<li>Fill</li>
<li>Flange &amp; Chorus</li>
<li>Fog 3D</li>
<li>Fractal Noise</li>
<li>Gaussian Blur</li>
<li>Grow Bounds</li>
<li>Leave Color</li>
<li>Linear Wipe</li>
<li>Magnify</li>
<li>Match Grain</li>
<li>Matte Choker</li>
<li>Mirror</li>
<li>Modulator</li>
<li>Mosaic</li>
<li>Noise Alpha</li>
<li>Noise HLS Auto</li>
<li>Noise HLS</li>
<li>Paint Bucket</li>
<li>Photoshop Solid Fill</li>
<li>Polar Coordinates</li>
<li>Posterize Time</li>
<li>Posterize</li>
<li>Radial Shadow</li>
<li>Radial Wipe</li>
<li>Ripple</li>
<li>Roughen Edges</li>
<li>Scatter</li>
<li>Set Matte</li>
<li>Smart Blur</li>
<li>Solid Composite</li>
<li>Stereo Mixer</li>
<li>Strobe Light</li>
<li>Stroke</li>
<li>Texturize</li>
<li>Time Difference</li>
<li>Tint</li>
<li>Tone</li>
<li>Tritone</li>
<li>Twirl</li>
<li>Venetian Blinds</li>
<li>Wave Warp</li>
<li>Write-on</li>
</ul>
</div>
</div>
<span id="document-effect-details/effect-details"></span><div class="section" id="effect-details">
<span id="effect-details-effect-details"></span><h2>Effect Details<a class="headerlink" href="#effect-details" title="Permalink to this headline">¶</a></h2>
<p>Now that we’ve covered the basics of effect plug-ins, we’ll cover some of the finer points to polish off your effect. Not every section will be relevant to every plug-in, so feel free to use the PDF document bookmarks to skip to the sections pertinent to your current project.</p>
<hr class="docutils" />
<div class="section" id="free-code-good">
<h3>Free Code == Good<a class="headerlink" href="#free-code-good" title="Permalink to this headline">¶</a></h3>
<p>After Effects provides effect plug-ins with as much information and supporting code as possible. Use our function suites and callbacks to obtain the value of parameters (including source footage) at different times. Use our memory allocation suite to avoid competing with the host for resources. Use our image processing suites to copy, fill, blend and convolve images, and convert between color spaces. Obtain information about the masks applied to a layer. ANSI emulation and math utility suites are also provided, as well as information about the application, user, serial number, and current drawing context.</p>
<p>Previous versions of After Effects have provided functions for many common tasks. As we moved to support deeper color, these were moved to function suites. Use the newer function suites whenever possible; things will just be better.</p>
<p>Using our function suites keeps your plug-in compact; you write and test less code. The functions are tested, optimized, and used by our own plug-ins. The functions are distributed to multiple processors and take advantage of available hardware acceleration.</p>
<p>No, really, use the provided functions. Seriously.</p>
</div>
</div>
<span id="document-effect-details/accessing-function-suites"></span><div class="section" id="accessing-the-after-effects-function-suites">
<span id="effect-details-accessing-function-suites"></span><h2>Accessing the After Effects Function Suites<a class="headerlink" href="#accessing-the-after-effects-function-suites" title="Permalink to this headline">¶</a></h2>
<p>If you are writing C++ code, accessing functions in our PICA function suites is a breeze, using the AEGP_SuiteHandler, which automatically acquires the suite when needed, and disposes of it when done. Just instantiate the handler like so:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SuiteHandler</span> <span class="nf">suites</span><span class="p">(</span><span class="n">in_data</span><span class="o">-&gt;</span><span class="n">pica_basicP</span><span class="p">);</span>
</pre></div>
</div>
<p>After that, you may make calls to any function in any suite, like so:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_Handle</span> <span class="n">infoH</span> <span class="o">=</span> <span class="n">suites</span><span class="p">.</span><span class="n">HandleSuite1</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">host_new_handle</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="n">MyStruct</span><span class="p">));</span>
</pre></div>
</div>
<p>If you must use C code, then acquire and release the suites manually using the <code class="docutils literal notranslate"><span class="pre">PF_Suite_Helper</span></code> utility files, as demonstrated in the Checkout sample project.</p>
<p>Behind the scenes, these both of these methods acquire PICA function suites using <code class="docutils literal notranslate"><span class="pre">AcquireSuite</span></code>, a member function of the SPBasicSuite pointed to in <a class="reference internal" href="index.html#effect-basics-pf-indata"><span class="std std-ref">PF_InData</span></a>.</p>
<hr class="docutils" />
<div class="section" id="suite-versions">
<h3>Suite Versions<a class="headerlink" href="#suite-versions" title="Permalink to this headline">¶</a></h3>
<p>WhizBangSuite1 may provide a Foobar() function which takes two arguments, and WhizBangSuite2&gt;Foobar() may take three. Though each new version of a suite supercedes the old one, feel free to acquire multiple versions of the same suite; we never remove or alter previously shipped suites.</p>
<p>When unsure of the capabilities of the plug-in host (no third party host besides Premiere supports PICA), attempt to acquire the latest version, and “fall back” to previous versions. If functionality you require isn’t available, warn the user, and return an error (or fall back on other behavior when running in more “primitive” plug-in hosts). Note that support for these suites in other hosts of After Effects plug-ins is a maze of twisty caves and passages, all alike.</p>
</div>
<hr class="docutils" />
<div class="section" id="threading">
<h3>Threading<a class="headerlink" href="#threading" title="Permalink to this headline">¶</a></h3>
<p>Unless documented otherwise, assume that any function provided by our suites is not thread-safe. For example, only your plug-in’s main thread should do anything that modifies the user interface.</p>
</div>
</div>
<span id="document-effect-details/memory-allocation"></span><div class="section" id="memory-allocation">
<span id="effect-details-memory-allocation"></span><h2>Memory Allocation<a class="headerlink" href="#memory-allocation" title="Permalink to this headline">¶</a></h2>
<p>Use After Effects for any memory allocations of significant size. For small allocations, you can use new and delete, but this is the exception, not the rule. In low-memory conditions (such as during RAM preview), it’s very important that plug-ins deal gracefully with out-of-memory conditions, and not compete with After Effects for OS memory. By using our memory allocation functions, After Effects can know when to free cached images, to avoid memory swapping. Failing to use our functions for sizable allocations can cause lock-ups, crashes, and tech support calls. Don’t do that.</p>
<p>If you’re wrapping existing C++ classes, create a base class that implements new and delete for that class and derive from it. To overload the STL, we don’t recommend you overload global new and delete. Instead provide an allocator as part of the template definition.</p>
<p>Handles passed to you by After Effects are locked for you before you’re called, and unlocked once you return.</p>
<hr class="docutils" />
<div class="section" id="pf-handlesuite1">
<span id="effect-details-memory-allocation-pf-handlesuite"></span><h3>PF_HandleSuite1<a class="headerlink" href="#pf-handlesuite1" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="62%" />
<col width="18%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Function</strong></th>
<th class="head"><strong>Purpose</strong></th>
<th class="head"><strong>Replaces</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">host_new_handle</span></code></td>
<td><p class="first">Allocates a new handle.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_Handle</span> <span class="p">(</span><span class="o">*</span><span class="n">host_new_handle</span><span class="p">)(</span>
  <span class="n">A_HandleSize</span> <span class="n">size</span><span class="p">);</span>
</pre></div>
</div>
</td>
<td><code class="docutils literal notranslate"><span class="pre">PF_NEW_HANDLE</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">host_lock_handle</span></code></td>
<td><p class="first">Locks a handle.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">host_lock_handle</span><span class="p">)(</span>
  <span class="n">PF_Handle</span> <span class="n">pf_handle</span><span class="p">);</span>
</pre></div>
</div>
</td>
<td><code class="docutils literal notranslate"><span class="pre">PF_LOCK_HANDLE</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">host_unlock_handle</span></code></td>
<td><p class="first">Unlocks a handle.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">host_unlock_handle</span><span class="p">)(</span>
  <span class="n">PF_Handle</span> <span class="n">pf_handle</span><span class="p">);</span>
</pre></div>
</div>
</td>
<td><code class="docutils literal notranslate"><span class="pre">PF_UNLOCK_HANDLE</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">host_dispose_handle</span></code></td>
<td><p class="first">Frees a handle.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">host_dispose_handle</span><span class="p">)(</span>
  <span class="n">PF_Handle</span> <span class="n">pf_handle</span><span class="p">);</span>
</pre></div>
</div>
</td>
<td><code class="docutils literal notranslate"><span class="pre">PF_DISPOSE_HANDLE</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">host_get_handle_size</span></code></td>
<td><p class="first">Returns the size, in bytes, of the reallocatable block whose handle is passed in.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">A_HandleSize</span> <span class="p">(</span><span class="o">*</span><span class="n">host_get_handle_size</span><span class="p">)(</span>
  <span class="n">PF_Handle</span> <span class="n">pf_handle</span><span class="p">);</span>
</pre></div>
</div>
</td>
<td><code class="docutils literal notranslate"><span class="pre">PF_GET_HANDLE_SIZE</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">host_resize_handle</span></code></td>
<td><p class="first">Resizes a handle.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_Err</span> <span class="p">(</span><span class="o">*</span><span class="n">host_resize_handle</span><span class="p">)(</span>
  <span class="n">A_HandleSize</span> <span class="n">new_sizeL</span><span class="p">,</span> <span class="n">PF_Handle</span> <span class="o">*</span><span class="n">handlePH</span><span class="p">);</span>
</pre></div>
</div>
</td>
<td><code class="docutils literal notranslate"><span class="pre">PF_RESIZE_HANDLE</span></code></td>
</tr>
</tbody>
</table>
</div>
</div>
<span id="document-effect-details/image-buffer-management-functions"></span><div class="section" id="image-buffer-management-functions">
<span id="effect-details-image-buffer-management-functions"></span><h2>Image Buffer Management Functions<a class="headerlink" href="#image-buffer-management-functions" title="Permalink to this headline">¶</a></h2>
<p>Use these functions to create and destroy <a class="reference internal" href="index.html#effect-basics-pf-effectworld"><span class="std std-ref">PF_EffectWorld / PF_LayerDef</span></a>, and to find out their bit-depth.</p>
<hr class="docutils" />
<div class="section" id="pf-worldsuite2">
<h3>PF_WorldSuite2<a class="headerlink" href="#pf-worldsuite2" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="28%" />
<col width="72%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Function</strong></th>
<th class="head"><strong>Description</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_NewWorld</span></code></td>
<td><p class="first">Creates a new <code class="docutils literal notranslate"><span class="pre">PF_EffectWorld</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_Err</span> <span class="nf">PF_NewWorld</span><span class="p">(</span>
  <span class="n">PF_ProgPtr</span>      <span class="n">effect_ref</span><span class="p">,</span>
  <span class="n">A_long</span>          <span class="n">widthL</span><span class="p">,</span>
  <span class="n">A_long</span>          <span class="n">heightL</span><span class="p">,</span>
  <span class="n">PF_Boolean</span>      <span class="n">clear_pixB</span><span class="p">,</span>
  <span class="n">PF_PixelFormat</span>  <span class="n">pixel_format</span><span class="p">,</span>
  <span class="n">PF_EffectWorld</span>  <span class="o">*</span><span class="n">worldP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_DisposeWorld</span></code></td>
<td><p class="first">Disposes of a <code class="docutils literal notranslate"><span class="pre">PF_EffectWorld</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_Err</span> <span class="nf">PF_DisposeWorld</span><span class="p">(</span>
  <span class="n">PF_ProgPtr</span>      <span class="n">effect_ref</span><span class="p">,</span>
  <span class="n">PF_EffectWorld</span>  <span class="o">*</span><span class="n">worldP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_GetPixelFormat</span></code></td>
<td><p class="first">Get the pixel format for a given <code class="docutils literal notranslate"><span class="pre">PF_EffectWorld</span></code>.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_Err</span> <span class="nf">PF_GetPixelFormat</span><span class="p">(</span>
  <span class="k">const</span> <span class="n">PF_EffectWorld</span>  <span class="o">*</span><span class="n">worldP</span><span class="p">,</span>
  <span class="n">PF_PixelFormat</span>        <span class="o">*</span><span class="n">pixel_formatP</span><span class="p">);</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">pixel_formatP</span></code> can be:</p>
<blockquote class="last">
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">PF_PixelFormat_ARGB32</span></code> - standard 8-bit RGB</li>
<li><code class="docutils literal notranslate"><span class="pre">PF_PixelFormat_ARGB64</span></code> - 16-bit RGB</li>
<li><code class="docutils literal notranslate"><span class="pre">PF_PixelFormat_ARGB128</span></code> - 32-bit floating point RGB</li>
</ul>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<span id="document-effect-details/iteration-suites"></span><div class="section" id="iteration-suites">
<span id="effect-details-iteration-suites"></span><h2>Iteration Suites<a class="headerlink" href="#iteration-suites" title="Permalink to this headline">¶</a></h2>
<p>Effects often iterate over all pixels in an image, filtering each one. By taking advantage of After Effects’ iteration suites, you make it possible for After Effects to sub-allocate your task to as many processors are present, taking advantage of hardware-specific acceleration.</p>
<p>After Effects will also manage progress reporting and user cancellation automatically.</p>
<p>Use these suites! Make sure the pixel processing functions you pass to these iterator callbacks are re-entrant.</p>
<hr class="docutils" />
<div class="section" id="pf-iterate8suite1-pf-iterate16suite1-pf-iteratefloatsuite1">
<h3>PF_Iterate8Suite1, PF_Iterate16Suite1, PF_IterateFloatSuite1<a class="headerlink" href="#pf-iterate8suite1-pf-iterate16suite1-pf-iteratefloatsuite1" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="15%" />
<col width="85%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Function</strong></th>
<th class="head"><strong>Purpose</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">iterate</span></code></td>
<td><p class="first">Iterates across pixels from a source image, alters them, and populates a destination image.</p>
<p>You may specify a rectangular region of pixels across which to iterate; if you don’t, After Effects will iterate over every overlapping pixel.
You give a refcon, and the function is invoked with that refcon, plus the x and y coordinates of the current pixel, plus pointers to that pixel in the source and destination images.
If you pass a NULL source, it will iterate over the dst. This function is quality independent.</p>
<p>Don’t depend upon the pixels being traversed in any particular order.
The image may be subset to different CPUs, so consider all the parameters (except dst) to be read-only while After Effects is processing.
This callback automatically includes progress and abort checking, so don’t do so in your pixel function.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">iterate</span><span class="p">(</span>
  <span class="n">PF_InData</span>       <span class="o">*</span><span class="n">in_data</span><span class="p">,</span>
  <span class="n">A_long</span>          <span class="n">progress_base</span><span class="p">,</span>
  <span class="n">A_long</span>          <span class="n">progress_final</span><span class="p">,</span>
  <span class="n">PF_EffectWorld</span>  <span class="o">*</span><span class="n">src</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">PF_Rect</span>   <span class="o">*</span><span class="n">area</span><span class="p">,</span>
  <span class="kt">void</span>            <span class="o">*</span><span class="n">refcon</span><span class="p">,</span>
  <span class="n">PF_Err</span> <span class="p">(</span><span class="o">*</span><span class="n">pix_fn</span><span class="p">)(</span>
    <span class="kt">void</span>      <span class="o">*</span><span class="n">refcon</span><span class="p">,</span>
    <span class="n">A_long</span>    <span class="n">x</span><span class="p">,</span>
    <span class="n">A_long</span>    <span class="n">y</span><span class="p">,</span>
    <span class="n">PF_Pixel</span>  <span class="o">*</span><span class="n">in</span><span class="p">,</span>
    <span class="n">PF_Pixel</span>  <span class="o">*</span><span class="n">out</span><span class="p">),</span>
  <span class="n">PF_EffectWorld</span>  <span class="o">*</span><span class="n">dst</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">iterate_origin</span></code></td>
<td><p class="first">Lets you specify an offset from the input into the output.
For example, if your output buffer is smaller than your input buffer, pass <code class="docutils literal notranslate"><span class="pre">(in_-</span> <span class="pre">data&gt;output_origin_x,</span> <span class="pre">in_data&gt;output_origin_y)</span></code> as the origin,
and NULL for area, and this function will offset the src pixel pointer appropriately for your pixel function.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">iterate_origin</span><span class="p">(</span>
  <span class="n">PF_InData</span>       <span class="o">*</span><span class="n">in_data</span><span class="p">,</span>
  <span class="n">A_long</span>          <span class="n">progress_base</span><span class="p">,</span>
  <span class="n">A_long</span>          <span class="n">progress_final</span><span class="p">,</span>
  <span class="n">PF_EffectWorld</span>  <span class="o">*</span><span class="n">src</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">PF_Rect</span>   <span class="o">*</span><span class="n">area</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">PF_Point</span>  <span class="o">*</span><span class="n">origin</span><span class="p">,</span>
  <span class="kt">void</span>            <span class="o">*</span><span class="n">refcon</span><span class="p">,</span>
  <span class="n">PF_Err</span> <span class="p">(</span><span class="o">*</span><span class="n">pix_fn</span><span class="p">)(</span>
    <span class="kt">void</span>      <span class="o">*</span><span class="n">refcon</span><span class="p">,</span>
    <span class="n">A_long</span>    <span class="n">x</span><span class="p">,</span>
    <span class="n">A_long</span>    <span class="n">y</span><span class="p">,</span>
    <span class="n">PF_Pixel</span>  <span class="o">*</span><span class="n">in</span><span class="p">,</span>
    <span class="n">PF_Pixel</span>  <span class="o">*</span><span class="n">out</span><span class="p">),</span>
  <span class="n">PF_EffectWorld</span>  <span class="o">*</span><span class="n">dst</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">iterate_lut</span></code></td>
<td><p class="first"><code class="docutils literal notranslate"><span class="pre">PF_Iterate8Suite</span></code> only. Allows a Look-Up Table (LUT) to be passed for iteration; you can pass the same or different LUTs for each color channel.
If no LUT is passed, an identity LUT is used.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">iterate_lut</span><span class="p">(</span>
  <span class="n">PF_InData</span>       <span class="o">*</span><span class="n">in_data</span><span class="p">,</span>
  <span class="n">A_long</span>          <span class="n">prog_base</span><span class="p">,</span>
  <span class="n">A_long</span>          <span class="n">prog_final</span><span class="p">,</span>
  <span class="n">PF_EffectWorld</span>  <span class="o">*</span><span class="n">src</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">PF_Rect</span>   <span class="o">*</span><span class="n">area</span><span class="p">,</span>
  <span class="n">A_u_char</span>        <span class="o">*</span><span class="n">a_lut0</span><span class="p">,</span>
  <span class="n">A_u_char</span>        <span class="o">*</span><span class="n">r_lut0</span><span class="p">,</span>
  <span class="n">A_u_char</span>        <span class="o">*</span><span class="n">g_lut0</span><span class="p">,</span>
  <span class="n">A_u_char</span>        <span class="o">*</span><span class="n">b_lut0</span><span class="p">,</span>
  <span class="n">PF_EffectWorld</span>  <span class="o">*</span><span class="n">dst</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">iterate_origin_non_clip_src</span></code></td>
<td><p class="first">Allows for iteration across pixels outside the intersection of the source and destination layers. For these pixels, you will be passed a</p>
<p>PF_Pixel with values {0,0,0,0}.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">iterate_origin_non_clip_src</span><span class="p">(</span>
  <span class="n">PF_InData</span>       <span class="o">*</span><span class="n">in_data</span><span class="p">,</span>
  <span class="n">A_long</span>          <span class="n">progress_base</span><span class="p">,</span>
  <span class="n">A_long</span>          <span class="n">progress_final</span><span class="p">,</span>
  <span class="n">PF_EffectWorld</span>  <span class="o">*</span><span class="n">src</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">PF_Rect</span>   <span class="o">*</span><span class="n">area</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">PF_Point</span>  <span class="o">*</span><span class="n">origin</span><span class="p">,</span>
  <span class="kt">void</span>            <span class="o">*</span><span class="n">refcon</span><span class="p">,</span>
  <span class="n">PF_Err</span> <span class="p">(</span><span class="o">*</span><span class="n">pix_fn</span><span class="p">)(</span>
    <span class="kt">void</span>      <span class="o">*</span><span class="n">refcon</span><span class="p">,</span>
    <span class="n">A_long</span>    <span class="n">x</span><span class="p">,</span>
    <span class="n">A_long</span>    <span class="n">y</span><span class="p">,</span>
    <span class="n">PF_Pixel</span>  <span class="o">*</span><span class="n">in</span><span class="p">,</span>
    <span class="n">PF_Pixel</span>  <span class="o">*</span><span class="n">out</span><span class="p">),</span>
  <span class="n">PF_EffectWorld</span>  <span class="o">*</span><span class="n">dst</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">iterate_generic</span></code></td>
<td><p class="first">PF_Iterate8Suite only. If you want to do something once per available CPU, this is the function to use (pass PF_Iterations_ONCE_PER_PROCESSOR for iterationsL).
Only call abort and progress functions from thread index 0.</p>
<p>Note: You can iterate over more than pixels. Internally, we use it for row-based image processing, and for once-per-entity updates of complex sequence data.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">iterate_generic</span><span class="p">(</span>
  <span class="n">A_long</span> <span class="n">iterationsL</span><span class="p">,</span>
  <span class="kt">void</span>   <span class="o">*</span><span class="n">refconPV</span><span class="p">,</span>
  <span class="n">PF_Err</span> <span class="p">(</span><span class="o">*</span><span class="n">fn_func</span><span class="p">)(</span>
    <span class="kt">void</span>    <span class="o">*</span><span class="n">refconPV</span><span class="p">,</span>
    <span class="n">A_long</span>  <span class="n">thread_idxL</span><span class="p">,</span>
    <span class="n">A_long</span>  <span class="n">i</span><span class="p">,</span>
    <span class="n">A_long</span>  <span class="n">itrtL</span><span class="p">));</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<span id="document-effect-details/graphics-utility-suites"></span><div class="section" id="graphics-utility-suites">
<span id="effect-details-graphics-utility-suites"></span><h2>Graphics Utility Suites<a class="headerlink" href="#graphics-utility-suites" title="Permalink to this headline">¶</a></h2>
<p>After Effects exposes its internal transform and graphic utility routines through the following function suites.</p>
<hr class="docutils" />
<div class="section" id="transform-worlds">
<h3>Transform Worlds<a class="headerlink" href="#transform-worlds" title="Permalink to this headline">¶</a></h3>
<p>These functions combine <code class="docutils literal notranslate"><span class="pre">PF_EffectWorlds</span></code> in interesting ways. When you use these, you’re using the same code After Effects does internally.</p>
<div class="section" id="pf-worldtransformsuite1">
<span id="effect-details-graphics-utility-suites-pf-worldtransformsuite"></span><h4>PF_WorldTransformSuite1<a class="headerlink" href="#pf-worldtransformsuite1" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Function</strong></th>
<th class="head"><strong>Purpose</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">composite_rect</span></code></td>
<td><p class="first">Composite a rectangle from one <code class="docutils literal notranslate"><span class="pre">PF_EffectWorld</span></code> into another, using one of After Effects’ transfer modes.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_Err</span> <span class="nf">composite_rect</span> <span class="p">(</span>
  <span class="n">PF_ProgPtr</span>      <span class="n">effect_ref</span><span class="p">,</span>
  <span class="n">PF_Rect</span>         <span class="o">*</span><span class="n">src_rect</span><span class="p">,</span>
  <span class="n">A_long</span>          <span class="n">src_opacity</span><span class="p">,</span>
  <span class="n">PF_EffectWorld</span>  <span class="o">*</span><span class="n">src_world</span><span class="p">,</span>
  <span class="n">A_long</span>          <span class="n">dst_x</span><span class="p">,</span>
  <span class="n">A_long</span>          <span class="n">dst_y</span><span class="p">,</span>
  <span class="n">PF_Field</span>        <span class="n">field_rdr</span><span class="p">,</span>
  <span class="n">PF_XferMode</span>     <span class="n">xfer_mode</span><span class="p">,</span>
  <span class="n">PF_EffectWorld</span>  <span class="o">*</span><span class="n">dst</span><span class="p">);</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">field_rdr</span></code> can be upper, lower or both.</p>
<p><code class="docutils literal notranslate"><span class="pre">xfer_mode</span></code> is one of the following:</p>
<blockquote class="last">
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">PF_Xfer_COPY</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PF_Xfer_BEHIND</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PF_Xfer_IN_FRONT</span></code></li>
</ul>
</div></blockquote>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">blend</span></code></td>
<td><p class="first">Blends two images, alpha-weighted. Does not deal with different-sized sources, though the destination may be either PF_EffectWorld.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_Err</span> <span class="nf">blend</span> <span class="p">(</span>
  <span class="n">PF_ProgPtr</span>            <span class="n">effect_ref</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">PF_EffectWorld</span>  <span class="o">*</span><span class="n">src1</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">PF_EffectWorld</span>  <span class="o">*</span><span class="n">src2</span><span class="p">,</span>
  <span class="n">PF_Fixed</span>              <span class="n">ratio</span><span class="p">,</span>
  <span class="n">PF_EffectWorld</span>        <span class="o">*</span><span class="n">dst</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">convolve</span></code></td>
<td><p class="first">Convolve an image with an arbitrary size kernel on each of the a, r, g, and b channels separately.</p>
<p>You can specify a rectangle to convolve (for instance, the <code class="docutils literal notranslate"><span class="pre">extent_hint</span></code> from <a class="reference internal" href="index.html#effect-basics-pf-effectworld-structure"><span class="std std-ref">PF_EffectWorld Structure</span></a>), or pass 0 to convolve the entire image.</p>
<p>Do not use if the source <em>is</em> the destination.</p>
<p>Describe the convolution using <a class="reference internal" href="#effect-details-graphics-utility-suites-kernel-flags"><span class="std std-ref">Kernel Flags</span></a>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_Err</span> <span class="nf">convolve</span><span class="p">(</span>
  <span class="n">PF_EffectWorld</span>  <span class="o">*</span><span class="n">src</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">PF_Rect</span>   <span class="o">*</span><span class="n">area</span><span class="p">,</span>
  <span class="n">PF_KernelFlags</span>  <span class="n">flags</span><span class="p">,</span>
  <span class="n">A_long</span>          <span class="n">kernel_size</span><span class="p">,</span>
  <span class="kt">void</span>            <span class="o">*</span><span class="n">a_kernel</span><span class="p">,</span>
  <span class="kt">void</span>            <span class="o">*</span><span class="n">r_kernel</span><span class="p">,</span>
  <span class="kt">void</span>            <span class="o">*</span><span class="n">g_kernel</span><span class="p">,</span>
  <span class="kt">void</span>            <span class="o">*</span><span class="n">b_kernel</span><span class="p">,</span>
  <span class="n">PF_EffectWorld</span>  <span class="o">*</span><span class="n">dst</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">copy</span></code></td>
<td><p class="first">Copies a region from one PF_EffectWorld to another, preserving alpha (unlike the macOS CopyBits).</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_Err</span> <span class="nf">copy</span> <span class="p">(</span>
  <span class="n">PF_EffectWorld</span>  <span class="o">*</span><span class="n">src</span><span class="p">,</span>
  <span class="n">PF_EffectWorld</span>  <span class="o">*</span><span class="n">dst</span><span class="p">,</span>
  <span class="n">PF_Rect</span>         <span class="o">*</span><span class="n">src_r</span><span class="p">,</span>
  <span class="n">PF_Rect</span>         <span class="o">*</span><span class="n">dst_r</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">copy_hq</span></code></td>
<td>A higher fidelity version of the above (using the same parameters).</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">transfer_rect</span></code></td>
<td><p class="first">Blends using a transfer mode, with an optional mask.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_Err</span> <span class="nf">transfer_rect</span> <span class="p">(</span>
  <span class="n">PF_ProgPtr</span>              <span class="n">effect_ref</span><span class="p">,</span>
  <span class="n">PF_Quality</span>              <span class="n">quality</span><span class="p">,</span>
  <span class="n">PF_ModeFlags</span>            <span class="n">m_flags</span><span class="p">,</span>
  <span class="n">PF_Field</span>                <span class="n">field</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">PF_Rect</span>           <span class="o">*</span><span class="n">src_rec</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">PF_EffectWorld</span>    <span class="o">*</span><span class="n">src_world</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">PF_CompositeMode</span>  <span class="o">*</span><span class="n">comp_mode</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">PF_MaskWorld</span>      <span class="o">*</span><span class="n">mask_world0</span><span class="p">,</span>
  <span class="n">A_long</span>                  <span class="n">dest_x</span><span class="p">,</span>
  <span class="n">A_long</span>                  <span class="n">dest_y</span><span class="p">,</span>
  <span class="n">PF_EffectWorld</span>          <span class="o">*</span><span class="n">dst_world</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">transform_world</span></code></td>
<td><p class="first">Given a PF_EffectWorld and a matrix (or array of matrices), transforms and blends using an After Effects transfer mode, with an optional mask.</p>
<p>The matrices pointer points to a matrix array used for motion-blur.</p>
<p>When is a transform not a transform? A Z-scale transform is not a transform, unless the transformed layer is a parent of other layers that do not all lie in the z=0 plane.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_Err</span> <span class="nf">transform_world</span> <span class="p">(</span>
  <span class="n">PF_InData</span>               <span class="o">*</span><span class="n">in_data</span><span class="p">,</span>
  <span class="n">PF_Quality</span>              <span class="n">quality</span><span class="p">,</span>
  <span class="n">PF_ModeFlags</span>            <span class="n">m_flags</span><span class="p">,</span>
  <span class="n">PF_Field</span>                <span class="n">field</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">PF_EffectWorld</span>    <span class="o">*</span><span class="n">src_world</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">PF_CompositeMode</span>  <span class="o">*</span><span class="n">comp_mode</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">PF_MaskWorld</span>      <span class="o">*</span><span class="n">mask_world0</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">PF_FloatMatrix</span>    <span class="o">*</span><span class="n">matrices</span><span class="p">,</span>
  <span class="n">A_long</span>                  <span class="n">num_matrices</span><span class="p">,</span>
  <span class="n">Boolean</span>                 <span class="n">src2dst_matrix</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">PF_Rect</span>           <span class="o">*</span><span class="n">dest_rect</span><span class="p">,</span>
  <span class="n">PF_EffectWorld</span>          <span class="o">*</span><span class="n">dst_world</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
</div>
</div>
<div class="section" id="kernel-flags">
<span id="effect-details-graphics-utility-suites-kernel-flags"></span><h3>Kernel Flags<a class="headerlink" href="#kernel-flags" title="Permalink to this headline">¶</a></h3>
<p>Functions such as <code class="docutils literal notranslate"><span class="pre">convolve</span></code> or gaussian kernel work with kernels, or matrices of filter weight values. These matrices can be in any format. The kernel flags describe how the matrices should be created and used. OR together any flags you need.</p>
<p>The flags relevant to given routines are documented along with the routine prototype.The first entry in the left column is always the default and has value 0.</p>
<table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="83%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Kernel Flags</th>
<th class="head">Indicates</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><p class="first"><code class="docutils literal notranslate"><span class="pre">PF_KernelFlag_2D</span></code></p>
<p class="last"><code class="docutils literal notranslate"><span class="pre">PF_KernelFlag_1D</span></code></p>
</td>
<td>Specifies a one or two dimensional kernel.</td>
</tr>
<tr class="row-odd"><td><p class="first"><code class="docutils literal notranslate"><span class="pre">PF_KernelFlag_UNNORMALIZED</span></code></p>
<p class="last"><code class="docutils literal notranslate"><span class="pre">PF_KernelFlag_NORMALIZED</span></code></p>
</td>
<td><code class="docutils literal notranslate"><span class="pre">NORMALIZED</span></code> equalizes the kernel; the volume under the kernel surface is the same as the volume under the covered area of pixels.</td>
</tr>
<tr class="row-even"><td><p class="first"><code class="docutils literal notranslate"><span class="pre">PF_KernelFlag_CLAMP</span></code></p>
<p class="last"><code class="docutils literal notranslate"><span class="pre">PF_KernelFlag_NO_CLAMP</span></code></p>
</td>
<td><code class="docutils literal notranslate"><span class="pre">CLAMP</span></code> restricts values to the valid range for their data type.</td>
</tr>
<tr class="row-odd"><td><p class="first"><code class="docutils literal notranslate"><span class="pre">PF_KernelFlag_USE_LONG</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">PF_KernelFlag_USE_CHAR</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">PF_KernelFlag_USE_FIXED</span></code></p>
<p class="last"><code class="docutils literal notranslate"><span class="pre">PF_KernelFlag_USE_UNDEFINED</span></code></p>
</td>
<td><p class="first"><code class="docutils literal notranslate"><span class="pre">USE_LONG</span></code> defines the kernel as an array of longs valued from 0 to 255.</p>
<p><code class="docutils literal notranslate"><span class="pre">USE_CHAR</span></code> defines the kernel as an array of unsigned chars from 0 to 255.</p>
<p><code class="docutils literal notranslate"><span class="pre">USE_FIXED</span></code> defines the kernel as an array of fixeds from 0 to 1.</p>
<p class="last"><code class="docutils literal notranslate"><span class="pre">USE_LONG</span></code> is the only implemented flag.</p>
</td>
</tr>
<tr class="row-even"><td><p class="first"><code class="docutils literal notranslate"><span class="pre">PF_KernelFlag_HORIZONTAL</span></code></p>
<p class="last"><code class="docutils literal notranslate"><span class="pre">PF_KernelFlag_VERTICAL</span></code></p>
</td>
<td>Specifies the direction of the convolution.</td>
</tr>
<tr class="row-odd"><td><p class="first"><code class="docutils literal notranslate"><span class="pre">PF_KernelFlag_TRANSPARENT_BORDERS</span></code></p>
<p class="last"><code class="docutils literal notranslate"><span class="pre">PF_KernelFlag_REPLICATE_BORDERS</span></code></p>
</td>
<td><p class="first">Use <code class="docutils literal notranslate"><span class="pre">REPLICATE_BORDERS</span></code> to replicate border pixels when sampling off the edge, use <code class="docutils literal notranslate"><span class="pre">TRANSPARENT_BORDERS</span></code> to treat pixels off the edge as alpha zero (black).</p>
<p class="last"><code class="docutils literal notranslate"><span class="pre">REPLICATE_BORDERS</span></code> is not implemented and will be ignored.</p>
</td>
</tr>
<tr class="row-even"><td><p class="first"><code class="docutils literal notranslate"><span class="pre">PF_KernelFlag_STRAIGHT_CONVOLVE</span></code></p>
<p class="last"><code class="docutils literal notranslate"><span class="pre">PF_KernelFlag_ALPHA_WEIGHT_CONVOLVE</span></code></p>
</td>
<td><p class="first">Use <code class="docutils literal notranslate"><span class="pre">STRAIGHT_CONVOLVE</span></code> to indicate straight convolution, use <code class="docutils literal notranslate"><span class="pre">ALPHA_WEIGHT_CONVOLVE</span></code> to tell the convolution code to alpha-weight the contributions of pixels to the resulting convolved output.</p>
<p class="last"><code class="docutils literal notranslate"><span class="pre">ALPHA_WEIGHT_CONVOLVE</span></code> is not implemented and will be ignored.</p>
</td>
</tr>
</tbody>
</table>
</div>
<hr class="docutils" />
<div class="section" id="fill-em-up">
<h3>Fill ‘Em Up!<a class="headerlink" href="#fill-em-up" title="Permalink to this headline">¶</a></h3>
<p>The FillMatteSuite can be used to fill a <code class="docutils literal notranslate"><span class="pre">PF_EffectWorld</span></code>, either with a specific color or premultiplied with an alpha value.</p>
<div class="section" id="pf-fillmattesuite2">
<h4>PF_FillMatteSuite2<a class="headerlink" href="#pf-fillmattesuite2" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="83%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Function</strong></th>
<th class="head"><strong>Purpose</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">fill</span></code></td>
<td><p class="first">Fills a rect with a color (or, if the color pointer is null, fills with black and alpha zero).</p>
<p>If the rect is null, it fills the entire image.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_Err</span> <span class="nf">fill</span> <span class="p">(</span>
  <span class="n">PF_ProgPtr</span>      <span class="n">effect_ref</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">PF_Pixel</span>  <span class="o">*</span><span class="n">color</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">PF_Rect</span>   <span class="o">*</span><span class="n">dst_rect</span><span class="p">,</span>
  <span class="n">PF_EffectWorld</span>  <span class="o">*</span><span class="n">world</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">fill16</span></code></td>
<td>Same as fill, but takes a pointer to a PF_Pixel16 color.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">fill_float</span></code></td>
<td>Takes a pointer to a PF_PixelFloat color.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">premultiply</span></code></td>
<td><p class="first">Converts to (and from) r, g, and b color values pre-multiplied with black to represent the alpha channel.</p>
<p>Quality independent.</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">forward</span></code> is used as a boolean;</li>
<li><code class="docutils literal notranslate"><span class="pre">true</span></code> means convert non-premultiplied to pre-multiplied,</li>
<li><code class="docutils literal notranslate"><span class="pre">false</span></code> mean un-pre-multiply.</li>
</ul>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_Err</span> <span class="nf">premultiply</span> <span class="p">(</span>
  <span class="n">A_long</span>          <span class="n">forward</span><span class="p">,</span>
  <span class="n">PF_EffectWorld</span>  <span class="o">*</span><span class="n">dst</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">premultiply_color</span></code></td>
<td><p class="first">Converts to (and from) having r, g, and b color values premultiplied with any color to represent the alpha channel.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_Err</span> <span class="nf">premultiply_color</span> <span class="p">(</span>
  <span class="n">PF_ProgPtr</span>      <span class="n">effect_ref</span><span class="p">,</span>
  <span class="n">PF_EffectWorld</span>  <span class="o">*</span><span class="n">src</span><span class="p">,</span>
  <span class="n">PF_Pixel</span>        <span class="o">*</span><span class="n">color</span><span class="p">,</span>
  <span class="n">A_long</span>          <span class="n">forward</span><span class="p">,</span>
  <span class="n">PF_EffectWorld</span>  <span class="o">*</span><span class="n">dst</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">premultiply_color16</span></code></td>
<td>Same as above, but takes a pointer to a PF_Pixel16 color.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">premultiply_color_float</span></code></td>
<td>Takes a pointer to a PF_PixelFloat color.</td>
</tr>
</tbody>
</table>
</div>
</div>
<hr class="docutils" />
<div class="section" id="sampling-images">
<h3>Sampling Images<a class="headerlink" href="#sampling-images" title="Permalink to this headline">¶</a></h3>
<p>Note: areas outside the bounds of the image being sampled are treated as zero alpha. For convenience, the functions from PF_Sampling8Suite1, PF_Sampling16Suite1, and PF_SamplingFloatSuite1 are all listed in this table.</p>
<div class="section" id="pf-samplingsuite-functions-multiple-suites">
<h4>PF_SamplingSuite Functions (Multiple Suites)<a class="headerlink" href="#pf-samplingsuite-functions-multiple-suites" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Function</strong></th>
<th class="head"><strong>Purpose</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">nn_sample</span></code></td>
<td><p class="first">Performs nearest neighbor sampling.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_Err</span> <span class="nf">nn_sample</span> <span class="p">(</span>
  <span class="n">PF_ProgPtr</span>       <span class="n">effect_ref</span><span class="p">,</span>
  <span class="n">PF_Fixed</span>         <span class="n">x</span><span class="p">,</span>
  <span class="n">PF_Fixed</span>         <span class="n">y</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">PF_SampPB</span>  <span class="o">*</span><span class="n">params</span><span class="p">,</span>
  <span class="n">PF_Pixel</span>         <span class="o">*</span><span class="n">dst_pixel</span> <span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">nn_sample16</span></code></td>
<td>Same as above, but takes a pointer to a <code class="docutils literal notranslate"><span class="pre">PF_Pixel16</span></code> <code class="docutils literal notranslate"><span class="pre">dst_pixel</span></code>.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">nn_sample_float</span></code></td>
<td>Takes a pointer to a <code class="docutils literal notranslate"><span class="pre">PF_PixelFloat</span></code> <code class="docutils literal notranslate"><span class="pre">dst_pixel</span></code>.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">subpixel_sample</span></code></td>
<td><p class="first">Queries the appropriate alpha-weighted interpolation of colors at a non-integral point in a source image, in high quality. Nearest neighbor sampling is used in low quality.</p>
<p>Because the sampling routine, if used, will typically be called many times, it is convenient to copy the function pointer out to the callbacks structure and into a register or onto the stack to speed up your inner loop.</p>
<p>See the sample code for an example.</p>
<p>NOTE: The sampling assumes that 0,0 is the center of the top left pixel.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_Err</span> <span class="nf">subpixel_sample</span> <span class="p">(</span>
  <span class="n">PF_ProgPtr</span>       <span class="n">effect_ref</span><span class="p">,</span>
  <span class="n">PF_Fixed</span>         <span class="n">x</span><span class="p">,</span>
  <span class="n">PF_Fixed</span>         <span class="n">y</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">PF_SampPB</span>  <span class="o">*</span><span class="n">params</span><span class="p">,</span>
  <span class="n">PF_Pixel</span>         <span class="o">*</span><span class="n">dst_pixel</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">subpixel_sample16</span></code></td>
<td>Same as above, but takes a pointer to a <code class="docutils literal notranslate"><span class="pre">PF_Pixel16*</span></code> <code class="docutils literal notranslate"><span class="pre">dst_pixel</span></code>.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">subpixel_sample_float</span></code></td>
<td>Takes a pointer to a <code class="docutils literal notranslate"><span class="pre">PF_PixelFloat*</span></code> <code class="docutils literal notranslate"><span class="pre">dst_pixel</span></code>.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">area_sample</span></code></td>
<td><p class="first">Use this to calculate the appropriate alpha weighted average of an axis-aligned non-integral rectangle of color in a source image, in high quality.</p>
<p>Nearest neighbor sampling is used in low quality. Because of overflow issues, this can only average a maximum of a 256 x 256 pixel area (i.e. x and y radius &lt; 128 pixels).</p>
<p>NOTE: the sampling radius must be at least one in both x and y.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_Err</span> <span class="nf">area_sample</span> <span class="p">(</span>
  <span class="n">PF_ProgPtr</span>       <span class="n">effect_ref</span><span class="p">,</span>
  <span class="n">PF_Fixed</span>         <span class="n">x</span><span class="p">,</span>
  <span class="n">PF_Fixed</span>         <span class="n">y</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">PF_SampPB</span>  <span class="o">*</span><span class="n">params</span><span class="p">,</span>
  <span class="n">PF_Pixel</span>         <span class="o">*</span><span class="n">dst_pixel</span><span class="p">);</span>
</pre></div>
</div>
<p class="last">NOTE: Areas outside the boundaries of the layer are considered the same as zero alpha, for sampling purposes.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">area_sample16</span></code></td>
<td>Same as above, but takes a <code class="docutils literal notranslate"><span class="pre">PF_Pixel16*</span></code> <code class="docutils literal notranslate"><span class="pre">dst_pixel</span></code>.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="pf-batchsamplingsuite1-functions">
<h4>PF_BatchSamplingSuite1 Functions<a class="headerlink" href="#pf-batchsamplingsuite1-functions" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="19%" />
<col width="81%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Function</strong></th>
<th class="head"><strong>Purpose</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">begin_sampling</span></code></td>
<td><p class="first">Your effect is going to perform some batch sampling;</p>
<p>After Effects will perform setup tasks to optimize your sampling.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_Err</span> <span class="p">(</span><span class="o">*</span><span class="n">begin_sampling</span><span class="p">)(</span>
  <span class="n">PF_ProgPtr</span>    <span class="n">effect_ref</span><span class="p">,</span>
  <span class="n">PF_Quality</span>    <span class="n">qual</span><span class="p">,</span>
  <span class="n">PF_ModeFlags</span>  <span class="n">mf</span><span class="p">,</span>
  <span class="n">PF_SampPB</span>     <span class="o">*</span><span class="n">params</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">end_sampling</span></code></td>
<td><p class="first">Tells After Effects you’re done sampling.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_Err</span> <span class="p">(</span><span class="o">*</span><span class="n">end_sampling</span><span class="p">)(</span>
  <span class="n">PF_ProgPtr</span>    <span class="n">effect_ref</span><span class="p">,</span>
  <span class="n">PF_Quality</span>    <span class="n">qual</span><span class="p">,</span>
  <span class="n">PF_ModeFlags</span>  <span class="n">mf</span><span class="p">,</span>
  <span class="n">PF_SampPB</span>     <span class="o">*</span><span class="n">params</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">get_batch_func</span></code></td>
<td><p class="first">Obtains a pointer to After Effects’ batch sampling function (highly optimized).</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_Err</span> <span class="p">(</span><span class="o">*</span><span class="n">get_batch_func</span><span class="p">)(</span>
  <span class="n">PF_ProgPtr</span>          <span class="n">effect_ref</span><span class="p">,</span>
  <span class="n">PF_Quality</span>          <span class="n">quality</span><span class="p">,</span>
  <span class="n">PF_ModeFlags</span>        <span class="n">mode_flags</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">PF_SampPB</span>     <span class="o">*</span><span class="n">params</span><span class="p">,</span>
  <span class="n">PF_BatchSampleFunc</span>  <span class="o">*</span><span class="n">batch</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">get_batch_func16</span></code></td>
<td><p class="first">Obtains a pointer to After Effects’ 16-bpc batch sampling function (also highly optimized).</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_Err</span> <span class="p">(</span><span class="o">*</span><span class="n">get_batch_func16</span><span class="p">)(</span>
  <span class="n">PF_ProgPtr</span>            <span class="n">effect_ref</span><span class="p">,</span>
  <span class="n">PF_Quality</span>            <span class="n">quality</span><span class="p">,</span>
  <span class="n">PF_ModeFlags</span>          <span class="n">mode_flags</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">PF_SampPB</span>       <span class="o">*</span><span class="n">params</span><span class="p">,</span>
  <span class="n">PF_BatchSample16Func</span>  <span class="o">*</span><span class="n">batch</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<hr class="docutils" />
<div class="section" id="do-the-math-for-me">
<h3>Do The Math For Me<a class="headerlink" href="#do-the-math-for-me" title="Permalink to this headline">¶</a></h3>
<p>Along with the variety of graphics utilities, we also provide a block of ANSI standard routines so that plug-ins will not need to include other libraries to use standard functions.</p>
<p>We give function pointers to a large number of math functions (trig functions, square root, logs, etc.).</p>
<p>Using our suite functions provides for some (application level) error handling, and prevents problems with including different versions of multiple “standard” libraries.</p>
<p>All functions return a double. All angles are expressed in radians, use <code class="docutils literal notranslate"><span class="pre">PF_RAD_PER_DEGREE</span></code> (a constant from AE_EffectCB.h) to convert from degrees to radians if necessary.</p>
<div class="section" id="pf-ansicallbacksuite1">
<h4>PF_ANSICallbackSuite1<a class="headerlink" href="#pf-ansicallbacksuite1" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="48%" />
<col width="41%" />
<col width="11%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Function</strong></th>
<th class="head"><strong>Purpose</strong></th>
<th class="head"><strong>Replaces</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">acos</span></code></td>
<td>Returns the arc cosine of x.</td>
<td><code class="docutils literal notranslate"><span class="pre">PF_ACOS</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">asin</span></code></td>
<td>Returns the arc sine of x.</td>
<td><code class="docutils literal notranslate"><span class="pre">PF_ASIN</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">atan</span></code></td>
<td>Returns the arc tangent of x.</td>
<td><code class="docutils literal notranslate"><span class="pre">PF_ATAN</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">atan2</span></code></td>
<td>Returns atan(y/x).</td>
<td><code class="docutils literal notranslate"><span class="pre">PF_ATAN2</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">ceil</span></code></td>
<td>Returns the next integer above x.</td>
<td><code class="docutils literal notranslate"><span class="pre">PF_CEIL</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">cos</span></code></td>
<td>Returns the cosine of x.</td>
<td><code class="docutils literal notranslate"><span class="pre">PF_COS</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">exp</span></code></td>
<td>Returns e to the power of x.</td>
<td><code class="docutils literal notranslate"><span class="pre">PF_EXP</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">fabs</span></code></td>
<td>Returns the absolute value of x.</td>
<td><code class="docutils literal notranslate"><span class="pre">PF_FABS</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">floor</span></code></td>
<td>Returns the closest integer below x.</td>
<td><code class="docutils literal notranslate"><span class="pre">PF_FLOOR</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">fmod</span></code></td>
<td>Returns x modulus y.</td>
<td><code class="docutils literal notranslate"><span class="pre">PF_FMOD</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">hypot</span></code></td>
<td>Returns the hypotenuse of x and y, which is sqrt(x*x + y*y).</td>
<td><code class="docutils literal notranslate"><span class="pre">PF_HYPOT</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">log</span></code></td>
<td>Returns the natural log (ln) of x.</td>
<td><code class="docutils literal notranslate"><span class="pre">PF_LOG</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">log10</span></code></td>
<td>Returns the log (base 10) of x.</td>
<td><code class="docutils literal notranslate"><span class="pre">PF_LOG10</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">pow</span></code></td>
<td>Returns x to the power of y.</td>
<td><code class="docutils literal notranslate"><span class="pre">PF_POW</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">sin</span></code></td>
<td>Returns the sine of x.</td>
<td><code class="docutils literal notranslate"><span class="pre">PF_SIN</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">sqrt</span></code></td>
<td>Returns the square root of x.</td>
<td><code class="docutils literal notranslate"><span class="pre">PF_SQRT</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">tan</span></code></td>
<td>Returns the tangent of x.</td>
<td><code class="docutils literal notranslate"><span class="pre">PF_TAN</span></code></td>
</tr>
<tr class="row-odd"><td colspan="3"><em>(while not strictly math functions, these emulate ANSI functionality)</em></td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">sprintf</span></code></td>
<td>Emulates the C sprintf function.</td>
<td><code class="docutils literal notranslate"><span class="pre">PF_SPRINTF</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">strcpy</span></code></td>
<td>Emulates the C strcpy function.</td>
<td><code class="docutils literal notranslate"><span class="pre">PF_STRCPY</span></code></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<span id="document-effect-details/interaction-callback-functions"></span><div class="section" id="interaction-callback-functions">
<span id="effect-details-interaction-callback-functions"></span><h2>Interaction Callback Functions<a class="headerlink" href="#interaction-callback-functions" title="Permalink to this headline">¶</a></h2>
<p>While the un-macro’d function pointers are provided in <a class="reference internal" href="index.html#effect-basics-pf-indata"><span class="std std-ref">PF_InData</span></a>, use the provided macros to access them. See how stringent we are about deprecating macro usage? Let’s let this be our little secret.</p>
<hr class="docutils" />
<div class="section" id="interaction-callbacks">
<span id="effect-details-interaction-callback-functions-interaction-callbacks"></span><h3>Interaction Callbacks<a class="headerlink" href="#interaction-callbacks" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Function</strong></th>
<th class="head"><strong>Purpose</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_ADD_PARAM</span></code></td>
<td><p class="first">Enumerate your plug-in’s parameters to After Effects during <a class="reference internal" href="index.html#effect-basics-command-selectors-global-selectors"><span class="std std-ref">PF_Cmd_PARAM_SETUP</span></a>, using multiple calls to this function.</p>
<p>Note: Failing to completely clear out a PF_ParamDef prior to PF_ADD_PARAM() can cause many problems.
Always use <code class="docutils literal notranslate"><span class="pre">AEFX_CLR_STRUCT</span></code> before adding parameters.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_Err</span> <span class="nf">PF_ADD_PARAM</span> <span class="p">(</span>
  <span class="n">PF_InData</span>       <span class="o">*</span><span class="n">in_data</span><span class="p">,</span>
  <span class="n">PF_ParamIndex</span>   <span class="n">index</span><span class="p">,</span>
  <span class="n">PF_ParamDefPtr</span>  <span class="n">def</span><span class="p">);</span>
</pre></div>
</div>
<p>We provide convenience macros for specific parameter types, in Utils/ Param_Utils.h:</p>
<blockquote class="last">
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">PF_ADD_COLOR</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">PF_ADD_ARBITRARY</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">PF_ADD_SLIDER</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">PF_ADD_FIXED</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">PF_ADD_FLOAT_SLIDERX</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">PF_ADD_CHECKBOXX</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">PF_ADD_BUTTON</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">PF_ADD_ANGLE</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">PF_ADD_NULL</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">PF_ADD_LAYER</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">PF_ADD_255_SLIDER</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">PF_ADD_PERCENT</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">PF_ADD_POINT</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">PF_ADD_POINT_3D</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">PF_ADD_TOPICX</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">PF_END_TOPIC</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">PF_ADD_POPUPX</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">PF_ADD_FLOAT_SLIDERX_DISABLED</span></code></li>
</ul>
</div></blockquote>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_ABORT</span></code></td>
<td><p class="first">Returns non-zero if the user has cancelled; return that value to After Effects.
Wrap your render routine in a “while abort has not been requested” while loop.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_Err</span> <span class="nf">PF_ABORT</span> <span class="p">(</span><span class="n">PF_InData</span> <span class="o">*</span><span class="n">in_data</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_PROGRESS</span></code></td>
<td><p class="first">Displays a progress bar during processing; current and total describe the percentage complete.
Returns non-zero if you should suspend or abort your current processing; return that value to After Effects.
Call once per scanline, unless your effect is very slow.</p>
<p>If total is 0, PF_ABORT is used instead (presenting the user with different choices).</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_Err</span> <span class="nf">PF_PROGRESS</span> <span class="p">(</span>
  <span class="n">PF_InData</span>  <span class="o">*</span><span class="n">in_data</span><span class="p">,</span>
  <span class="n">A_long</span>     <span class="n">current</span><span class="p">,</span>
  <span class="n">A_long</span>     <span class="n">total</span> <span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_CHECKOUT_PARAM</span></code></td>
<td><p class="first">Obtains parameter values, or the source video layer, at a specified time. After Effects makes caching decisions based on the checkout state of parameters.</p>
<p>Allocate a new <a class="reference internal" href="index.html#effect-basics-pf-paramdef"><span class="std std-ref">PF_ParamDef</span></a> to hold the result; those passed to the plug-in are read-only.
If you check out a layer parameter that’s set to &lt;none&gt;, the layer returned will be filled with zeros.
Masks are not included with checked-out layers.</p>
<p>Do not check out layer parameters during UI event handling.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_Err</span> <span class="nf">PF_CHECKOUT_PARAM</span> <span class="p">(</span>
  <span class="n">PF_InData</span>      <span class="o">*</span><span class="n">in_data</span><span class="p">,</span>
  <span class="n">PF_ParamIndex</span>  <span class="n">index</span><span class="p">,</span>
  <span class="n">A_long</span>         <span class="n">what_time</span><span class="p">,</span>
  <span class="n">A_long</span>         <span class="n">step</span><span class="p">,</span>
  <span class="n">A_long</span>         <span class="n">time_scale</span><span class="p">,</span>
  <span class="n">PF_ParamDef</span>    <span class="o">*</span><span class="n">param</span><span class="p">);</span>
</pre></div>
</div>
<p>If checking out the source layer, a deinterlaced frame will be returned. If you ask for the time that references the upper field, you will receive back the upper field with a filter used to generate the extra scanlines.
For example, assuming line 0 and 2 are upper fields, and line 1 is a lower field, if you check out the upper fields, line 0 and 2 will be passed back directly from the source footage, and line 1 will be calculated by averaging lines 0 and 2.
If you want to reassemble a full resolution source frame with both fields present, you can call PF_CHECKOUT_PARAM twice to get both fields, and reinterlace the footage.</p>
<p class="last">What happens when checking out a layer at a time that is not frame-aligned? All items have essentially infinite time resolution, so when asking for a time at any value, AE renders the item at that time.
For a composition, that involves interpolating all of the keyframes values to the subframe time.
For footage, AE returns a full image that corresponds to the time asked, which is the nearest-to-left frame.
If the user has frame-blending on that layer, an interpolated frame is generated.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_CHECKIN_PARAM</span></code></td>
<td><p class="first">Balance every <code class="docutils literal notranslate"><span class="pre">PF_CHECKOUT_PARAM</span></code>, with a <code class="docutils literal notranslate"><span class="pre">PF_CHECKIN_PARAM</span></code>.</p>
<p>Not doing so causes dismal performance and leaks memory. Once checked in, the fields in the <a class="reference internal" href="index.html#effect-basics-pf-paramdef"><span class="std std-ref">PF_ParamDef</span></a> will no longer be valid.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_Err</span> <span class="nf">PF_CHECKIN_PARAM</span> <span class="p">(</span>
  <span class="n">PF_InData</span>    <span class="o">*</span><span class="n">in_data</span><span class="p">,</span>
  <span class="n">PF_ParamDef</span>  <span class="o">*</span><span class="n">param</span> <span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_REGISTER_UI</span></code></td>
<td><p class="first">Register a custom user interface element. See <a class="reference internal" href="index.html#effect-ui-events-effect-ui-events"><span class="std std-ref">Effect UI &amp; Events</span></a>. Note: The PF_UIAlignment flags are not honored.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_Err</span> <span class="nf">PF_REGISTER_UI</span> <span class="p">(</span>
  <span class="n">PF_InData</span>        <span class="o">*</span><span class="n">in_data</span><span class="p">,</span>
  <span class="n">PF_CustomUIInfo</span>  <span class="o">*</span><span class="n">cust_info</span> <span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_CHECKOUT_LAYER_AUDIO</span></code></td>
<td><p class="first">Given an index, start_time, duration, time_scale, rate, bytes_per_sample, num_channels, and fmt_signed, After Effects will return a corresponding PF_LayerAudio.
After Effects will perform any necessary resampling.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_Err</span> <span class="nf">PF_CHECKOUT_LAYER_AUDIO</span> <span class="p">(</span>
  <span class="n">PF_InData</span>      <span class="o">*</span><span class="n">in_data</span><span class="p">,</span>
  <span class="n">PF_ParamIndex</span>  <span class="n">index</span><span class="p">,</span>
  <span class="n">A_long</span>         <span class="n">start_time</span><span class="p">,</span>
  <span class="n">A_long</span>         <span class="n">duration</span><span class="p">,</span>
  <span class="n">A_u_long</span>       <span class="n">time_scale</span><span class="p">,</span>
  <span class="n">PF_UFixed</span>      <span class="n">rate</span><span class="p">,</span>
  <span class="n">A_long</span>         <span class="n">bytes_per_sample</span><span class="p">,</span>
  <span class="n">A_long</span>         <span class="n">num_channels</span><span class="p">,</span>
  <span class="n">A_long</span>         <span class="n">fmt_signed</span><span class="p">,</span>
  <span class="n">PF_LayerAudio</span>  <span class="o">*</span><span class="n">audio</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_CHECKIN_LAYER_AUDIO</span></code></td>
<td><p class="first">Balance all calls to PF_CHECKOUT_LAYER_AUDIO, regardless of error conditions, with matching calls to PF_CHECKIN_LAYER_AUDIO.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_Err</span> <span class="nf">PF_CHECKIN_LAYER_AUDIO</span> <span class="p">(</span>
  <span class="n">PF_InData</span>      <span class="o">*</span><span class="n">in_data</span><span class="p">,</span>
  <span class="n">PF_LayerAudio</span>  <span class="n">audio</span> <span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_GET_AUDIO_DATA</span></code></td>
<td><p class="first">Returns information about the PF_LayerAudio.</p>
<p>All the parameters after audio are optional; pass 0 for any value in which you aren’t interested. rate0 is unsigned, and fmt_signed0 should be non-zero for signed, zero for unsigned.
This callback is for visual effects that read audio information. To <em>alter</em> audio, write an audio filter.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_Err</span> <span class="nf">PF_GET_AUDIO_DATA</span> <span class="p">(</span>
  <span class="n">PF_InData</span>        <span class="o">*</span><span class="n">in_data</span><span class="p">,</span>
  <span class="n">PF_LayerAudio</span>    <span class="n">audio</span><span class="p">,</span>
  <span class="n">PF_SndSamplePtr</span>  <span class="o">*</span><span class="n">data0</span><span class="p">,</span>
  <span class="n">A_long</span>           <span class="o">*</span><span class="n">num_samples0</span><span class="p">,</span>
  <span class="n">PF_UFixed</span>        <span class="o">*</span><span class="n">rate0</span><span class="p">,</span>
  <span class="n">A_long</span>           <span class="o">*</span><span class="n">bytes_per_sample0</span><span class="p">,</span>
  <span class="n">A_long</span>           <span class="o">*</span><span class="n">num_channels0</span><span class="p">,</span>
  <span class="n">A_long</span>           <span class="o">*</span><span class="n">fmt_signed0</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<hr class="docutils" />
<div class="section" id="parameter-checkout-vs-param-zero">
<h3>Parameter Checkout vs. Param Zero<a class="headerlink" href="#parameter-checkout-vs-param-zero" title="Permalink to this headline">¶</a></h3>
<p>Effects are applied to an image in order from 0 to n within the Effect Control (and Composition) panel.</p>
<p>The output from effect[n-1] is the input (<a class="reference internal" href="index.html#effect-basics-pf-paramdef-param-zero"><span class="std std-ref">param[0]</span></a>) of effect[n].</p>
<p>On the other hand, when a normal effect checks out a layer using <code class="docutils literal notranslate"><span class="pre">PF_CHECKOUT_PARAM</span></code>, it receives the raw (un-effected) source layer, regardless of its order.</p>
<p>However, when a <a class="reference internal" href="index.html#smartfx-smartfx"><span class="std std-ref">SmartFX</span></a> effect checks out its input parameter (params[0]), previous effects <em>are</em> applied.</p>
</div>
<hr class="docutils" />
<div class="section" id="parameter-checkout-behavior">
<h3>Parameter Checkout Behavior<a class="headerlink" href="#parameter-checkout-behavior" title="Permalink to this headline">¶</a></h3>
<p>Regardless of whether the layer in and out point have been trimmed, you will get valid frames from the start of the source footage to the end, and then transparent before and after that.</p>
<p>Layer params with a lower frame rate than the composition in which they’re checked out are only refreshed as often as necessitated by the lower frame rate.</p>
<p>A 10fps layer checked out in a 30fps composition will only need to be refreshed every third frame. if your effect wants to change it’s output every frame despite the static input layer, you’d need to set <a class="reference internal" href="index.html#effect-basics-pf-outdata-pf-outflags"><span class="std std-ref">PF_Outflag_NON_PARAM_VARY</span></a>.</p>
<p>When an effect checks out a continuously-rasterized Adobe Illustrator layer, After Effects renders the Illustrator layer with geometrics applied, in a composition-sized buffer.</p>
</div>
<hr class="docutils" />
<div class="section" id="parameter-checkout-and-re-entrancy">
<h3>Parameter Checkout And Re-Entrancy<a class="headerlink" href="#parameter-checkout-and-re-entrancy" title="Permalink to this headline">¶</a></h3>
<p>Plug-ins that check out layers at different times can generate re-entrant behavior. Consider an instance where the Checkout sample plug-in is applied to a layer in composition B, and B is pre-composed into composition A where Checkout is applied to it as well.</p>
<p>When composition A is rendered, Checkout[A] will be sent <em>PF_Cmd_RENDER</em>, during which it checks out a layer (composition B) from a time other than the current time.</p>
<p>In order to provide that checked-out layer, After Effects sends <em>PF_Cmd_RENDER</em> to <code class="docutils literal notranslate"><span class="pre">Checkout[B]</span></code>.</p>
<p>Presto, recursion!</p>
<p>If you’re going to check out parameters, your effects must handle re-entrant render requests appropriately.</p>
<p>Don’t use globals, or read or write static variables…but you weren’t going to anyway, right?</p>
</div>
<hr class="docutils" />
<div class="section" id="progress-during-iteration">
<h3>Progress During Iteration<a class="headerlink" href="#progress-during-iteration" title="Permalink to this headline">¶</a></h3>
<p>After Effects strives to be as responsive as possible to user interaction, even while rendering. Do the same through appropriate use of PF_ITERATE(). For example, perhaps you’re using a PF_ITERATE’d function three times during your response to <code class="docutils literal notranslate"><span class="pre">PF_Cmd_RENDER</span></code>.</p>
<p>In this case, you’d start off with:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">lines_per_iterateL</span> <span class="o">=</span> <span class="n">in_data</span><span class="o">&gt;</span><span class="n">extent_hint</span><span class="p">.</span><span class="n">top</span> <span class="o">-</span> <span class="n">in_data</span><span class="o">&gt;</span><span class="n">extent_hint</span><span class="p">.</span><span class="n">bottom</span><span class="p">;</span>
<span class="n">total_linesL</span> <span class="o">=</span> <span class="mi">3</span> <span class="o">*</span> <span class="n">lines_per_iterateL</span><span class="p">;</span>
<span class="n">lines_so_farL</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</pre></div>
</div>
<p>After each iteration, you’d add the already-completed lines to the current position:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">suites</span><span class="p">.</span><span class="n">iterate8suite</span><span class="p">()</span><span class="o">&gt;</span><span class="n">iterate</span><span class="p">(</span> <span class="n">lines_so_farL</span><span class="p">,</span>
                                <span class="n">total_linesL</span><span class="p">,</span>
                                <span class="n">input_worldP</span><span class="p">,</span>
                                <span class="o">&amp;</span><span class="n">output</span><span class="o">&gt;</span><span class="n">extent_hint</span><span class="p">,</span>
                                <span class="n">refcon</span><span class="p">,</span>
                                <span class="n">WhizBangPreProcessFun</span><span class="p">,</span>
                                <span class="n">output_worldP</span><span class="p">);</span>

<span class="n">lines_so_farL</span> <span class="o">+=</span> <span class="n">lines_per_iterateL</span><span class="p">;</span>

<span class="n">ERR</span><span class="p">(</span><span class="n">PF_PROGRESS</span><span class="p">(</span><span class="n">lines_so_farL</span><span class="p">,</span> <span class="n">total_linesL</span><span class="p">));</span>

<span class="n">suites</span><span class="p">.</span><span class="n">iterate8suite</span><span class="p">()</span><span class="o">&gt;</span><span class="n">iterate</span><span class="p">(</span> <span class="n">lines_so_farL</span><span class="p">,</span>
                                <span class="n">total_linesL</span><span class="p">,</span>
                                <span class="n">input_worldP</span><span class="p">,</span>
                                <span class="o">&amp;</span><span class="n">output</span><span class="o">&gt;</span><span class="n">extent_hint</span><span class="p">,</span>
                                <span class="n">refcon</span><span class="p">,</span>
                                <span class="n">WhizBangRenderFunc</span><span class="p">,</span>
                                <span class="n">output_worldP</span><span class="p">);</span>

<span class="n">lines_so_far</span> <span class="o">+=</span> <span class="n">lines_per_iterateL</span><span class="p">;</span>

<span class="n">ERR</span><span class="p">(</span><span class="n">PF_PROGRESS</span><span class="p">(</span><span class="n">lines_so_farL</span><span class="p">,</span> <span class="n">total_linesL</span><span class="p">));</span>

<span class="n">suites</span><span class="p">.</span><span class="n">iterate8suite</span><span class="p">()</span><span class="o">&gt;</span><span class="n">iterate</span><span class="p">(</span> <span class="n">lines_so_farL</span><span class="p">,</span>
                                <span class="n">total_linesL</span><span class="p">,</span>
                                <span class="n">input_worldP</span><span class="p">,</span>
                                <span class="o">&amp;</span><span class="n">output</span><span class="o">&gt;</span><span class="n">extent_hint</span><span class="p">,</span>
                                <span class="n">refcon</span><span class="p">,</span>
                                <span class="n">WhizBangPostProcessFunc</span><span class="p">,</span>
                                <span class="n">output_worldP</span><span class="p">);</span>

<span class="n">ERR</span><span class="p">(</span><span class="n">PF_PROGRESS</span><span class="p">(</span><span class="n">lines_so_farL</span><span class="p">,</span> <span class="n">total_linesL</span><span class="p">));</span>
</pre></div>
</div>
</div>
</div>
<span id="document-effect-details/pixel-aspect-ratio"></span><div class="section" id="pixel-aspect-ratio">
<span id="effect-details-pixel-aspect-ratio"></span><h2>Pixel Aspect Ratio<a class="headerlink" href="#pixel-aspect-ratio" title="Permalink to this headline">¶</a></h2>
<p>Effects must respond correctly to footage with non-square pixels, and non-uniform downsampling factors. Even different layer parameters can have different pixel aspect ratios! Doing so isn’t difficult once you understand the concepts involved.</p>
<p>Simple effects needn’t do any work to match up <a class="reference internal" href="index.html#effect-basics-parameters"><span class="std std-ref">point parameters</span></a> to the actual pixels in the output. Point parameters are given to the effect scaled for downsample factor and pixel aspect ratio; they are in the coordinate system of the input buffer. This provides an implicit “pixel coordinate system.” This coordinate system is handy and easy to understand. But effects that use absolute pixel measurements or geometry must take a deeper look at the relationship between the input buffer and the final rendered image.</p>
<hr class="docutils" />
<div class="section" id="don-t-assume-pixels-are-square-or-1-to-1">
<h3>Don’t Assume Pixels Are Square, Or 1-To-1<a class="headerlink" href="#don-t-assume-pixels-are-square-or-1-to-1" title="Permalink to this headline">¶</a></h3>
<p>First, it is not necessarily a square coordinate system, due to both pixel aspect ratio and non-uniform downsample factor. The final rendered image can be stretched or squashed horizontally, relative to the pixels your effect processes. Circles will appear as ellipses, squares as rectangles. The distance between two points varies based on their angle in this coordinate system; anything rotated in this system is skewed, in the final output.</p>
<p>Second, even if it <em>is</em> a square coordinate system, it’s not necessarily the same size as the final output. This means that any slider which defines a size in pixels will be a problem when the image is rendered downsampled; the width of anti-aliasing filters changes based on downsample factor.</p>
<p>Sometimes these issues aren’t a problem. Any effect that colors pixels based solely on a linear function of the x and y coordinates need not bother with pixel aspect ratio and downsample factor at all. Staying in the input coordinate space is an option, though you must account for pixel aspect ratio and downsample factor elsewhere.</p>
<p>Suppose you’re writing a particle system effect that sprays textured sprites from a source position defined by an effect control point. Using pixel coordinates to represent the particle positions seems fine (as long as the particles don’t have to rotate around a point), but when you go to actually <em>render</em> the particle textures, you’ll have to scale them by pixel aspect ratio and downsample factor.</p>
<p>If an effect already has coordinate transformation machinery in its pipeline, there’s an alternative that’s often simpler. Many algorithms require some sort of coordinate transformation; using matrices to set up a transformation, for example. But there are other easily adaptable algorithms, for example a texture generation effect that computes the value of each pixel based solely on its position. In this case, the code must take the raw pixel position and account for pixel aspect ratio and downsample factor.</p>
</div>
<hr class="docutils" />
<div class="section" id="suggested-approach">
<h3>Suggested Approach<a class="headerlink" href="#suggested-approach" title="Permalink to this headline">¶</a></h3>
<p>The simplest way to get all of this right is to work entirely in full resolution square coordinates, then scale by downsample factor and pixel aspect ratio as a final output transformation. Since point parameters are always reported in input buffer coordinates, convert them to full-resolution square coordinates before use. With this approach you don’t need to worry about sliders which define a size in pixels; just interpret them as defining size in full-resolution vertical pixels.</p>
<ol class="arabic simple">
<li>When getting your point parameters, go immediately to floating point and a full resolution square pixel system, like this.</li>
</ol>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">*=</span> <span class="n">in_data</span><span class="o">&gt;</span><span class="n">pixel_aspect_ratio</span><span class="p">.</span><span class="n">num</span> <span class="o">/</span> <span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="n">in_data</span><span class="o">&gt;</span><span class="n">pixel_aspect_ratio</span><span class="p">.</span><span class="n">den</span><span class="p">;</span>
<span class="n">x</span> <span class="o">*=</span> <span class="n">in_data</span><span class="o">&gt;</span><span class="n">downsample_x</span><span class="p">.</span><span class="n">den</span> <span class="o">/</span> <span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="n">in_data</span><span class="o">&gt;</span><span class="n">downsample_x</span><span class="p">.</span><span class="n">num</span><span class="p">;</span>
<span class="n">y</span> <span class="o">*=</span> <span class="n">in_data</span><span class="o">&gt;</span><span class="n">downsample_y</span><span class="p">.</span><span class="n">den</span> <span class="o">/</span> <span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="n">in_data</span><span class="o">&gt;</span><span class="n">downsample_y</span><span class="p">.</span><span class="n">num</span><span class="p">;</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li>Perform all setup (define transformation matrices, generate coordinates for later scan conversion, compute values based on the distance between points, rotating things, et cetera) in this coordinate space. Note that you’re not actually dealing with pixels in this stage; you’re just manipulating coordinates or coordinate transformations.</li>
<li>To go back to a coordinate system that corresponds directly to the pixels of the output buffer, undo the transformations from step one. Do this as late as possible, so as little code as possible needs to deal with this non-square space. If you’re using matrices, this would be a final output transformation. For an effect which renders something based on the coordinate of each pixel, iterate over the output pixels and convert pixel coordinates to square coordinates before doing any processing for that pixel.</li>
</ol>
<p>This may seem like extra work, but most reasonably complex effects like this have a coordinate transformation step anyway; and if they don’t, they still need one to handle pixel aspect ratio and downsample factor correctly.</p>
</div>
<hr class="docutils" />
<div class="section" id="applying-user-input-in-pixels">
<h3>Applying User Input In Pixels<a class="headerlink" href="#applying-user-input-in-pixels" title="Permalink to this headline">¶</a></h3>
<p>After Effects does all of its stretching horizontally so as to not to introduce unnecessary field interpolations; when pixels are used as a unit, we think of them as vertical pixels.</p>
</div>
<hr class="docutils" />
<div class="section" id="test-test-test">
<h3>Test Test Test!<a class="headerlink" href="#test-test-test" title="Permalink to this headline">¶</a></h3>
<p>Test at 1/2, 1/4, and custom resolutions and compare the output. Use an anamorphic (2:1) pixel aspect ratio composition to track down bugs in pixel aspect ratio handling (it really makes them obvious), and be sure to test with different horizontal and vertical downsample factors.</p>
<p>Some developers have reported problems with the downsample factors provided by some “After Effects compatible” plug-in hosts being zero. Check for zero before dividing.</p>
</div>
</div>
<span id="document-effect-details/parameters-floating-point-values"></span><div class="section" id="parameters-floating-point-values">
<span id="effect-details-parameters-floating-point-values"></span><h2>Parameters &amp; Floating Point Values<a class="headerlink" href="#parameters-floating-point-values" title="Permalink to this headline">¶</a></h2>
<p>We have something to admit to you; for years, even though we’ve given you 8 bit color values, we’ve internally used floating point representations behind your back.</p>
<p>That’s right, even with over-bright colors, we’d only ever tell you ‘255, 255, 255’. Yeah, right.</p>
<p>Well, we can’t live the lie any longer! Given a color parameter (passed to you by After Effects in your effect’s parameter array), this function returns a floating point representation, including any high dynamic range component.</p>
<hr class="docutils" />
<div class="section" id="pf-colorparamsuite1">
<span id="effect-details-parameters-floating-point-values-pf-colorparamsuite"></span><h3>PF_ColorParamSuite1<a class="headerlink" href="#pf-colorparamsuite1" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="34%" />
<col width="66%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Function</strong></th>
<th class="head"><strong>Purpose</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_GetFloatingPoint</span></code>
<code class="docutils literal notranslate"><span class="pre">ColorFromColorDef</span></code></td>
<td><div class="first last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_Err</span> <span class="nf">PF_GetFloatingPointColorFromColorDef</span><span class="p">(</span>
  <span class="n">PF_ProgPtr</span>         <span class="n">effect_ref</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">PF_ParamDef</span>  <span class="o">*</span><span class="n">color_defP</span><span class="p">,</span>
  <span class="n">PF_PixelFloat</span>      <span class="o">*</span><span class="n">fp_colorP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
</div>
<div class="section" id="pf-pointparamsuite1">
<span id="effect-details-parameters-floating-point-values-pf-pointparamsuite"></span><h3>PF_PointParamSuite1<a class="headerlink" href="#pf-pointparamsuite1" title="Permalink to this headline">¶</a></h3>
<p>We also provide a way to get floating point values for point parameters.</p>
<table border="1" class="docutils">
<colgroup>
<col width="34%" />
<col width="66%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Function</strong></th>
<th class="head"><strong>Purpose</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_GetFloatingPoint</span></code>
<code class="docutils literal notranslate"><span class="pre">ValueFromPointDef</span></code></td>
<td><div class="first last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_Err</span> <span class="nf">PF_GetFloatingPointValueFromPointDef</span><span class="p">(</span>
  <span class="n">PF_ProgPtr</span>         <span class="n">effect_ref</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">PF_ParamDef</span>  <span class="o">*</span><span class="n">point_defP</span><span class="p">,</span>
  <span class="n">A_FloatPoint</span>       <span class="o">*</span><span class="n">fp_pointP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
</div>
<div class="section" id="pf-angleparamsuite1">
<span id="effect-details-parameters-floating-point-values-pf-angleparamsuite"></span><h3>PF_AngleParamSuite1<a class="headerlink" href="#pf-angleparamsuite1" title="Permalink to this headline">¶</a></h3>
<p>New in CS6.0.2, we now provide a way to get floating point values for angle parameters.</p>
<table border="1" class="docutils">
<colgroup>
<col width="34%" />
<col width="66%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Function</strong></th>
<th class="head"><strong>Purpose</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_GetFloatingPoint</span></code>
<code class="docutils literal notranslate"><span class="pre">ValueFromAngleDef</span></code></td>
<td><div class="first last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_Err</span> <span class="nf">PF_GetFloatingPointValueFromAngleDef</span><span class="p">(</span>
  <span class="n">PF_ProgPtr</span>         <span class="n">effect_ref</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">PF_ParamDef</span>  <span class="o">*</span><span class="n">angle_defP</span><span class="p">,</span>
  <span class="n">A_FloatLong</span>        <span class="o">*</span><span class="n">fp_valueP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<span id="document-effect-details/parameter-supervision"></span><div class="section" id="parameter-supervision">
<span id="effect-detals-parameter-supervision"></span><h2>Parameter Supervision<a class="headerlink" href="#parameter-supervision" title="Permalink to this headline">¶</a></h2>
<p>Supervision means dynamically changing the values of some parameters based on the values of others. To supervise a parameter, set <a class="reference internal" href="index.html#effect-basics-pf-paramdef-parameter-flags"><span class="std std-ref">PF_ParamFlag_SUPERVISE</span></a> before adding it during <em>PF_Cmd_PARAM_SETUP</em>. Whenever it is changed, you will receive <a class="reference internal" href="index.html#effect-basics-command-selectors-messaging"><span class="std std-ref">PF_Cmd_USER_CHANGED_PARAM</span></a>. The index (into the plug-in’s parameter array) of the changed parameter is sent in the PF_UserChangedParamExtra (extra) param. During <em>PF_Cmd_USER_CHANGED_PARAM</em>, you may change the values <em>and</em> appearance of any of your parameters.</p>
<hr class="docutils" />
<div class="section" id="updating-parameter-ui">
<h3>Updating Parameter UI<a class="headerlink" href="#updating-parameter-ui" title="Permalink to this headline">¶</a></h3>
<p>If you set <code class="docutils literal notranslate"><span class="pre">PF_ParamFlag_SUPERVISE</span></code> on any parameter, After Effects will send you <em>PF_Cmd_UPDATE_PARAMS_UI</em>, just as if you had set PF_OutFlag_SEND_UPDATE_PARAMS_UI.</p>
<p>During <em>PF_Cmd_UPDATE_PARAMS_UI</em>, you may only change the appearance and enable state of parameters. Use <code class="docutils literal notranslate"><span class="pre">PF_UpdateParamUI()</span></code> from <a class="reference internal" href="#effect-detals-parameter-supervision-pf-paramutilsuite"><span class="std std-ref">PF_ParamUtilSuite3</span></a> to update the UI, passing it a <em>copy</em> of the parameter you wish to modify. Do <em>not</em> attempt to modify the original. It is not necessary to set <code class="docutils literal notranslate"><span class="pre">PF_OutFlag_REFRESH_UI</span></code>; <code class="docutils literal notranslate"><span class="pre">PF_UpdateParamUI()</span></code> handles that for you.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This is the only way to update the UI of <code class="docutils literal notranslate"><span class="pre">PF_PUI_STD_CONTROL_ONLY</span></code> parameters.</p>
</div>
</div>
<hr class="docutils" />
<div class="section" id="updating-parameter-values">
<h3>Updating Parameter Values<a class="headerlink" href="#updating-parameter-values" title="Permalink to this headline">¶</a></h3>
<p>A parameter’s value (not just UI) can be modified during <a class="reference internal" href="index.html#effect-basics-command-selectors-messaging"><span class="std std-ref">PF_Cmd_USER_CHANGED_PARAM</span></a> and during <a class="reference internal" href="index.html#effect-basics-command-selectors-messaging"><span class="std std-ref">PF_Cmd_EVENT</span></a> (<em>PF_Event_DO_CLICK</em>, <em>PF_Event_DRAG</em>, &amp; <em>PF_Event_KEYDOWN</em>). After Effects will not honor changes made at other times.</p>
<p>When changing parameter <em>values</em> (and not just the UI), modify the original parameter, and set <code class="docutils literal notranslate"><span class="pre">PF_Paramdef.uu.change_flags</span></code> to <code class="docutils literal notranslate"><span class="pre">PF_ChangeFlag_CHANGED_VALUE</span></code>.</p>
<p>This change will be also update the UI, and will be undoable by the user. Note that <code class="docutils literal notranslate"><span class="pre">PF_ChangeFlag_CHANGED_VALUE</span></code> isn’t supported for layer parameters.</p>
<p>This suite is provided to give effect plug-ins some access to their parameter streams, without requiring AEGP suite usage. At least some of these functions are provided by several third-party hosts. These functions are especially handy for effects with supervised parameters.</p>
<hr class="docutils" />
</div>
<div class="section" id="pf-paramutilsuite3">
<span id="effect-detals-parameter-supervision-pf-paramutilsuite"></span><h3>PF_ParamUtilSuite3<a class="headerlink" href="#pf-paramutilsuite3" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="15%" />
<col width="85%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Function</strong></th>
<th class="head"><strong>Purpose</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_UpdateParamUI</span></code></td>
<td><div class="first highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_UpdateParamUI</span><span class="p">(</span>
  <span class="n">PF_ProgPtr</span>         <span class="n">effect_ref</span><span class="p">,</span>
  <span class="n">PF_ParamIndex</span>      <span class="n">param_index</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">PF_ParamDef</span>  <span class="o">*</span><span class="n">defP</span><span class="p">);</span>
</pre></div>
</div>
<p>Force After Effects to refresh the parameter’s UI, in the effect controls palette.</p>
<p>Starting in CC 2014, After Effects will now honor a change to a custom UI height. Simply change the ui_height of your custom UI PF_ParamDef and then call PF_UpdateParamUI.
The effect’s custom UI height will be updated in the Effect Control Window.</p>
<p>Starting in CS6, when a plug-in disables a parameter, we now save that state in the UI flags so that the plug-in can check that flag in the future to see if it is disabled.</p>
<p class="last">NOTE: Never pass param[0] to this function.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_GetCurrentState</span></code></td>
<td><div class="first highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_GetCurrentState</span><span class="p">(</span>
  <span class="n">PF_ProgPtr</span>     <span class="n">effect_ref</span><span class="p">,</span>
  <span class="n">PF_ParamIndex</span>  <span class="n">param_index</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_Time</span>   <span class="o">*</span><span class="n">startPT0</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_Time</span>   <span class="o">*</span><span class="n">durationPT0</span><span class="p">,</span>
  <span class="n">PF_State</span>       <span class="o">*</span><span class="n">stateP</span><span class="p">);</span>
</pre></div>
</div>
<p>This API, combined with PF_AreStatesIdentical below, lets you determine if a set of inputs (either layers, other properties, or both) are different between when you first called PF_GetCurrentState and a current call,
so it can be used for caching. You can specify a range of time to consider or all of time.</p>
<p>Updated in CS6 to add param_index, startPT0, and durationPT0. Pre-defined constants for param_index are as follows:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">PF_ParamIndex_CHECK_ALL</span></code> - check every parameter, including every layer referred to by a layer parameter.</li>
<li><code class="docutils literal notranslate"><span class="pre">PF_ParamIndex_CHECK_ALL_EXCEPT_LAYER_PARAMS</span></code> - omit all layers. Pass a specific layer parameter index to include that as the only layer parameter tested.</li>
<li><code class="docutils literal notranslate"><span class="pre">PF_ParamIndex_CHECK_ALL_HONOR_EXCLUDE</span></code> - Similar to CHECK_ALL, but honor PF_ParamFlag_EXCLUDE_FROM_HAVE_INPUTS_CHANGED.</li>
</ul>
</div></blockquote>
<p>Passing in NULL for both start and duration indicates all time.
For effects that do simulation across time and therefore set PF_OutFlag2_AUTOMATIC_WIDE_TIME_INPUT, when you ask about a time range, it will be expanded to include any times needed to produce that range.</p>
<p class="last">Populates a PF_State, an opaque data type used as a receipt for the current state of the effect’s parameters (the PF_State is used in our internal frame caching database).</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_AreStatesIdentical</span></code></td>
<td><div class="first highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_AreStatesIdentical</span><span class="p">(</span>
  <span class="n">PF_ProgPtr</span>      <span class="n">effect_ref</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">PF_State</span>  <span class="o">*</span><span class="n">state1P</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">PF_State</span>  <span class="o">*</span><span class="n">state2P</span><span class="p">,</span>
  <span class="n">A_Boolean</span>       <span class="o">*</span><span class="n">samePB</span><span class="p">);</span>
</pre></div>
</div>
<p class="last">New in CS6. Compare two different states, retrieved using <code class="docutils literal notranslate"><span class="pre">PF_GetCurrentState</span></code>, above.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_HasParamChanged</span></code></td>
<td><p class="first">No longer supported in <code class="docutils literal notranslate"><span class="pre">PFParamUtilsSuite3</span></code>.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_HasParamChanged</span><span class="p">(</span>
  <span class="n">PF_ProgPtr</span>     <span class="n">effect_ref</span><span class="p">,</span>
  <span class="k">const</span>          <span class="n">PF_State</span> <span class="o">*</span><span class="n">stateP</span><span class="p">,</span>
  <span class="n">PF_ParamIndex</span>  <span class="n">param_index</span><span class="p">,</span>
  <span class="n">PF_Boolean</span>     <span class="o">*</span><span class="n">changedPB</span><span class="p">);</span>
</pre></div>
</div>
<p>Given a PF_State, passes back true if any of the tested parameters differ from the saved state. Contrary to the name, the call does not provide a way to test a single parameter.
At a minimum, all non-layer parameters will be tested. For finer granularity to test a specific set of parameters, use PF_HaveInputsChangedOverTimeSpan below instead.</p>
<p>Pre-defined constants for param_index are as follows:</p>
<blockquote class="last">
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">PF_ParamIndex_CHECK_ALL</span></code> - check every parameter, including every layer referred to by a layer parameter.</li>
<li><code class="docutils literal notranslate"><span class="pre">PF_ParamIndex_CHECK_ALL_EXCEPT_LAYER_PARAMS</span></code> - omit all layers. Pass a specific layer parameter index to include that as the only layer parameter tested.</li>
</ul>
</div></blockquote>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_HaveInputsChangedOverTimeSpan</span></code></td>
<td>No longer supported in <code class="docutils literal notranslate"><span class="pre">PFParamUtilsSuite3</span></code>. Use <code class="docutils literal notranslate"><span class="pre">PF_AreStatesIdentical()</span></code> instead.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_IsIdenticalCheckout</span></code></td>
<td><div class="first highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_IsIdenticalCheckout</span><span class="p">(</span>
  <span class="n">PF_ProgPtr</span>     <span class="n">effect_ref</span><span class="p">,</span>
  <span class="n">PF_ParamIndex</span>  <span class="n">param_index</span><span class="p">,</span>
  <span class="n">A_long</span>         <span class="n">what_time1</span><span class="p">,</span>
  <span class="n">A_long</span>         <span class="n">time_step1</span><span class="p">,</span>
  <span class="n">A_u_long</span>       <span class="n">time_scale1</span><span class="p">,</span>
  <span class="n">A_long</span>         <span class="n">what_time2</span><span class="p">,</span>
  <span class="n">A_long</span>         <span class="n">time_step2</span><span class="p">,</span>
  <span class="n">A_u_long</span>       <span class="n">time_scale2</span><span class="p">,</span>
  <span class="n">PF_Boolean</span>     <span class="o">*</span><span class="n">identicalPB</span><span class="p">);</span>
</pre></div>
</div>
<p class="last">Returns <code class="docutils literal notranslate"><span class="pre">TRUE</span></code> if a parameter’s value is the same at the two passed times. Note: the times need not be contiguous; there could be different intervening values.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_FindKeyframeTime</span></code></td>
<td><div class="first highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_FindKeyframeTime</span><span class="p">(</span>
  <span class="n">PF_ProgPtr</span>     <span class="n">effect_ref</span><span class="p">,</span>
  <span class="n">PF_ParamIndex</span>  <span class="n">param_index</span><span class="p">,</span>
  <span class="n">A_long</span>         <span class="n">what_time</span><span class="p">,</span>
  <span class="n">A_u_long</span>       <span class="n">time_scale</span><span class="p">,</span>
  <span class="n">PF_TimeDir</span>     <span class="n">time_dir</span><span class="p">,</span>
  <span class="n">PF_Boolean</span>     <span class="o">*</span><span class="n">foundPB</span><span class="p">,</span>
  <span class="n">PF_KeyIndex</span>    <span class="o">*</span><span class="n">key_indexP0</span><span class="p">,</span>
  <span class="n">A_long</span>         <span class="o">*</span><span class="n">key_timeP0</span><span class="p">,</span>
  <span class="n">A_u_long</span>       <span class="o">*</span><span class="n">key_timescaleP0</span><span class="p">);</span>
</pre></div>
</div>
<p class="last">Searches (in the specified direction) for the next keyframe in the parameter’s stream. The last three parameters are optional.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_GetKeyframeCount</span></code></td>
<td><div class="first highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_GetKeyframeCount</span><span class="p">(</span>
  <span class="n">PF_ProgPtr</span>     <span class="n">effect_ref</span><span class="p">,</span>
  <span class="n">PF_ParamIndex</span>  <span class="n">param_index</span><span class="p">,</span>
  <span class="n">PF_KeyIndex</span>    <span class="o">*</span><span class="n">key_countP</span><span class="p">);</span>
</pre></div>
</div>
<p class="last">Returns the number of keyframes in the parameter’s stream.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_CheckoutKeyframe</span></code></td>
<td><div class="first highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_CheckoutKeyframe</span><span class="p">(</span>
  <span class="n">PF_ProgPtr</span>     <span class="n">effect_ref</span><span class="p">,</span>
  <span class="n">PF_ParamIndex</span>  <span class="n">param_index</span><span class="p">,</span>
  <span class="n">PF_KeyIndex</span>    <span class="n">key_index</span><span class="p">,</span>
  <span class="n">A_long</span>         <span class="o">*</span><span class="n">key_timeP0</span><span class="p">,</span>
  <span class="n">A_u_long</span>       <span class="o">*</span><span class="n">key_timescaleP0</span><span class="p">,</span>
  <span class="n">PF_ParamDef</span>    <span class="o">*</span><span class="n">paramP0</span><span class="p">);</span>
</pre></div>
</div>
<p class="last">Checks a keyframe for the specified parameter out of our keyframe database. param_index is zero-based. You can request time, timescale, or neither; useful if you’re performing your own motion blur.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_CheckinKeyframe</span></code></td>
<td><div class="first highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_CheckinKeyframe</span><span class="p">(</span>
  <span class="n">PF_ProgPtr</span>   <span class="n">effect_ref</span><span class="p">,</span>
  <span class="n">PF_ParamDef</span>  <span class="o">*</span><span class="n">paramP</span><span class="p">);</span>
</pre></div>
</div>
<p class="last">All calls to PF_CheckoutKeyframe must be balanced with this check-in, or pain will ensue.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_KeyIndexToTime</span></code></td>
<td><div class="first highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_KeyIndexToTime</span><span class="p">(</span>
  <span class="n">PF_ProgPtr</span>     <span class="n">effect_ref</span><span class="p">,</span>
  <span class="n">PF_ParamIndex</span>  <span class="n">param_index</span><span class="p">,</span>
  <span class="n">PF_KeyIndex</span>    <span class="n">key_indexP</span><span class="p">,</span>
  <span class="n">A_long</span>         <span class="o">*</span><span class="n">key_timeP</span><span class="p">,</span>
  <span class="n">A_u_long</span>       <span class="o">*</span><span class="n">key_timescaleP</span><span class="p">);</span>
</pre></div>
</div>
<p class="last">Returns the time (and timescale) of the specified keyframe.</p>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<span id="document-effect-details/global-sequence-frame-data"></span><div class="section" id="global-sequence-frame-data">
<span id="effect-details-global-sequence-frame-data"></span><h2>Global, Sequence, &amp; Frame Data<a class="headerlink" href="#global-sequence-frame-data" title="Permalink to this headline">¶</a></h2>
<p>After Effects allows plug-ins to store data at three scopes; global, sequence, and frame. Consider carefully where you store information; choosing poorly can impact performance, or make your plug-in confusing to the user.</p>
<p>Use global data for information common to all instances of the effect: static variables and data, bitmaps, pointers to other DLLs or external applications.</p>
<p>Store anything specific to this instance of your plug-in (UI settings, text strings, and any custom data not stored in parameters) in sequence data, Use After Effects’ memory allocation functions.</p>
<p>Frame data is used for information specific to rendering a given frame. This has fallen into disuse, as most machines are capable of loading an entire frame into memory at a time. Of course, your IMAX-generating users will still appreciate any optimizations you can make.</p>
<hr class="docutils" />
<div class="section" id="persistence">
<h3>Persistence<a class="headerlink" href="#persistence" title="Permalink to this headline">¶</a></h3>
<p>After Effects saves sequence data in the project file, but not global or frame data. Pointers within sequence data which point to external data are, in all likelihood, invalid upon reopening the project, and must be re-connected. We call this process “flattening” and “unflattening” the sequence data.</p>
<hr class="docutils" />
</div>
<div class="section" id="validating-sequence-data">
<span id="effect-details-global-sequence-frame-data-validating-sequence-data"></span><h3>Validating Sequence Data<a class="headerlink" href="#validating-sequence-data" title="Permalink to this headline">¶</a></h3>
<p>Careful sequence data validation is important for effects that do simulation across time, where frame N is dependent on frame N-1, and you use a cache of calculated data in your sequence data. If a parameter is changed, certain calculated data may no longer be valid, but it would also be wasteful to blindly recalculate everything after every change.</p>
<p>When asked to render frame N, assuming you have your cached data calculated up to frame N-1, call <code class="docutils literal notranslate"><span class="pre">PF_GetCurrentState()</span></code> / <code class="docutils literal notranslate"><span class="pre">PF_AreStatesIdentical()</span></code> from <a class="reference internal" href="index.html#effect-detals-parameter-supervision-pf-paramutilsuite"><span class="std std-ref">PF_ParamUtilSuite3</span></a> to see if the cache of calculated data is still valid given the current parameter settings.</p>
<p>The state of all parameters (except those with <a class="reference internal" href="index.html#effect-basics-pf-paramdef-parameter-flags"><span class="std std-ref">PF_ParamFlag_EXCLUDE_FROM_HAVE_INPUTS_CHANGED</span></a> set), including layer parameters (including <a class="reference internal" href="index.html#effect-basics-pf-paramdef-param-zero"><span class="std std-ref">param[0]</span></a>) are checked over the passed time span.</p>
<p>This is done efficiently, as the change tracking is done with timestamps.</p>
<p>If the inputs have not changed, you can safely use your cache, AND the internal caching system will assume that you have a temporal dependency on the passed range. So if something changes upstream, the host’s caches will be properly invalidated automatically.</p>
<p>To test that it is working, apply your effect with one parameter keyframed on every frame. RAM Preview to fill the cache, then change one of the keyframes. The related frame and all dependent frames (e.g. later frames, in the case of a simulation) should lose their cache marks and require re-rendering. Similarly, upstream changes to sources of layer parameters should cause time-selective invalidation of the cache.</p>
</div>
<hr class="docutils" />
<div class="section" id="flattened-and-unflattened-sequence-data">
<h3>Flattened And Unflattened Sequence Data<a class="headerlink" href="#flattened-and-unflattened-sequence-data" title="Permalink to this headline">¶</a></h3>
<p>If your sequence data references external memory (in pointers or handles), you must flatten and unflatten your data for disk-safe storage. This is analogous to creating your own miniature file format.</p>
<p>Upon receiving <a class="reference internal" href="index.html#effect-basics-command-selectors-sequence-selectors"><span class="std std-ref">PF_Cmd_SEQUENCE_FLATTEN</span></a>, put data referenced by pointers into one contiguous block from which you can later recover the old structure.</p>
<p>If your sequence data contains a pointer to a long, allocate 4 bytes in which to store the flattened data. You must handle platform-specific byte ordering.</p>
<p>Remember, your users (the ones who bought two copies of your plug-in, anyway) may want the same project to work on macOS and Windows.</p>
<p>After Effects sends <a class="reference internal" href="index.html#effect-basics-command-selectors-sequence-selectors"><span class="std std-ref">PF_Cmd_SEQUENCE_RESETUP</span></a> when the data is reloaded, for either flat or unflat data.</p>
<p>Use a flag at a common offset within both structures to indicate the data’s state.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
  <span class="n">A_char</span><span class="o">*</span>    <span class="n">messageZ</span><span class="p">;</span>
  <span class="n">PF_FpLong</span>  <span class="n">big_numF</span><span class="p">;</span>
  <span class="kt">void</span><span class="o">*</span>      <span class="n">temp_storage</span><span class="p">;</span>
<span class="p">}</span> <span class="n">non_flat_data</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
  <span class="kt">char</span>       <span class="n">message</span><span class="p">[</span><span class="mi">256</span><span class="p">];</span>
  <span class="n">PF_FpLong</span>  <span class="n">big_numF</span><span class="p">;</span>
  <span class="n">A_Boolean</span>  <span class="n">big_endianB</span><span class="p">;</span>
<span class="p">}</span> <span class="n">flat_data</span><span class="p">;</span>
</pre></div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="resizing-sequence-data">
<h3>Resizing Sequence Data<a class="headerlink" href="#resizing-sequence-data" title="Permalink to this headline">¶</a></h3>
<p>During <a class="reference internal" href="index.html#effect-basics-command-selectors-sequence-selectors"><span class="std std-ref">PF_Cmd_SEQUENCE_SETUP</span></a>, allocate a handle for data specific to this instance of your effect.</p>
<p>You may modify the contents, but not the size, of the sequence data during any selector.</p>
<p>You may resize the sequence data handle only during the following selectors:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">PF_Cmd_AUDIO_SETUP</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PF_Cmd_AUDIO_SETDOWN</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PF_Cmd_FRAME_SETUP</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PF_Cmd_FRAME_SETDOWN</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PF_Cmd_AUDIO_RENDER</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PF_Cmd_RENDER</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PF_Cmd_SEQUENCE_SETUP</span></code> (duh)</li>
<li><code class="docutils literal notranslate"><span class="pre">PF_Cmd_SEQUENCE_SETDOWN</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PF_Cmd_SEQUENCE_FLATTEN</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PF_Cmd_SEQUENCE_RESETUP</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PF_Cmd_DO_DIALOG</span></code></li>
</ul>
</div></blockquote>
</div>
</div>
<span id="document-effect-details/arbitrary-data-parameters"></span><div class="section" id="arbitrary-data-parameters">
<span id="effect-details-arbitrary-data-parameters"></span><h2>Arbitrary Data Parameters<a class="headerlink" href="#arbitrary-data-parameters" title="Permalink to this headline">¶</a></h2>
<p>Some values are not adequately represented by After Effects existing parameter types. You can create and register any data for interpolation by After Effects, by creating parameters of arbitrary data type, or “arb data”. You can rely on our interpolation engine and parameter management, without having to force your data into a pre-defined parameter type.</p>
<p>We’ve created a new messaging structure for custom data types, which are easily conceptualized as member (and friend) functions of a C++ class. You must respond to all selectors detailed here if you use arb data.</p>
<p>These functions deal with custom data structure management. Your arb data will be unloaded and reloaded at the user’s whim; provide disk-safe flatten and unflatten functions.</p>
<hr class="docutils" />
<div class="section" id="arbitrary-data-selectors">
<h3>Arbitrary Data Selectors<a class="headerlink" href="#arbitrary-data-selectors" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Selector</strong></th>
<th class="head"><strong>Response</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_Arbitrary_NEW_FUNC</span></code></td>
<td>Allocate, populate, and return a handle to a new instance of your arb data.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_Arbitrary_DISPOSE_FUNC</span></code></td>
<td>Free and destroy an instance of your arbitrary data type.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_Arbitrary_COPY_FUNC</span></code></td>
<td>Make a copy of an existing instance. You will be passed two handles, but only the source handle contains a valid instance. You must create a new instance, copy the values from the source, and put it in the destination handle. If you are passed a NULL handle, create a default instance of your arb data.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_Arbitrary_FLAT_SIZE_FUNC</span></code></td>
<td>You’ll be passed a handle to an instance of your data type, and a variable in which you return the size of a flattened version of that instance.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_Arbitrary_FLATTEN_FUNC</span></code></td>
<td>Flatten the instance you’re passed, and place it in the supplied buffer. The buffer will be the size you reported in response to PF_Arbitrary_FLAT_SIZE_FUNC.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_Arbitrary_UNFLATTEN_FUNC</span></code></td>
<td>Unpack the buffer into an instance of your arbitrary data type, and put in the handle which you’ve been passed.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_Arbitrary_INTERP_FUNC</span></code></td>
<td><p class="first">Your interpolation function is passed three handles to instances of your arbitrary data type; one containing initial values (0), one final values (1), and a third to hold your interpolated data (somewhere between 0 and 1). You are also passed a float indicating where, between 0 and 1, your interpreted value should be.</p>
<p>Allocate an instance and fill it with interpolated data. Then put the interpolated instance into the handle you’ve been passed. The velocity curves have already been accounted for when the normalized time value was calculated.</p>
<p class="last">NOTE: Never check out parameters if the <a class="reference internal" href="index.html#effect-basics-pf-indata-pf-indata-members"><span class="std std-ref">in_data&gt;effect_ref</span></a> is NULL.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_Arbitrary_COMPARE_FUNC</span></code></td>
<td>You are passed two instances of your arbitrary data, and a pointer to a comparison result. Populate the result with one of the values for PF_ArbCompareResult (see AE_Effect.h) to indicate whether the first was equal to, less than, more than, or simply not equal to the second.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_Arbitrary_PRINT_SIZE_FUNC</span></code></td>
<td>Indicate the buffer size you require for printing your parameter’s current values by setting print_sizePLu (member of print_size_func_params, part of the PF_ArbParamsExtra structure).</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_Arbitrary_PRINT_FUNC</span></code></td>
<td>Format your arbitrary data for text-based export, and copy the result to the buffer. This can be as elaborate as you would like.
Your plug-in should emulate the cut-and-paste behavior for pasting text representations of parameter settings (into a Microsoft Excel spreadsheet, for example) displayed by the plug-ins shipped with After Effects.
You have a great deal of flexibility in how you format your output.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_Arbitrary_SCAN_FUNC</span></code></td>
<td>Given a buffer of text data (often from the system clipboard), parse it into your arbitrary data format.</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
</div>
<div class="section" id="implementing-arbitrary-data">
<span id="effect-details-arbitrary-data-parameters-implementing-arbitrary-data"></span><h3>Implementing Arbitrary Data<a class="headerlink" href="#implementing-arbitrary-data" title="Permalink to this headline">¶</a></h3>
<p>In addition to the normal command and event selector, arb data requires another set of host interaction. This is transparent for other parameter types, as After Effects manages their representing data. Writing an arb data plug-in will give you insight into the vast amount of parameter management After Effects performs, and the sequence in which those managing actions occur. It may even cause you to rethink your implementation, and use the parameter types After Effects manages <em>for</em> you.</p>
<p>Instantiate your arb data (using After Effects’ memory allocation functions, of course) and point ParamDef.u.arb_d.dephault at it. Populate it with appropriate default values. No value variable is required to set up the parameter; zero it out for safety’s sake.</p>
<p>In your plug-in’s entry function, include a case for handling <a class="reference internal" href="index.html#effect-basics-command-selectors-messaging"><span class="std std-ref">PF_Cmd_ARBITRARY_CALLBACK</span></a>.</p>
<p>Invoke a secondary event handler, <code class="docutils literal notranslate"><span class="pre">HandleArbitrary</span></code>. It receives a <code class="docutils literal notranslate"><span class="pre">PF_ArbParamsExtra</span></code> in extra, which in turn contains a <code class="docutils literal notranslate"><span class="pre">PF_FunctionSelector</span></code> identifying the command sent.</p>
<p>Perhaps After Effects has sent <code class="docutils literal notranslate"><span class="pre">PF_Cmd_ARBITRARY_CALLBACK</span></code> and the <code class="docutils literal notranslate"><span class="pre">PF_FunctionSelector</span></code> is <code class="docutils literal notranslate"><span class="pre">PF_Arbitrary_COPY_FUNC</span></code>. Pointers to a source and destination Arb are provided in <code class="docutils literal notranslate"><span class="pre">PF_ArbParamsExtra.copy_func_params</span></code>. Allocate a new Arb, and point <code class="docutils literal notranslate"><span class="pre">dest_arbPH</span></code> at it. If <code class="docutils literal notranslate"><span class="pre">src_arbH</span></code> is NULL, create a default Arb for <code class="docutils literal notranslate"><span class="pre">dest_arbPH</span></code>.</p>
<p>The user may select the arb’s keyframe data in the Timeline panel, copy it, then switch to another application. You will be sent a <code class="docutils literal notranslate"><span class="pre">PF_Arbitrary_PRINT_SIZE_FUNC</span></code>; set the size of your output buffer by setting <code class="docutils literal notranslate"><span class="pre">print_sizePLu</span></code> in the <code class="docutils literal notranslate"><span class="pre">PF_ArbParamsExtra</span></code>. You’ll then receive <code class="docutils literal notranslate"><span class="pre">PF_Arbitrary_PRINT_FUNC</span></code>; populate the <code class="docutils literal notranslate"><span class="pre">print_bufferPC</span></code> output buffer with a textual representation of the Arb(s) in question.</p>
<p>Users may paste keyframe data into your Arb’s timeline. You will receive <code class="docutils literal notranslate"><span class="pre">PF_Arbitrary_SCAN_FUNC</span></code>. Create an Arb based on the contents of the character buffer handed to you (its size is indicated in <code class="docutils literal notranslate"><span class="pre">print_sizeLu</span></code>).</p>
</div>
<hr class="docutils" />
<div class="section" id="arbitrary-data-re-entrancy">
<h3>Arbitrary Data? Re-Entrancy!<a class="headerlink" href="#arbitrary-data-re-entrancy" title="Permalink to this headline">¶</a></h3>
<p>Your plug-in code <em>must</em> be recursively re-entrant to support custom data types, since it could be called by After Effects for numerous reasons. Your plug-in could check out a layer that, in turn, depends on another instance of your effect. Your plug-in’s arbitrary data handling code will be triggered by your attempt to check out a (seemingly) unrelated layer. Watch out for calls to C run-time libraries that rely on static values accessed through global variables. If you’re not prepared for this eventuality, you’ll hang After Effects, and users will curse and punch their monitors.</p>
</div>
<hr class="docutils" />
<div class="section" id="when-not-to-access-arbitrary-parameters">
<h3>When Not To Access Arbitrary Parameters<a class="headerlink" href="#when-not-to-access-arbitrary-parameters" title="Permalink to this headline">¶</a></h3>
<p>If <code class="docutils literal notranslate"><span class="pre">in_data&gt;effect_ref</span></code> is <code class="docutils literal notranslate"><span class="pre">NULL</span></code>, do not check out arbitrary parameters.</p>
</div>
<hr class="docutils" />
<div class="section" id="changes-during-dialogs">
<h3>Changes During Dialogs<a class="headerlink" href="#changes-during-dialogs" title="Permalink to this headline">¶</a></h3>
<p>After Effects ignores any changes made to arbitrary data parameters during <code class="docutils literal notranslate"><span class="pre">PF_Cmd_DO_DIALOG</span></code>.</p>
<p>This is by design; changes made during the display of the options dialog affect the entire effect stream, not just the arbitrary parameter at a given time.</p>
<p>If you must alter your arb’s behavior based on these changes, save that information in sequence data and apply it later, often during <code class="docutils literal notranslate"><span class="pre">PF_Cmd_USER_CHANGED_PARAM</span></code>.</p>
</div>
</div>
<span id="document-effect-details/useful-utility-functions"></span><div class="section" id="useful-utility-functions">
<span id="effect-details-useful-utility-functions"></span><h2>Useful Utility Functions<a class="headerlink" href="#useful-utility-functions" title="Permalink to this headline">¶</a></h2>
<div class="section" id="pf-effectuisuite">
<h3>PF_EffectUISuite<a class="headerlink" href="#pf-effectuisuite" title="Permalink to this headline">¶</a></h3>
<p>Although not strictly concerned with parameters, this suite can change the name of the options button.</p>
<table border="1" class="docutils">
<colgroup>
<col width="21%" />
<col width="79%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Function</strong></th>
<th class="head"><strong>Purpose</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_SetOptionsButtonName</span></code></td>
<td><p class="first">Changes the text on the options button in the effect controls palette.</p>
<p>NOTE: This must be called during <a class="reference internal" href="index.html#effect-basics-command-selectors-global-selectors"><span class="std std-ref">PF_Cmd_PARAM_SETUP</span></a>.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_SetOptionsButtonName</span><span class="p">(</span>
  <span class="n">PF_ProgPtr</span>    <span class="n">effect_ref</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_char</span>  <span class="o">*</span><span class="n">nameZ</span><span class="p">);</span>
</pre></div>
</div>
<p class="last"><code class="docutils literal notranslate"><span class="pre">nameZ</span></code> may be up to <code class="docutils literal notranslate"><span class="pre">A_char[31]</span></code> in length.</p>
</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
</div>
<div class="section" id="pf-appsuite">
<span id="effect-details-useful-utility-functions-pf-appsuite"></span><h3>PF_AppSuite<a class="headerlink" href="#pf-appsuite" title="Permalink to this headline">¶</a></h3>
<p>Roughly 437 years ago, when we released After Effects 5.0, we published some useful utility callbacks in PF_AppSuite. They’re as useful today as they were then. After Effects has user-controllable UI brightness.</p>
<p>In addition to the <a class="reference internal" href="index.html#effect-ui-events-custom-ui-and-drawbot-pf-effectcustomuioverlaythemesuite"><span class="std std-ref">PF_EffectCustomUIOverlayThemeSuite</span></a> for custom UI in effects, use these calls to integrate seamlessly into the After Effects UI.</p>
<p>What better way to shame someone into purchasing a copy of your plug-in than by putting their personal information into a watermark, eh? Or set the cursor to add mask vertices, just to confuse people? Heh heh heh. But that would be wrong.</p>
<table border="1" class="docutils">
<colgroup>
<col width="14%" />
<col width="86%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Function</strong></th>
<th class="head"><strong>Purpose</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_AppGetBgColor</span></code></td>
<td><p class="first">Retrieves the current background color.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_AppGetBgColor</span><span class="p">(</span>
  <span class="n">PF_App_Color</span>  <span class="n">bg_colorP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_AppGetColor</span></code></td>
<td><p class="first">Retrieves the color for the specified UI element. See AE_EffectSuites.h for a complete enumeration of available <code class="docutils literal notranslate"><span class="pre">PF_App_Color</span></code> values;
basically any color in After Effects’ UI can be retrieved.</p>
<p>CC adds several new <code class="docutils literal notranslate"><span class="pre">PF_App_ColorType</span></code> enum values for new elements that can be queried.</p>
<p>Note that in CS6, the color definitions are off from <code class="docutils literal notranslate"><span class="pre">FILL_LIGHT</span></code> downward.</p>
<p>Use following psuedocode for CS6 only:</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">GetColor</span><span class="p">(</span><span class="k">enum</span> <span class="n">e</span><span class="p">)</span>
<span class="p">{</span>
  <span class="k">if</span> <span class="n">host_is_CS6</span> <span class="n">and</span> <span class="n">e</span> <span class="o">&gt;=</span> <span class="n">FILL_LIGHT</span>
  <span class="n">e</span> <span class="o">+=</span> <span class="mi">3</span>
    <span class="n">call</span> <span class="n">real</span> <span class="n">GetColor</span>
<span class="p">}</span>

<span class="n">PF_AppGetColor</span><span class="p">(</span>
  <span class="n">PF_App_ColorType</span>  <span class="n">color_type</span><span class="p">,</span>
  <span class="n">PF_App_Color</span>      <span class="o">*</span><span class="n">app_colorP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_AppGetLanguage</span></code></td>
<td><p class="first">New in CC. Retrieves the active displayed language of AE UI so plug-in can match. Here are the possible language codes as of CC:</p>
<ul class="simple">
<li>Chinese - <code class="docutils literal notranslate"><span class="pre">zh_CN</span></code></li>
<li>English - <code class="docutils literal notranslate"><span class="pre">en_US</span></code></li>
<li>French - <code class="docutils literal notranslate"><span class="pre">fr_FR</span></code></li>
<li>German - <code class="docutils literal notranslate"><span class="pre">de_DE</span></code></li>
<li>Italian - <code class="docutils literal notranslate"><span class="pre">it_IT</span></code></li>
<li>Japanese - <code class="docutils literal notranslate"><span class="pre">ja_JP</span></code></li>
<li>Korean - <code class="docutils literal notranslate"><span class="pre">ko_KR</span></code></li>
<li>Spanish - <code class="docutils literal notranslate"><span class="pre">es_ES</span></code></li>
</ul>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_AppGetLanguage</span><span class="p">(</span>
  <span class="n">A_char</span>  <span class="n">lang_tagZ</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_GetPersonalInfo</span></code></td>
<td><p class="first">Retrieves the user’s registration information.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_GetPersonalInfo</span><span class="p">(</span>
  <span class="n">PF_AppPersonalTextInfo</span>  <span class="o">*</span><span class="n">ptiP</span><span class="p">);</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">PF_AppPersonalTextInfo</span> <span class="p">{</span>
  <span class="n">A_char</span>  <span class="n">name</span><span class="p">[</span><span class="n">PF_APP_MAX_PERS_LEN</span> <span class="o">+</span> <span class="mi">1</span><span class="p">];</span>
  <span class="n">A_char</span>  <span class="n">org</span><span class="p">[</span><span class="n">PF_APP_MAX_PERS_LEN</span> <span class="o">+</span> <span class="mi">1</span><span class="p">];</span>
  <span class="n">A_char</span>  <span class="n">serial_str</span><span class="p">[</span><span class="n">PF_APP_MAX_PERS_LEN</span><span class="o">+</span><span class="mi">1</span><span class="p">];</span>
<span class="p">}</span> <span class="n">PF_AppPersonalTextInfo</span><span class="p">;</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_GetFontStyleSheet</span></code></td>
<td><p class="first">Retrieves font style sheet information for the fonts used in After Effects’ UI.</p>
<p>Trivia: The font used in After Effects’ UI starting in 15.0 is Adobe Clean.
Before that, it was Tahoma on Windows and Lucida Grande on macOS X.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_GetFontStyleSheet</span><span class="p">(</span>
  <span class="n">PF_FontStyleSheet</span>  <span class="n">sheet</span><span class="p">,</span>
  <span class="n">PF_FontName</span>        <span class="o">*</span><span class="n">font_nameP0</span><span class="p">,</span>
  <span class="n">A_short</span>            <span class="o">*</span><span class="n">font_numPS0</span><span class="p">,</span>
  <span class="n">A_short</span>            <span class="o">*</span><span class="n">sizePS0</span><span class="p">,</span>
  <span class="n">A_short</span>            <span class="o">*</span><span class="n">stylePS0</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_SetCursor</span></code></td>
<td><p class="first">Sets the cursor to any of After Effects’ cursors. See AE_EffectUI.h for a complete enumeration.</p>
<p>Set to:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">PF_Cursor_NONE</span></code> to allow After Effects to set the cursor.</li>
<li><code class="docutils literal notranslate"><span class="pre">PF_Cursor_CUSTOM</span></code> if you’ve used OS-specific calls to change the cursor (After Effects will honor your changes).</li>
</ul>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_SetCursor</span><span class="p">(</span>
  <span class="n">PF_CursorType</span>  <span class="n">cursor</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_IsRenderEngine</span></code></td>
<td><p class="first">Returns TRUE if After Effects is running in watched folder mode, or is a render engine installation.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_IsRenderEngine</span><span class="p">(</span>
  <span class="n">PF_Boolean</span>  <span class="o">*</span><span class="n">render_enginePB</span><span class="p">);</span>
</pre></div>
</div>
<p class="last">As of AE6.5, this function returns <code class="docutils literal notranslate"><span class="pre">TRUE</span></code> if the installation is the render engine,
or if the After Effects is being run with no UI, or if After Effects is in watched folder mode.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_AppColorPickerDialog</span></code></td>
<td><p class="first">Displays the After Effects color picker dialog (which may be the system color picker, depending on the user’s preferences).</p>
<p>Will return <code class="docutils literal notranslate"><span class="pre">PF_Interrupt_CANCEL</span></code> if user cancels dialog. Returned color is in the project’s working color space.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_AppColorPickerDialog</span><span class="p">(</span>
  <span class="k">const</span> <span class="n">A_char</span>         <span class="o">*</span><span class="n">dialog_titleZ0</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">PF_PixelFloat</span>  <span class="o">*</span><span class="n">sample_colorP</span><span class="p">,</span>
  <span class="n">PF_PixelFloat</span>        <span class="o">*</span><span class="n">result_colorP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_GetMouse</span></code></td>
<td><p class="first">Returns the position of the mouse in the custom UI coordinate space.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_GetMouse</span><span class="p">(</span>
  <span class="n">PF_Point</span>  <span class="o">*</span><span class="n">pointP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_InvalidateRect</span></code></td>
<td><p class="first">Queue up a <a class="reference internal" href="index.html#effect-ui-events-custom-ui-and-drawbot-redrawing"><span class="std std-ref">redraw</span></a> of a specific area of the custom UI for an effect.</p>
<p>Only valid while handling a non-drawing event in the effect.</p>
<p>Specify <code class="docutils literal notranslate"><span class="pre">rectP0</span></code> as <code class="docutils literal notranslate"><span class="pre">NULL</span></code> to invalidate the entire window. The redraw will happen at the next available idle moment after returning from the event.</p>
<p>Set the <code class="docutils literal notranslate"><span class="pre">PF_EO_UPDATE_NOW</span></code> event outflag to update the window immediately after the event returns.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_InvalidateRect</span><span class="p">(</span>
  <span class="k">const</span> <span class="n">PF_ContextH</span>  <span class="n">contextH</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">PF_Rect</span><span class="o">*</span>     <span class="n">rectP0</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_ConvertLocalToGlobal</span></code></td>
<td><p class="first">Converts from the custom UI coordinate system to global screen coordinates. Use only during custom UI event handling.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_ConvertLocalToGlobal</span><span class="p">(</span>
  <span class="k">const</span> <span class="n">PF_Point</span>  <span class="o">*</span><span class="n">localP</span><span class="p">,</span>
  <span class="n">PF_Point</span>        <span class="o">*</span><span class="n">globalP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<hr class="docutils" />
<div class="section" id="advanced-appsuite-you-can-do-that">
<h3>Advanced Appsuite: You Can Do That?!<a class="headerlink" href="#advanced-appsuite-you-can-do-that" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">PF_AdvAppSuite</span></code> was originally designed for some pretty nefarious purposes; an external application was pretending to be an After Effects plug-in, and required ways to notify After Effects of the changes it had made to the project. Our API impurity is your gain.</p>
</div>
<hr class="docutils" />
<div class="section" id="pf-advappsuite2">
<h3>PF_AdvAppSuite2<a class="headerlink" href="#pf-advappsuite2" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="83%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Function</strong></th>
<th class="head"><strong>Purpose</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_SetProjectDirty</span></code></td>
<td><p class="first">Tells After Effects that the project has been changed since it was last saved.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_SetProjectDirty</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_SaveProject</span></code></td>
<td><p class="first">Saves the project to the current path. To save the project elsewhere, use <a class="reference internal" href="index.html#aegps-aegp-suites-aegp-projsuite"><span class="std std-ref">AEGP_SaveProjectToPath()</span></a>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_SaveProject</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_SaveBackgroundState</span></code></td>
<td><p class="first">Stores the background state (After Effects’ position in the stacking order of open applications and windows).</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_SaveBackgroundState</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_ForceForeground</span></code></td>
<td><p class="first">Brings After Effects to the front of all currently open applications and windows.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_ForceForeground</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_RestoreBackgroundState</span></code></td>
<td><p class="first">Puts After Effects back where it was, in relation to other applications and windows.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_RestoreBackgroundState</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_RefreshAllWindows</span></code></td>
<td><p class="first">Forces all After Effects windows to update.
Note that although the Composition panel will be refreshed, this does not guarantee a new frame will be sent to External Monitor Preview plug-ins.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_RefreshAllWindows</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_InfoDrawText</span></code></td>
<td><p class="first">Writes text into the After Effects info palette.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_InfoDrawText</span><span class="p">(</span>
  <span class="k">const</span> <span class="n">A_char</span>  <span class="o">*</span><span class="n">line1Z0</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_char</span>  <span class="o">*</span><span class="n">line2Z0</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_InfoDrawColor</span></code></td>
<td><p class="first">Draws the specified color in the After Effects info palette (alpha is ignored).</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_InfoDrawColor</span><span class="p">(</span>
  <span class="n">PF_Pixel</span>  <span class="n">color</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_InfoDrawText3</span></code></td>
<td><p class="first">Writes three lines of text into the After Effects info palette.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_InfoDrawText3</span><span class="p">(</span>
  <span class="k">const</span> <span class="n">A_char</span>  <span class="o">*</span><span class="n">line1Z0</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_char</span>  <span class="o">*</span><span class="n">line2Z0</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_char</span>  <span class="o">*</span><span class="n">line3Z0</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_InfoDrawText3Plus</span></code></td>
<td><p class="first">Writes three lines of text into the After Effects info palette, with portions of the second and third lines left and right justified.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_InfoDrawText3Plus</span><span class="p">(</span>
  <span class="k">const</span> <span class="n">A_char</span>  <span class="o">*</span><span class="n">line1Z0</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_char</span>  <span class="o">*</span><span class="n">line2_jrZ0</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_char</span>  <span class="o">*</span><span class="n">line2_jlZ0</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_char</span>  <span class="o">*</span><span class="n">line3_jrZ0</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_char</span>  <span class="o">*</span><span class="n">line3_jlZ0</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_AppendInfoText</span></code></td>
<td><p class="first">Appends characters to the currently-displayed info text.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_AppendInfoText</span><span class="p">(</span>
  <span class="k">const</span> <span class="n">A_char</span>  <span class="o">*</span><span class="n">appendZ0</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
</div>
<div class="section" id="formatting-time">
<span id="effect-details-useful-utility-functions-pf-advtimesuite"></span><h3>Formatting Time<a class="headerlink" href="#formatting-time" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">PF_AdvTimeSuite</span></code> provides several functions to match how After Effects displays time. In fact, these are the same functions we use internally.</p>
<div class="section" id="pf-advtimesuite4">
<h4>PF_AdvTimeSuite4<a class="headerlink" href="#pf-advtimesuite4" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="18%" />
<col width="82%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Function</strong></th>
<th class="head"><strong>Purpose</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_FormatTimeActiveItem</span></code></td>
<td><p class="first">Given a time value and scale, returns a formatted string representing that time.
If durationB is <code class="docutils literal notranslate"><span class="pre">TRUE</span></code>, appropriate units will be appended.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_FormatTimeActiveItem</span><span class="p">(</span>
  <span class="n">A_long</span>      <span class="n">time_valueUL</span><span class="p">,</span>
  <span class="n">A_u_long</span>    <span class="n">time_scaleL</span><span class="p">,</span>
  <span class="n">PF_Boolean</span>  <span class="n">durationB</span><span class="p">,</span>
  <span class="n">A_char</span>      <span class="o">*</span><span class="n">time_buf</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_FormatTime</span></code></td>
<td><p class="first">Contextualizes the formatted time string for the given PF_InData and PF_EffectWorld (i.e., layer time).</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_FormatTime</span><span class="p">(</span>
  <span class="n">PF_InData</span>       <span class="o">*</span><span class="n">in_data</span><span class="p">,</span>
  <span class="n">PF_EffectWorld</span>  <span class="o">*</span><span class="n">world</span><span class="p">,</span>
  <span class="n">A_long</span>          <span class="n">time_valueUL</span><span class="p">,</span>
  <span class="n">A_u_long</span>        <span class="n">time_scaleL</span><span class="p">,</span>
  <span class="n">PF_Boolean</span>      <span class="n">durationB</span><span class="p">,</span>
  <span class="n">A_char</span>          <span class="o">*</span><span class="n">time_buf</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_FormatTimePlus</span></code></td>
<td><p class="first">Allows you to select composition or layer time.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_FormatTimePlus</span><span class="p">(</span>
  <span class="n">PF_InData</span>       <span class="o">*</span><span class="n">in_data</span><span class="p">,</span>
  <span class="n">PF_EffectWorld</span>  <span class="o">*</span><span class="n">world</span><span class="p">,</span>
  <span class="n">A_long</span>          <span class="n">time_valueUL</span><span class="p">,</span>
  <span class="n">A_u_long</span>        <span class="n">time_scaleL</span><span class="p">,</span>
  <span class="n">PF_Boolean</span>      <span class="n">comp_timeB</span><span class="p">,</span>
  <span class="n">PF_Boolean</span>      <span class="n">durationB</span><span class="p">,</span>
  <span class="n">A_char</span>          <span class="o">*</span><span class="n">time_buf</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_GetTimeDisplayPref</span></code></td>
<td><p class="first">Returns the starting frame number (specified by the user in composition settings), and the composition’s time display preferences.
Updated in 14.2 to support higher frame rates.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_GetTimeDisplayPref</span><span class="p">(</span>
  <span class="n">PF_TimeDisplayPref2</span>  <span class="o">*</span><span class="n">tdp</span><span class="p">,</span>
  <span class="n">A_long</span>               <span class="o">*</span><span class="n">starting_num</span><span class="p">);</span>
  <span class="k">typedef</span>              <span class="k">struct</span> <span class="p">{</span>
  <span class="n">A_char</span>               <span class="n">display_mode</span><span class="p">;</span>
  <span class="n">A_long</span>               <span class="n">framemax</span><span class="p">;</span>
  <span class="n">A_long</span>               <span class="n">frames_per_foot</span><span class="p">;</span>
  <span class="n">A_char</span>               <span class="n">frames_start</span><span class="p">;</span>
  <span class="n">A_Boolean</span>            <span class="n">nondrop30B</span><span class="p">;</span>
  <span class="n">A_Boolean</span>            <span class="n">honor_source_timecodeB</span><span class="p">;</span>
  <span class="n">A_Boolean</span>            <span class="n">use_feet_framesB</span><span class="p">;</span>
  <span class="p">}</span> <span class="n">PF_TimeDisplayPrefVersion3</span><span class="p">;</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_TimeCountFrames</span></code></td>
<td><p class="first">New in 15.0. Returns the index of the frame in the current comp.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_TimeCountFrames</span><span class="p">(</span>
  <span class="k">const</span> <span class="n">A_Time</span>  <span class="o">*</span><span class="n">start_timeTP</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_Time</span>  <span class="o">*</span><span class="n">time_stepTP</span><span class="p">,</span>
  <span class="n">A_Boolean</span>     <span class="n">include_partial_frameB</span><span class="p">,</span>
  <span class="n">A_long</span>        <span class="o">*</span><span class="n">frame_countL</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<hr class="docutils" />
<div class="section" id="affecting-the-timeline">
<h3>Affecting The Timeline<a class="headerlink" href="#affecting-the-timeline" title="Permalink to this headline">¶</a></h3>
<p>Long ago, we helped a developer integrate their stand-alone tracker with After Effects by exposing a set of functions to give them some way to notify us of, and be notified of, changes to the timeline.</p>
<p>With the numerous AEGP API calls available, these aren’t used much, but they’re still available.</p>
<p>Don’t confuse this suite with <a class="reference internal" href="index.html#aegps-aegp-suites-aegp-itemsuite"><span class="std std-ref">AEGP_ItemSuite</span></a>.</p>
<hr class="docutils" />
<div class="section" id="pf-advitemsuite1">
<h4>PF_AdvItemSuite1<a class="headerlink" href="#pf-advitemsuite1" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="26%" />
<col width="74%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Function</strong></th>
<th class="head"><strong>Purpose</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_MoveTimeStep</span></code></td>
<td><p class="first">Moves current time num_stepsL in the specified direction.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_MoveTimeStep</span><span class="p">(</span>
  <span class="n">PF_InData</span>       <span class="o">*</span><span class="n">in_data</span><span class="p">,</span>
  <span class="n">PF_EffectWorld</span>  <span class="o">*</span><span class="n">world</span><span class="p">,</span>
  <span class="n">PF_Step</span>         <span class="n">time_dir</span><span class="p">,</span>
  <span class="n">A_long</span>          <span class="n">num_stepsL</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_MoveTimeStepActiveItem</span></code></td>
<td><p class="first">Moves num_stepsL in the specified direction, for the active item.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_MoveTimeStepActiveItem</span><span class="p">(</span>
  <span class="n">PF_Step</span>  <span class="n">time_dir</span><span class="p">,</span>
  <span class="n">A_long</span>   <span class="n">num_stepsL</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_TouchActiveItem</span></code></td>
<td><p class="first">Tells After Effects that the active item must be updated.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_TouchActiveItem</span> <span class="p">(</span><span class="kt">void</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_ForceRerender</span></code></td>
<td><p class="first">Forces After Effects to rerender the current frame.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_ForceRerender</span><span class="p">(</span>
  <span class="n">PF_InData</span>       <span class="o">*</span><span class="n">in_data</span><span class="p">,</span>
  <span class="n">PF_EffectWorld</span>  <span class="o">*</span><span class="n">world</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_EffectIsActiveOrEnabled</span></code></td>
<td><p class="first">Returns whether the effect which owns the <code class="docutils literal notranslate"><span class="pre">PF_ContextH</span></code> is currently active or enabled
(if it isn’t, After Effects won’t be listening for function calls from it).</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_EffectIsActiveOrEnabled</span><span class="p">(</span>
  <span class="n">PF_ContextH</span>  <span class="n">contextH</span><span class="p">,</span>
  <span class="n">PF_Boolean</span>   <span class="o">*</span><span class="n">enabledPB</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<hr class="docutils" />
<div class="section" id="accessing-auxiliary-channel-data">
<h3>Accessing Auxiliary Channel Data<a class="headerlink" href="#accessing-auxiliary-channel-data" title="Permalink to this headline">¶</a></h3>
<p>Some file types contain more than just pixel data; use <code class="docutils literal notranslate"><span class="pre">PF_ChannelSuite</span></code> to determine whether such information is present, and the macros in AE_ChannelSuites.h to retrieve it in the format you need.</p>
<hr class="docutils" />
<div class="section" id="pf-channelsuite1">
<h4>PF_ChannelSuite1<a class="headerlink" href="#pf-channelsuite1" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="28%" />
<col width="72%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Function</strong></th>
<th class="head"><strong>Purpose</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_GetLayerChannelCount</span></code></td>
<td><p class="first">Retrieves the number of auxiliary channels associated with the indexed layer.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_GetLayerChannelCount</span><span class="p">(</span>
  <span class="n">PF_ProgPtr</span>     <span class="n">effect_ref</span><span class="p">,</span>
  <span class="n">PF_ParamIndex</span>  <span class="n">param_index</span><span class="p">,</span>
  <span class="n">A_long</span>         <span class="o">*</span><span class="n">num_channelsPL</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_GetLayerChannelIndexedRefAndDesc</span></code></td>
<td><p class="first">Retrieves (by index) a reference to, and description of, the specified channel.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_GetLayerChannelIndexedRefAndDesc</span><span class="p">(</span>
  <span class="n">PF_ProgPtr</span>       <span class="n">effect_ref</span><span class="p">,</span>
  <span class="n">PF_ParamIndex</span>    <span class="n">param_index</span><span class="p">,</span>
  <span class="n">PF_ChannelIndex</span>  <span class="n">channel_index</span><span class="p">,</span>
  <span class="n">PF_Boolean</span>       <span class="o">*</span><span class="n">foundPB</span><span class="p">,</span>
  <span class="n">PF_ChannelRef</span>    <span class="o">*</span><span class="n">channel_refP</span><span class="p">,</span>
  <span class="n">PF_ChannelDesc</span>   <span class="o">*</span><span class="n">channel_descP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_GetLayerChannelTypedRefAndDesc</span></code></td>
<td><p class="first">Retrieves an auxiliary channel by type.
Returned information is valid only if <code class="docutils literal notranslate"><span class="pre">foundPB</span></code> returns <code class="docutils literal notranslate"><span class="pre">TRUE</span></code>.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_GetLayerChannelTypedRefAndDesc</span><span class="p">(</span>
  <span class="n">PF_ProgPtr</span>      <span class="n">effect_ref</span><span class="p">,</span>
  <span class="n">PF_ParamIndex</span>   <span class="n">param_index</span><span class="p">,</span>
  <span class="n">PF_ChannelType</span>  <span class="n">channel_type</span><span class="p">,</span>
  <span class="n">PF_Boolean</span>      <span class="o">*</span><span class="n">foundPB</span><span class="p">,</span>
  <span class="n">PF_ChannelRef</span>   <span class="o">*</span><span class="n">channel_refP</span><span class="p">,</span>
  <span class="n">PF_ChannelDesc</span>  <span class="o">*</span><span class="n">channel_descP</span><span class="p">);</span>
</pre></div>
</div>
<p>PF_DataType will be one of the following:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">PF_DataType_FLOAT</span></code> - 34 bytes</li>
<li><code class="docutils literal notranslate"><span class="pre">PF_DataType_DOUBLE</span></code> - 38 bytes</li>
<li><code class="docutils literal notranslate"><span class="pre">PF_DataType_LONG</span></code> - 34 bytes</li>
<li><code class="docutils literal notranslate"><span class="pre">PF_DataType_SHORT</span></code> - 32 bytes</li>
<li><code class="docutils literal notranslate"><span class="pre">PF_DataType_FIXED_16_16</span></code> - 34 bytes</li>
<li><code class="docutils literal notranslate"><span class="pre">PF_DataType_CHAR</span></code> - 31 byte</li>
<li><code class="docutils literal notranslate"><span class="pre">PF_DataType_U_BYTE</span></code> - 31 byte</li>
<li><code class="docutils literal notranslate"><span class="pre">PF_DataType_U_SHORT</span></code> - 32 bytes</li>
<li><code class="docutils literal notranslate"><span class="pre">PF_DataType_U_FIXED_16_16</span></code> - 34 bytes</li>
<li><code class="docutils literal notranslate"><span class="pre">PF_DataType_RGB</span></code> - 3 bytes</li>
</ul>
</div></blockquote>
<p>PF_ChannelType will be one of the following:</p>
<blockquote class="last">
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">PF_ChannelType_DEPTH</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PF_ChannelType_NORMALS</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PF_ChannelType_OBJECTID</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PF_ChannelType_MOTIONVECTOR</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PF_ChannelType_BK_COLOR</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PF_ChannelType_TEXTURE</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PF_ChannelType_COVERAGE</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PF_ChannelType_NODE</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PF_ChannelType_MATERIAL</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PF_ChannelType_UNCLAMPED</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PF_ChannelType_UNKNOWN</span></code></li>
</ul>
</div></blockquote>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_CheckoutLayerChannel</span></code></td>
<td><p class="first">Retrieves the <code class="docutils literal notranslate"><span class="pre">PF_ChannelChunk</span></code> containing the data associated with the given <code class="docutils literal notranslate"><span class="pre">PF_ChannelRefPtr</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_CheckoutLayerChannel</span><span class="p">(</span>
  <span class="n">PF_ProgPtr</span>        <span class="n">effect_ref</span><span class="p">,</span>
  <span class="n">PF_ChannelRefPtr</span>  <span class="n">channel_refP</span><span class="p">,</span>
  <span class="kt">long</span>              <span class="n">what_time</span><span class="p">,</span>
  <span class="kt">long</span>              <span class="n">duration</span><span class="p">,</span>
  <span class="kt">unsigned</span> <span class="kt">long</span>     <span class="n">time_scale</span><span class="p">,</span>
  <span class="n">PF_DataType</span>       <span class="n">data_type</span><span class="p">,</span>
  <span class="n">PF_ChannelChunk</span>   <span class="o">*</span><span class="n">channel_chunkP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_CheckinLayerChannel</span></code></td>
<td><p class="first">Checks in the <code class="docutils literal notranslate"><span class="pre">PF_ChannelChunk</span></code>. Always, always, always check the data back in.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_CheckinLayerChannel</span><span class="p">(</span>
  <span class="n">PF_ProgPtr</span>        <span class="n">effect_ref</span><span class="p">,</span>
  <span class="n">PF_ChannelRefPtr</span>  <span class="n">channel_refP</span><span class="p">,</span>
  <span class="n">PF_ChannelChunk</span>   <span class="o">*</span><span class="n">channel_chunkP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<span id="document-effect-details/motion-blur"></span><div class="section" id="motion-blur">
<span id="effect-details-motion-blur"></span><h2>Motion Blur<a class="headerlink" href="#motion-blur" title="Permalink to this headline">¶</a></h2>
<p>Effects handle their own motion blur, using <a class="reference internal" href="index.html#effect-basics-pf-indata-pf-indata-members"><span class="std std-ref">PF_InData&gt;shutter_angle</span></a> along with <a class="reference internal" href="index.html#effect-basics-pf-indata-pf-indata-members"><span class="std std-ref">PF_InData&gt;shutter_phase</span></a>.</p>
<p>The plug-in must set <a class="reference internal" href="index.html#effect-basics-pf-outdata-pf-outflags"><span class="std std-ref">PF_OutFlag_I_USE_SHUTTER_ANGLE</span></a> so After Effects knows it needs this information.</p>
<p>They must <a class="reference internal" href="index.html#effect-details-interaction-callback-functions-interaction-callbacks"><span class="std std-ref">check out</span></a> their own parameters at other times to examine their change over the shutter interval.</p>
<p>If the plug-in checks out parameters outside this interval, set <a class="reference internal" href="index.html#effect-basics-pf-outdata-pf-outflags"><span class="std std-ref">PF_OutFlag_WIDE_TIME_INPUT</span></a>.</p>
<p>Doing so allows After Effects to compare the parameters within the sampling interval, and determine if they’ve changed.</p>
</div>
<span id="document-effect-details/working-with-paths"></span><div class="section" id="working-with-paths">
<span id="effect-details-working-with-paths"></span><h2>Working With Paths<a class="headerlink" href="#working-with-paths" title="Permalink to this headline">¶</a></h2>
<div class="section" id="accessing-path-data">
<h3>Accessing Path Data<a class="headerlink" href="#accessing-path-data" title="Permalink to this headline">¶</a></h3>
<p>Paths differ from other parameter types, in that their values are not directly accessible. In addition to checking them out and in (like layer parameters), you must use our path data function suites to obtain the details of the path at a given time. See <a class="reference internal" href="#effect-details-working-with-paths-pf-pathquerysuite"><span class="std std-ref">PF_PathQuerySuite1</span></a> and <a class="reference internal" href="#effect-details-working-with-paths-pf-pathdatasuite"><span class="std std-ref">PF_PathDataSuite</span></a>. Never use the values present in a path parameter when it’s passed to you, without first checking it out; while deleted paths will not be available, further updating is done “lazily” (later); your effect won’t see these changes unless it checks out the path.</p>
</div>
<hr class="docutils" />
<div class="section" id="manipulating-path-data">
<h3>Manipulating Path Data<a class="headerlink" href="#manipulating-path-data" title="Permalink to this headline">¶</a></h3>
<p>You can also use the <a class="reference internal" href="index.html#aegps-aegp-suites-aegp-maskoutlinesuite"><span class="std std-ref">AEGP_MaskOutlineSuite3</span></a> to manipulate paths. See <a class="reference internal" href="index.html#aegps-cheating-effect-usage-of-aegp-suites"><span class="std std-ref">Cheating Effect Usage of AEGP Suites</span></a>. Path parameters are treated as opaque blobs of data; get and set functions must be used to access and manipulate them. Like layer parameters, they must be checked out (and in!) by effects which access them.</p>
</div>
<hr class="docutils" />
<div class="section" id="vertices">
<h3>Vertices<a class="headerlink" href="#vertices" title="Permalink to this headline">¶</a></h3>
<p>Path vertices are more complex than simple points. All member variables are PF_FpLongs (doubles), and are in the layer’s coordinate space.</p>
</div>
<hr class="docutils" />
<div class="section" id="pf-pathvertex">
<h3>PF_PathVertex<a class="headerlink" href="#pf-pathvertex" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="34%" />
<col width="66%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Member</strong></th>
<th class="head"><strong>Description</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">x</span></code></td>
<td>The location of the vertex.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">y</span></code></td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">tan_in_x</span></code></td>
<td>The incoming tangent point.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">tan_in_y</span></code></td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">tan_out_x</span></code></td>
<td>The outgoing tangent point.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">tan_out_y</span></code></td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
</div>
<div class="section" id="pf-pathdatasuite">
<span id="effect-details-working-with-paths-pf-pathdatasuite"></span><h3>PF_PathDataSuite<a class="headerlink" href="#pf-pathdatasuite" title="Permalink to this headline">¶</a></h3>
<p>This suite provides information about paths (sequences of vertices).</p>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="78%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Function</strong></th>
<th class="head"><strong>Description</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_PathIsOpen</span></code></td>
<td><p class="first">Returns <code class="docutils literal notranslate"><span class="pre">TRUE</span></code> if the path is not closed (if the beginning and end vertex are not identical).</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_PathIsOpen</span><span class="p">(</span>
  <span class="n">PF_ProgPtr</span>         <span class="n">effect_ref0</span><span class="p">,</span>
  <span class="n">PF_PathOutlinePtr</span>  <span class="n">pathP</span><span class="p">,</span>
  <span class="n">PF_Boolean</span>         <span class="o">*</span><span class="n">openPB</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_PathNumSegments</span></code></td>
<td><p class="first">Retrieves the number of segments in the path.
N segments means there are segments <code class="docutils literal notranslate"><span class="pre">[0.N-1];</span></code>
segment J is defined by vertex <code class="docutils literal notranslate"><span class="pre">J</span></code> and <code class="docutils literal notranslate"><span class="pre">J+1</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_PathNumSegments</span><span class="p">(</span>
  <span class="n">PF_ProgPtr</span>         <span class="n">effect_ref0</span><span class="p">,</span>
  <span class="n">PF_PathOutlinePtr</span>  <span class="n">pathP</span><span class="p">,</span>
  <span class="n">A_long</span>             <span class="o">*</span><span class="n">num_segmentsPL</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_PathVertexInfo</span></code></td>
<td><p class="first">Retrieves the <code class="docutils literal notranslate"><span class="pre">PF_PathVertex</span></code> for the specified path.
The range of points is <code class="docutils literal notranslate"><span class="pre">[0.num_segments];</span></code>
for closed paths, <code class="docutils literal notranslate"><span class="pre">vertex[0]</span> <span class="pre">==</span> <span class="pre">vertex[num_segments]</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_PathVertexInfo</span><span class="p">(</span>
  <span class="n">PF_ProgPtr</span>         <span class="n">effect_ref0</span><span class="p">,</span>
  <span class="n">PF_PathOutlinePtr</span>  <span class="n">pathP</span><span class="p">,</span>
  <span class="n">A_long</span>             <span class="n">which_pointL</span><span class="p">,</span>
  <span class="n">PF_PathVertex</span>      <span class="o">*</span><span class="n">vertexP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_PathPrepareSegLength</span></code></td>
<td><p class="first">This fairly counter-intuitive function informs After Effects that you’re going to ask for the length of a segment
(using <code class="docutils literal notranslate"><span class="pre">PF_PathGetSegLength</span></code> below), and it’d better get ready.
<code class="docutils literal notranslate"><span class="pre">frequencyL</span></code> indicates how many times you’d like us to sample the length; our internal effects use 100.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_PathPrepareSegLength</span><span class="p">(</span>
  <span class="n">PF_ProgPtr</span>         <span class="n">effect_ref0</span><span class="p">,</span>
  <span class="n">PF_PathOutlinePtr</span>  <span class="n">pathP</span><span class="p">,</span>
  <span class="n">A_long</span>             <span class="n">which_segL</span><span class="p">,</span>
  <span class="n">A_long</span>             <span class="n">frequencyL</span><span class="p">,</span>
  <span class="n">PF_PathSegPrepPtr</span>  <span class="o">*</span><span class="n">lengthPrepPP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_PathGetSegLength</span></code></td>
<td><p class="first">Retrieves the length of the given segment.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_PathGetSegLength</span><span class="p">(</span>
  <span class="n">PF_ProgPtr</span>         <span class="n">effect_ref0</span><span class="p">,</span>
  <span class="n">PF_PathOutlinePtr</span>  <span class="n">pathP</span><span class="p">,</span>
  <span class="n">A_long</span>             <span class="n">which_segL</span><span class="p">,</span>
  <span class="n">PF_PathSegPrepPtr</span>  <span class="o">*</span><span class="n">lengthPrepP0</span><span class="p">,</span>
  <span class="n">PF_FpLong</span>          <span class="o">*</span><span class="n">lengthPF</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_PathEvalSegLength</span></code></td>
<td><p class="first">Retrieves the location of a point lengthF along the given path segment.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_PathEvalSegLength</span><span class="p">(</span>
  <span class="n">PF_ProgPtr</span>         <span class="n">effect_ref0</span><span class="p">,</span>
  <span class="n">PF_PathOutlinePtr</span>  <span class="n">pathP</span><span class="p">,</span>
  <span class="n">PF_PathSegPrepPtr</span>  <span class="o">*</span><span class="n">lengthPrepPP0</span><span class="p">,</span>
  <span class="n">A_long</span>             <span class="n">which_segL</span><span class="p">,</span>
  <span class="n">PF_FpLong</span>          <span class="n">lengthF</span><span class="p">,</span>
  <span class="n">PF_FpLong</span>          <span class="o">*</span><span class="n">x</span><span class="p">,</span>
  <span class="n">PF_FpLong</span>          <span class="o">*</span><span class="n">y</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_PathEvalSegLengthDeriv1</span></code></td>
<td><p class="first">Retrieves the location, and the first derivative, of a point <code class="docutils literal notranslate"><span class="pre">lengthF</span></code> along the given path segment.
If you’re not sure why you’d ever need this, don’t use it. Math is hard.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_PathEvalSegLengthDeriv1</span><span class="p">(</span>
  <span class="n">PF_ProgPtr</span>         <span class="n">effect_ref0</span><span class="p">,</span>
  <span class="n">PF_PathOutlinePtr</span>  <span class="n">pathP</span><span class="p">,</span>
  <span class="n">PF_PathSegPrepPtr</span>  <span class="o">*</span><span class="n">lengthPrepPP0</span><span class="p">,</span>
  <span class="n">A_long</span>             <span class="n">which_segL</span><span class="p">,</span>
  <span class="n">PF_FpLong</span>          <span class="n">lengthF</span><span class="p">,</span>
  <span class="n">PF_FpLong</span>          <span class="o">*</span><span class="n">x</span><span class="p">,</span>
  <span class="n">PF_FpLong</span>          <span class="o">*</span><span class="n">y</span><span class="p">,</span>
  <span class="n">PF_FpLong</span>          <span class="o">*</span><span class="n">deriv1x</span><span class="p">,</span>
  <span class="n">PF_FpLong</span>          <span class="o">*</span><span class="n">deriv1y</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_PathCleanupSegLength</span></code></td>
<td><p class="first">Call this when you’re finished evaluating that segment length,
so After Effects can properly clean up the <code class="docutils literal notranslate"><span class="pre">PF_PathSegPrepPtr</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_PathCleanupSegLength</span><span class="p">(</span>
  <span class="n">PF_ProgPtr</span>         <span class="n">effect_ref0</span><span class="p">,</span>
  <span class="n">PF_PathOutlinePtr</span>  <span class="n">pathP</span><span class="p">,</span>
  <span class="n">A_long</span>             <span class="n">which_segL</span><span class="p">,</span>
  <span class="n">PF_PathSegPrepPtr</span>  <span class="o">*</span><span class="n">lengthPrepPP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_PathIsInverted</span></code></td>
<td><p class="first">Returns <code class="docutils literal notranslate"><span class="pre">TRUE</span></code> if the path is inverted.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_PathIsInverted</span><span class="p">(</span>
  <span class="n">PF_ProgPtr</span>  <span class="n">effect_ref</span><span class="p">,</span>
  <span class="n">PF_PathID</span>   <span class="n">unique_id</span><span class="p">,</span>
  <span class="n">PF_Boolean</span>  <span class="o">*</span><span class="n">invertedB</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_PathGetMaskMode</span></code></td>
<td><p class="first">Retrieves the mode for the given path.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_PathGetMaskMode</span><span class="p">(</span>
  <span class="n">PF_ProgPtr</span>   <span class="n">effect_ref</span><span class="p">,</span>
  <span class="n">PF_PathID</span>    <span class="n">unique_id</span><span class="p">,</span>
  <span class="n">PF_MaskMode</span>  <span class="o">*</span><span class="n">modeP</span><span class="p">);</span>
</pre></div>
</div>
<p>Mask mode is one of the following:</p>
<blockquote class="last">
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">PF_MaskMode_NONE</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PF_MaskMode_ADD</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PF_MaskMode_SUBTRACT</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PF_MaskMode_INTERSECT</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PF_MaskMode_LIGHTEN</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PF_MaskMode_DARKEN</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PF_MaskMode_DIFFERENCE</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PF_MaskMode_ACCUM</span></code></li>
</ul>
</div></blockquote>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_PathGetName</span></code></td>
<td><p class="first">Retrieves the name of the path (up to <code class="docutils literal notranslate"><span class="pre">PF_MAX_PATH_NAME_LEN</span></code> long).</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_PathGetName</span><span class="p">(</span>
  <span class="n">PF_ProgPtr</span>  <span class="n">effect_ref</span><span class="p">,</span>
  <span class="n">PF_PathID</span>   <span class="n">unique_id</span><span class="p">,</span>
  <span class="n">A_char</span>      <span class="o">*</span><span class="n">nameZ</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
</div>
<div class="section" id="pf-pathquerysuite1">
<span id="effect-details-working-with-paths-pf-pathquerysuite"></span><h3>PF_PathQuerySuite1<a class="headerlink" href="#pf-pathquerysuite1" title="Permalink to this headline">¶</a></h3>
<p>This suite is used to identify and access the paths associated with the effect’s source layer.</p>
<table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="83%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Function</strong></th>
<th class="head"><strong>Purpose</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_NumPaths</span></code></td>
<td><p class="first">Retrieves the number of paths associated with the effect’s source layer.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_NumPaths</span><span class="p">(</span>
  <span class="n">PF_ProgPtr</span>  <span class="n">effect_ref</span><span class="p">,</span>
  <span class="n">A_long</span>      <span class="o">*</span><span class="n">num_pathsPL</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_PathInfo</span></code></td>
<td><p class="first">Retrieves the PF_PathID for the specified path.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_PathInfo</span><span class="p">(</span>
  <span class="n">PF_ProgPtr</span>  <span class="n">effect_ref</span><span class="p">,</span>
  <span class="n">A_long</span>      <span class="n">indexL</span><span class="p">,</span>
  <span class="n">PF_PathID</span>   <span class="o">*</span><span class="n">unique_idP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_CheckoutPath</span></code></td>
<td><p class="first">Acquires the PF_PathOutlinePtr for the path at the specified time.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_CheckoutPath</span><span class="p">(</span>
  <span class="n">PF_ProgPtr</span>         <span class="n">effect_ref</span><span class="p">,</span>
  <span class="n">PF_PathID</span>          <span class="n">unique_id</span><span class="p">,</span>
  <span class="n">A_long</span>             <span class="n">what_time</span><span class="p">,</span>
  <span class="n">A_long</span>             <span class="n">time_step</span><span class="p">,</span>
  <span class="n">A_u_long</span>           <span class="n">time_scale</span><span class="p">,</span>
  <span class="n">PF_PathOutlinePtr</span>  <span class="o">*</span><span class="n">pathPP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_CheckinPath</span></code></td>
<td><p class="first">Releases the path back to After Effects. Always do this, regardless of any error conditions encountered.
Every checkout must be balanced by a checkin, or pain will ensue.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_CheckinPath</span><span class="p">(</span>
  <span class="n">PF_ProgPtr</span>         <span class="n">effect_ref</span><span class="p">,</span>
  <span class="n">PF_PathID</span>          <span class="n">unique_id</span><span class="p">,</span>
  <span class="n">PF_Boolean</span>         <span class="n">changedB</span><span class="p">,</span>
  <span class="n">PF_PathOutlinePtr</span>  <span class="n">pathP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<span id="document-effect-details/accessing-camera-light-information"></span><div class="section" id="accessing-camera-light-information">
<span id="effect-details-accessing-camera-light-information"></span><h2>Accessing Camera &amp; Light Information<a class="headerlink" href="#accessing-camera-light-information" title="Permalink to this headline">¶</a></h2>
<p>Using functions provided in the <a class="reference internal" href="index.html#aegps-aegp-suites-aegp-pfinterfacesuite"><span class="std std-ref">AEGP_PFInterfaceSuite</span></a>, effects can access camera and lighting information for the layer to which they’re applied; see the Resizer sample.</p>
<p>You can also use many of the other functions from AE_GeneralPlug.h; the possibilities are vast.</p>
</div>
<span id="document-effect-details/color-space-conversion"></span><div class="section" id="color-space-conversion">
<span id="effect-details-color-space-conversion"></span><h2>Color Space Conversion<a class="headerlink" href="#color-space-conversion" title="Permalink to this headline">¶</a></h2>
<p>Different pixel formats are useful for different operations. After Effects exposes its internal functions through PF_ColorCallbacksSuite. Here are the supported formats.</p>
<hr class="docutils" />
<div class="section" id="pixel-types-for-different-color-spaces">
<h3>Pixel Types For Different Color Spaces<a class="headerlink" href="#pixel-types-for-different-color-spaces" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="61%" />
<col width="39%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Pixel Type</strong></th>
<th class="head"><strong>Data Structure</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>8 bpc ARGB</td>
<td><div class="first last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
  <span class="n">A_u_char</span> <span class="n">alpha</span><span class="p">,</span> <span class="n">red</span><span class="p">,</span> <span class="n">green</span><span class="p">,</span> <span class="n">blue</span><span class="p">;</span>
<span class="p">}</span> <span class="n">PF_Pixel8</span><span class="p">;</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td>16 bpc ARGB</td>
<td><div class="first last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
  <span class="n">A_u_short</span> <span class="n">alpha</span><span class="p">,</span> <span class="n">red</span><span class="p">,</span> <span class="n">green</span><span class="p">,</span> <span class="n">blue</span><span class="p">;</span>
<span class="p">}</span> <span class="n">PF_Pixel16</span><span class="p">;</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td>32 bpc ARGB</td>
<td><div class="first last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
  <span class="n">PF_FpShort</span> <span class="n">alpha</span><span class="p">,</span> <span class="n">red</span><span class="p">,</span> <span class="n">green</span><span class="p">,</span> <span class="n">blue</span><span class="p">;</span>
<span class="p">}</span> <span class="n">PF_PixelFloat</span><span class="p">,</span> <span class="n">PF_Pixel32</span><span class="p">;</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td>HLS (Hue, Lightness, Saturation)</td>
<td><div class="first last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span> <span class="n">PF_Fixed</span> <span class="n">PF_HLS_PIXEL</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td>YIQ (luminance, in-phase chrominance, quadrature chrominance)</td>
<td><div class="first last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span> <span class="n">PF_Fixed</span> <span class="n">PF_YIQ_PIXEL</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<p>Plug-ins can draw on image processing algorithms written for nearly any color space by using the following callback functions.</p>
</div>
<div class="section" id="color-space-conversion-callbacks">
<h3>Color Space Conversion Callbacks<a class="headerlink" href="#color-space-conversion-callbacks" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="9%" />
<col width="79%" />
<col width="12%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Function</strong></th>
<th class="head"><strong>Purpose</strong></th>
<th class="head"><strong>Replaces</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>RGBtoHLS</td>
<td>Given an RGB pixel, returns an HLS (hue, lightness, saturation) pixel. HLS values are scaled from 0 to 1 in fixed point.</td>
<td><code class="docutils literal notranslate"><span class="pre">PF_RGB_TO_HLS</span></code></td>
</tr>
<tr class="row-odd"><td>HLStoRGB</td>
<td>Given an HLS pixel, returns an RGB pixel.</td>
<td><code class="docutils literal notranslate"><span class="pre">PF_HLS_TO_RGB</span></code></td>
</tr>
<tr class="row-even"><td>RGBtoYIQ</td>
<td>Given an RGB pixel, returns a YIQ (luminance, inphase chrominance, quadrature chrominance) pixel.
Y is 0 to 1 in fixed point, I is -0.5959 to 0.5959 in fixed point, and Q is -0.5227 to 0.5227 in fixed point.</td>
<td><code class="docutils literal notranslate"><span class="pre">PF_RGB_TO_YIQ</span></code></td>
</tr>
<tr class="row-odd"><td>YIQtoRGB</td>
<td>Given a YIQ pixel, returns an RGB pixel.</td>
<td><code class="docutils literal notranslate"><span class="pre">PF_YIQ_TO_RGB</span></code></td>
</tr>
<tr class="row-even"><td>Luminance</td>
<td>Given an RGB pixel, returns 100 times its luminance value (0 to 25500).</td>
<td><code class="docutils literal notranslate"><span class="pre">PF_LUMINANCE</span></code></td>
</tr>
<tr class="row-odd"><td>Hue</td>
<td>Given an RGB pixel, eturns its hue angle mapped from 0 to 255, where 0 is 0 degrees and 255 is 360 degrees.</td>
<td><code class="docutils literal notranslate"><span class="pre">PF_HUE</span></code></td>
</tr>
<tr class="row-even"><td>Lightness</td>
<td>Given an RGB pixel, returns its lightness value (0 to 255).</td>
<td><code class="docutils literal notranslate"><span class="pre">PF_LIGHTNESS</span></code></td>
</tr>
<tr class="row-odd"><td>Saturation</td>
<td>Given an RGB pixel, returns its saturation value (0 to 255).</td>
<td><code class="docutils literal notranslate"><span class="pre">PF_SATURATION</span></code></td>
</tr>
</tbody>
</table>
</div>
</div>
<span id="document-effect-details/changing-parameter-orders"></span><div class="section" id="changing-parameter-orders-the-nice-way">
<span id="effect-details-changing-parameter-orders"></span><h2>Changing Parameter Orders, the Nice Way<a class="headerlink" href="#changing-parameter-orders-the-nice-way" title="Permalink to this headline">¶</a></h2>
<p>It is possible to add or remove parameters from a plug-in, without forcing users to re-apply all instances of that plug-in to use the updated version. However, some advance planning on your part is necessary to allow for such changes. Your users (and technical support staff) will appreciate the effort.</p>
<p>You must first create a parameter array index. During <em>PF_Cmd_PARAM_SETUP</em>, assign index values to each parameter as you add them, using a simple enumeration. The order of enumeration corresponds to the order in which the parameters are registered during <em>PF_Cmd_PARAM_SETUP</em>, which in turn determines the order in which they appear in the Effect Control and Timeline panels.</p>
<p>Create another enumeration for disk IDs. The order of this enumeration must <em>not</em> be changed, though you may add to the end of this list. Note that the order of this list need not correspond with that of the parameter array index. Parameter disk IDs should range from 1 to 9999. Why not zero? Long story…</p>
<p><em>In the early “wild west” days of After Effects plug-in programming, it was fairly common for developers not to bother with setting IDs. After Effects, realizing this, checked the ID of the first parameter added by that effect; if it was zero, it was assumed that the programmer hadn’t bothered to ID params; After Effects then assigned each its own ID. This assumption works fine if you never set param IDs, but not so well if you start numbering your IDs from NULL. That’s why.</em></p>
<p>Before calling PF_ADD_PARAM(), specify the disk ID in the PF_ParamDef.uu.id field. If no value is specified, After Effects makes parameters sequential starting with 1. The parameter’s information is tagged with this ID when saved. In this way, After Effects can still understand that, although your “Foobarocity” slider is now the fourth parameter passed, it’s the same parameter as when it was second.</p>
<p>To delete a parameter without forcing re-application, remove the code which creates it and its entry in the parameter array index list. However, <em>do not</em> remove its entry in the disk ID list. To add a new parameter, add an entry in the appropriate location in the parameter array indices list, add the parameter creation code, and append the disk ID to the end of the disk ID enumeration. To re-order, change the parameter array index list and reorder the parameter creation code appropriately.</p>
<hr class="docutils" />
<div class="section" id="change-defaults-change-ids">
<h3>Change defaults? Change IDs<a class="headerlink" href="#change-defaults-change-ids" title="Permalink to this headline">¶</a></h3>
<p>If you don’t, if someone saves a project with the old default and then reads it in with the new effect installed, that parameter will change to the new default value.</p>
<p>Presto! Instant support call.</p>
<p>This is another prime use case for <code class="docutils literal notranslate"><span class="pre">PF_ParamFlag_USE_VALUE_FOR_OLD_PROJECTS</span></code> from <a class="reference internal" href="index.html#effect-basics-pf-paramdef-parameter-flags"><span class="std std-ref">Parameter Flags</span></a>.</p>
</div>
</div>
<span id="document-effect-details/tips-tricks"></span><div class="section" id="tips-tricks">
<span id="effect-details-tips-tricks"></span><h2>Tips &amp; Tricks<a class="headerlink" href="#tips-tricks" title="Permalink to this headline">¶</a></h2>
<div class="section" id="best-practices">
<h3>Best Practices<a class="headerlink" href="#best-practices" title="Permalink to this headline">¶</a></h3>
<p>If your prototypes are anything like ours, the first version of your plug-in that runs without crashing differs radically from the version that actually ships.</p>
<p>How your plug-in responds to things like downsampling, errors and exceptions, pixel aspect ratio, out-of-memory situations, and being interrupted while processing determines how usable it is (and how many support requests you’ll have to handle).</p>
</div>
<hr class="docutils" />
<div class="section" id="responsiveness">
<h3>Responsiveness<a class="headerlink" href="#responsiveness" title="Permalink to this headline">¶</a></h3>
<p>Make your plug-ins as responsive as possible using <code class="docutils literal notranslate"><span class="pre">PF_ABORT()</span></code> and <code class="docutils literal notranslate"><span class="pre">PF_PROGRESS()</span></code> from <a class="reference internal" href="index.html#effect-details-interaction-callback-functions-interaction-callbacks"><span class="std std-ref">Interaction Callbacks</span></a>.</p>
<p>We actually test all our effects for interrupt-ability; you’d be surprised how cranky users can get waiting for your pokey effect to finish processing a film resolution sequence!</p>
<p>After Effects’ iteration functions inherently provide this functionality; you don’t need to worry about calling the above functions from within your pixel processing functions.</p>
</div>
<hr class="docutils" />
<div class="section" id="make-your-effect-easy-to-find">
<h3>Make Your Effect Easy To Find<a class="headerlink" href="#make-your-effect-easy-to-find" title="Permalink to this headline">¶</a></h3>
<p>It’s possible to have your effect show up in the “Effects &amp; Presets” palette when users search for something other than the plug-in’s name.</p>
<p>Apply your effect (leaving the settings at default, unless you’re very certain the user will want something different when they search for the given term), and select “Save selection as animation preset” from the effect controls palette.</p>
<p>Save it to the name by which you want users to find the plug-in.</p>
<p>Have your plug-in’s installer put the resultant .ffx file into the \Presets directory, next to the After Effects executable.</p>
<p>Your preset will show up when users search for the name to which it was saved.</p>
</div>
<hr class="docutils" />
<div class="section" id="sampling-pixels-at-x-y">
<h3>Sampling Pixels At (x,y)<a class="headerlink" href="#sampling-pixels-at-x-y" title="Permalink to this headline">¶</a></h3>
<p>Sometimes, instead of just processing every pixel, you’ll want to get to a specific offset within the input frame. Below is one way to sample the pixel at a given (x,y) location; similar code could be used to write to the given location.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_Pixel</span> <span class="o">*</span><span class="nf">sampleIntegral32</span><span class="p">(</span><span class="n">PF_EffectWorld</span> <span class="o">&amp;</span><span class="n">def</span><span class="p">,</span> <span class="kt">int</span> <span class="n">x</span><span class="p">,</span> <span class="kt">int</span> <span class="n">y</span><span class="p">){</span>
  <span class="k">return</span> <span class="p">(</span><span class="n">PF_Pixel</span><span class="o">*</span><span class="p">)((</span><span class="kt">char</span><span class="o">*</span><span class="p">)</span><span class="n">def</span><span class="p">.</span><span class="n">data</span> <span class="o">+</span>
    <span class="p">(</span><span class="n">y</span> <span class="o">*</span> <span class="n">def</span><span class="p">.</span><span class="n">rowbytes</span><span class="p">)</span> <span class="o">+</span>
    <span class="p">(</span><span class="n">x</span> <span class="o">*</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">PF_Pixel</span><span class="p">)));</span>
<span class="p">}</span>

<span class="n">PF_Pixel16</span> <span class="o">*</span><span class="nf">sampleIntegral64</span><span class="p">(</span><span class="n">PF_EffectWorld</span> <span class="o">&amp;</span><span class="n">def</span><span class="p">,</span> <span class="kt">int</span> <span class="n">x</span><span class="p">,</span> <span class="kt">int</span> <span class="n">y</span><span class="p">){</span>
  <span class="n">assert</span><span class="p">(</span><span class="n">PF_WORLD_IS_DEEP</span><span class="p">(</span><span class="o">&amp;</span><span class="n">def</span><span class="p">));</span>
  <span class="k">return</span> <span class="p">(</span><span class="n">PF_Pixel16</span><span class="o">*</span><span class="p">)((</span><span class="kt">char</span><span class="o">*</span><span class="p">)</span><span class="n">def</span><span class="p">.</span><span class="n">data</span> <span class="o">+</span>
    <span class="p">(</span><span class="n">y</span> <span class="o">*</span> <span class="n">def</span><span class="p">.</span><span class="n">rowbytes</span><span class="p">)</span> <span class="o">+</span>
    <span class="p">(</span><span class="n">x</span> <span class="o">*</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">PF_Pixel16</span><span class="p">)));</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Special thanks to Paul Miller for answering this question.</p>
</div>
<hr class="docutils" />
<div class="section" id="where-s-the-center-of-a-pixel">
<h3>Where’s The Center Of A Pixel?<a class="headerlink" href="#where-s-the-center-of-a-pixel" title="Permalink to this headline">¶</a></h3>
<p>Deeeeeep, man. After Effects rotates around the upper left corner of the upper left pixel when the anchor point (see User Documentation) is (0,0).</p>
<p>However, the subpixel sample and area sample callbacks actually treat (.0, .0) as a direct hit. To compensate for this, subtract 0.5 from x and y values before calling those functions.</p>
<p>The matrix functions (<code class="docutils literal notranslate"><span class="pre">transform_world</span></code> from <a class="reference internal" href="index.html#effect-details-graphics-utility-suites-pf-worldtransformsuite"><span class="std std-ref">PF_WorldTransformSuite1</span></a>) don’t have this problem.</p>
<p>When translating an image by a subpixel amount, make the output layer one pixel wider than its input, and leave the origin at (0,0).</p>
</div>
<hr class="docutils" />
<div class="section" id="text-layer-origin">
<h3>Text Layer Origin<a class="headerlink" href="#text-layer-origin" title="Permalink to this headline">¶</a></h3>
<p>Almost all layer types have their origin in the upper-left corner. Not so with text layers!</p>
<p>A text layer origin by default is at the bottom-left baseline position of the first character. You can see this if you create a text item and then pick the layer so the anchor point shows up.</p>
<p>Look at where the default anchor point location is. The transform is not at the corner of the layer rectangle.</p>
</div>
<hr class="docutils" />
<div class="section" id="clean-slate">
<h3>Clean Slate<a class="headerlink" href="#clean-slate" title="Permalink to this headline">¶</a></h3>
<p>You don’t necessarily begin effect processing with a clean output slate. Our Gaussian blur filter, in an effort to do so, performs the following before rendering:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">src_rect</span><span class="p">.</span><span class="n">left</span>   <span class="o">=</span> <span class="n">in_data</span><span class="o">&gt;</span><span class="n">output_origin_x</span><span class="p">;</span>
<span class="n">src_rect</span><span class="p">.</span><span class="n">right</span>  <span class="o">=</span> <span class="n">src_rect</span><span class="p">.</span><span class="n">left</span> <span class="o">+</span> <span class="n">input</span><span class="o">&gt;</span><span class="n">width</span><span class="p">;</span>
<span class="n">src_rect</span><span class="p">.</span><span class="n">top</span>    <span class="o">=</span> <span class="n">in_data</span><span class="o">&gt;</span><span class="n">output_origin_y</span><span class="p">;</span>
<span class="n">src_rect</span><span class="p">.</span><span class="n">bottom</span> <span class="o">=</span> <span class="n">src_rect</span><span class="p">.</span><span class="n">top</span> <span class="o">+</span> <span class="n">input</span><span class="o">&gt;</span><span class="n">height</span><span class="p">;</span>

<span class="n">err</span> <span class="o">=</span> <span class="n">PF_FILL</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="n">output</span><span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">err</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">err</span> <span class="o">=</span> <span class="n">PF_COPY</span><span class="p">(</span><span class="o">&amp;</span><span class="n">params</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">&gt;</span><span class="n">u</span><span class="p">.</span><span class="n">ld</span><span class="p">,</span> <span class="n">output</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">src_rect</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<hr class="docutils" />
</div>
<div class="section" id="caching-behavior">
<span id="effect-details-tips-tricks-caching-behavior"></span><h3>Caching Behavior<a class="headerlink" href="#caching-behavior" title="Permalink to this headline">¶</a></h3>
<p>After Effects provides numerous ways to specify caching behavior. <code class="docutils literal notranslate"><span class="pre">PF_OutFlag_NON_PARAM_VARY</span></code>, <code class="docutils literal notranslate"><span class="pre">PF_OutFlag_WIDE_TIME_INPUT</span></code>, <code class="docutils literal notranslate"><span class="pre">PF_OutFlag_I_USE_SHUTTER_ANGLE</span></code>, <code class="docutils literal notranslate"><span class="pre">PF_OutFlag_I_SYNTHESIZE_AUDIO</span></code>, <code class="docutils literal notranslate"><span class="pre">PF_OutFlag2_I_USE_3D_CAMERA</span></code>, and <code class="docutils literal notranslate"><span class="pre">PF_OutFlag2_I_USE_3D_LIGHTS</span></code> (all from <a class="reference internal" href="index.html#effect-basics-pf-outdata-pf-outflags"><span class="std std-ref">PF_OutFlags</span></a>) all influence caching decisions.</p>
<p>Supporting <a class="reference internal" href="index.html#effect-basics-pf-outdata-pf-outflags"><span class="std std-ref">dynamic outflags</span></a> can greatly improve performance, preventing After Effects from invalidating your effect’s cache as aggressively as it otherwise would.</p>
<p>Confirm that your plug-in performs well with different After Effects cache settings. Does your plug-in get called to update as often as expected, or does After Effects think it has valid pixels when you think it doesn’t?</p>
</div>
<hr class="docutils" />
<div class="section" id="global-performance-cache-consideratons">
<h3>Global Performance Cache Consideratons<a class="headerlink" href="#global-performance-cache-consideratons" title="Permalink to this headline">¶</a></h3>
<p>With the new caching in CS6, you may need to clear cached frames after changing your effect’s rendering, so that frames rendered and stored in the cache prior to the change will not be reused. To do so manually during development:</p>
<ol class="arabic simple">
<li>In Preferences &gt; Media &amp; Disk Cache, disable the Disk Cache</li>
<li>Click “Empty Disk Cache” just to be sure (disabling the Disk Cache in step 1 only disables the <em>writing</em> of disk cache, not necessarily the usage)</li>
<li>Relaunch</li>
</ol>
<p>If you ever encounter a glitch, it likely a legitimate bug in your effect, such as improper rectangle handling in SmartFX.</p>
<p>On the other hand, if you fix a rendering bug in your plug-in and ship an update, you can’t expect all users will empty their disk caches. A user may have a disk cache of the buggy frame and it needs to be invalidated. What to do? Update your plug-in’s effect version. This value (and the AE build number) is part of the cache key, so if you update it any frames cached containing content from your plug-in will no longer match.</p>
</div>
<hr class="docutils" />
<div class="section" id="some-thoughts-on-time-from-a-long-time-developer">
<h3>Some Thoughts On Time From A Long-Time Developer<a class="headerlink" href="#some-thoughts-on-time-from-a-long-time-developer" title="Permalink to this headline">¶</a></h3>
<p>Stoney Ballard put together the following summary of how time works with effects; you may find it helpful.</p>
<p>There are five <code class="docutils literal notranslate"><span class="pre">in_data</span></code> parameters that describe time to a filter:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">current_time</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">time_step</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">local_time_step</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">total_time</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">time_scale</span></code></li>
</ul>
<p>Their values are dependent on:</p>
<ul class="simple">
<li>The frame being rendered</li>
<li>The duration of the layer and composition The frame rate of the comp</li>
<li>Any Time Stretch Any Time Remapping</li>
<li>The time behavior of an outer composition (one enclosing the composition with the layer being filtered)</li>
<li>The setting of the “Preserve frame rate when nested or in render queue” (PFR) switch</li>
</ul>
<p>The frame being rendered affects current_time. It is expressed in the local (layer) time system. If the PFR switch is off, current_time may be any non-negative value. If on, it will be restricted to a multiple of time_step and local_time_step. Layer duration affects only total_time. Comp duration is a factor only when Time Remapping (TR) is on. In that case, total_time is the larger of layer duration and composition duration. Composition frame rate affects only the time_scale. Time Stretch affects only time_step and local_time_step. If the time stretch is negative, these values are negative. Even if the layer’s duration (as seen in</p>
<p>the comp) changes, total_time remains unaffected. This works as if Time Stretch was <em>above</em> a filter, but <em>below</em> an outer comp. PFR does not alter the effect of Time Stretch. Time Stretch is different than an outer comp, since it affects both step params equally, while an outer comp affects only time_step.</p>
<p>Time Remapping happens <em>below</em> the filter, so that it does not affect the time params other than the total_time. When TR is on, the layer is lengthened to the same as the comp (but never shortened), regardless of how much time it actually takes, or where in the comp the layer is. This may cause total_time to be larger. It has nothing to do with the actual time map, just whether or not it’s enabled.</p>
<p>The biggest variation comes from being nested in an outer comp, unless PFR is on. When PFR is on, a filter is completely isolated from time variations in an outer comp. Of course, current_time will not necessarily move in increments of time_step in that case. It may skip frames or go backwards.</p>
<p>When PFR is off, local_time_step, total_time, and time_scale remain set to what they were for the inner comp, but time_step contains the time to the next frame in the outer comp, expressed in the local time system. This may be any value, including 0. This can be interpreted as an instantaneous time rate, rather than a duration. A 0 value can last for an arbitrary number of rendered frames, but the current_time won’t change on the local layer.</p>
<p>Looked at from the other direction:</p>
<p>current_time is quantized to time_step intervals unless rendering an outer comp with PFR off for the inner comp. This is the current time in the layer, not in any comp.</p>
<p>The value of local_time_step is affected only by Time Stretch. It can never be zero, but it can be negative.</p>
<p>time_step and local_time_step are always the same value unless rendering an outer comp with PFR off. time_step is also affected by the time behavior of an outer comp (with PFR off). It can have any value, positive, negative, or zero, and can be different for every frame (of the outer comp). time_step can be used to determine the duration of the current frame (with PFR off).</p>
<p>total_time is the duration of the layer, unless Time Remapping is on, which makes it the larger of the layer duration and the duration of the comp.</p>
<p>time_scale is the scale such that total_time / time_scale is the layer duration in seconds in its comp. It is affected only by the comp frame rate, although presumably all the time values could be scaled proportionately for any reason.</p>
<p>A layer’s intrinsic frame rate (if it has one) is not visible anywhere, although it’s usually the same as the comp frame rate. If a filter needs to access the actual frames of a clip, it can do so</p>
<p>only by being in a comp of the same frame rate, and with no Time Stretch or Time Remapping applied to its layer. It should use local_time_step to determine where the frames are.</p>
</div>
<hr class="docutils" />
<div class="section" id="rate-x-time-pain">
<h3>Rate x Time == Pain!<a class="headerlink" href="#rate-x-time-pain" title="Permalink to this headline">¶</a></h3>
<p>Be careful if one of your parameters is a speed or velocity parameter. Consider the ripple effect. It assumes a constant and uses the current time to determine how far along the ripple has gone (d = v * t). If the user interpolates the speed over time, you should integrate the velocity function from time zero to the current time. Ripple does <em>not</em> do this, but provides a “phase” parameter that the user can interpolate as they wish, providing correct results as long as the speed is set to zero. If you want to provide the correct behavior, you can sample (and integrate) the speed parameter from the beginning of time until the current time using PF_CHECKOUT_PARAM(), or you can provide a “phase” or “distance” parameter and warn the user about interpolating the speed. The cost of checking out many parameter values is negligible compared to rendering, and is the recommended approach.</p>
<p>If you check out parameter values at other times, or use layer parameters at all, you <em>must</em> check in those parameters when finished, even if an error has occurred. Remember, checked-out parameters are read-only.</p>
</div>
<hr class="docutils" />
<div class="section" id="testing">
<h3>Testing<a class="headerlink" href="#testing" title="Permalink to this headline">¶</a></h3>
<p>Try using your plug-in in RAM previews to ensure you handle out-of-memory conditions gracefully. Does your plug-in handle running out of memory gracefully?</p>
<p>If you receive <code class="docutils literal notranslate"><span class="pre">PF_Err_OUT_OF_MEMORY</span></code> (from <a class="reference internal" href="index.html#effect-basics-errors-error-codes"><span class="std std-ref">Error Codes</span></a>) when requesting memory, do you pass it back to After Effects?</p>
<p>What happens when your video effect is applied to an audio-only layer? Test with projects created using older versions of your plug-in.</p>
</div>
</div>
</div>
<div class="toctree-wrapper compound">
<span id="document-smartfx/smartfx"></span><div class="section" id="smartfx">
<span id="smartfx-smartfx"></span><h2>SmartFX<a class="headerlink" href="#smartfx" title="Permalink to this headline">¶</a></h2>
<p>The SmartFX API provides bidirectional communication between effects and After Effects, enabling many performance optimizations and providing previously unavailable dependency information. This extension of the effect API is the way to implement 32-bit per channel support in After Effects.</p>
<p>Normal effect plug-ins are given a full-sized input buffer, and asked to render a full-sized output buffer. While output <a class="reference internal" href="index.html#effect-basics-pf-indata-pf-indata-members"><span class="std std-ref">extent_hint</span></a> specifies the portion of the output buffer that must actually be filled, this scheme is still very inefficient if the effect does not need its entire input. Also, many effects don’t use extent hints.</p>
<hr class="docutils" />
<div class="section" id="the-way-things-were">
<h3>The Way Things Were<a class="headerlink" href="#the-way-things-were" title="Permalink to this headline">¶</a></h3>
<p>Consider a blur effect applied to a huge layer which is mostly off-screen, or viewed through a small region of interest, or masked down to a small size. Only a small section of the output needs to be rendered, indicated to the effect using the output extent_hint. Only a small section of the input to be blurred is needed as well - the output extent_hint expanded by the blur radius. However, using the legacy effects API, there is no way for After Effects to know this, so the entire layer is passed to the plug-in. These extra pixels can be extremely expensive and wasteful to compute, especially in the case of prior effects or nested comps.</p>
</div>
<hr class="docutils" />
<div class="section" id="the-way-things-are-now">
<h3>The Way Things Are Now<a class="headerlink" href="#the-way-things-are-now" title="Permalink to this headline">¶</a></h3>
<p>SmartFX solves this problem by reversing the calling sequence. The effect is told how much of its output is required, and must explicitly <em>ask</em> the host for the inputs it needs. The render process is split into two parts: pre-render and render.</p>
<p>During pre-render, the effect describes the input pixel data it needs; this necessary input can vary based on anything you like (non-input layer parameters, non-layer parameters, information from in_data, settings in sequence data…). The effect must also return the extent of the resulting output, which may be smaller than the requested size if there are empty pixels in the requested portion of the layer.</p>
<p>During the render stage, the effect can <em>only</em> retrieve pixels that it has previously requested. This two-pass approach facilitates many important optimizations. For example, an effect which multiplies or mattes one input against another might discover that its first input is not</p>
<p>needed at all, if the mask does not intersect it. There are also important optimizations that are performed internally by After Effects to ensure that image buffers are copied as little as possible, and these optimizations are only possible after the host knows the buffer sizes and for all inputs and outputs.</p>
<p>Like AEGPs, SmartFX plug-ins are never unloaded by After Effects.</p>
</div>
<hr class="docutils" />
<div class="section" id="content-bounds">
<h3>Content Bounds<a class="headerlink" href="#content-bounds" title="Permalink to this headline">¶</a></h3>
<p>The content bounds of a node are the largest possible result rectangle that can be returned from a call to PreRender. It absolutely cannot vary depending on current render request or anything else. It should be calculated carefully, not loosely.</p>
<p>This calculation is very important. It is an intrinsic property of the node (and its inputs) and is fixed once the graph is built. Violation of it can and probably will cause all sorts of problems in various pieces of code.</p>
</div>
<hr class="docutils" />
<div class="section" id="how-to-smartify">
<h3>How To Smartify<a class="headerlink" href="#how-to-smartify" title="Permalink to this headline">¶</a></h3>
<p>Effects which set <code class="docutils literal notranslate"><span class="pre">PF_OutFlag2_SUPPORTS_SMART_RENDER</span></code> (from <a class="reference internal" href="index.html#effect-basics-pf-outdata-pf-outflags"><span class="std std-ref">PF_OutFlags</span></a>) will receive the SmartFX calls <code class="docutils literal notranslate"><span class="pre">PF_Cmd_SMART_PRE_RENDER</span></code> and <code class="docutils literal notranslate"><span class="pre">PF_Cmd_SMART_RENDER</span></code> (from <a class="reference internal" href="index.html#effect-basics-command-selectors-frame-selectors"><span class="std std-ref">Frame Selectors</span></a>), instead of the older <code class="docutils literal notranslate"><span class="pre">PF_Cmd_FRAME_SETUP</span></code> / <code class="docutils literal notranslate"><span class="pre">PF_Cmd_RENDER</span></code> / <code class="docutils literal notranslate"><span class="pre">PF_Cmd_FRAME_SETDOWN</span></code> sequence. To preserve compatibility with non-smartified hosts, you may want to continue supporting the older commands too.</p>
</div>
<hr class="docutils" />
<div class="section" id="pf-cmd-smart-pre-render">
<h3>PF_Cmd_SMART_PRE_RENDER<a class="headerlink" href="#pf-cmd-smart-pre-render" title="Permalink to this headline">¶</a></h3>
<p>After Effects requests output from the effect. The effect tells After Effects what input it needs to generate that output, through the use of callback functions, and by manipulating the structures in the extra parameter. An effect cannot access the pixels of any layer inputs it has not checked out during <em>PF_Cmd_SMART_PRE_RENDER</em>. So all layer inputs that an effect might possibly need must be checked out in advance using checkout_layer. If an effect might need certain layer inputs, they must be checked out now, even if later during rendering the effect may decide that the layer isn’t needed. Also, since no parameter array is passed to SmartFX during <em>PF_Cmd_SMART_PRE_RENDER</em> or <code class="docutils literal notranslate"><span class="pre">PF_Cmd_SMART_RENDER</span></code>, any non-layer parameters needed must be retrieved using <code class="docutils literal notranslate"><span class="pre">PF_CHECKOUT_PARAM</span></code> (from <a class="reference internal" href="index.html#effect-details-interaction-callback-functions-interaction-callbacks"><span class="std std-ref">Interaction Callbacks</span></a>)</p>
<hr class="docutils" />
</div>
<div class="section" id="pf-prerenderextra">
<span id="smartfx-smartfx-pf-prerenderextra"></span><h3>PF_PreRenderExtra<a class="headerlink" href="#pf-prerenderextra" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="83%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Member</th>
<th class="head">Purpose</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_PreRenderInput</span></code></td>
<td><p class="first">Describes what After Effects needs rendered (in the <code class="docutils literal notranslate"><span class="pre">PF_RenderRequest</span></code>), and the bit depth requested (in the aptly-named bitdepth member).</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
  <span class="n">PF_LRect</span>        <span class="n">rect</span><span class="p">;</span>
  <span class="n">PF_Field</span>        <span class="n">field</span><span class="p">;</span>
  <span class="n">PF_ChannelMask</span>  <span class="n">channel_mask</span><span class="p">;</span>
  <span class="n">PF_Boolean</span>      <span class="n">preserve_rgb_of_zero_alpha</span><span class="p">;</span>
  <span class="kt">char</span>            <span class="n">unused</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
  <span class="kt">long</span>            <span class="n">reserved</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
<span class="p">}</span> <span class="n">PF_RenderRequest</span><span class="p">;</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">rect</span></code> is in layer coordinates. field is also relative to the layer origin;
whether the active field falls on even or odd scanlines of the output buffer depends on the origin of the output buffer.</p>
<p><code class="docutils literal notranslate"><span class="pre">channel_mask</span></code> specifies for which channels the effect should provide output.</p>
<p>Data written to other channels will not be honored.</p>
<p>It will be one or more of the following, or’d together:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">PF_ChannelMask_ALPHA</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PF_ChannelMask_RED</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PF_ChannelMask_GREEN</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PF_ChannelMask_BLUE</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PF_ChannelMask_ARGB</span></code></li>
</ul>
</div></blockquote>
<p>If <code class="docutils literal notranslate"><span class="pre">preserve_rgb_of_zero_alpha</span></code> pixels is <code class="docutils literal notranslate"><span class="pre">TRUE</span></code>, the effect must propagate the color content of transparent pixels through to the output.</p>
<p class="last">This is related to, but distinct from, <a class="reference internal" href="index.html#effect-basics-pf-outdata-pf-outflags"><span class="std std-ref">PF_OutFlag2_REVEALS_ZERO_ALPHA</span></a>,
which tells After Effects that the effect may set alpha to non-zero values for such pixels, restoring them to visibility.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_PreRenderOutput</span></code></td>
<td><p class="first">Filled in by the effect to tell After Effects what output it plans to generate, based on the input.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
  <span class="n">PF_LRect</span>                    <span class="n">result_rect</span><span class="p">;</span>
  <span class="n">PF_LRect</span>                    <span class="n">max_result_rect</span><span class="p">;</span>
  <span class="n">PF_Boolean</span>                  <span class="n">solid</span><span class="p">;</span>
  <span class="n">PF_Boolean</span>                  <span class="n">reserved</span><span class="p">;</span>
  <span class="n">PF_RenderOutputFlags</span>        <span class="n">flags</span><span class="p">;</span>
  <span class="kt">void</span><span class="o">*</span>                       <span class="n">pre_render_data</span><span class="p">;</span>
  <span class="n">PF_DeletePreRenderDataFunc</span>  <span class="n">func</span><span class="p">;</span>
<span class="p">}</span> <span class="n">PF_PreRenderOutput</span><span class="p">;</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">pre_render_data</span></code> will be passed back to the effect during <a class="reference internal" href="index.html#effect-basics-command-selectors-frame-selectors"><span class="std std-ref">PF_Cmd_SMART_RENDER</span></a>.</p>
<p class="last">Currently, the only <code class="docutils literal notranslate"><span class="pre">PF_RenderOutputFlags</span></code> is <code class="docutils literal notranslate"><span class="pre">PF_RenderOutputFlag_RETURNS_EXTRA_PIXELS</span></code>.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_PreRenderCallbacks</span></code></td>
<td><p class="first">Currently, there is only one callback - <code class="docutils literal notranslate"><span class="pre">checkout_layer</span></code>. <cite>checkout_idL</cite> is chosen by the effect.</p>
<p>It must be positive and unique. After Effects populates the <code class="docutils literal notranslate"><span class="pre">PF_CheckoutResult</span></code>.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_Err</span> <span class="nf">checkout_layer</span><span class="p">(</span>
  <span class="n">PF_ProgPtr</span>              <span class="n">effect_ref</span><span class="p">,</span>
  <span class="n">PF_ParamIndex</span>           <span class="n">index</span><span class="p">,</span>
  <span class="n">A_long</span>                  <span class="n">checkout_idL</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">PF_RenderRequest</span>  <span class="o">*</span><span class="n">req</span><span class="p">,</span>
  <span class="n">A_long</span>                  <span class="n">what_time</span><span class="p">,</span>
  <span class="n">A_long</span>                  <span class="n">time_step</span><span class="p">,</span>
  <span class="n">A_u_long</span>                <span class="n">time_scale</span><span class="p">,</span>
<span class="n">PF_CheckoutResult</span>       <span class="o">*</span><span class="n">result</span><span class="p">);</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
  <span class="n">PF_LRect</span>          <span class="n">result_rect</span><span class="p">;</span>
  <span class="n">PF_LRect</span>          <span class="n">max_result_rect</span><span class="p">;</span>
  <span class="n">PF_RationalScale</span>  <span class="n">par</span><span class="p">;</span>
  <span class="kt">long</span>              <span class="n">solid</span><span class="p">;</span>
  <span class="n">PF_Boolean</span>        <span class="n">reservedB</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
  <span class="n">A_long</span>            <span class="n">ref_width</span><span class="p">;</span>
  <span class="n">A_long</span>            <span class="n">ref_height</span><span class="p">;</span>
<span class="p">}</span> <span class="n">PF_CheckoutResult</span><span class="p">;</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">result_rect</span></code> can be empty. <code class="docutils literal notranslate"><span class="pre">max_result_rect</span></code> is the largest the output could possibly be, if the host asked for all of it.
If solid is TRUE, the entire result_rect has opaque alpha.</p>
<p><code class="docutils literal notranslate"><span class="pre">ref_width</span></code> and <code class="docutils literal notranslate"><span class="pre">ref_height</span></code> are the original dimensions of the layer, before any effects are applied, disregarding any downsample factors.
This will be the size of the composition for collapsed layers.</p>
<p>There is a bug in 11.0 with the Global Performance Cache, when a SmartFX effect uses
both <a class="reference internal" href="index.html#effect-basics-pf-outdata-pf-outflags"><span class="std std-ref">PF_OutFlag2_AUTOMATIC_WIDE_TIME_INPUT</span></a> &amp; <a class="reference internal" href="index.html#effect-basics-pf-outdata-pf-outflags"><span class="std std-ref">PF_OutFlag_NON_PARAM_VARY</span></a>.</p>
<p>Calling checkout_layer during <code class="docutils literal notranslate"><span class="pre">PF_Cmd_SMART_PRE_RENDER</span></code> returns empty rects in <code class="docutils literal notranslate"><span class="pre">PF_CheckoutResult</span></code>.</p>
<p class="last">The workaround is to simply make the call again. This workaround is no longer needed in 11.0.1.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">result_rect</span></code></td>
<td><p class="first">The output (in layer coordinates) resulting from the render request (can be empty).</p>
<p class="last">This cannot be bigger than the input request rectangle (unless <code class="docutils literal notranslate"><span class="pre">PF_RenderOutputFlag_RETURNS_EXTRA_PIXELS</span></code> is set), but can be smaller.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">max_result_rect</span></code></td>
<td><p class="first">The maximum size the output could possibly be, if After Effects requested all of it.</p>
<p class="last">This must not vary depending on requested output size.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">solid</span></code></td>
<td>Set this TRUE if every pixel in the output will be fully opaque. Set if possible; it enables certain optimizations.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">reserved</span></code></td>
<td>Ignore.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">flags</span></code></td>
<td>Currently, the only flag is <code class="docutils literal notranslate"><span class="pre">PF_RenderOutputFlag_RETURNS_EXTRA_PIXELS</span></code>,
which tells After Effects that the smart effect will return more pixels than After Effects requested.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">pre_render_data</span></code></td>
<td><p class="first">Point this at any data that the effect would like to access during rendering.</p>
<p>Effects can also allocate handles and store them in <code class="docutils literal notranslate"><span class="pre">out_data&gt;frame_data</span></code>, as with regular (non-smart) effects.</p>
<p>Since <a class="reference internal" href="index.html#effect-basics-command-selectors-frame-selectors"><span class="std std-ref">PF_Cmd_SMART_PRE_RENDER</span></a> can be called with no corresponding
<a class="reference internal" href="index.html#effect-basics-command-selectors-frame-selectors"><span class="std std-ref">PF_Cmd_SMART_RENDER</span></a>, effects must never delete this data themselves;</p>
<p class="last">once the effect returns from <a class="reference internal" href="index.html#effect-basics-command-selectors-frame-selectors"><span class="std std-ref">PF_Cmd_SMART_PRE_RENDER</span></a>,
After Effects owns this data and will dispose of it (using either the following function or a standard free call).</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">delete_pre_render_data_func</span></code></td>
<td>Point this to a function that will eventually be called to delete the pre_render_data.</td>
</tr>
</tbody>
</table>
</div>
<hr class="docutils" />
<div class="section" id="preserve-rgb-of-zero-alpha">
<h3>preserve_rgb_of_zero_alpha<a class="headerlink" href="#preserve-rgb-of-zero-alpha" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">preserve_rgb_of_zero_alpha</span></code> is used both as input to the effect, to tell it what to render, and as output from the effect, to describe the input it needs (as passed to the checkout call). When preserve_rgb_of_zero_alpha is set in an input request, the effect must pass it recursively when making checkouts, otherwise prior effects and masking will eliminate those pixels that the effect would reveal. Use of this is discouraged, though still supported in CS3 (8.0).</p>
</div>
<hr class="docutils" />
<div class="section" id="rectangles">
<h3>Rectangles<a class="headerlink" href="#rectangles" title="Permalink to this headline">¶</a></h3>
<p>Effects must set both result rectangles accurately. After Effects’ caching system relies upon them, incorrect values can cause many problems. If the plug-in returns a <code class="docutils literal notranslate"><span class="pre">result_rect</span></code> smaller than the request_rect, that tells After Effects the pixels inside the request_rect but outside the <code class="docutils literal notranslate"><span class="pre">result_rect</span></code> are empty.</p>
<p>Similarly, <code class="docutils literal notranslate"><span class="pre">max_result_rect</span></code> must encompass all non-zero pixels; the effect will never be asked to render anything outside this region. If there are pixels outside this rectangle, they will never be displayed.</p>
<p>Mis-sized output rectangles can cause problems as well. If these rectangles are too big, a loss of performance results.</p>
<p>Not only will many empty pixels be cached (robbing the application of valuable memory), the effect may be unnecessarily asked to render large regions of nothing. For this reason, the <code class="docutils literal notranslate"><span class="pre">max_result_rect</span></code> must be computed correctly, rather than set to some arbitrarily large size.</p>
<p>Both <code class="docutils literal notranslate"><span class="pre">result_rect</span></code> and <code class="docutils literal notranslate"><span class="pre">max_result_rect</span></code> may vary depending on the effect’s parameters, the current time, et cetera; they are valid only for the given invocation of the effect. However, <code class="docutils literal notranslate"><span class="pre">max_result_rect</span></code> <em>cannot</em> depend on the specific render request. It must be the same no matter what portion of the output is requested by After Effects.</p>
<p>It is legal to return an empty <code class="docutils literal notranslate"><span class="pre">result_rect</span></code> if the request_rect doesn’t intersect the effect’s output pixels; no rendering need be done.</p>
<p>After Effects may also call the effect with an empty request_rect, meaning the effect is only being asked to compute the <code class="docutils literal notranslate"><span class="pre">max_result_rect</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">preserve_rgb_of_zero_alpha</span></code> can influence the bounds computation process (both result_rect and <code class="docutils literal notranslate"><span class="pre">max_result_rect</span></code>) and must be respected if the effect behaves differently depending on this setting.</p>
</div>
<hr class="docutils" />
<div class="section" id="the-size-of-a-layer">
<h3>The “Size” Of A Layer<a class="headerlink" href="#the-size-of-a-layer" title="Permalink to this headline">¶</a></h3>
<p>As with non-smart effects, each smart effect can arbitrarily shrink or expand its requested input. They cannot depend on a fixed frame size, and the size of the input may change over time.</p>
<p>For example, the user could apply an animated drop shadow to a layer, which would add pixels to different edges of the layer at different times, depending on the direction in which the shadow is cast.</p>
<p>Some effects (for example, those which need to align one layer against another) need some notion of “size.” This could be defined two ways, each with advantages and disadvantages.</p>
<p>The size of the original layer, before any effects and downsampling are applied, is given <code class="docutils literal notranslate"><span class="pre">in_data&gt;width/height</span></code>. As this value is unaffected by subsequent effects, it can act an absolute reference for things like center points.</p>
<p>However, this is not fool-proof, as the user could have applied a distortion or translation effect. Also, this value is available only for the layer to which the effect is applied, not other layer parameters.</p>
<p>…or…</p>
<p>Every layer input has a <code class="docutils literal notranslate"><span class="pre">max_result_rect</span></code> which encompasses all pixel data, in some sense the master “size” of a layer.</p>
<p>It is available for all layers, but changes over time according to previously applied effects, possibly in ways the user might not expect (as in the drop shadow example above).</p>
<p>Note that the ref_width/height and <code class="docutils literal notranslate"><span class="pre">max_result_rect</span></code> for an input may be obtained without rendering, by calling <code class="docutils literal notranslate"><span class="pre">checkout_layer</span></code> with an empty <code class="docutils literal notranslate"><span class="pre">request_rect</span></code>.</p>
<p>This is fairly efficient, and can be useful if the layer “size” is needed first to determine exactly which pixels are required for rendering.</p>
<p>This is an example of requesting a layer in pre-render and then never calling <code class="docutils literal notranslate"><span class="pre">checkout_layer</span></code> (in this case, there are none).</p>
</div>
<hr class="docutils" />
<div class="section" id="flag-on-the-play">
<h3>Flag On The Play<a class="headerlink" href="#flag-on-the-play" title="Permalink to this headline">¶</a></h3>
<p>Normally, the <code class="docutils literal notranslate"><span class="pre">max_result_rect</span></code> of a given <code class="docutils literal notranslate"><span class="pre">PF_RenderRequest</span></code> will be cropped to the bounds of any applied mask.</p>
<p>However, if <a class="reference internal" href="index.html#effect-basics-pf-outdata-pf-outflags2"><span class="std std-ref">PF_OutFlag2_REVEALS_ZERO_ALPHA</span></a> is set, the <code class="docutils literal notranslate"><span class="pre">max_result_rect</span></code> will be the size of the layer.</p>
</div>
<hr class="docutils" />
<div class="section" id="pf-cmd-smart-render">
<h3>PF_Cmd_SMART_RENDER<a class="headerlink" href="#pf-cmd-smart-render" title="Permalink to this headline">¶</a></h3>
<p>The effect will receive at most one <em>PF_Cmd_SMART_RENDER</em> call for each pre-render.</p>
<p>Note that render may never be called at all. After Effects may have only wanted to to perform some bounds computations, or it may have subsequently discovered that an effect’s output is not needed at all (which can happen, for example, if the pre-render phase for a track matte returns a rectangle that does not intersect the effect’s output.)</p>
<p>All effects must be able to handle Pre-Render without Render without leaking resources or otherwise entering an unstable state.</p>
<p>During <em>PF_Cmd_SMART_RENDER</em>, the extra parameter points to a PF_SmartRenderExtra.</p>
</div>
<hr class="docutils" />
<div class="section" id="pf-smartrenderextra">
<h3>PF_SmartRenderExtra<a class="headerlink" href="#pf-smartrenderextra" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="14%" />
<col width="86%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Member</th>
<th class="head">Purpose</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_SmartRenderInput</span></code></td>
<td><p class="first">Consists of a <a class="reference internal" href="#smartfx-smartfx-pf-prerenderextra"><span class="std std-ref">PF_RenderRequest</span></a>, the bitdepth,
and a pointer to <code class="docutils literal notranslate"><span class="pre">pre_render_data</span></code> (allocated during <a class="reference internal" href="index.html#effect-basics-command-selectors-frame-selectors"><span class="std std-ref">PF_Cmd_SMART_PRE_RENDER</span></a>).</p>
<p class="last">This <code class="docutils literal notranslate"><span class="pre">PF_SmartRenderInput</span></code> is identical to that passed in the corresponding <em>PF_Cmd_SMART_PRE_RENDER</em>.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_SmartRenderCallbacks</span></code></td>
<td><div class="first highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_Err</span> <span class="nf">checkout_layer_pixels</span><span class="p">(</span>
  <span class="n">PF_ProgPtr</span>      <span class="n">effect_ref</span><span class="p">,</span>
  <span class="n">A_long</span>          <span class="n">checkout_idL</span><span class="p">,</span>
  <span class="n">PF_EffectWorld</span>  <span class="o">**</span><span class="n">pixels</span><span class="p">);</span>
</pre></div>
</div>
<p>This is used to actually access the pixels in layers checked out during <em>PF_Cmd_SMART_PRE_RENDER</em>.</p>
<p>The returned <code class="docutils literal notranslate"><span class="pre">PF_EffectWorld</span></code> is valid for duration of current command or until checked in.</p>
<p>You are only allowed to call <code class="docutils literal notranslate"><span class="pre">checkout_layer_pixels</span></code> only once with the checkout_idL used earlier in <em>PF_Cmd_SMART_PRERENDER</em>.
There must be a one-to-one mapping between the number of checkouts made in <em>PF_Cmd_SMART_PRERENDER</em> and <em>PF_Cmd_SMART_RENDER</em>.</p>
<p>To call <code class="docutils literal notranslate"><span class="pre">checkout_layer_pixels</span></code> more than once on a layer,
you should call <a class="reference internal" href="#smartfx-smartfx-pf-prerenderextra"><span class="std std-ref">checkout_layer</span></a> on the same layer again with a different unique <code class="docutils literal notranslate"><span class="pre">checkout_idL</span></code>
in <em>PF_Cmd_SMART_PRERENDER</em> and then use that <code class="docutils literal notranslate"><span class="pre">checkout_idL</span></code> to do another <code class="docutils literal notranslate"><span class="pre">checkout_layer_pixels</span></code> in <em>PF_Cmd_SMART_RENDER</em>.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_Err</span> <span class="nf">checkin_layer_pixels</span><span class="p">(</span>
  <span class="n">PF_ProgPtr</span>  <span class="n">effect_ref</span><span class="p">,</span>
  <span class="n">A_long</span>      <span class="n">checkout_idL</span><span class="p">);</span>
</pre></div>
</div>
<p>It isn’t necessary to call (After Effects cleans up all such checkouts when the effect returns from <em>PF_Cmd_SMART_RENDER</em>), but useful to free up memory.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_Err</span> <span class="nf">checkout_output</span><span class="p">(</span>
  <span class="n">PF_ProgPtr</span>      <span class="n">effect_ref</span><span class="p">,</span>
  <span class="n">PF_EffectWorld</span>  <span class="o">**</span><span class="n">output</span><span class="p">);</span>
</pre></div>
</div>
<p>Retrieves the output buffer. Note that effects are not allowed to check out output until at least one input has been checked out (unless the effect has no inputs at all).</p>
<p class="last">NOTE: For optimal memory usage, request the output as late as possible, and request inputs as few at a time as possible.</p>
</td>
</tr>
</tbody>
</table>
</div>
<hr class="docutils" />
<div class="section" id="when-to-access-layer-parameters">
<h3>When To Access Layer Parameters<a class="headerlink" href="#when-to-access-layer-parameters" title="Permalink to this headline">¶</a></h3>
<p>Parameters other than layer inputs may be freely checked out at any point. Layer inputs must be accessed during:ref:<cite>PF_Cmd_SMART_PRE_RENDER &lt;effect-basics/command-selectors.frame-selectors&gt;</cite>.</p>
<p>However, you aren’t required to actually <em>use</em> every input.</p>
<p>If you check out a frame (or portion thereof) in <a class="reference internal" href="index.html#effect-basics-command-selectors-frame-selectors"><span class="std std-ref">PF_Cmd_SMART_PRE_RENDER</span></a> and do not subsequently check it out in <code class="docutils literal notranslate"><span class="pre">PF_Cmd_SMART_RENDER</span></code>, it need never be rendered, greatly improving performance.</p>
</div>
<hr class="docutils" />
<div class="section" id="wait-gimme-that-layer-back">
<h3>Wait, Gimme That Layer Back!<a class="headerlink" href="#wait-gimme-that-layer-back" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">checkout_layer_pixels</span></code> can only be called once with the checkout_id used earlier in PreRender. There has to be a one-to-one mapping on the number of checkouts made in PreRender and SmartRender. If you need to check out the pixels of a layer more than once, perhaps because of the structure of your code, just use more than one checkout_id. In PreRender, call checkout_layer on the same layer with different unique checkout_ids. Then in SmartRender, use a different one of those checkout_ids each time checkout_layer_pixels is called in SmartRender.</p>
</div>
</div>
</div>
<div class="toctree-wrapper compound">
<span id="document-effect-ui-events/effect-ui-events"></span><div class="section" id="effect-ui-events">
<span id="effect-ui-events-effect-ui-events"></span><h2>Effect UI &amp; Events<a class="headerlink" href="#effect-ui-events" title="Permalink to this headline">¶</a></h2>
<p>Effects can provide custom UI in two areas: (1) the Effect Controls Window (custom ECW UI), and (2) the Composition or Layer Windows (Custom Comp UI).</p>
<p>Effects that use custom UI should set <code class="docutils literal notranslate"><span class="pre">PF_OutFlag_CUSTOM_UI</span></code> (from <a class="reference internal" href="index.html#effect-basics-pf-outdata-pf-outflags"><span class="std std-ref">PF_OutFlags</span></a> during <code class="docutils literal notranslate"><span class="pre">PF_Cmd_GLOBAL_SETUP</span></code> (from <a class="reference internal" href="index.html#effect-basics-command-selectors-global-selectors"><span class="std std-ref">Global Selectors</span></a>), and handle the PF_Cmd_EVENT selector.</p>
<p>Custom ECW UI allows an effect to provide a parameter with a customized control, which can be used either with standard parameter types or <a class="reference internal" href="index.html#effect-details-arbitrary-data-parameters"><span class="std std-ref">Arbitrary Data Parameters</span></a>.</p>
<p>Parameters that have a custom UI should set <code class="docutils literal notranslate"><span class="pre">PF_PUI_CONTROL</span></code> (from <a class="reference internal" href="index.html#effect-basics-pf-paramdef-parameter-ui-flags"><span class="std std-ref">Parameter UI Flags</span></a>) when <a class="reference internal" href="index.html#effect-details-interaction-callback-functions-interaction-callbacks"><span class="std std-ref">adding the parameter</span></a>.</p>
<p>Custom Comp UI allows an effect to provide direct manipulation of the video in the Composition or Layer Windows.</p>
<p>When the effect is selected, the Window can overlay custom controls directly on the video, and can handle user interaction with those controls, to adjust parameters more quickly and naturally.</p>
<p>Effects should register themselves to receive events by calling PF_REGISTER_UI.</p>
<p>After Effects can send events to effects for user interface handling and parameter management, integrating effects into its central message queue.</p>
<p>While many events are sent in response to user input, After Effects also sends events to effects which manage arbitrary data parameters.</p>
<p>The type of event is specified in <a class="reference internal" href="index.html#effect-ui-events-pf-eventextra"><span class="std std-ref">PF_EventExtra-&gt;e_type</span></a> and the various events are described below.</p>
<hr class="docutils" />
<div class="section" id="events">
<h3>Events<a class="headerlink" href="#events" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="83%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Event</strong></th>
<th class="head"><strong>Indicates</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_Event_NEW_CONTEXT</span></code></td>
<td><p class="first">The user created a new context (probably by opening a window) for events.</p>
<p>The plug-in is allowed to store state information inside the context using the context handle.</p>
<p class="last"><a class="reference internal" href="index.html#effect-ui-events-pf-eventunion"><span class="std std-ref">PF_EventUnion</span></a> contains valid context and type, but everything else should be ignored.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_Event_ACTIVATE</span></code></td>
<td>The user activated a new context (probably by bringing a window into the foreground). <a class="reference internal" href="index.html#effect-ui-events-pf-eventunion"><span class="std std-ref">PF_EventUnion</span></a> is empty.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_Event_DO_CLICK</span></code></td>
<td><p class="first">The user clicked within the effect’s UI. <a class="reference internal" href="index.html#effect-ui-events-pf-eventunion"><span class="std std-ref">PF_EventUnion</span></a> contains a <code class="docutils literal notranslate"><span class="pre">PF_DoClickEventInfo</span></code>.</p>
<p>Handle the mouse click and respond, passing along drag info; see sample code), within a context.</p>
<p class="last">NOTE: As of 7.0, do <em>not</em> block until mouse-up; instead, rely on <code class="docutils literal notranslate"><span class="pre">PF_Event_DRAG</span></code>.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_Event_DRAG</span></code></td>
<td><p class="first">Also a Click Event, <a class="reference internal" href="index.html#effect-ui-events-pf-eventunion"><span class="std std-ref">PF_EventUnion</span></a> contains a <code class="docutils literal notranslate"><span class="pre">PF_DoClickEventInfo</span></code>.</p>
<p>Request this by returning <code class="docutils literal notranslate"><span class="pre">send_drag</span> <span class="pre">==</span> <span class="pre">TRUE</span></code> from <code class="docutils literal notranslate"><span class="pre">PF_Event_DO_CLICK</span></code>.</p>
<p class="last">Do this so After Effects can see new data from the user’s changes.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_Event_DRAW</span></code></td>
<td>Draw! <a class="reference internal" href="index.html#effect-ui-events-pf-eventunion"><span class="std std-ref">PF_EventUnion</span></a> contains a <code class="docutils literal notranslate"><span class="pre">PF_DrawEventInfo</span></code>.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_Event_DEACTIVATE</span></code></td>
<td>The user has deactivated a context (probably by bringing another window into the foreground). <code class="docutils literal notranslate"><span class="pre">PF_EventUnion</span></code> is empty.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_Event_CLOSE_CONTEXT</span></code></td>
<td>A context has been closed by the user. <code class="docutils literal notranslate"><span class="pre">PF_EventUnion</span></code> will be empty.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_Event_IDLE</span></code></td>
<td>A context is open but nothing is happening. <code class="docutils literal notranslate"><span class="pre">PF_EventUnion</span></code> is empty.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_Event_ADJUST_CURSOR</span></code></td>
<td><p class="first">The mouse is over the plug-in’s UI. Set the cursor by changing the <code class="docutils literal notranslate"><span class="pre">PF_CursorType</span></code> in the <code class="docutils literal notranslate"><span class="pre">PF_AdjustCursorEventInfo</span></code>.</p>
<p>Use OS-specific calls to implement a custom cursor; tell After Effects you’ve done so by setting <code class="docutils literal notranslate"><span class="pre">PF_CursorType</span></code> to <code class="docutils literal notranslate"><span class="pre">PF_Cursor_CUSTOM</span></code>.</p>
<p class="last">Use an After Effects cursor whenever possible to preserve interface continuity.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_Event_KEYDOWN</span></code></td>
<td>Keystroke. <a class="reference internal" href="index.html#effect-ui-events-pf-eventunion"><span class="std std-ref">PF_EventUnion</span></a> contains a <code class="docutils literal notranslate"><span class="pre">PF_KeyDownEvent</span></code>.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_Event_MOUSE_EXITED</span></code></td>
<td>New in CS6. Notification that the mouse is no longer over a specific view (layer or comp only).</td>
</tr>
</tbody>
</table>
</div>
</div>
<span id="document-effect-ui-events/PF_EventExtra"></span><div class="section" id="pf-eventextra">
<span id="effect-ui-events-pf-eventextra"></span><h2>PF_EventExtra<a class="headerlink" href="#pf-eventextra" title="Permalink to this headline">¶</a></h2>
<p>This structure provide context information for the current event. After Effects passes a pointer to this structure in the extra parameter of the <a class="reference internal" href="index.html#effect-basics-entry-point"><span class="std std-ref">Entry Point</span></a> function.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">PF_EventUnion</span></code> (sent in the <code class="docutils literal notranslate"><span class="pre">PF_EventExtra</span></code>) varies with the event type, and contains information specific to that event.</p>
<table border="1" class="docutils">
<colgroup>
<col width="9%" />
<col width="91%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Member</strong></th>
<th class="head"><strong>Purpose</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">contextH</span></code></td>
<td><p class="first">Handle to the <code class="docutils literal notranslate"><span class="pre">PF_Context</span></code>.</p>
<p class="last">This drawing context is used with the <a class="reference internal" href="index.html#effect-ui-events-custom-ui-and-drawbot"><span class="std std-ref">Drawbot suites</span></a> for drawing,
and also for the <a class="reference internal" href="index.html#effect-ui-events-ui-callbacks"><span class="std std-ref">UI Callbacks</span></a>.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">e_type</span></code></td>
<td>Which <a class="reference internal" href="index.html#effect-ui-events-effect-ui-events"><span class="std std-ref">event</span></a> is occurring.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">u</span></code></td>
<td>A <a class="reference internal" href="index.html#effect-ui-events-pf-eventunion"><span class="std std-ref">PF_EventUnion</span></a> containing information specific to the event.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">effect_win</span></code></td>
<td><p class="first">A <code class="docutils literal notranslate"><span class="pre">PF_EffectWindowInfo</span></code> about the event if it occurs within the effects window.</p>
<p>Otherwise, as of After Effects 5.0, effect_win can be replaced by a <code class="docutils literal notranslate"><span class="pre">PF_WindowUnion</span></code>.</p>
<p>This struct contains both a <code class="docutils literal notranslate"><span class="pre">PF_EffectWindowInfo</span></code> and an <code class="docutils literal notranslate"><span class="pre">PF_ItemWindowInfo</span></code>, which (for now) is simply the port rectangle for the item window.</p>
<p class="last">Replacement only occurs if <code class="docutils literal notranslate"><span class="pre">PF_USE_NEW_WINDOW_UNION</span></code> was defined during compilation; otherwise, it will continue to be just a <code class="docutils literal notranslate"><span class="pre">PF_EffectWindowInfo</span></code>.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">cbs</span></code></td>
<td>Pointer to <a class="reference internal" href="index.html#effect-ui-events-ui-callbacks"><span class="std std-ref">UI Callbacks</span></a>, which are needed to translate points between layer, composition, and screen coordinate systems.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">evt_in_flags</span></code></td>
<td>Event Input Flags. This currently contains only one value, <code class="docutils literal notranslate"><span class="pre">PF_EI_DONT_DRAW</span></code>, which you should check before drawing!</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">evt_out_flags</span></code></td>
<td><p class="first">One or more of the following, combined with a bitwise OR operation:</p>
<blockquote class="last">
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">PF_EO_NONE</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PF_EO_HANDLED_EVENT</span></code> tells After Effects you’ve handled the event.</li>
<li><code class="docutils literal notranslate"><span class="pre">PF_EO_ALWAYS_UPDATE</span></code> forces After Effects to rerender the composite in response to every click or drag; this is the same behavior generated by ‘alt-scrubbing’ the parameter value.</li>
<li><code class="docutils literal notranslate"><span class="pre">PF_EO_NEVER_UPDATE</span></code> prevents After Effects from rerendering the composite until the user stops clicking and dragging.</li>
<li><code class="docutils literal notranslate"><span class="pre">PF_EO_UPDATE_NOW</span></code> tells After Effects to update the view immediately after the event returns after calling PF_InvalidateRect</li>
</ul>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<div class="section" id="pf-context">
<h3>PF_Context<a class="headerlink" href="#pf-context" title="Permalink to this headline">¶</a></h3>
<p>PF_Context details the event’s UI context.</p>
<table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="83%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Member</strong></th>
<th class="head"><strong>Purpose</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">magic</span></code></td>
<td>Do not change.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">w_type</span></code></td>
<td><p class="first">The window type. If you have Custom Comp and ECW UIs in the same plug-in,
this is the way to differentiate between them (what kind of masochist are you, anyway?).</p>
<blockquote class="last">
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">PF_Window_COMP</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">PF_Window_LAYER</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">PF_Window_EFFECT</span></code></li>
</ul>
</div></blockquote>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">reserved_flt</span></code></td>
<td>Do not change.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">plugin_state[4]</span></code></td>
<td>An array of 4 <code class="docutils literal notranslate"><span class="pre">A_longs</span></code> which the plug-in can use to store state information for a given context.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">reserved_drawref</span></code></td>
<td>A <code class="docutils literal notranslate"><span class="pre">DRAWBOT_DrawRef</span></code> for use with the <a class="reference internal" href="index.html#effect-ui-events-custom-ui-and-drawbot"><span class="std std-ref">Drawbot suites</span></a>.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">*reserved_paneP</span></code></td>
<td>Do not change.</td>
</tr>
</tbody>
</table>
</div>
<hr class="docutils" />
<div class="section" id="pf-effectwindowinfo">
<h3>PF_EffectWindowInfo<a class="headerlink" href="#pf-effectwindowinfo" title="Permalink to this headline">¶</a></h3>
<p>If an event occurs in the ECP, an PF_EffectWindowInfo is sent in PF_EventExtra.</p>
<table border="1" class="docutils">
<colgroup>
<col width="14%" />
<col width="86%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Member</strong></th>
<th class="head"><strong>Purpose</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">index</span></code></td>
<td>This indicates which parameter in the effect window is being affected. The controls are numbered from 0 to the number of controls minus 1.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">area</span></code></td>
<td>This indicates if the control title (<code class="docutils literal notranslate"><span class="pre">PF_EA_PARAM_TITLE</span></code>) or the control itself (<code class="docutils literal notranslate"><span class="pre">PF_EA_CONTROL</span></code>) are being affected.
The title is the area still visible when the parameter’s topic (“twirly”) is spun up.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">current_frame</span></code></td>
<td>A PF_Rect indicating the full frame of the area occupied by the control.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">param_title_frame</span></code></td>
<td>A PF_Rect indicating the title area of the control.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">horiz_offset</span></code></td>
<td>A horizontal offset from the left side of the title area in which to draw into the title.</td>
</tr>
</tbody>
</table>
</div>
</div>
<span id="document-effect-ui-events/PF_EventUnion"></span><div class="section" id="pf-eventunion">
<span id="effect-ui-events-pf-eventunion"></span><h2>PF_EventUnion<a class="headerlink" href="#pf-eventunion" title="Permalink to this headline">¶</a></h2>
<p>The PF_EventUnion in PF_EventExtra is a union of the four following structures.</p>
<hr class="docutils" />
<div class="section" id="click">
<h3>Click<a class="headerlink" href="#click" title="Permalink to this headline">¶</a></h3>
<p>A mouse click or drag occurred within the custom UI’s area.</p>
<div class="section" id="pf-doclickeventinfo">
<h4>PF_DoClickEventInfo<a class="headerlink" href="#pf-doclickeventinfo" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="12%" />
<col width="88%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Member</strong></th>
<th class="head"><strong>Purpose</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">when</span></code></td>
<td>The (OS-level) time at which the click occurred.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">screen_point</span></code></td>
<td>Where, in screen coordinates, the click occurred. For Custom Comp UI, these coordinates can be converted to composition coordinates using the <a class="reference internal" href="index.html#effect-ui-events-ui-callbacks"><span class="std std-ref">UI Callbacks</span></a>.
See the CCU sample project for an example.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">num_clicks</span></code></td>
<td>The number of clicks that occurred.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">modifiers</span></code></td>
<td>Which modifier keys (if any) were held down during click.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">continue_refcon[4]</span></code></td>
<td>An array of 4 <code class="docutils literal notranslate"><span class="pre">A_intptr_t</span></code> the plug-in can use to store information during a click-drag-drag sequence.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">send_drag</span></code></td>
<td>Set this flag to <code class="docutils literal notranslate"><span class="pre">TRUE</span></code> to indicate continued dragging. The next click event will then effectively be a drag event.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">last_time</span></code></td>
<td>Set when the drag event ends (the user has released the mouse button).</td>
</tr>
</tbody>
</table>
</div>
</div>
<hr class="docutils" />
<div class="section" id="draw">
<h3>Draw<a class="headerlink" href="#draw" title="Permalink to this headline">¶</a></h3>
<p>After Effects needs your custom UI to refresh.</p>
<p>Note: when handling draw requests, use the image dimensions provided in <a class="reference internal" href="index.html#effect-basics-pf-indata"><span class="std std-ref">PF_InData</span></a> (rather that the dimensions of your input layer, as you would during <a class="reference internal" href="index.html#effect-basics-command-selectors-frame-selectors"><span class="std std-ref">PF_Cmd_RENDER</span></a>).</p>
<div class="section" id="pf-draweventinfo">
<h4>PF_DrawEventInfo<a class="headerlink" href="#pf-draweventinfo" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="8%" />
<col width="92%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Member</strong></th>
<th class="head"><strong>Purpose</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">update_rect</span></code></td>
<td>The rectangle in which to draw, in the context window’s coordinate system. These coordinates can be converted to different coordinate systems using the <a class="reference internal" href="index.html#effect-ui-events-ui-callbacks"><span class="std std-ref">UI Callbacks</span></a>.
See the CCU sample project for an example.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">depth</span></code></td>
<td>Pixel depth of the drawing context.</td>
</tr>
</tbody>
</table>
</div>
</div>
<hr class="docutils" />
<div class="section" id="keydown">
<h3>Keydown<a class="headerlink" href="#keydown" title="Permalink to this headline">¶</a></h3>
<p>The user pressed a key, and the effect’s UI is active.</p>
<p>Use the macros in AE_EffectUI.h to access and manipulate the key codes received.</p>
<p>In order to receive keydown events in Premiere Pro, plug-ins must set <cite>PF_CustomEFlag_COMP</cite> in <cite>PF_CustomUIInfo.events</cite> during .. _PF_Cmd_PARAM_SETUP.
PF_KeyDownEvent
<strong>****************************************************************************</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="12%" />
<col width="88%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Member</strong></th>
<th class="head"><strong>Purpose</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">when</span></code></td>
<td>Time at which the click occurred.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">screen_point</span></code></td>
<td>Screen coordinate of the mouse pointer when the key was pressed.
For Custom Comp UI, these coordinates can be converted to composition coordinates using the <a class="reference internal" href="index.html#effect-ui-events-ui-callbacks"><span class="std std-ref">UI Callbacks</span></a>.
See the CCU sample project for an example.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">key_code</span></code></td>
<td><p class="first">Either a character code (for printable characters, we use the unshifted upper case version; A not a, 7 not &amp;), or a control code:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">PF_ControlCode_Unknown</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PF_ControlCode_Space</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PF_ControlCode_Backspace</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PF_ControlCode_Tab</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PF_ControlCode_Return</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PF_ControlCode_Enter</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PF_ControlCode_Escape</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PF_ControlCode_F1</span></code></li>
</ul>
</div></blockquote>
<p>…</p>
<blockquote class="last">
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">PF_ControlCode_F24</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PF_ControlCode_PrintScreen</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PF_ControlCode_ScrollLock</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PF_ControlCode_Pause</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PF_ControlCode_Insert</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PF_ControlCode_Delete</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PF_ControlCode_Home</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PF_ControlCode_End</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PF_ControlCode_PageUp</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PF_ControlCode_PageDown</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PF_ControlCode_Help</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PF_ControlCode_Clear</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PF_ControlCode_Left</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PF_ControlCode_Right</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PF_ControlCode_Up</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PF_ControlCode_Down</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PF_ControlCode_NumLock</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PF_ControlCode_Command</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PF_ControlCode_Option</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PF_ControlCode_Alt</span></code> = <code class="docutils literal notranslate"><span class="pre">PF_ControlCode_Option</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PF_ControlCode_Control</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PF_ControlCode_Shift</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PF_ControlCode_CapsLock</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PF_ControlCode_ContextMenu</span></code></li>
</ul>
</div></blockquote>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">modifiers</span></code></td>
<td><p class="first">Which (if any) modifier keys were down during the key press.</p>
<blockquote class="last">
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">PF_Mod_NONE</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PF_Mod_CMD_CTRL_KEY</span></code> (cmd on Mac, ctrl on Windows)</li>
<li><code class="docutils literal notranslate"><span class="pre">PF_Mod_SHIFT_KEY</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PF_Mod_CAPS_LOCK_KEY</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PF_Mod_OPT_ALT_KEY</span></code> (option on Mac, alt on Windows)</li>
<li><code class="docutils literal notranslate"><span class="pre">PF_Mod_MAC_CONTROL_KEY</span></code></li>
</ul>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</div>
<hr class="docutils" />
<div class="section" id="adjustcursor">
<h3>AdjustCursor<a class="headerlink" href="#adjustcursor" title="Permalink to this headline">¶</a></h3>
<p>The cursor has moved onto (but not off of) the effect’s custom UI, to allow the effect to change the cursor.</p>
<div class="section" id="pf-adjustcursoreventinfo">
<h4>PF_AdjustCursorEventInfo<a class="headerlink" href="#pf-adjustcursoreventinfo" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="9%" />
<col width="91%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Member</strong></th>
<th class="head"><strong>Purpose</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">screen_point</span></code></td>
<td>Screen coordinate of the mouse pointer. For Custom Comp UI, these coordinates can be converted to composition coordinates using the <a class="reference internal" href="index.html#effect-ui-events-ui-callbacks"><span class="std std-ref">UI Callbacks</span></a>.
See the CCU sample project for an example.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">modifiers</span></code></td>
<td>What, if any, modifier keys were held down when the message was sent.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">set_cursor</span></code></td>
<td>Set this to your desired cursor, or <code class="docutils literal notranslate"><span class="pre">PF_Cursor_CUSTOM</span></code> if you have set the cursor yourself using OS-specific calls. See AE_EffectUI.h for a complete enumeration of built-in cursors.
If you don’t want to override the cursor, set this to <code class="docutils literal notranslate"><span class="pre">PF_Cursor_NONE</span></code>, or simply ignore this message.</td>
</tr>
</tbody>
</table>
</div>
</div>
<hr class="docutils" />
<div class="section" id="arbitrary-parameters-event">
<h3>Arbitrary Parameters Event<a class="headerlink" href="#arbitrary-parameters-event" title="Permalink to this headline">¶</a></h3>
<p>After Effects needs your plug-in to manage it’s arbitrary data parameter(s).</p>
<p>Though arbitrary data types are not required for custom UI support, <code class="docutils literal notranslate"><span class="pre">PF_ArbParamsExtra</span></code> follows the EventInfo model.</p>
<div class="section" id="pf-arbparamsextra">
<h4>PF_ArbParamsExtra<a class="headerlink" href="#pf-arbparamsextra" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="21%" />
<col width="79%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Member</strong></th>
<th class="head"><strong>Purpose</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">which_function</span></code></td>
<td>A <code class="docutils literal notranslate"><span class="pre">PF_FunctionSelector</span></code> indicating which function is called</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">id</span></code></td>
<td>Used by After Effects; will match the ID assigned to the arbitrary data type during <em>PF_Cmd_PARAM_SETUP</em>.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">padding</span></code></td>
<td>Used for byte-alignment</td>
</tr>
<tr class="row-odd"><td><div class="first last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">u</span> <span class="p">{</span>
  <span class="n">new_func_params</span>
  <span class="n">dispose_func_params</span>
  <span class="n">copy_func_params</span>
  <span class="n">flat_size_func_params</span>
  <span class="n">flatten_func_params</span>
  <span class="n">unflatten_func_params</span>
  <span class="n">interp_func_params</span>
  <span class="n">compare_func_params</span>
  <span class="n">print_size_func_params</span>
  <span class="n">print_func_params</span>
  <span class="n">scan_func_params</span>
<span class="p">}</span>
</pre></div>
</div>
</td>
<td>(One of these will be passed; see <a class="reference internal" href="index.html#effect-details-arbitrary-data-parameters"><span class="std std-ref">Arbitrary Data Parameters</span></a>)</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<span id="document-effect-ui-events/custom-ui-and-drawbot"></span><div class="section" id="custom-ui-drawbot">
<span id="effect-ui-events-custom-ui-and-drawbot"></span><h2>Custom UI &amp; Drawbot<a class="headerlink" href="#custom-ui-drawbot" title="Permalink to this headline">¶</a></h2>
<p>Custom UI uses a composited drawing model using Drawbot. The Drawbot suites can be used for:</p>
<ol class="arabic simple">
<li>Basic 2D path drawing: Lines, Rect, Arc, Bezier</li>
<li>Stroking/Filling/Shading paths</li>
<li>Image drawing: Compositing an ARGB/BGRA buffer onto the surface</li>
<li>Pushing/popping surface state</li>
<li>Text drawing, if supplier supports it (clients should first check if text drawing is supported before actual drawing)</li>
</ol>
<p>Drawing may only occur during <code class="docutils literal notranslate"><span class="pre">PF_Event_DRAW</span></code> (and not during <code class="docutils literal notranslate"><span class="pre">PF_Event_DRAG</span></code> or <code class="docutils literal notranslate"><span class="pre">PF_Event_DO_CLICK</span></code>).</p>
<p>To use Drawbot, first get the drawing reference by passing in PF_Context to a new suite call <a class="reference internal" href="#effect-ui-events-custom-ui-and-drawbot-pf-effectcustomuisuite"><span class="std std-ref">PF_GetDrawingReference</span></a>.</p>
<p>If a non-NULL drawing reference is returned, use it to get the supplier and surface references from <a class="reference internal" href="#effect-ui-events-custom-ui-and-drawbot-drawbot-drawbotsuite"><span class="std std-ref">DRAWBOT_DrawbotSuite</span></a>.</p>
<p>The Drawbot suites include <code class="docutils literal notranslate"><span class="pre">DRAWBOT_DrawbotSuite</span></code>, <code class="docutils literal notranslate"><span class="pre">DRAWBOT_SupplierSuite</span></code>, <code class="docutils literal notranslate"><span class="pre">DRAWBOT_SurfaceSuite</span></code>, <code class="docutils literal notranslate"><span class="pre">DRAWBOT_PathSuite</span></code>.</p>
<hr class="docutils" />
<div class="section" id="make-your-custom-ui-look-not-so-custom">
<h3>Make Your Custom UI Look Not So “Custom”<a class="headerlink" href="#make-your-custom-ui-look-not-so-custom" title="Permalink to this headline">¶</a></h3>
<p>Use the new <a class="reference internal" href="#effect-ui-events-custom-ui-and-drawbot-pf-effectcustomuioverlaythemesuite"><span class="std std-ref">PF_EffectCustomUIOverlayThemeSuite</span></a> to match the host application UI. Your users will thank you.</p>
<hr class="docutils" />
</div>
<div class="section" id="redrawing">
<span id="effect-ui-events-custom-ui-and-drawbot-redrawing"></span><h3>Redrawing<a class="headerlink" href="#redrawing" title="Permalink to this headline">¶</a></h3>
<p>In order to redraw a specific area of a pane, we recommend the following:</p>
<ol class="arabic simple">
<li>Call <code class="docutils literal notranslate"><span class="pre">PF_InvalidateRect</span></code> (from <a class="reference internal" href="index.html#effect-details-useful-utility-functions-pf-appsuite"><span class="std std-ref">PF_AppSuite</span></a>) from the effect. This will cause a lazy display redraw, and will update at the next available idle moment. This rect is in coordinates related to the associated pane. Using a NULL rect will update the entire pane.</li>
<li>Set the <a class="reference internal" href="index.html#effect-ui-events-pf-eventextra"><span class="std std-ref">event outflag</span></a> to <code class="docutils literal notranslate"><span class="pre">PF_EO_UPDATE_NOW</span></code>, which will cause an immediate draw event for the specified pane when the current event returns.</li>
</ol>
<p>If an effect needs to update more than one window at a time, it should set <code class="docutils literal notranslate"><span class="pre">PF_OutFlag_REFRESH_UI</span></code> (from <a class="reference internal" href="index.html#effect-basics-pf-outdata-pf-outflags"><span class="std std-ref">PF_OutFlags</span></a>), which will cause a redraw of the entire ECW, comp, and layer windows.</p>
</div>
<hr class="docutils" />
<div class="section" id="hidpi-and-retina-display-support">
<h3>HiDPI and Retina Display Support<a class="headerlink" href="#hidpi-and-retina-display-support" title="Permalink to this headline">¶</a></h3>
<p>To support HiDPI and Retina Displays, you can use offscreen images that are twice the size, and then use the <code class="docutils literal notranslate"><span class="pre">Transform</span></code> function from <a class="reference internal" href="#effect-ui-events-custom-ui-and-drawbot-drawbot-surfacesuite"><span class="std std-ref">Drawbot_SurfaceSuite</span></a> to scale the image down in half before drawing it.</p>
<hr class="docutils" />
</div>
<div class="section" id="pf-effectcustomuisuite">
<span id="effect-ui-events-custom-ui-and-drawbot-pf-effectcustomuisuite"></span><h3>PF_EffectCustomUISuite<a class="headerlink" href="#pf-effectcustomuisuite" title="Permalink to this headline">¶</a></h3>
<p>Enables an effect to get the drawing reference. This is the first call needed to use Drawbot.</p>
<div class="section" id="pf-effectcustomuisuite1">
<h4>PF_EffectCustomUISuite1<a class="headerlink" href="#pf-effectcustomuisuite1" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="41%" />
<col width="59%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Function</strong></th>
<th class="head"><strong>Purpose</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_GetDrawingReference</span></code></td>
<td><p class="first">Get the drawing reference.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_GetDrawingReference</span><span class="p">(</span>
  <span class="k">const</span> <span class="n">PF_ContextH</span>  <span class="n">effect_contextH</span><span class="p">,</span>
  <span class="n">DRAWBOT_DrawRef</span>    <span class="o">*</span><span class="n">referenceP0</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
</div>
</div>
<div class="section" id="drawbot-drawbotsuite">
<span id="effect-ui-events-custom-ui-and-drawbot-drawbot-drawbotsuite"></span><h3>Drawbot_DrawbotSuite<a class="headerlink" href="#drawbot-drawbotsuite" title="Permalink to this headline">¶</a></h3>
<p>Using the Drawbot reference, get the supplier and surface references.</p>
<div class="section" id="drawbot-drawbotsuite1">
<h4>Drawbot_DrawbotSuite1<a class="headerlink" href="#drawbot-drawbotsuite1" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="83%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Function</strong></th>
<th class="head"><strong>Purpose</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">GetSupplier</span></code></td>
<td><p class="first">Get the supplier reference.</p>
<p>Needed to use <a class="reference internal" href="#effect-ui-events-custom-ui-and-drawbot-drawbot-suppliersuite"><span class="std std-ref">Drawbot_SupplierSuite</span></a>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">GetSupplier</span><span class="p">(</span>
  <span class="n">DRAWBOT_DrawRef</span>      <span class="n">in_drawbot_ref</span><span class="p">,</span>
  <span class="n">DRAWBOT_SupplierRef</span>  <span class="o">*</span><span class="n">out_supplierP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">GetSurface</span></code></td>
<td><p class="first">Get the surface reference.</p>
<p>Needed to use <a class="reference internal" href="#effect-ui-events-custom-ui-and-drawbot-drawbot-surfacesuite"><span class="std std-ref">Drawbot_SurfaceSuite</span></a>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">GetSurface</span><span class="p">(</span>
  <span class="n">DRAWBOT_DrawRef</span>     <span class="n">in_drawbot_ref</span><span class="p">,</span>
  <span class="n">DRAWBOT_SurfaceRef</span>  <span class="o">*</span><span class="n">out_surfaceP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
</div>
</div>
<div class="section" id="drawbot-suppliersuite">
<span id="effect-ui-events-custom-ui-and-drawbot-drawbot-suppliersuite"></span><h3>Drawbot_SupplierSuite<a class="headerlink" href="#drawbot-suppliersuite" title="Permalink to this headline">¶</a></h3>
<p>Calls to create and release drawing tools, get default settings, and query drawing capabilities.</p>
<div class="section" id="drawbot-suppliersuite1">
<h4>Drawbot_SupplierSuite1<a class="headerlink" href="#drawbot-suppliersuite1" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="14%" />
<col width="86%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Function</strong></th>
<th class="head"><strong>Purpose</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">NewPen</span></code></td>
<td><p class="first">Create a new pen. Release this using <code class="docutils literal notranslate"><span class="pre">ReleaseObject</span></code> from <a class="reference internal" href="#effect-ui-events-custom-ui-and-drawbot-drawbot-suppliersuite"><span class="std std-ref">Drawbot_SupplierSuite</span></a>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">NewPen</span><span class="p">(</span>
  <span class="n">DRAWBOT_SupplierRef</span>      <span class="n">in_supplier_ref</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">DRAWBOT_ColorRGBA</span>  <span class="o">*</span><span class="n">in_colorP</span><span class="p">,</span>
  <span class="kt">float</span>                    <span class="n">in_size</span><span class="p">,</span>
  <span class="n">DRAWBOT_PenRef</span>           <span class="o">*</span><span class="n">out_penP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">NewBrush</span></code></td>
<td><p class="first">Create a new brush. Release this using <code class="docutils literal notranslate"><span class="pre">ReleaseObject</span></code> from <a class="reference internal" href="#effect-ui-events-custom-ui-and-drawbot-drawbot-suppliersuite"><span class="std std-ref">Drawbot_SupplierSuite</span></a>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">NewBrush</span><span class="p">(</span>
  <span class="n">DRAWBOT_SupplierRef</span>      <span class="n">in_supplier_ref</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">DRAWBOT_ColorRGBA</span>  <span class="o">*</span><span class="n">in_colorP</span><span class="p">,</span>
  <span class="n">DRAWBOT_BrushRef</span>         <span class="o">*</span><span class="n">out_brushP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">SupportsText</span></code></td>
<td><p class="first">Check if current supplier supports text.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">SupportsText</span><span class="p">(</span>
  <span class="n">DRAWBOT_SupplierRef</span>  <span class="n">in_supplier_ref</span><span class="p">,</span>
  <span class="n">DRAWBOT_Boolean</span>      <span class="o">*</span><span class="n">out_supports_textB</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">GetDefaultFontSize</span></code></td>
<td><p class="first">Get the default font size.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">GetDefaultFontSize</span><span class="p">(</span>
  <span class="n">DRAWBOT_SupplierRef</span>  <span class="n">in_supplier_ref</span><span class="p">,</span>
  <span class="kt">float</span>                <span class="o">*</span><span class="n">out_font_sizeF</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">NewDefaultFont</span></code></td>
<td><p class="first">Create a new font with default settings.</p>
<p>You can pass the default font size from <code class="docutils literal notranslate"><span class="pre">GetDefaultFontSize</span></code>.</p>
<p>Release this using <code class="docutils literal notranslate"><span class="pre">ReleaseObject</span></code> from <a class="reference internal" href="#effect-ui-events-custom-ui-and-drawbot-drawbot-suppliersuite"><span class="std std-ref">Drawbot_SupplierSuite</span></a>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">NewDefaultFont</span><span class="p">(</span>
  <span class="n">DRAWBOT_SupplierRef</span>  <span class="n">in_supplier_ref</span><span class="p">,</span>
  <span class="kt">float</span>                <span class="n">in_font_sizeF</span><span class="p">,</span>
  <span class="n">DRAWBOT_FontRef</span>      <span class="o">*</span><span class="n">out_fontP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">NewImageFromBuffer</span></code></td>
<td><p class="first">Create a new image from buffer passed to in_dataP.</p>
<p>Release this using <code class="docutils literal notranslate"><span class="pre">ReleaseObject</span></code> from <a class="reference internal" href="#effect-ui-events-custom-ui-and-drawbot-drawbot-suppliersuite"><span class="std std-ref">Drawbot_SupplierSuite</span></a>.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">NewImageFromBuffer</span><span class="p">(</span>
  <span class="n">DRAWBOT_SupplierRef</span>  <span class="n">in_supplier_ref</span><span class="p">,</span>
  <span class="kt">int</span>                  <span class="n">in_width</span><span class="p">,</span>
  <span class="kt">int</span>                  <span class="n">in_height</span><span class="p">,</span>
  <span class="kt">int</span>                  <span class="n">in_row_bytes</span><span class="p">,</span>
  <span class="n">DRAWBOT_PixelLayout</span>  <span class="n">in_pl</span><span class="p">,</span>
  <span class="k">const</span> <span class="kt">void</span>           <span class="o">*</span><span class="n">in_dataP</span><span class="p">,</span>
  <span class="n">DRAWBOT_ImageRef</span>     <span class="o">*</span><span class="n">out_imageP</span><span class="p">);</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">DRAWBOT_PixelLayout</span></code> can be one of the following:</p>
<blockquote class="last">
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">kDRAWBOT_PixelLayout_24RGB</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">kDRAWBOT_PixelLayout_24BGR</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">kDRAWBOT_PixelLayout_32RGB</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">ARGB</span></code> (A is ignored),</li>
<li><code class="docutils literal notranslate"><span class="pre">kDRAWBOT_PixelLayout_32BGR</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">BGRA</span></code> (A is ignored),</li>
<li><code class="docutils literal notranslate"><span class="pre">kDRAWBOT_PixelLayout_32ARGB_Straight</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">kDRAWBOT_PixelLayout_32ARGB_Premul</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">kDRAWBOT_PixelLayout_32BGRA_Straight</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">kDRAWBOT_PixelLayout_32BGRA_Premul</span></code></li>
</ul>
</div></blockquote>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">NewPath</span></code></td>
<td><p class="first">Create a new path. Release this using <code class="docutils literal notranslate"><span class="pre">ReleaseObject</span></code> from <a class="reference internal" href="#effect-ui-events-custom-ui-and-drawbot-drawbot-suppliersuite"><span class="std std-ref">Drawbot_SupplierSuite</span></a>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">NewPath</span><span class="p">(</span>
  <span class="n">DRAWBOT_SupplierRef</span>  <span class="n">in_supplier_ref</span><span class="p">,</span>
  <span class="n">DRAWBOT_PathRef</span>      <span class="o">*</span><span class="n">out_pathP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">SupportsPixelLayoutBGRA</span></code></td>
<td><p class="first">A given Drawbot implementation can support multiple channel orders, but will likely prefer one over the other.
Use the following four callbacks to get the preferred channel order for any API that takes a <code class="docutils literal notranslate"><span class="pre">DRAWBOT_PixelLayout</span></code> (e.g. <code class="docutils literal notranslate"><span class="pre">NewImageFromBuffer</span></code>).</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">SupportsPixelLayoutBGRA</span><span class="p">(</span>
  <span class="n">DRAWBOT_SupplierRef</span>  <span class="n">in_supplier_ref</span><span class="p">,</span>
  <span class="n">DRAWBOT_Boolean</span>      <span class="o">*</span><span class="n">out_supports_bgraPB</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PrefersPixelLayoutBGRA</span></code></td>
<td><div class="first last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PrefersPixelLayoutBGRA</span><span class="p">(</span>
  <span class="n">DRAWBOT_SupplierRef</span>  <span class="n">in_supplier_ref</span><span class="p">,</span>
  <span class="n">DRAWBOT_Boolean</span>      <span class="o">*</span><span class="n">out_prefers_bgraPB</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">SupportsPixelLayoutARGB</span></code></td>
<td><div class="first last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">SupportsPixelLayoutARGB</span><span class="p">(</span>
  <span class="n">DRAWBOT_SupplierRef</span>  <span class="n">in_supplier_ref</span><span class="p">,</span>
  <span class="n">DRAWBOT_Boolean</span>      <span class="o">*</span><span class="n">out_supports_argbPB</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PrefersPixelLayoutARGB</span></code></td>
<td><div class="first last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PrefersPixelLayoutARGB</span><span class="p">(</span>
  <span class="n">DRAWBOT_SupplierRef</span>  <span class="n">in_supplier_ref</span><span class="p">,</span>
  <span class="n">DRAWBOT_Boolean</span>      <span class="o">*</span><span class="n">out_prefers_argbPB</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">RetainObject</span></code></td>
<td><p class="first">Retain (increase reference count on) any object (pen, brush, path, etc). For example, it should be used when any object is copied and the copied object should be retained.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">RetainObject</span><span class="p">(</span>
  <span class="n">DRAWBOT_ObjectRef</span>  <span class="n">in_obj_ref</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">ReleaseObject</span></code></td>
<td><p class="first">Release (decrease reference count on) any object (pen, brush, path, etc). This function MUST be called for any object created using <code class="docutils literal notranslate"><span class="pre">NewXYZ()</span></code> from this suite.
Do not call this function on a <code class="docutils literal notranslate"><span class="pre">DRAWBOT_SupplierRef</span></code> and <code class="docutils literal notranslate"><span class="pre">DRAWBOT_SupplierRef</span></code>, since these are not created by the plug-in.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">ReleaseObject</span><span class="p">(</span>
  <span class="n">DRAWBOT_ObjectRef</span>  <span class="n">in_obj_ref</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
</div>
</div>
<div class="section" id="drawbot-surfacesuite">
<span id="effect-ui-events-custom-ui-and-drawbot-drawbot-surfacesuite"></span><h3>Drawbot_SurfaceSuite<a class="headerlink" href="#drawbot-surfacesuite" title="Permalink to this headline">¶</a></h3>
<p>Calls to draw on the surface, and to query and set drawing settings.</p>
<div class="section" id="drawbot-surfacesuite1">
<h4>Drawbot_SurfaceSuite1<a class="headerlink" href="#drawbot-surfacesuite1" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="83%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Function</strong></th>
<th class="head"><strong>Purpose</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PushStateStack</span></code></td>
<td><p class="first">Push the current surface state onto the stack. It should be popped to retrieve old state.
It is required to restore state if you are going to clip or transform a surface or change the interpolation or anti-aliasing policy.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PushStateStack</span><span class="p">(</span>
  <span class="n">DRAWBOT_SurfaceRef</span>  <span class="n">in_surface_ref</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PopStateStack</span></code></td>
<td><p class="first">Pop the last pushed surface state off the stack.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PopStateStack</span><span class="p">(</span>
  <span class="n">DRAWBOT_SurfaceRef</span>  <span class="n">in_surface_ref</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PaintRect</span></code></td>
<td><p class="first">Paint a rectangle with a color on the surface.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PaintRect</span><span class="p">(</span>
  <span class="n">DRAWBOT_SurfaceRef</span>       <span class="n">in_surface_ref</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">DRAWBOT_ColorRGBA</span>  <span class="o">*</span><span class="n">in_colorP</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">DRAWBOT_RectF32</span>    <span class="o">*</span><span class="n">in_rectPR</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">FillPath</span></code></td>
<td><p class="first">Fill a path using a brush and fill type.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">FillPath</span><span class="p">(</span>
  <span class="n">DRAWBOT_SurfaceRef</span>  <span class="n">in_surface_ref</span><span class="p">,</span>
  <span class="n">DRAWBOT_BrushRef</span>    <span class="n">in_brush_ref</span><span class="p">,</span>
  <span class="n">DRAWBOT_PathRef</span>     <span class="n">in_path_ref</span><span class="p">,</span>
  <span class="n">DRAWBOT_FillType</span>    <span class="n">in_fill_type</span><span class="p">);</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">DRAWBOT_FillType</span></code> is one of the following:</p>
<blockquote class="last">
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">kDRAWBOT_FillType_EvenOdd</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">kDRAWBOT_FillType_Winding</span></code></li>
</ul>
</div></blockquote>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">StrokePath</span></code></td>
<td><p class="first">Stroke a path using a pen.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">StrokePath</span><span class="p">(</span>
  <span class="n">DRAWBOT_SurfaceRef</span>  <span class="n">in_surface_ref</span><span class="p">,</span>
  <span class="n">DRAWBOT_PenRef</span>      <span class="n">in_pen_ref</span><span class="p">,</span>
  <span class="n">DRAWBOT_PathRef</span>     <span class="n">in_path_ref</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">Clip</span></code></td>
<td><p class="first">Clip the surface.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">Clip</span><span class="p">(</span>
  <span class="n">DRAWBOT_SurfaceRef</span>    <span class="n">in_surface_ref</span><span class="p">,</span>
  <span class="n">DRAWBOT_SupplierRef</span>   <span class="n">in_supplier_ref</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">DRAWBOT_Rect32</span>  <span class="o">*</span><span class="n">in_rectPR</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">GetClipBounds</span></code></td>
<td><p class="first">Get clip bounds.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">GetClipBounds</span><span class="p">(</span>
  <span class="n">DRAWBOT_SurfaceRef</span>  <span class="n">in_surface_ref</span><span class="p">,</span>
  <span class="n">DRAWBOT_Rect32</span>      <span class="o">*</span><span class="n">out_rectPR</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">IsWithinClipBounds</span></code></td>
<td><p class="first">Checks whether a rect is within the clip bounds.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">IsWithinClipBounds</span><span class="p">(</span>
  <span class="n">DRAWBOT_SurfaceRef</span>    <span class="n">in_surface_ref</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">DRAWBOT_Rect32</span>  <span class="o">*</span><span class="n">in_rectPR</span><span class="p">,</span>
  <span class="n">DRAWBOT_Boolean</span>       <span class="o">*</span><span class="n">out_withinPB</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">Transform</span></code></td>
<td><p class="first">Transform the last surface state.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">Transform</span><span class="p">(</span>
  <span class="n">DRAWBOT_SurfaceRef</span>       <span class="n">in_surface_ref</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">DRAWBOT_MatrixF32</span>  <span class="o">*</span><span class="n">in_matrixP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">DrawString</span></code></td>
<td><p class="first">Draw a string.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">DrawString</span><span class="p">(</span>
  <span class="n">DRAWBOT_SurfaceRef</span>       <span class="n">in_surface_ref</span><span class="p">,</span>
  <span class="n">DRAWBOT_BrushRef</span>         <span class="n">in_brush_ref</span><span class="p">,</span>
  <span class="n">DRAWBOT_FontRef</span>          <span class="n">in_font_ref</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">DRAWBOT_UTF16Char</span>  <span class="o">*</span><span class="n">in_stringP</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">DRAWBOT_PointF32</span>   <span class="o">*</span><span class="n">in_originP</span><span class="p">,</span>
  <span class="n">DRAWBOT_TextAlignment</span>    <span class="n">in_alignment_style</span><span class="p">,</span>
  <span class="n">DRAWBOT_TextTruncation</span>   <span class="n">in_truncation_style</span><span class="p">,</span>
  <span class="kt">float</span>                    <span class="n">in_truncation_width</span><span class="p">);</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">DRAWBOT_TextAlignment</span></code> is one of the following:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">kDRAWBOT_TextAlignment_Left</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">kDRAWBOT_TextAlignment_Center</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">kDRAWBOT_TextAlignment_Right</span></code></li>
</ul>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">DRAWBOT_TextTruncation</span></code> is one of the following:</p>
<blockquote class="last">
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">kDRAWBOT_TextTruncation_None</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">kDRAWBOT_TextTruncation_End</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">kDRAWBOT_TextTruncation_EndEllipsis</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">kDRAWBOT_TextTruncation_PathEllipsis</span></code></li>
</ul>
</div></blockquote>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">DrawImage</span></code></td>
<td><p class="first">Draw an image created using <code class="docutils literal notranslate"><span class="pre">NewImageFromBuffer()</span></code> on the surface. Alpha = [0.0f, 1.0f ].</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">DrawImage</span><span class="p">(</span>
  <span class="n">DRAWBOT_SurfaceRef</span>      <span class="n">in_surface_ref</span><span class="p">,</span>
  <span class="n">DRAWBOT_ImageRef</span>        <span class="n">in_image_ref</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">DRAWBOT_PointF32</span>  <span class="o">*</span><span class="n">in_originP</span><span class="p">,</span>
  <span class="kt">float</span>                   <span class="n">in_alpha</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">SetInterpolationPolicy</span></code></td>
<td><div class="first highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">SetInterpolationPolicy</span><span class="p">(</span>
  <span class="n">DRAWBOT_SurfaceRef</span>           <span class="n">in_surface_ref</span><span class="p">,</span>
  <span class="n">DRAWBOT_InterpolationPolicy</span>  <span class="n">in_interp</span><span class="p">);</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">DRAWBOT_InterpolationPolicy</span></code> is one of the following:</p>
<blockquote class="last">
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">kDRAWBOT_InterpolationPolicy_None</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">kDRAWBOT_InterpolationPolicy_Med</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">kDRAWBOT_InterpolationPolicy_High</span></code></li>
</ul>
</div></blockquote>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">GetInterpolationPolicy</span></code></td>
<td><div class="first last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">GetInterpolationPolicy</span><span class="p">(</span>
  <span class="n">DRAWBOT_SurfaceRef</span>           <span class="n">in_surface_ref</span><span class="p">,</span>
  <span class="n">DRAWBOT_InterpolationPolicy</span>  <span class="o">*</span><span class="n">out_interpP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">SetAntiAliasPolicy</span></code></td>
<td><div class="first highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">SetAntiAliasPolicy</span><span class="p">(</span>
  <span class="n">DRAWBOT_SurfaceRef</span>       <span class="n">in_surface_ref</span><span class="p">,</span>
  <span class="n">DRAWBOT_AntiAliasPolicy</span>  <span class="n">in_policy</span><span class="p">);</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">DRAWBOT_AntiAliasPolicy</span></code> is one of the following:</p>
<blockquote class="last">
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">kDRAWBOT_AntiAliasPolicy_None</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">kDRAWBOT_AntiAliasPolicy_Med</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">kDRAWBOT_AntiAliasPolicy_High</span></code></li>
</ul>
</div></blockquote>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">GetAntiAliasPolicy</span></code></td>
<td><div class="first last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">GetAntiAliasPolicy</span><span class="p">(</span>
  <span class="n">DRAWBOT_SurfaceRef</span>       <span class="n">in_surface_ref</span><span class="p">,</span>
  <span class="n">DRAWBOT_AntiAliasPolicy</span>  <span class="o">*</span><span class="n">out_policyP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">Flush</span></code></td>
<td><p class="first">Flush drawing. This is not always needed, and if overused, may cause excessive redrawing and flashing.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">Flush</span><span class="p">(</span>
  <span class="n">DRAWBOT_SurfaceRef</span>  <span class="n">in_surface_ref</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<hr class="docutils" />
<div class="section" id="drawbot-pathsuite">
<h3>Drawbot_PathSuite<a class="headerlink" href="#drawbot-pathsuite" title="Permalink to this headline">¶</a></h3>
<p>Calls to draw paths.</p>
<div class="section" id="drawbot-pathsuite1">
<h4>Drawbot_PathSuite1<a class="headerlink" href="#drawbot-pathsuite1" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Function</strong></th>
<th class="head"><strong>Purpose</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">MoveTo</span></code></td>
<td><p class="first">Move to a point.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">MoveTo</span><span class="p">(</span>
  <span class="n">DRAWBOT_PathRef</span>  <span class="n">in_path_ref</span><span class="p">,</span>
  <span class="kt">float</span>            <span class="n">in_x</span><span class="p">,</span>
  <span class="kt">float</span>            <span class="n">in_y</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">LineTo</span></code></td>
<td><p class="first">Add a line to the path.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">LineTo</span><span class="p">(</span>
  <span class="n">DRAWBOT_PathRef</span>  <span class="n">in_path_ref</span><span class="p">,</span>
  <span class="kt">float</span>            <span class="n">in_x</span><span class="p">,</span>
  <span class="kt">float</span>            <span class="n">in_y</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">BezierTo</span></code></td>
<td><p class="first">Add a cubic bezier to the path.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">BezierTo</span><span class="p">(</span>
  <span class="n">DRAWBOT_PathRef</span>         <span class="n">in_path_ref</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">DRAWBOT_PointF32</span>  <span class="o">*</span><span class="n">in_pt1P</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">DRAWBOT_PointF32</span>  <span class="o">*</span><span class="n">in_pt2P</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">DRAWBOT_PointF32</span>  <span class="o">*</span><span class="n">in_pt3P</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AddRect</span></code></td>
<td><p class="first">Add a rect to the path.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AddRect</span><span class="p">(</span>
  <span class="n">DRAWBOT_PathRef</span>        <span class="n">in_path_ref</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">DRAWBOT_RectF32</span>  <span class="o">*</span><span class="n">in_rectPR</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AddArc</span></code></td>
<td><p class="first">Add a arc to the path. Zero start degrees == 3 o’clock.
Sweep is clockwise. Units for angle are in degrees.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AddArc</span><span class="p">(</span>
  <span class="n">DRAWBOT_PathRef</span>         <span class="n">in_path_ref</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">DRAWBOT_PointF32</span>  <span class="o">*</span><span class="n">in_centerP</span><span class="p">,</span>
  <span class="kt">float</span>                   <span class="n">in_radius</span><span class="p">,</span>
  <span class="kt">float</span>                   <span class="n">in_start_angle</span><span class="p">,</span>
  <span class="kt">float</span>                   <span class="n">in_sweep</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">Close</span></code></td>
<td><p class="first">Close the path.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">Close</span><span class="p">(</span>
  <span class="n">DRAWBOT_PathRef</span>  <span class="n">in_path_ref</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
</div>
</div>
<div class="section" id="pf-effectcustomuioverlaythemesuite">
<span id="effect-ui-events-custom-ui-and-drawbot-pf-effectcustomuioverlaythemesuite"></span><h3>PF_EffectCustomUIOverlayThemeSuite<a class="headerlink" href="#pf-effectcustomuioverlaythemesuite" title="Permalink to this headline">¶</a></h3>
<p>This suite should be used for stroking and filling paths and vertices on the Composition and Layer Windows. After Effects is using this suite internally, and we have made it available to make custom UI look consistent across effects. The foreground/shadow colors are computed based on the app brightness level so that custom UI is always visible regardless of the application’s Brightness setting in the Preferences.</p>
<div class="section" id="pf-effectcustomuioverlaythemesuite1">
<h4>PF_EffectCustomUIOverlayThemeSuite1<a class="headerlink" href="#pf-effectcustomuioverlaythemesuite1" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="26%" />
<col width="74%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Function</strong></th>
<th class="head"><strong>Purpose</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_GetPreferredForegroundColor</span></code></td>
<td><p class="first">Get the preferred foreground color.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_GetPreferredForegroundColor</span><span class="p">(</span>
  <span class="n">DRAWBOT_ColorRGBA</span>  <span class="o">*</span><span class="n">foreground_colorP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_GetPreferredShadowColor</span></code></td>
<td><p class="first">Get the preferred shadow color.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_GetPreferredShadowColor</span><span class="p">(</span>
  <span class="n">DRAWBOT_ColorRGBA</span>  <span class="o">*</span><span class="n">shadow_colorP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_GetPreferredStrokeWidth</span></code></td>
<td><p class="first">Get the preferred foreground &amp; shadow stroke width.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_GetPreferredStrokeWidth</span><span class="p">(</span>
  <span class="kt">float</span>  <span class="o">*</span><span class="n">stroke_widthPF</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_GetPreferredVertexSize</span></code></td>
<td><p class="first">Get the preferred vertex size.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_GetPreferredVertexSize</span><span class="p">(</span>
  <span class="kt">float</span>  <span class="o">*</span><span class="n">vertex_sizePF</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_GetPreferredShadowOffset</span></code></td>
<td><p class="first">Get the preferred shadow offset.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_GetPreferredShadowOffset</span><span class="p">(</span>
  <span class="n">A_LPoint</span>  <span class="o">*</span><span class="n">shadow_offsetP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_StrokePath</span></code></td>
<td><p class="first">Stroke the path with the overlay theme foreground color.
Optionally draw the shadow using the overlay theme shadow color.
Uses overlay theme stroke width for stroking foreground and shadow strokes.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_StrokePath</span><span class="p">(</span>
  <span class="k">const</span> <span class="n">DRAWBOT_DrawRef</span>  <span class="n">drawbot_ref</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">DRAWBOT_PathRef</span>  <span class="n">path_ref</span>
  <span class="n">PF_Boolean</span>             <span class="n">draw_shadowB</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_FillPath</span></code></td>
<td><p class="first">Fills the path with overlay theme foreground color.
Optionally draw the shadow using the overlay theme shadow color.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_FillPath</span><span class="p">(</span>
  <span class="k">const</span> <span class="n">DRAWBOT_DrawRef</span>  <span class="n">drawbot_ref</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">DRAWBOT_PathRef</span>  <span class="n">path_ref</span>
  <span class="n">PF_Boolean</span>             <span class="n">draw_shadowB</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_FillVertex</span></code></td>
<td><p class="first">Fills a square vertex around the center point using the overlay theme foreground color and vertex size.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_FillVertex</span><span class="p">(</span>
  <span class="k">const</span> <span class="n">DRAWBOT_DrawRef</span>  <span class="n">drawbot_ref</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_FloatPoint</span>     <span class="o">*</span><span class="n">center_pointP</span>
  <span class="n">PF_Boolean</span>             <span class="n">draw_shadowB</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<span id="document-effect-ui-events/ui-callbacks"></span><div class="section" id="ui-callbacks">
<span id="effect-ui-events-ui-callbacks"></span><h2>UI Callbacks<a class="headerlink" href="#ui-callbacks" title="Permalink to this headline">¶</a></h2>
<p>After Effects provides callbacks for transposing between coordinate systems, and obtaining OS-specific information about drawing contexts, without guesswork or asking the OS directly. Use these callbacks! Pointers to these callbacks are provided in PF_EventCallbacks. Use the macros in AE_EffectUI.h and AE_EffectCB.h to access these routines.</p>
<p>It is possible to build a functioning plug-in which utilizes a custom UI without implementing the coordinate system transposition callbacks. However, the moment a user zooms into the layer panel or rotates a layer, your plug-in will behave badly. We added these macros and callbacks so that custom user interfaces could be easily integrated into the After Effects UI, without inflicting user interface overhead on developers. Again, please use them!</p>
<p>These macros default the refcon and context handle for simplicity. The refcon assumes you have a local variable named “extra”. The default context is the current context. These default parameters are defined in the PF_EventCallbacks structure (in AE_EffectUI.h). You can override the defaults by accessing the callbacks through the PF_EventExtra structure. We don’t recommend (or support) modification of the macros in the header file. Don’t do it!</p>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Function</strong></th>
<th class="head"><strong>Purpose</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">layer_to_comp</span></code></td>
<td><p class="first">Transforms layer panel coordinates to the composition panel coordinates.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_Err</span> <span class="nf">layer_to_comp</span> <span class="p">(</span>
  <span class="kt">void</span>           <span class="o">*</span><span class="n">refcon</span><span class="p">,</span>
  <span class="n">PF_ContextH</span>    <span class="n">context</span><span class="p">,</span>
  <span class="n">A_long</span>         <span class="n">curr_time</span><span class="p">,</span>
  <span class="n">A_long</span>         <span class="n">time_scale</span><span class="p">,</span>
  <span class="n">PF_FixedPoint</span>  <span class="o">*</span><span class="n">pt</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">comp_to_layer</span></code></td>
<td><p class="first">Transforms composition panel coordinates to the layer panel coordinates.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_Err</span> <span class="nf">comp_to_layer</span> <span class="p">(</span>
  <span class="kt">void</span>           <span class="o">*</span><span class="n">refcon</span><span class="p">,</span>
  <span class="n">PF_ContextH</span>    <span class="n">context</span><span class="p">,</span>
  <span class="n">A_long</span>         <span class="n">curr_time</span><span class="p">,</span>
  <span class="n">A_long</span>         <span class="n">time_scale</span><span class="p">,</span>
  <span class="n">PF_FixedPoint</span>  <span class="o">*</span><span class="n">pt</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">get_comp2layer_xform</span></code></td>
<td><p class="first">Returns the matrix used to convert from the composition panel to the layer panel.
If <code class="docutils literal notranslate"><span class="pre">*exists</span></code> returns <code class="docutils literal notranslate"><span class="pre">FALSE</span></code>, the matrix cannot be computed because the layer scales to zero.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_Err</span> <span class="nf">get_comp2layer_xform</span> <span class="p">(</span>
  <span class="kt">void</span>            <span class="o">*</span><span class="n">refcon</span><span class="p">,</span>
  <span class="n">PF_ContextH</span>     <span class="n">context</span><span class="p">,</span>
  <span class="n">A_long</span>          <span class="n">curr_time</span><span class="p">,</span>
  <span class="kt">long</span>            <span class="n">time_scale</span><span class="p">,</span>
  <span class="kt">long</span>            <span class="o">*</span><span class="n">exists</span><span class="p">,</span>
  <span class="n">PF_FloatMatrix</span>  <span class="o">*</span><span class="n">comp2layer</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">get_layer2comp_xform</span></code></td>
<td><p class="first">Returns the transformation matrix used to convert from the layer panel to the composition panel.
This always exists.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_Err</span> <span class="nf">get_layer2comp_xform</span> <span class="p">(</span>
  <span class="kt">void</span>            <span class="o">*</span><span class="n">refcon</span><span class="p">,</span>
  <span class="n">PF_ContextH</span>     <span class="n">context</span><span class="p">,</span>
  <span class="n">A_long</span>          <span class="n">curr_time</span><span class="p">,</span>
  <span class="n">A_long</span>          <span class="n">time_scale</span><span class="p">,</span>
  <span class="n">PF_FloatMatrix</span>  <span class="o">*</span><span class="n">layer2comp</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">source_to_frame</span></code></td>
<td><p class="first">Transforms the source coordinates in the current context to screen coordinates.
Screen (frame) coordinates are affected by the current zoom level.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_Err</span> <span class="nf">source_to_frame</span><span class="p">(</span>
  <span class="kt">void</span>           <span class="o">*</span><span class="n">refcon</span><span class="p">,</span>
  <span class="n">PF_ContextH</span>    <span class="n">context</span><span class="p">,</span>
  <span class="n">PF_FixedPoint</span>  <span class="o">*</span><span class="n">pt</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">frame_to_source</span></code></td>
<td><p class="first">Transforms the screen coordinates identified by <code class="docutils literal notranslate"><span class="pre">*pt</span></code> to the source coordinates of the current context.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_Err</span> <span class="nf">frame_to_source</span><span class="p">(</span>
  <span class="kt">void</span>           <span class="o">*</span><span class="n">refcon</span><span class="p">,</span>
  <span class="n">PF_ContextH</span>    <span class="n">context</span><span class="p">,</span>
  <span class="n">PF_FixedPoint</span>  <span class="o">*</span><span class="n">pt</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_GET_PLATFORM_DATA</span></code></td>
<td><p class="first">Retrieves platform-specific data. For plug-ins loaded with localized resource files,
<code class="docutils literal notranslate"><span class="pre">PF_PlatData_RES_FILE_PATH</span></code> will point to the external file, not the plug-in file.
Use <code class="docutils literal notranslate"><span class="pre">PF_PlatData_EXE_FILE_PATH</span></code> if you want the path of your plug-in.</p>
<p>Starting in CS6, use <code class="docutils literal notranslate"><span class="pre">PF_PlatData_EXE_FILE_PATH_W</span></code> and <code class="docutils literal notranslate"><span class="pre">PF_PlatData_RES_FILE_PATH_W</span></code>
instead of the old non-wide calls.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PF_Err</span> <span class="nf">PF_GET_PLATFORM_DATA</span> <span class="p">(</span>
  <span class="n">PF_PlatDataID</span>  <span class="n">which</span><span class="p">,</span>
  <span class="kt">void</span>           <span class="o">*</span><span class="n">ppData</span><span class="p">);</span>
</pre></div>
</div>
<p>PF_PlatDataID can have the following values:</p>
<blockquote class="last">
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">PF_PlatData_MAIN_WND</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PF_PlatData_EXE_FILE_PATH_DEPRECATED</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PF_PlatData_RES_FILE_PATH_DEPRECATED</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PF_PlatData_RES_REFNUM</span></code> // macOS</li>
<li><code class="docutils literal notranslate"><span class="pre">PF_PlatData_RES_DLLINSTANCE</span></code> // Win</li>
<li><code class="docutils literal notranslate"><span class="pre">PF_PlatData_BUNDLE_REF</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PF_PlatData_EXE_FILE_PATH_W</span></code> // new CS6</li>
<li><code class="docutils literal notranslate"><span class="pre">PF_PlatData_RES_FILE_PATH_W</span></code> // new CS6</li>
</ul>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</div>
<span id="document-effect-ui-events/tips-and-tricks"></span><div class="section" id="tips-tricks">
<span id="effect-ui-events-tips-and-tricks"></span><h2>Tips &amp; Tricks<a class="headerlink" href="#tips-tricks" title="Permalink to this headline">¶</a></h2>
<div class="section" id="ui-performance">
<h3>UI Performance<a class="headerlink" href="#ui-performance" title="Permalink to this headline">¶</a></h3>
<p>Experiment with <code class="docutils literal notranslate"><span class="pre">PF_EO_ALWAYS_UPDATE</span></code> and <code class="docutils literal notranslate"><span class="pre">PF_EO_NEVER_UPDATE</span></code> from <a class="reference internal" href="index.html#effect-ui-events-pf-eventextra"><span class="std std-ref">PF_EventExtra</span></a>, to find a happy medium between responsiveness and accuracy.</p>
<p>On macOS, the foreground and background colors are not set to white and black when custom UI draw events are sent.</p>
<p>This is by design; you don’t have to change the background color when you’re drawing directly into our context.</p>
</div>
<hr class="docutils" />
<div class="section" id="how-deep-are-my-pixels">
<h3>How Deep Are My Pixels?<a class="headerlink" href="#how-deep-are-my-pixels" title="Permalink to this headline">¶</a></h3>
<p>There is no way to determine the bit depth of the layer(s) being processed during events.</p>
<p>However, you can cache the last-known pixel depth in your sequence data.</p>
<p>Better still, you can have your fixed and float slider parameters rely on the <code class="docutils literal notranslate"><span class="pre">PF_ValueDisplayFlags</span></code> in their parameter definitions; if you use this, it will have your parameters’ UI respond to the user’s preferences for pixel display values.</p>
<p>You can also check the depth of your input world during <code class="docutils literal notranslate"><span class="pre">PF_Cmd_RENDER</span></code>.</p>
</div>
<hr class="docutils" />
<div class="section" id="arbitrary-data">
<h3>Arbitrary Data<a class="headerlink" href="#arbitrary-data" title="Permalink to this headline">¶</a></h3>
<p>An arbitrary data parameter is an excellent way to manage your custom UI.</p>
<p>Store state, preference, and last-item-used information in an arb, and you’ll always be able to recover it.</p>
<p>After Effects manages parameters with a much richer message stream than custom UIs.</p>
</div>
<hr class="docutils" />
<div class="section" id="custom-ui-implementation-for-color-sampling-using-keyframes">
<h3>Custom UI Implementation for Color Sampling, Using Keyframes<a class="headerlink" href="#custom-ui-implementation-for-color-sampling-using-keyframes" title="Permalink to this headline">¶</a></h3>
<p>A plug-in may want to get a color from a layer within a composition. The user would use the eyedropper associated with a color parameter, or the plug-in’s custom composition panel UI, to select the point.</p>
<p>During the click event, the plug-in converts the coordinates of the click into layer space, and stores that information in sequence data. It then forces a re-render, during which it has access to the color of the layer point corresponding to the stored coordinates.</p>
<p>The plug-in stores the color value in sequence data, and cancels the render, requesting a redraw of the affected parameter(s).</p>
<p>Finally, during the draw, the plug-in adds appropriate keyframes to its color parameter stream using the <a class="reference internal" href="index.html#aegps-aegp-suites-keyframe-suite"><span class="std std-ref">AEGP_KeyframeSuite</span></a>.</p>
<p>Yes, this means the effect needs to <a class="reference internal" href="index.html#aegps-cheating-effect-usage-of-aegp-suites"><span class="std std-ref">Cheating Effect Usage of AEGP Suites</span></a> and use the AEGP API.</p>
</div>
</div>
</div>
<div class="toctree-wrapper compound">
<span id="document-audio/audio"></span><div class="section" id="audio">
<span id="audio-audio"></span><h2>Audio<a class="headerlink" href="#audio" title="Permalink to this headline">¶</a></h2>
<p>After Effects can process audio encoded at up to 96Khz, floating point (24-bit) resolution, mono or stereo.</p>
<p>We provide high quality resampling.</p>
<p><code class="docutils literal notranslate"><span class="pre">PF_InData</span></code> and <code class="docutils literal notranslate"><span class="pre">PF_OutData</span></code> both contain information specific to audio handling.</p>
<p>While audio isn’t the focus of After Effects’ feature set, it is an important component of compositing and pre-visualization workflows.</p>
<p>Also, several engineers on our team are audio fanatics, and ensure that our audio effects (and the whole audio pipeline) are of the highest quality.</p>
</div>
<span id="document-audio/global-outflags"></span><div class="section" id="global-outflags">
<span id="audio-global-outflags"></span><h2>Global Outflags<a class="headerlink" href="#global-outflags" title="Permalink to this headline">¶</a></h2>
<p>All audio effects must set either <code class="docutils literal notranslate"><span class="pre">PF_OutFlag_AUDIO_EFFECT_TOO</span></code> or <code class="docutils literal notranslate"><span class="pre">PF_OutFlag_AUDIO_EFFECT_ONLY</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">PF_OutFlag_I_USE_AUDIO</span></code> is for visual effects that check out audio data, but don’t modify it.</p>
<p><code class="docutils literal notranslate"><span class="pre">PF_OutFlag_AUDIO_FLOAT_ONLY</span></code>, <code class="docutils literal notranslate"><span class="pre">PF_OutFlag_AUDIO_IIR</span></code> and <code class="docutils literal notranslate"><span class="pre">PF_OutFlag_I_SYNTHESIZE_AUDIO</span></code> provide greater control over audio output (see <a class="reference internal" href="index.html#effect-basics-pf-outdata-pf-outflags"><span class="std std-ref">PF_OutFlags</span></a> for more details).</p>
</div>
<span id="document-audio/audio-data-structures"></span><div class="section" id="audio-data-structures">
<span id="audio-audio-data-structures"></span><h2>Audio Data Structures<a class="headerlink" href="#audio-data-structures" title="Permalink to this headline">¶</a></h2>
<p>The following data types are used by After Effects to describe audio data.</p>
<table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="83%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Structure</strong></th>
<th class="head"><strong>Description</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_SoundFormat</span></code></td>
<td>Indicates whether the audio is in unsigned pulse code modulation (PCM), signed PCM, or floating point format.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_SoundSampleSize</span></code></td>
<td>Samples are in 1, 2, or 4 byte format.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_SoundChannels</span></code></td>
<td>Indicates whether the audio is mono or stereo.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_SoundFormatInfo</span></code></td>
<td>Contains the sampling rate, number of channels, sample size, and format of the audio to which it refers.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PF_SoundWorld</span></code></td>
<td>Use <code class="docutils literal notranslate"><span class="pre">PF_SoundWorlds</span></code> to represent audio.
In addition to a <code class="docutils literal notranslate"><span class="pre">PF_SoundFormatInfo</span></code>, they contain the length of the audio, and a pointer to the actual audio data.</td>
</tr>
</tbody>
</table>
<p><code class="docutils literal notranslate"><span class="pre">PF_SoundFormat</span></code>, <code class="docutils literal notranslate"><span class="pre">PF_SoundSampleSize</span></code>, and <code class="docutils literal notranslate"><span class="pre">PF_SoundChannels</span></code> are all contained within a <code class="docutils literal notranslate"><span class="pre">PF_SoundFormatInfo</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">PF_SoundWorlds</span></code> contain a <code class="docutils literal notranslate"><span class="pre">PF_SoundFormatInfo</span></code>, and further instance-specific information.</p>
</div>
<span id="document-audio/audio-specific-float-slider-variables"></span><div class="section" id="audio-specific-float-slider-variables">
<span id="audio-audio-specific-float-slider-variables"></span><h2>Audio-Specific Float Slider Variables<a class="headerlink" href="#audio-specific-float-slider-variables" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">PF_Param_FLOAT_SLIDERs</span></code> contain several parameters not found in other sliders; flags, phase, and curve tolerance.</p>
<hr class="docutils" />
<div class="section" id="flags">
<h3>Flags<a class="headerlink" href="#flags" title="Permalink to this headline">¶</a></h3>
<p>The only flag available is <code class="docutils literal notranslate"><span class="pre">PF_FSliderFlag_WANT_PHASE</span></code>.</p>
<p>This registers the effect to receive updated phase information from After Effects during audio rendering.</p>
<p>To understand what this flag does, turn it off and check your output.</p>
</div>
<hr class="docutils" />
<div class="section" id="phase">
<h3>Phase<a class="headerlink" href="#phase" title="Permalink to this headline">¶</a></h3>
<p>This is where the requested phase value is stored.</p>
</div>
<hr class="docutils" />
<div class="section" id="curve-tolerance">
<h3>Curve Tolerance<a class="headerlink" href="#curve-tolerance" title="Permalink to this headline">¶</a></h3>
<p>Curve tolerance is used by After Effects to subdivide the audio effects’ time-variant parameters. Set this to zero for default behavior (or for non-audio <code class="docutils literal notranslate"><span class="pre">FLOAT_SLIDER</span></code> parameters).</p>
</div>
<hr class="docutils" />
<div class="section" id="what-s-zero-really">
<h3>What’s Zero, Really?<a class="headerlink" href="#what-s-zero-really" title="Permalink to this headline">¶</a></h3>
<p>When amplitude is zero, After Effects is at -192db.</p>
</div>
</div>
<span id="document-audio/accessing-audio-data"></span><div class="section" id="accessing-audio-data">
<span id="audio-accessing-audio-data"></span><h2>Accessing Audio Data<a class="headerlink" href="#accessing-audio-data" title="Permalink to this headline">¶</a></h2>
<p>Use <code class="docutils literal notranslate"><span class="pre">PF_CHECKOUT_LAYER_AUDIO</span></code> from <a class="reference internal" href="index.html#effect-details-interaction-callback-functions-interaction-callbacks"><span class="std std-ref">Interaction Callbacks</span></a> to retrieve an audio layer.</p>
<p>This layer is opaque; use <code class="docutils literal notranslate"><span class="pre">PF_GET_AUDIO_DATA</span></code> to access specific details about that audio.</p>
<p>As with pixel data, it’s important that you check in the audio as soon as possible.</p>
<p>If your effect requires as input a time span different from the output time span, update the <code class="docutils literal notranslate"><span class="pre">startsampL</span></code> and <code class="docutils literal notranslate"><span class="pre">endsampL</span></code> field in <code class="docutils literal notranslate"><span class="pre">PF_OutData</span></code> during <code class="docutils literal notranslate"><span class="pre">PF_Cmd_AUDIO_SETUP</span></code> from <a class="reference internal" href="index.html#effect-basics-command-selectors-frame-selectors"><span class="std std-ref">Frame Selectors</span></a>.</p>
<hr class="docutils" />
<div class="section" id="extending-audio-clips">
<h3>Extending Audio Clips<a class="headerlink" href="#extending-audio-clips" title="Permalink to this headline">¶</a></h3>
<p>You cannot extend the length of an audio clip through the API.</p>
<p>However, it is a relatively simple matter for the user to extend the length of the clip before applying your effect. Apply time remapping to the layer and simply extend the out point.</p>
<p>If you’re adding a delay effect to a sounds clip, you’d want to allow it time to fade away instead of truncating the sound at the original end point.</p>
<p>Document the steps users should take when applying your effect.</p>
</div>
</div>
<span id="document-audio/audio-considerations"></span><div class="section" id="audio-considerations">
<span id="audio-audio-considerations"></span><h2>Audio Considerations<a class="headerlink" href="#audio-considerations" title="Permalink to this headline">¶</a></h2>
<p>The After Effects audio API supports sampling rates up to 96Khz, in as many formats as possible.</p>
<p>In the same way that plug-ins’ pixel manipulation functions should remain “resolution independent”, audio plug-ins should be sample rate- and bit depth-independent.</p>
<p>Your plug-in can’t know anything about the final output format of the audio in question; it might get stretched, normalized, truncated, or phase-inverted between the application of your plug-in and the final output.</p>
<p>Audio filters encounter different issues than do image filters.</p>
<p>Investigate the SDK sample for one possible implementation of audio rendering.</p>
</div>
</div>
<div class="toctree-wrapper compound">
<span id="document-aegps/aegps"></span><div class="section" id="aegps">
<span id="aegps-aegps"></span><h2>AEGPs<a class="headerlink" href="#aegps" title="Permalink to this headline">¶</a></h2>
<p>The After Effects General Plug-in (AEGP) API is powerful and broad, offering functionality beyond what is available to effect plug-ins.</p>
<p>To users, AEGPs appear to be part of After Effects.</p>
<p>They can add, intercept, and trigger menu commands, access the keyframe database, and register functions as part of After Effects’ internal messaging.</p>
<p>AEGPs can add and remove items to projects and compositions, add and remove filters and keyframes.</p>
<p>Once its command is triggered, AEGPs use the numerous PICA function suites (described in this section) to work with every After Effects item.</p>
<p>AEGPs can publish function suites for plug-ins, manipulate all project elements, change interpretations, replace files and determine which external files are used to render a project.</p>
<p>There are several specialized types of AEGP; Keyframers, Artisans, and I/O modules (AEIOs). They are all still AEGPs, but have access to specialized messaging streams, for which they register with After Effects.</p>
</div>
<span id="document-aegps/overview"></span><div class="section" id="overview">
<span id="aegps-overview"></span><h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>AEGPs use Plug-In Component Architecture (PICA) function suites to access all functionality.</p>
<p>They may also publish their own function suites, for use by effect plug-ins (since plug-in load order varies, AEGPs can’t depend on suites not provided by After Effects).</p>
<p>AEGPs can also request a suite and, if it’s not present, provide replacement functionality themselves.</p>
<hr class="docutils" />
<div class="section" id="aegp-communication-with-after-effects">
<h3>AEGP Communication With After Effects<a class="headerlink" href="#aegp-communication-with-after-effects" title="Permalink to this headline">¶</a></h3>
<p>For effect plug-ins, all communication with After Effects occurs through a single entry point function. This is not the case with AEGPs.</p>
<p>While After Effects <em>does</em> call the entry point function designated in the AEGP’s PiPL (which is still required), all subsequent communication between After Effects and AEGPs is handled by the hook functions the AEGP registers.</p>
<p>This registration must be performed from within the plug-in’s entry function, using the <a class="reference internal" href="index.html#aegps-aegp-suites-register-suite"><span class="std std-ref">Register Suite</span></a>.</p>
</div>
<hr class="docutils" />
<div class="section" id="different-tasks-same-api">
<h3>Different Tasks, Same API<a class="headerlink" href="#different-tasks-same-api" title="Permalink to this headline">¶</a></h3>
<p>AEGPs work in the same manner, regardless of specialization.</p>
<p>They can be simple, just <a class="reference internal" href="index.html#aegps-implementation-adding-a-menu-item"><span class="std std-ref">adding one menu item</span></a> to trigger an external application, or complex like Artisans.</p>
<p>While any plug-in can access any function suite, only plug-ins of the appropriate type will have access to all the required parameters.</p>
<p>Only Artisans will have render contexts, and only AEIO plug-ins will receive input and output specifications; messaging is dependent upon which hook functions are registered.</p>
</div>
</div>
<span id="document-aegps/data-types"></span><div class="section" id="data-types">
<span id="aegps-data-types"></span><h2>Data Types<a class="headerlink" href="#data-types" title="Permalink to this headline">¶</a></h2>
<p>Whenever possible, After Effects presents plug-ins with opaque data types, and provides accessor functions for manipulating them. For example, video frames are represented using the opaque AEGP_WorldH. While in some cases it might be more efficient to simply modify the underlying structure, by maintaining the opaqueness of the data types we allow for changes to our implementation without making you recompile (and redistribute) your plug-ins.</p>
<hr class="docutils" />
<div class="section" id="aegp-api-data-types">
<h3>AEGP API Data Types<a class="headerlink" href="#aegp-api-data-types" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="55%" />
<col width="34%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Type</strong></th>
<th class="head"><strong>Describes</strong></th>
<th class="head"><strong>Manage Using</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_MemHandle</span></code></td>
<td>This structure contains more than just the referenced memory. So it should not be dereferenced directly.
Use <code class="docutils literal notranslate"><span class="pre">AEGP_LockMemHandle</span></code> in the AEGP Memory Suite to get a pointer to the memory referenced by the <code class="docutils literal notranslate"><span class="pre">AEGP_MemHandle</span></code>.
And of course, unlock it when you’re done.</td>
<td><a class="reference internal" href="index.html#aegps-aegp-suites-memory-suite"><span class="std std-ref">AEGP Memory Suite</span></a></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_ProjectH</span></code></td>
<td>The current After Effects project. Projects are a set of elements arranged hierarchically in a tree to preserve semantic relationships.
Interior nodes of the tree are folders.
As of CS6, there will only ever be one open project.</td>
<td><a class="reference internal" href="index.html#aegps-aegp-suites-project-suite"><span class="std std-ref">AEGP Project Suite</span></a></td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_ItemH</span></code></td>
<td>An abstraction describing any element of a project, including folders. An item is anything that can be selected.
Since multiple object types can be selected, we treat them as AEGP_ItemHs until more specificity is required.</td>
<td><a class="reference internal" href="index.html#aegps-aegp-suites-item-suite"><span class="std std-ref">AEGP Item Suite</span></a></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_Collection2H</span></code></td>
<td>A set of selected items.</td>
<td><a class="reference internal" href="index.html#aegps-aegp-suites-collection-suite"><span class="std std-ref">AEGP Collection Suite</span></a></td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_CompH</span></code></td>
<td>A composition is a sequence of renderable items that, together, produce output.
A composition exists over a time interval.
Multiple compositions can exist within one project.</td>
<td><a class="reference internal" href="index.html#aegps-aegp-suites-composition-suite"><span class="std std-ref">AEGP Composition Suite</span></a></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_FootageH</span></code></td>
<td>An item that can be rendered. Folders and compositions are the only items that are not footage.</td>
<td><a class="reference internal" href="index.html#aegps-aegp-suites-footage-suite"><span class="std std-ref">AEGP Footage Suite</span></a></td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_LayerH</span></code></td>
<td><p class="first">An element of a composition. Layers are rendered in sequence, which allows for occlusions.
Solids, text, paint, cameras, lights, images, and image sequences are all represented as layers.</p>
<p class="last">Layers may be defined over sub-intervals of the composition’s time interval.</p>
</td>
<td><a class="reference internal" href="index.html#aegps-aegp-suites-layer-suite"><span class="std std-ref">AEGP Layer Suite</span></a></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_WorldH</span></code></td>
<td>A frame of pixels.</td>
<td><a class="reference internal" href="index.html#aegps-aegp-suites-world-suite"><span class="std std-ref">AEGP World Suite</span></a></td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_EffectRefH</span></code></td>
<td>An effect applied to a layer. An effect is a function that takes as its argument a layer (and possibly other parameters)
and returns an altered version of the layer for rendering.</td>
<td><a class="reference internal" href="index.html#aegps-aegp-suites-effect-suite"><span class="std std-ref">AEGP Effect Suite</span></a></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_StreamRefH</span></code></td>
<td>Any <a class="reference internal" href="index.html#aegps-aegp-suites-diving-into-streams"><span class="std std-ref">parameter stream</span></a> attached to a layer, in a composition.
See the description of <code class="docutils literal notranslate"><span class="pre">AEGP_GetNewLayerStream</span></code> from <a class="reference internal" href="index.html#aegps-aegp-suites-aegp-streamsuite"><span class="std std-ref">AEGP_StreamSuite5</span></a> for a full list of stream types.</td>
<td><a class="reference internal" href="index.html#aegps-aegp-suites-stream-suite"><span class="std std-ref">AEGP Stream Suite</span></a>,
<a class="reference internal" href="index.html#aegps-aegp-suites-dynamic-stream-suite"><span class="std std-ref">AEGP Dynamic Stream Suite</span></a>
<a class="reference internal" href="index.html#aegps-aegp-suites-keyframe-suite"><span class="std std-ref">AEGP Keyframe Suite</span></a></td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_MaskRefH</span></code></td>
<td>A mask applied to a layer. An AEGP_MaskRefH is used to access details about the mask stream, not the specific points which constitute the mask.
A mask is a rasterized path (sequence of vertices) that partitions a layer into two pieces, allowing each to be rendered differently.</td>
<td><a class="reference internal" href="index.html#aegps-aegp-suites-mask-suite"><span class="std std-ref">AEGP Mask Suite</span></a></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_MaskOutlineValH</span></code></td>
<td>The specific points which constitute the mask.
The points in a mask outline are ordered, and the mask need not be closed.</td>
<td><a class="reference internal" href="index.html#aegps-aegp-suites-mask-outline-suite"><span class="std std-ref">AEGP Mask Outline Suite</span></a></td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_TextDocumentH</span></code></td>
<td>Represents the actual text associated with a text layer.</td>
<td><a class="reference internal" href="index.html#aegps-aegp-suites-text-document-suite"><span class="std std-ref">AEGP Text Document Suite</span></a></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_TextOutlinesH</span></code></td>
<td>A reference to all the paths that make up the outlines of a given text layer.</td>
<td><a class="reference internal" href="index.html#aegps-aegp-suites-text-layer-suite"><span class="std std-ref">AEGP Text Layer Suite</span></a></td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_MarkerVal</span></code></td>
<td>The data associated with a given timeline marker.</td>
<td><a class="reference internal" href="index.html#aegps-aegp-suites-marker-suite"><span class="std std-ref">AEGP Marker Suite</span></a></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_PersistentBlobH</span></code></td>
<td>A “blob” of data containing the current preferences.</td>
<td><a class="reference internal" href="index.html#aegps-aegp-suites-persistent-data-suite"><span class="std std-ref">AEGP Persistent Data Suite</span></a></td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_RenderOptionsH</span></code></td>
<td>The settings associated with a render request.</td>
<td><a class="reference internal" href="index.html#aegps-aegp-suites-render-options-suite"><span class="std std-ref">AEGP Render Options Suite</span></a></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_LayerRenderOptionsH</span></code></td>
<td>The settings associated with a layer render request.</td>
<td><a class="reference internal" href="index.html#aegps-aegp-suites-aegp-layerrenderoptionssuite"><span class="std std-ref">AEGP Layer Render Options Suite</span></a></td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_FrameReceiptH</span></code></td>
<td>A reference to a rendered frame.</td>
<td><a class="reference internal" href="index.html#aegps-aegp-suites-render-suite"><span class="std std-ref">AEGP Render Suite</span></a></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_RQItemRefH</span></code></td>
<td>An item in the render queue.</td>
<td><a class="reference internal" href="index.html#aegps-aegp-suites-render-queue-suite"><span class="std std-ref">AEGP Render Queue Suite</span></a>
<a class="reference internal" href="index.html#aegps-aegp-suites-render-queue-item-suite"><span class="std std-ref">AEGP Render Queue Item Suite</span></a></td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_OutputModuleRefH</span></code></td>
<td>An output module, attached to a specific AEGP_RQItemRef in the render queue.</td>
<td><a class="reference internal" href="index.html#aegps-aegp-suites-output-module-suite"><span class="std std-ref">AEGP Output Module Suite</span></a></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SoundDataH</span></code></td>
<td>The <a class="reference internal" href="index.html#aegps-aegp-suites-sound-data-suite"><span class="std std-ref">audio settings</span></a> used for a given layer.</td>
<td><a class="reference internal" href="index.html#aegps-aegp-suites-sound-data-suite"><span class="std std-ref">AEGP Sound Data Suite</span></a></td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_RenderLayerContextH</span></code></td>
<td>State information at the time of a render request, sent to an Artisan by After Effects.</td>
<td><a class="reference internal" href="index.html#artisans-artisan-data-types-aegp-canvassuite"><span class="std std-ref">AEGP Canvas Suite</span></a></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_RenderReceiptH</span></code></td>
<td>Used by Artisans when rendering.</td>
<td><a class="reference internal" href="index.html#artisans-artisan-data-types-aegp-canvassuite"><span class="std std-ref">AEGP Canvas Suite</span></a></td>
</tr>
</tbody>
</table>
</div>
<hr class="docutils" />
<div class="section" id="nasty-brutish-and-short">
<h3>Nasty, Brutish, and Short<a class="headerlink" href="#nasty-brutish-and-short" title="Permalink to this headline">¶</a></h3>
<p>Information about layers, streams, and many other items doesn’t survive long; it’s often invalidated by user activity.</p>
<p>Anything that modifies the quantity (not quality) of items will invalidate references to those items; adding a keyframe to a stream invalidates references to that stream, but forcing a layer to be rendered doesn’t invalidate references to it. Do not cache layer pixels.</p>
<p>Caching references between calls to a specific hook function within your plug-in is not recommended; acquire information when you need it, and forget (release) it as soon as possible.</p>
</div>
<hr class="docutils" />
<div class="section" id="were-you-just-going-to-leave-that-data-lying-around">
<h3>Were You Just Going To Leave That Data Lying Around?<a class="headerlink" href="#were-you-just-going-to-leave-that-data-lying-around" title="Permalink to this headline">¶</a></h3>
<p>When you ask After Effects to populate and return handles to data structures, it’s important that you clean up after yourself. For the following data types, you must call the appropriate disposal routines.</p>
</div>
<hr class="docutils" />
<div class="section" id="data-types-requiring-disposal">
<h3>Data Types Requiring Disposal<a class="headerlink" href="#data-types-requiring-disposal" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="83%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Data Type</strong></th>
<th class="head"><strong>Disposal function</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_Collection2H</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">AEGP_DisposeCollection</span></code>, from <a class="reference internal" href="index.html#aegps-aegp-suites-aegp-collectionsuite"><span class="std std-ref">AEGP_CollectionSuite2</span></a></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_FootageH</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">AEGP_DisposeFootage</span></code>, from <a class="reference internal" href="index.html#aegps-aegp-suites-aegp-footagesuite"><span class="std std-ref">AEGP_FootageSuite5</span></a></td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_WorldH</span></code></td>
<td><p class="first"><code class="docutils literal notranslate"><span class="pre">AEGP_Dispose</span></code>, from <a class="reference internal" href="index.html#aegps-aegp-suites-aegp-worldsuite"><span class="std std-ref">AEGP_WorldSuite3</span></a></p>
<p class="last">Or <code class="docutils literal notranslate"><span class="pre">AEGP_DisposeTexture</span></code>, from <a class="reference internal" href="index.html#artisans-artisan-data-types-aegp-canvassuite"><span class="std std-ref">AEGP_CanvasSuite8</span></a>, if layer texture created using <code class="docutils literal notranslate"><span class="pre">AEGP_RenderTexture</span></code>)</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_EffectRefH</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">AEGP_DisposeEffect</span></code>, from <a class="reference internal" href="index.html#aegps-aegp-suites-aegp-effectsuite"><span class="std std-ref">AEGP_EffectSuite4</span></a></td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_MaskRefH</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">AEGP_DisposeMask</span></code>, from <a class="reference internal" href="index.html#aegps-aegp-suites-aegp-masksuite"><span class="std std-ref">AEGP_MaskSuite6</span></a></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_RenderOptionsH</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">AEGP_Dispose</span></code>, from <a class="reference internal" href="index.html#aegps-aegp-suites-aegp-renderqueuemonitorsuite"><span class="std std-ref">AEGP_RenderQueueMonitorSuite1</span></a></td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_LayerRenderOptionsH</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">AEGP_Dispose</span></code>, from <a class="reference internal" href="index.html#aegps-aegp-suites-aegp-layerrenderoptionssuite"><span class="std std-ref">AEGP_LayerRenderOptionsSuite1</span></a></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_RenderReceiptH</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">AEGP_DisposeRenderReceipt</span></code>, from <a class="reference internal" href="index.html#artisans-artisan-data-types-aegp-canvassuite"><span class="std std-ref">AEGP_CanvasSuite8</span></a></td>
</tr>
</tbody>
</table>
</div>
</div>
<span id="document-aegps/implementation"></span><div class="section" id="implementation">
<span id="aegps-implementation"></span><h2>Implementation<a class="headerlink" href="#implementation" title="Permalink to this headline">¶</a></h2>
<p>Because the functionality available through the AEGP API is so vast, and the integration with After Effects so complete, a good deal of design work is necessary to ensure that your plug-in behaves appropriately in all situations.</p>
<p>AEGPs interact with After Effects through PICA function suites.</p>
<p>AEGPs are not loaded in a specific order.</p>
<p>Check the version of the AEGP API (from within your AEGP’s entry point function) to confirm whether a given suite will be available.</p>
<p>AEGPs may also use any effect API suite function which doesn’t require a PF_ProgPtr (obtained by effects from PF_InData).</p>
<hr class="docutils" />
<div class="section" id="entry-point">
<span id="aegps-implementation-entry-point"></span><h3>Entry Point<a class="headerlink" href="#entry-point" title="Permalink to this headline">¶</a></h3>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">A_Err</span> <span class="n">AEGP_PluginInitFuncPrototype</span><span class="p">(</span>
  <span class="k">struct</span> <span class="n">SPBasicSuite</span>  <span class="o">*</span><span class="n">pica_basicP</span><span class="p">,</span>
  <span class="n">A_long</span>               <span class="n">major_versionL</span><span class="p">,</span>
  <span class="n">A_long</span>               <span class="n">minor_versionL</span><span class="p">,</span>
  <span class="n">AEGP_PluginID</span>        <span class="n">aegp_plugin_id</span><span class="p">,</span>
  <span class="n">AEGP_GlobalRefcon</span>    <span class="o">*</span><span class="n">global_refconP</span><span class="p">)</span>
</pre></div>
</div>
<p>The plug-in’s entry point, exported in the <a class="reference internal" href="index.html#intro-pipl-resources"><span class="std std-ref">PiPL Resources</span></a>, is called just once during launch; all other calls to the AEGP go to the functions it’s registered.</p>
<p>This is very different from the effect plug-in model, where all communication comes through the same entry point.</p>
<p>Because plug-in load order may vary, it’s never a good idea to acquire suites not provided by After Effects during your entry point function. Rather, wait until the appropriate hook function(s).</p>
<p>The AEGP <a class="reference internal" href="index.html#intro-compatibility-across-multiple-versions-api-versions"><span class="std std-ref">API Versions</span></a> can help distinguish between different versions of After Effects, in case the AEGP needs to behave differently or handle different behavior.</p>
<p>Those other functions are registered as callback hooks. An AEGP that adds menu items must register an UpdateMenuHook function (with a function signature as described in AE_GeneralPlug.h) which After Effects can call to determine whether or not to enable those items. Similarly, plug-ins which process commands register a CommandHook (one for all commands).</p>
</div>
<hr class="docutils" />
<div class="section" id="specialization">
<h3>Specialization<a class="headerlink" href="#specialization" title="Permalink to this headline">¶</a></h3>
<p>AEIOs and Artisans must register with After Effects in order to receive the messaging streams on which they depend.</p>
<p>Like everything else in the AEGP API, this is done through a function suite; in this case, the aptly-named AEGP_RegisterSuite.</p>
<hr class="docutils" />
</div>
<div class="section" id="example-adding-a-menu-item">
<span id="aegps-implementation-adding-a-menu-item"></span><h3>Example: Adding A Menu Item<a class="headerlink" href="#example-adding-a-menu-item" title="Permalink to this headline">¶</a></h3>
<p>During your entry point function, use <code class="docutils literal notranslate"><span class="pre">AEGP_GetUniqueCommand()</span></code> from <a class="reference internal" href="index.html#aegps-aegp-suites-command-suite"><span class="std std-ref">Command Suite</span></a> to obtain a command ID from After Effects, for use with <code class="docutils literal notranslate"><span class="pre">AEGP_InsertMenuCommand</span></code>. Use a different ID for each menu item you add.</p>
<p>Using AEGP_RegisterSuite’s <code class="docutils literal notranslate"><span class="pre">AEGP_RegisterCommandHook()</span></code>, tell After Effects which function to call when your menu item(s) are selected. The function you register using <code class="docutils literal notranslate"><span class="pre">AEGP_RegisterUpdateMenuHook()</span></code> enables and disabling your menu item(s). Your menu item(s) will be permanently disabled unless you register a menu updating function.</p>
<p>No matter how many menu items you add, you register only one CommandHook. When called, determine which menu item was chosen (based on the command ID), use AEGP PICA suite functions to determine the current state of the project, and act accordingly. For example, keyframing plug-ins may want to disable their menu items unless a (keyframe-able) parameter stream is part of the current selection.</p>
<hr class="docutils" />
</div>
<div class="section" id="private-data">
<span id="aegps-implementation-private-data"></span><h3>Private Data<a class="headerlink" href="#private-data" title="Permalink to this headline">¶</a></h3>
<p>Unlike effects, AEGPs are never unloaded during an After Effects session. Still, that doesn’t mean that relying on static and global variables is a good idea.</p>
<p>All hook functions are passed a plugin_refconPV for storage information specific to that function. Many AEGP Suite functions take the <code class="docutils literal notranslate"><span class="pre">aegp_plugin_id</span></code> as a parameter; store it in the <code class="docutils literal notranslate"><span class="pre">global_refconPV</span></code> you are passed, either in a structure you allocate or just the ID itself.</p>
<p>Where possible, use these refcons to store information, not statics and global variables. This becomes especially important when dealing with multi-threading issues.</p>
<p>Use <code class="docutils literal notranslate"><span class="pre">global_refconPV</span></code> for your globals (like your <code class="docutils literal notranslate"><span class="pre">aegp_plugin_id</span></code>) and refcon for hook-function-specific storage.</p>
<p>A potential “multiple instances of After Effects” gotcha; when a second, command-line instance of After Effects is launched, all of an AEGP’s handles are duplicated. If this causes problems (and it may), provide code that attaches saved handles to specific instantiations of your plug-in.</p>
</div>
<hr class="docutils" />
<div class="section" id="threading">
<h3>Threading<a class="headerlink" href="#threading" title="Permalink to this headline">¶</a></h3>
<p>AEGP supports no threading at all. Everything must be done from the main thread, either in response to a callback, or from the idle hook.</p>
<p>There is one call that is thread safe: <code class="docutils literal notranslate"><span class="pre">AEGP_CauseIdleRoutinesToBeCalled()</span></code>.</p>
<p>But since <code class="docutils literal notranslate"><span class="pre">SPBasicSuite</span></code> itself is not thread safe, you’ll need to stash off the function pointer in the main thread.</p>
</div>
</div>
<span id="document-aegps/aegp-suites"></span><div class="section" id="aegp-suites">
<span id="aegps-aegp-suites"></span><h2>AEGP Suites<a class="headerlink" href="#aegp-suites" title="Permalink to this headline">¶</a></h2>
<p>As mentioned earlier, AEGPs do everything through suites. The following suites are used by all types of AEGPs, and may be called from within any hook function (except for the RegisterSuite, which must be used from within the AEGP’s entry point). Following is a description of each function in every suite, and, where appropriate details on using those functions.</p>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="67%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Suite</strong></th>
<th class="head"><strong>Description</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><a class="reference internal" href="#aegps-aegp-suites-memory-suite"><span class="std std-ref">Memory Suite</span></a></td>
<td>Manage memory resources. Use this suite! Whenever memory-related errors are encountered, After Effects can report errors for you.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#aegps-aegp-suites-command-suite"><span class="std std-ref">Command Suite</span></a></td>
<td>Manage your AEGP’s menu items. Used in conjunction with the Register Suite.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#aegps-aegp-suites-register-suite"><span class="std std-ref">Register Suite</span></a></td>
<td>Used in conjunction with the <a class="reference internal" href="#aegps-aegp-suites-command-suite"><span class="std std-ref">Command Suite</span></a> to add functions to menu commands.
AEIOs and Artisans must use this suite’s functions to indicate to After Effects that they want to receive the appropriate message streams.
You can replace some After Effects’ commands using this suite.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#aegps-aegp-suites-project-suite"><span class="std std-ref">Project Suite</span></a></td>
<td>Reads and modifies project data.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#aegps-aegp-suites-item-suite"><span class="std std-ref">Item Suite</span></a></td>
<td>Manages items within a project or composition.
Folders, Compositions, Solids, and Footage are all items.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#aegps-aegp-suites-collection-suite"><span class="std std-ref">Collection Suite</span></a></td>
<td>Query which items are currently selected, and create your own selection sets.
It’s often a good UI move to select all the items your AEGP has modified, just to give the user some idea what you’ve done.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#aegps-aegp-suites-composition-suite"><span class="std std-ref">Composition Suite</span></a></td>
<td>Manages (and creates) compositions in a project, and composition-specific items like solids.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#aegps-aegp-suites-footage-suite"><span class="std std-ref">Footage Suite</span></a></td>
<td>Manages footage.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#aegps-aegp-suites-layer-suite"><span class="std std-ref">Layer Suite</span></a></td>
<td>Provides information about the layers within a composition, and the relationship(s) between the source and layer times.
Solids, text, paint, cameras, lights, images, and image sequences can all become layers.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#aegps-aegp-suites-effect-suite"><span class="std std-ref">Effect Suite</span></a></td>
<td>Provides access to the effects applied to a layer.
Use Stream suites to obtain effect keyframe information.
Use <code class="docutils literal notranslate"><span class="pre">AEGP_EffectCallGeneric()</span></code> (in <a class="reference internal" href="#aegps-aegp-suites-aegp-effectsuite"><span class="std std-ref">AEGP_EffectSuite4</span></a>) to communicate with effects that you setup ahead of time to respond to your AEGP.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#aegps-aegp-suites-stream-suite"><span class="std std-ref">Stream Suite</span></a></td>
<td>Used to access the values of a layer’s keyframe properties.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#aegps-aegp-suites-dynamic-stream-suite"><span class="std std-ref">Dynamic Stream Suite</span></a></td>
<td>Used to access the characteristics of dynamic streams associated with a layer.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#aegps-aegp-suites-keyframe-suite"><span class="std std-ref">Keyframe Suite</span></a></td>
<td>Used to access and manipulate all keyframe data.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#aegps-aegp-suites-marker-suite"><span class="std std-ref">Marker Suite</span></a></td>
<td>Used to manipulate markers. Use <code class="docutils literal notranslate"><span class="pre">AEGP_GetNewCompMarkerStream()</span></code> (in <a class="reference internal" href="#aegps-aegp-suites-aegp-compsuite"><span class="std std-ref">AEGP_CompSuite11</span></a>) to get the composition marker stream.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#aegps-aegp-suites-mask-suite"><span class="std std-ref">Mask Suite</span></a></td>
<td>Provides access to retrieve information about a layer’s masks.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#aegps-aegp-suites-mask-outline-suite"><span class="std std-ref">Mask Outline Suite</span></a></td>
<td>Used in conjunction with Stream Suite, this suite provides detailed information about the path rendered to make a layer’s mask.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#aegps-aegp-suites-text-document-suite"><span class="std std-ref">Text Document Suite</span></a></td>
<td>Used to access the actual text on a text layer.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#aegps-aegp-suites-text-layer-suite"><span class="std std-ref">Text Layer Suite</span></a></td>
<td>Used to access the paths that make up the outlines of a text layer.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#aegps-aegp-suites-utility-suite"><span class="std std-ref">Utility Suite</span></a></td>
<td>Supplies error message handling, AEGP version checking and access to After Effects’ undo stack.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#aegps-aegp-suites-persistent-data-suite"><span class="std std-ref">Persistent Data Suite</span></a></td>
<td>Query and manage all persistent data (i.e., the preferences file).
AEGPs can also add their own data to the prefs.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#aegps-aegp-suites-color-settings-suite"><span class="std std-ref">Color Settings Suite</span></a></td>
<td>Obtain information on After Effects’ current color management settings.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#aegps-aegp-suites-render-suite"><span class="std std-ref">Render Suite</span></a></td>
<td>Get rendered frames (and audio samples) from within an AEGP.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#aegps-aegp-suites-world-suite"><span class="std std-ref">World Suite</span></a></td>
<td>Allocate, dispose of, and query AEGP_Worlds.
Also provides a way to convert a <code class="docutils literal notranslate"><span class="pre">PF_EffectWorld</span></code> into an <code class="docutils literal notranslate"><span class="pre">AEGP_World</span></code>, for working with effect plug-ins.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#aegps-aegp-suites-composite-suite"><span class="std std-ref">Composite Suite</span></a></td>
<td>Exposes After Effects’ compositing functionality, including transfer modes, track matting, and good old fashioned bit copying.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#aegps-aegp-suites-sound-data-suite"><span class="std std-ref">Sound Data Suite</span></a></td>
<td>Functions for managing and accessing sound data.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#aegps-aegp-suites-render-queue-suite"><span class="std std-ref">Render Queue Suite</span></a></td>
<td>Add and remove items from the render queue.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#aegps-aegp-suites-render-queue-item-suite"><span class="std std-ref">Render Queue Item Suite</span></a></td>
<td>Query and modify items in the render queue.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#aegps-aegp-suites-render-options-suite"><span class="std std-ref">Render Options Suite</span></a></td>
<td>Query and manage all items exposed in a render queue item’s options dialog.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#aegps-aegp-suites-output-module-suite"><span class="std std-ref">Output Module Suite</span></a></td>
<td>Query and modify the output modules attached to items in the render queue.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#aegps-aegp-suites-pf-interface-suite"><span class="std std-ref">PF Interface Suite</span></a></td>
<td>The functions in this suite, while technically part of the AEGP API, are for use by effects.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#aegps-aegp-suites-aegp-iterate-suite"><span class="std std-ref">AEGP Iterate Suite</span></a></td>
<td>Gives AEGPs a way to have a function (which has the required signature) to be run on any or all available processors.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#aegps-aegp-suites-file-import-manager-suite"><span class="std std-ref">File Import Manager Suite</span></a></td>
<td>Registers AEGP file and project importers as part of After Effects’ file handling.</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
<div class="section" id="fail-gracefully">
<h3>Fail Gracefully<a class="headerlink" href="#fail-gracefully" title="Permalink to this headline">¶</a></h3>
<p>If a suite isn’t present, make every attempt to fail gracefully. Show the user a message indicating the nature of the problem. Attempt to acquire and use an earlier version of the same suite.</p>
<p>Since AEGPs are so deeply integrated with After Effects, make sure that users know who or what is encountering a given problem.</p>
<p>Identify yourself! Provide support and/or help information to the user whenever possible.</p>
<hr class="docutils" />
</div>
<div class="section" id="handling-handles">
<span id="aegps-aegp-suites-memory-suite"></span><h3>Handling Handles<a class="headerlink" href="#handling-handles" title="Permalink to this headline">¶</a></h3>
<p>Use the AEGP Memory Suite to manage memory used by the AEGP. Whenever memory related errors are encountered, After Effects can report errors for you to find early on.</p>
<p><code class="docutils literal notranslate"><span class="pre">AEGP_MemHandle</span></code> is a structure that contains more than just the referenced memory. So it should not be dereferenced directly. Use <code class="docutils literal notranslate"><span class="pre">AEGP_LockMemHandle</span></code> to get a pointer to the memory referenced by the <code class="docutils literal notranslate"><span class="pre">AEGP_MemHandle</span></code>.</p>
<p>And of course, unlock it when you’re done.</p>
<div class="section" id="aegp-memorysuite1">
<h4>AEGP_MemorySuite1<a class="headerlink" href="#aegp-memorysuite1" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="21%" />
<col width="79%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Function</strong></th>
<th class="head"><strong>Purpose</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_NewMemHandle</span></code></td>
<td><p class="first">Create a new memory handle.
This memory is guaranteed to be 16-byte aligned.
<code class="docutils literal notranslate"><span class="pre">plugin_id</span></code> is the ID passed in through the main <a class="reference internal" href="index.html#aegps-implementation-entry-point"><span class="std std-ref">Entry Point</span></a>,
or alternatively what you obtained from <code class="docutils literal notranslate"><span class="pre">AEGP_RegisterWithAEGP()</span></code>
(from <a class="reference internal" href="#aegps-aegp-suites-aegp-utilitysuite"><span class="std std-ref">AEGP_UtilitySuite6</span></a>).</p>
<p>Use <code class="docutils literal notranslate"><span class="pre">whatZ</span></code> to identify the memory you are asking for.
After Effects uses the string to display any related error messages.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_NewMemHandle</span><span class="p">(</span>
  <span class="n">AEGP_PluginID</span>   <span class="o">*</span><span class="n">plugin_id</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_char</span>    <span class="o">*</span><span class="n">whatZ</span><span class="p">,</span>
  <span class="n">AEGP_MemSize</span>    <span class="n">size</span><span class="p">,</span>
  <span class="n">AEGP_MemFlag</span>    <span class="n">flags</span><span class="p">,</span>
  <span class="n">AEGP_MemHandle</span>  <span class="o">*</span><span class="n">memPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_FreeMemHandle</span></code></td>
<td><p class="first">Release a handle you allocated using AEGP_NewMemHandle().</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_FreeMemHandle</span><span class="p">(</span>
  <span class="n">AEGP_MemHandle</span>  <span class="n">memH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_LockMemHandle</span></code></td>
<td><p class="first">Locks the handle into memory (cannot be moved by OS).
Use this function prior to using memory allocated by <code class="docutils literal notranslate"><span class="pre">AEGP_NewMemHandle</span></code>. Can be nested.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_LockMemHandle</span><span class="p">(</span>
  <span class="n">AEGP_MemHandle</span>  <span class="n">memH</span><span class="p">,</span>
  <span class="kt">void</span>            <span class="o">**</span><span class="n">ptr_to_ptr</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_UnlockMemHandle</span></code></td>
<td><p class="first">Allows OS to move the referenced memory. Always balance lock calls with unlocks.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_UnlockMemHandle</span><span class="p">(</span>
  <span class="n">AEGP_MemHandle</span>  <span class="n">memH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetMemHandleSize</span></code></td>
<td><p class="first">Returns the allocated size of the handle.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetMemHandleSize</span> <span class="n">AEGP_MemHandle</span> <span class="n">memH</span><span class="p">,</span>
  <span class="n">AEGP_MemSize</span>  <span class="o">*</span><span class="n">sizeP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_ResizeMemHandle</span></code></td>
<td><p class="first">Changes the allocated size of the handle.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_ResizeMemHandle</span><span class="p">(</span>
  <span class="k">const</span> <span class="kt">char</span>      <span class="o">*</span><span class="n">whatZ</span><span class="p">,</span>
  <span class="n">AEGP_MemSize</span>    <span class="n">new_size</span><span class="p">,</span>
  <span class="n">AEGP_MemHandle</span>  <span class="n">memH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetMemReportingOn</span></code></td>
<td><p class="first">If After Effects runs into problems with the memory handling, the error should be reported to the user.
Make use of this during development!</p>
<p>Only memory allocated and then leaked using this suite is reported using this call,
so for example memory allocated using <a class="reference internal" href="index.html#effect-details-memory-allocation-pf-handlesuite"><span class="std std-ref">PF_HandleSuite1</span></a>
will not be reported.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetMemReportingOn</span><span class="p">(</span>
  <span class="n">A_Boolean</span>  <span class="n">turn_OnB</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetMemStats</span></code></td>
<td><p class="first">Obtain information about the number of currently allocated handles and their total size.</p>
<p>Only memory allocated using this suite is tracked and reported using this call,
so for example memory allocated using <a class="reference internal" href="index.html#effect-details-memory-allocation-pf-handlesuite"><span class="std std-ref">PF_HandleSuite1</span></a>
will not be reported here.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetMemStats</span><span class="p">(</span>
  <span class="n">AEGP_MemID</span>  <span class="n">mem_id</span><span class="p">,</span>
  <span class="n">A_long</span>      <span class="o">*</span><span class="n">countPL</span><span class="p">,</span>
  <span class="n">A_long</span>      <span class="o">*</span><span class="n">sizePL</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
</div>
</div>
<div class="section" id="managing-menu-items">
<span id="aegps-aegp-suites-command-suite"></span><h3>Managing Menu Items<a class="headerlink" href="#managing-menu-items" title="Permalink to this headline">¶</a></h3>
<p>Command Suites allow you to create and handle any menu events.</p>
<p>To add your own menu commands, you must also use <a class="reference internal" href="#aegps-aegp-suites-register-suite"><span class="std std-ref">Register Suite</span></a> to assign handlers to menu events.</p>
<div class="section" id="aegp-commandsuite1">
<span id="aegps-aegp-suites-aegp-commandsuite"></span><h4>AEGP_CommandSuite1<a class="headerlink" href="#aegp-commandsuite1" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="19%" />
<col width="81%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Function</strong></th>
<th class="head"><strong>Purpose</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetUniqueCommand</span></code></td>
<td><p class="first">Obtain a unique command identifier. Use the <em>Register Suite</em> to register a handler for the command.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetUniqueCommand</span><span class="p">(</span>
  <span class="n">AEGP_Command</span>  <span class="o">*</span><span class="n">unique_commandP</span><span class="p">);</span>
</pre></div>
</div>
<p class="last">Note: On occasion After Effects will send command 0 (zero),
so don’t use that as part of your command handling logic.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_InsertMenuCommand</span></code></td>
<td><p class="first">Add a new menu command. Using nameZ = “-” will insert a separator. menu_ID can be:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">AEGP_Menu_NONE</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_Menu_APPLE</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_Menu_FILE</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_Menu_EDIT</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_Menu_COMPOSITION</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_Menu_LAYER</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_Menu_EFFECT</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_Menu_WINDOW</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_Menu_FLOATERS</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_Menu_KF_ASSIST</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_Menu_IMPORT</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_Menu_SAVE_FRAME_AS</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_Menu_PREFS</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_Menu_EXPORT</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_Menu_ANIMATION</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_Menu_PURGE</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_Menu_NEW</span></code> - Supported in CC and later</li>
</ul>
</div></blockquote>
<p>Locations can be set to a specific location in the menu or can be one assigned by After Effects:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">AEGP_MENU_INSERT_SORTED</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_MENU_INSERT_AT_BOTTOM</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_MENU_INSERT_AT_TOP</span></code></li>
</ul>
</div></blockquote>
<p>For <code class="docutils literal notranslate"><span class="pre">AEGP_Menu_WINDOW</span></code>, the BOTTOM and TOP options haven’t been supported since CS4 and will return an error.
We recommend <code class="docutils literal notranslate"><span class="pre">SORTED</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_InsertMenuCommand</span><span class="p">(</span>
  <span class="n">AEGP_Command</span>  <span class="n">command</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_char</span>  <span class="o">*</span><span class="n">nameZ</span><span class="p">,</span>
  <span class="n">AEGP_MenuID</span>   <span class="n">menu_id</span><span class="p">,</span>
  <span class="n">A_long</span>        <span class="n">after_itemL</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_RemoveMenuCommand</span></code></td>
<td><p class="first">Remove a menu command. If you were so motivated, you could remove ALL of the After Effects menu items.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_RemoveMenuCommand</span><span class="p">(</span>
  <span class="n">AEGP_Command</span>  <span class="n">command</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetCommandName</span></code></td>
<td><p class="first">Set menu name of a command.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetCommandName</span><span class="p">(</span>
  <span class="n">AEGP_Command</span>  <span class="n">command</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_char</span>  <span class="o">*</span><span class="n">nameZ</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_EnableCommand</span></code></td>
<td><p class="first">Enable a menu command.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_EnableCommand</span><span class="p">(</span>
  <span class="n">AEGP_Command</span>  <span class="n">command</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_DisableCommand</span></code></td>
<td><p class="first">Disable a menu command.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_DisableCommand</span><span class="p">(</span>
  <span class="n">AEGP_Command</span>  <span class="n">command</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_CheckMarkMenuCommand</span></code></td>
<td><p class="first">After Effects will draw a check mark next to the menu command.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_CheckMarkMenuCommand</span><span class="p">(</span>
  <span class="n">AEGP_Command</span>  <span class="n">command</span><span class="p">,</span>
  <span class="n">A_Boolean</span>     <span class="n">checkB</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_DoCommand</span></code></td>
<td><p class="first">Call the handler for a specified menu command. Every After Effects menu item has an associated command.
Note that we make no guarantees that command IDs will be consistent from version to version.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_DoCommand</span><span class="p">(</span>
  <span class="n">AEGP_Command</span>  <span class="n">command</span><span class="p">);</span>
</pre></div>
</div>
<p>Having given the disclaimer above, here are a few command numbers that have been supplied to other developers, and may be of interest:</p>
<blockquote>
<div><ul class="simple">
<li>3061 - Open selection, ignoring any modifier keys.</li>
<li>10314 - Play/Stop (valid in 13.5 and later)</li>
<li>2285 - RAM Preview (valid prior to 13.5)</li>
<li>2415 - Play (spacebar) (valid prior to 13.5)</li>
<li>2997 - Crop composition to region of interest.</li>
<li>2372 - Edit &gt; Purge &gt; Image Caches</li>
</ul>
</div></blockquote>
<p>If your AEGP needs to call some other After Effects menu item,
there’s a fairly easy way to find out most commands you want, using scripting:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">cmd</span> <span class="o">=</span> <span class="n">app</span><span class="p">.</span><span class="n">findMenuCommandId</span><span class="p">(</span><span class="n">text</span><span class="p">);</span> <span class="c1">// e.g. text = &quot;Open Project…&quot;</span>
<span class="n">alert</span><span class="p">(</span><span class="n">cmd</span><span class="p">);</span>
</pre></div>
</div>
<p class="last">With AE running, just open up Adobe ExtendScript Toolkit CC, copy the above script in,
and in the app drop-down choose the version of After Effects you have running.
Then hit the Play button to run the script in AE.
Otherwise, contact &lt;<a class="reference external" href="mailto:zlam&#37;&#52;&#48;adobe&#46;com">mailto:zlam<span>&#64;</span>adobe<span>&#46;</span>com</a>&gt; <em>API Engineering</em> for the command number.</p>
</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
</div>
</div>
<div class="section" id="registering-with-after-effects">
<span id="aegps-aegp-suites-register-suite"></span><h3>Registering with After Effects<a class="headerlink" href="#registering-with-after-effects" title="Permalink to this headline">¶</a></h3>
<p>Register functions for After Effects’ use.</p>
<div class="section" id="aegp-registersuites5">
<span id="aegps-aegp-suites-aegp-registersuites"></span><h4>AEGP_RegisterSuites5<a class="headerlink" href="#aegp-registersuites5" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="24%" />
<col width="76%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Function</strong></th>
<th class="head"><strong>Purpose</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_RegisterCommandHook</span></code></td>
<td><p class="first">Register a hook (command handler) function with After Effects.</p>
<p>If you are replacing a function which After Effects also handles, <code class="docutils literal notranslate"><span class="pre">AEGP_HookPriority</span></code> determines whether your plug-in gets it first.</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">AEGP_HP_BeforeAE</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_HP_AfterAE</span></code></li>
</ul>
<p>For each menu item you add, obtain your own <code class="docutils literal notranslate"><span class="pre">AEGP_Command</span></code> using <code class="docutils literal notranslate"><span class="pre">AEGP_GetUniqueCommand()</span></code>
(from <a class="reference internal" href="#aegps-aegp-suites-aegp-commandsuite"><span class="std std-ref">AEGP_CommandSuite1</span></a>) prior registering a single <code class="docutils literal notranslate"><span class="pre">command_hook_func</span></code>.</p>
<p>Determine which command was sent within this hook function, and act accordingly.</p>
<p>Currently, <code class="docutils literal notranslate"><span class="pre">AEGP_HookPriority</span></code> is ignored.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_RegisterCommandHook</span><span class="p">(</span>
  <span class="n">AEGP_PluginID</span>      <span class="n">aegp_plugin_id</span><span class="p">,</span>
  <span class="n">AEGP_HookPriority</span>  <span class="n">hook_priority</span><span class="p">,</span>
  <span class="n">AEGP_Command</span>       <span class="n">command</span><span class="p">,</span>
  <span class="n">AEGP_CommandHook</span>   <span class="n">command_hook_func</span>
  <span class="kt">void</span>               <span class="o">*</span><span class="n">refconPV</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_RegisterUpdateMenuHook</span></code></td>
<td><p class="first">Register your menu update function (which determines whether or not items are active),
called every time any menu is to be drawn.</p>
<p>This hook function handles updates for all menus.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_RegisterUpdateMenuHook</span><span class="p">(</span>
  <span class="n">AEGP_PluginID</span>        <span class="n">aegp_plugin_id</span><span class="p">,</span>
  <span class="n">AEGP_UpdateMenuHook</span>  <span class="n">update_menu_hook_func</span><span class="p">,</span>
  <span class="kt">void</span>                 <span class="o">*</span><span class="n">refconPV</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_RegisterDeathHook</span></code></td>
<td><p class="first">Register your termination function. Called when the application quits.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_RegisterDeathHook</span><span class="p">(</span>
  <span class="n">AEGP_PluginID</span>   <span class="n">aegp_plugin_id</span><span class="p">,</span>
  <span class="n">AEGP_DeathHook</span>  <span class="n">death_hook_func</span><span class="p">,</span>
  <span class="kt">void</span>            <span class="o">*</span><span class="n">refconPV</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_RegisterVersionHook</span></code></td>
<td>Currently not called.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_RegisterAboutStringHook</span></code></td>
<td>Currently not called.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_RegisterAboutHook</span></code></td>
<td>Currently not called.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_RegisterArtisan</span></code></td>
<td><p class="first">Register your Artisan. See <a class="reference internal" href="index.html#artisans-artisans"><span class="std std-ref">Artisans</span></a> for more details.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_RegisterArtisan</span><span class="p">(</span>
  <span class="n">A_Version</span>              <span class="n">api_version</span><span class="p">,</span>
  <span class="n">A_Version</span>              <span class="n">Artisan_version</span><span class="p">,</span>
  <span class="kt">long</span>                   <span class="n">aegp_plugin_id</span><span class="p">,</span>
  <span class="kt">void</span>                   <span class="o">*</span><span class="n">aegp_refconPV</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_char</span>           <span class="o">*</span><span class="n">match_nameZ</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_char</span>           <span class="o">*</span><span class="n">Artisan_nameZ</span><span class="p">,</span>
  <span class="n">PR_ArtisanEntryPoints</span>  <span class="o">*</span><span class="n">entry_funcsP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_RegisterIO</span></code></td>
<td><p class="first">Register your AEIO plug-in. See <a class="reference internal" href="index.html#aeios-aeios"><span class="std std-ref">AEIOs</span></a> for more details.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_RegisterIO</span> <span class="p">(</span>
  <span class="n">AEGP_PluginID</span>              <span class="n">aegp_plugin_id</span><span class="p">,</span>
  <span class="n">AEGP_IORefcon</span>              <span class="n">aegp_refconP</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">AEIO_ModuleInfo</span>      <span class="o">*</span><span class="n">io_infoP</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">AEIO_FunctionBlock4</span>  <span class="o">*</span><span class="n">aeio_fcn_blockP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_RegisterIdleHook</span></code></td>
<td><p class="first">Register your IdleHook function. After Effects will call the function sporadically,
while the user makes difficult artistic decisions (or while they’re getting more coffee).</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_RegisterIdleHook</span><span class="p">(</span>
  <span class="n">AEGP_PluginID</span>    <span class="n">aegp_plugin_id</span><span class="p">,</span>
  <span class="n">AEGP_IdleHook</span>    <span class="n">idle_hook_func</span><span class="p">,</span>
  <span class="n">AEGP_IdleRefcon</span>  <span class="n">refconP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_RegisterInteractiveArtisan</span></code></td>
<td><p class="first">Registers your AEGP as an interactive artisan, for use in previewing and rendering all layers in a given composition.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_RegisterInteractiveArtisan</span> <span class="p">(</span>
  <span class="n">A_Version</span>              <span class="n">api_version</span><span class="p">,</span>
  <span class="n">A_Version</span>              <span class="n">artisan_version</span><span class="p">,</span>
  <span class="n">AEGP_PluginID</span>          <span class="n">aegp_plugin_id</span><span class="p">,</span>
  <span class="kt">void</span>                   <span class="o">*</span><span class="n">aegp_refconPV</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_char</span>           <span class="o">*</span><span class="n">match_nameZ</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_char</span>           <span class="o">*</span><span class="n">artisan_nameZ</span><span class="p">,</span>
  <span class="n">PR_ArtisanEntryPoints</span>  <span class="o">*</span><span class="n">entry_funcsP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_RegisterPresetLocalizationString</span></code></td>
<td><p class="first">Call this to register as many strings as you like for name-replacement when presets are loaded.</p>
<p>Any time a Property name is found, or referred to in an expression,
and it starts with an ASCII tab character (‘t’), followed by one of the English names, it will be replaced with the localized name.</p>
<p>(In English the tab character will simply be removed).</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_RegisterPresetLocalizationString</span><span class="p">(</span>
  <span class="k">const</span> <span class="n">A_char</span>  <span class="o">*</span><span class="n">english_nameZ</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_char</span>  <span class="o">*</span><span class="n">localized_nameZ</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
</div>
</div>
<div class="section" id="manage-projects">
<span id="aegps-aegp-suites-project-suite"></span><h3>Manage Projects<a class="headerlink" href="#manage-projects" title="Permalink to this headline">¶</a></h3>
<p>These functions access and modify project data. Support for multiple projects is included to prepare for future expansion;
After Effects currently adheres to the single project model.</p>
<p>To save project-specific data in After Effects’ preferences (and thus, outside the projects themselves), use the <a class="reference internal" href="#aegps-aegp-suites-persistent-data-suite"><span class="std std-ref">Persistent Data Suite</span></a>.</p>
<p>Use caution: the functions for opening and creating projects do not save changes to the project currently open when they are called!</p>
<div class="section" id="aegp-projsuite6">
<span id="aegps-aegp-suites-aegp-projsuite"></span><h4>AEGP_ProjSuite6<a class="headerlink" href="#aegp-projsuite6" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="78%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Function</strong></th>
<th class="head"><strong>Purpose</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_NumProjects</span></code></td>
<td><p class="first">Currently will never return more than 1. After Effects can have only one project open at a time.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetNumProjects</span><span class="p">(</span>
  <span class="n">A_long</span>  <span class="o">*</span><span class="n">num_projPL</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetIndProject</span></code></td>
<td><p class="first">Retrieves a specific project by index.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetProjectProjectByIndex</span><span class="p">(</span>
  <span class="n">A_long</span>         <span class="n">proj_indexL</span><span class="p">,</span>
  <span class="n">AEGP_ProjectH</span>  <span class="o">*</span><span class="n">projPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetProjectName</span></code></td>
<td><p class="first">Get the project name (up to <code class="docutils literal notranslate"><span class="pre">AEGP_MAX_PROJ_NAME_LEN</span> <span class="pre">+</span> <span class="pre">1</span></code>) in length.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetProjectName</span><span class="p">(</span>
  <span class="n">AEGP_ProjectH</span>  <span class="n">projH</span><span class="p">,</span>
  <span class="n">A_char</span>         <span class="o">*</span><span class="n">nameZ</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetProjectPath</span></code></td>
<td><p class="first">Get the path of the project (empty string the project hasn’t been saved yet).</p>
<p>The path is a handle to a NULL-terminated A_UTF16Char string, and must be disposed with <code class="docutils literal notranslate"><span class="pre">AEGP_FreeMemHandle</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetProjectPath</span><span class="p">(</span>
  <span class="n">AEGP_ProjectH</span>   <span class="n">projH</span><span class="p">,</span>
  <span class="n">AEGP_MemHandle</span>  <span class="o">*</span><span class="n">unicode_pathPH</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetProjectRootFolder</span></code></td>
<td><p class="first">Get the root of the project, which After Effects also treats as a folder.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetProjectRootFolder</span><span class="p">(</span>
  <span class="n">AEGP_ProjectH</span>  <span class="n">projH</span><span class="p">,</span>
  <span class="n">AEGP_ItemH</span>     <span class="o">*</span><span class="n">root_folderPH</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SaveProjectToPath</span></code></td>
<td><p class="first">Saves the entire project to the specified full path.</p>
<p>The file path is a NULL-terminated UTF-16 string with platform separators.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SaveProjectToPath</span><span class="p">(</span>
  <span class="n">AEGP_ProjectH</span>      <span class="n">projH</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_UTF16Char</span>  <span class="o">*</span><span class="n">pathZ</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetProjectTimeDisplay</span></code></td>
<td><p class="first">Retrieves the current time display settings.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetProjectTimeDisplay</span><span class="p">(</span>
  <span class="n">AEGP_ProjectH</span>      <span class="n">projH</span><span class="p">,</span>
  <span class="n">AEGP_TimeDisplay3</span>  <span class="o">*</span><span class="n">time_displayP</span><span class="p">);</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
  <span class="n">AEGP_TimeDisplayMode</span>            <span class="n">display_mode</span><span class="p">;</span>
  <span class="n">AEGP_SourceTimecodeDisplayMode</span>  <span class="n">footage_display_mode</span><span class="p">;</span>
  <span class="n">A_Boolean</span>                       <span class="n">display_dropframeB</span><span class="p">;</span>
  <span class="n">A_Boolean</span>                       <span class="n">use_feet_framesB</span><span class="p">;</span>
  <span class="n">A_char</span>                          <span class="n">timebaseC</span><span class="p">;</span>
  <span class="n">A_char</span>                          <span class="n">frames_per_footC</span><span class="p">;</span>
  <span class="n">AEGP_FramesDisplayMode</span>          <span class="n">frames_display_mode</span><span class="p">;</span>
<span class="p">}</span> <span class="n">AEGP_TimeDisplay3</span><span class="p">;</span>

<span class="k">enum</span> <span class="p">{</span>
  <span class="n">AEGP_TimeDisplay_TIMECODE</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
  <span class="n">AEGP_TimeDisplay_FRAMES</span>
<span class="p">};</span>

<span class="k">typedef</span> <span class="kt">char</span> <span class="n">AEGP_TimeDisplayMode</span><span class="p">;</span>

<span class="k">enum</span> <span class="p">{</span>
  <span class="n">AEGP_SourceTimecode_ZERO</span><span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
  <span class="n">AEGP_SourceTimecode_SOURCE_TIMECODE</span>
<span class="p">};</span>

<span class="k">typedef</span> <span class="kt">char</span> <span class="n">AEGP_SourceTimecodeDisplayMode</span><span class="p">;</span>

<span class="k">enum</span> <span class="p">{</span>
  <span class="n">AEGP_Frames_ZERO_BASED</span><span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
  <span class="n">AEGP_Frames_ONE_BASED</span><span class="p">,</span>
  <span class="n">AEGP_Frames_TIMECODE_CONVERSION</span>
<span class="p">};</span>

<span class="k">typedef</span> <span class="kt">char</span> <span class="n">AEGP_FramesDisplayMode</span><span class="p">;</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetProjectTimeDisplay</span></code></td>
<td><p class="first">Specified the settings to be used for displaying time.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetProjectTimeDisplay</span><span class="p">(</span>
  <span class="n">AEGP_ProjectH</span>            <span class="n">projH</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">AEGP_TimeDisplay3</span>  <span class="o">*</span><span class="n">time_displayP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_ProjectIsDirty</span></code></td>
<td><p class="first">Returns TRUE if the project has been modified since it was opened.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_ProjectIsDirty</span><span class="p">(</span>
  <span class="n">AEGP_ProjectH</span>  <span class="n">projH</span><span class="p">,</span>
  <span class="n">A_Boolean</span>      <span class="o">*</span><span class="n">is_dirtyPB</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SaveProjectAs</span></code></td>
<td><p class="first">Saves the project to the specified path.</p>
<p>The file path is a NULL-terminated UTF-16 string with platform separators.</p>
<p>NOTE: This will overwrite an existing file.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SaveProjectAs</span><span class="p">(</span>
  <span class="n">AEGP_ProjectH</span>      <span class="n">projH</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_UTF16Char</span>  <span class="o">*</span><span class="n">pathZ</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_NewProject</span></code></td>
<td><p class="first">Creates a new project. NOTE: Will close the current project without saving it first!</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_NewProject</span><span class="p">(</span>
  <span class="n">AEGP_ProjectH</span>  <span class="o">*</span><span class="n">new_projectPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_OpenProjectFromPath</span></code></td>
<td><p class="first">Opens a project from the supplied path, and returns its <code class="docutils literal notranslate"><span class="pre">AEGP_ProjectH</span></code>.</p>
<p>The file path is a NULL-terminated UTF-16 string with platform separators.</p>
<p>NOTE: Will close the current project without saving it first!</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_OpenProjectFromPath</span><span class="p">(</span>
  <span class="k">const</span> <span class="n">A_UTF16Char</span>  <span class="o">*</span><span class="n">pathZ</span><span class="p">,</span>
  <span class="n">AEGP_ProjectH</span>      <span class="o">*</span><span class="n">projectPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetProjectBitDepth</span></code></td>
<td><p class="first">Retrieves the project bit depth.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetProjectBitDepth</span><span class="p">(</span>
  <span class="n">AEGP_Projec</span>        <span class="n">tH</span> <span class="n">projectH</span><span class="p">,</span>
  <span class="n">AEGP_ProjBitDepth</span>  <span class="o">*</span><span class="n">bit_depthP</span><span class="p">);</span>
</pre></div>
</div>
<p>AEGP_ProjBitDepth will be one of the following:</p>
<blockquote class="last">
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">AEGP_ProjBitDepth_8</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_ProjBitDepth_16</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_ProjBitDepth_32</span></code></li>
</ul>
</div></blockquote>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetProjectBitDepth</span></code></td>
<td><p class="first">Sets the project bit depth. Undoable.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetProjectBitDepth</span><span class="p">(</span>
  <span class="n">AEGP_ProjectH</span>      <span class="n">projectH</span><span class="p">,</span>
  <span class="n">AEGP_ProjBitDepth</span>  <span class="n">bit_depth</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="aegp-timedisplay2">
<h4>AEGP_TimeDisplay2<a class="headerlink" href="#aegp-timedisplay2" title="Permalink to this headline">¶</a></h4>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Values in unused fields persist when After Effects is using a different display type.</p>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="75%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Member</strong></th>
<th class="head"><strong>Description</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_TimeDisplayType</span> <span class="pre">type;</span></code></td>
<td><p class="first">One of the following:</p>
<blockquote class="last">
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">AEGP_TimeDisplayType_TIMECODE</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_TimeDisplayType_FRAMES</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_TimeDisplayType_FEET_AND_FRAMES</span></code></li>
</ul>
</div></blockquote>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">A_char</span> <span class="pre">timebaseC;</span></code></td>
<td>0 - 100. Only used for <code class="docutils literal notranslate"><span class="pre">AEGP_TimeDisplayType_TIMECODE</span></code>.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">A_Boolean</span> <span class="pre">non_drop_30B;</span></code></td>
<td>When the timebase is 30 and the item’s framerate is 29.97, determines whether to display as non-drop frame.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">A_char</span> <span class="pre">frames_per_footC;</span></code></td>
<td>Only used for <code class="docutils literal notranslate"><span class="pre">AEGP_TimeDisplayType_FEET_AND_FRAMES</span></code>.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">A_long</span> <span class="pre">starting_frameL;</span></code></td>
<td>Usually 0 or 1. Not used when type is usually 0 or 1, not used for <code class="docutils literal notranslate"><span class="pre">AEGP_TimeDisplayType_TIMECODE</span></code>.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">A_Boolean</span> <span class="pre">auto_timecode_baseB;</span></code></td>
<td>If <code class="docutils literal notranslate"><span class="pre">TRUE</span></code>, the project timecode display setting is set to auto.</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
</div>
</div>
<div class="section" id="control-items-within-projects">
<span id="aegps-aegp-suites-item-suite"></span><h3>Control Items Within Projects<a class="headerlink" href="#control-items-within-projects" title="Permalink to this headline">¶</a></h3>
<p>Accesses and modifies items within a project or composition.</p>
<p>Anything in the project bin is an <code class="docutils literal notranslate"><span class="pre">AEGP_Item</span></code>. Note that cameras have no source, and thus have no <code class="docutils literal notranslate"><span class="pre">AEGP_ItemH</span></code>.</p>
<p>Unless more specificity is required for the function(s) you’re using, remain as abstract as possible; AEGP_Comps are passed into and returned from most functions as AEGP_Items.</p>
<div class="section" id="aegp-itemsuite9">
<span id="aegps-aegp-suites-aegp-itemsuite"></span><h4>AEGP_ItemSuite9<a class="headerlink" href="#aegp-itemsuite9" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="78%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Function</strong></th>
<th class="head"><strong>Purpose</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetFirstProjItem</span></code></td>
<td><p class="first">Retrieves the first item in a given project.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetFirstProjItem</span><span class="p">(</span>
  <span class="n">AEGP_ProjectH</span>  <span class="n">projectH</span><span class="p">,</span>
  <span class="n">AEGP_ItemH</span>     <span class="o">*</span><span class="n">itemPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetNextProjItem</span></code></td>
<td><p class="first">Retrieves the next project item; <code class="docutils literal notranslate"><span class="pre">*next_itemPH</span></code> will be <code class="docutils literal notranslate"><span class="pre">NULL</span></code> after the last item.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetNextProjItem</span><span class="p">(</span>
  <span class="n">AEGP_ProjectH</span>  <span class="n">projectH</span><span class="p">,</span>
  <span class="n">AEGP_ItemH</span>     <span class="n">itemH</span><span class="p">,</span>
  <span class="n">AEGP_ItemH</span>     <span class="o">*</span><span class="n">next_itemPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetActiveItem</span></code></td>
<td><p class="first">If the Project window is active, the active item is the selected item (if only one item is selected).
If a Composition, Timeline, or Footage window is active,
returns the parent of the layer associated with the front-most tab in the window.</p>
<p>Returns NULL if no item is active.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetActiveItem</span><span class="p">(</span>
  <span class="n">AEGP_ItemH</span>  <span class="o">*</span><span class="n">itemPH</span><span class="p">,</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_IsItemSelected</span></code></td>
<td><p class="first">Returns true if the Project window is active and the item is selected.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_IsItemSelected</span><span class="p">(</span>
  <span class="n">AEGP_ItemH</span>  <span class="n">itemH</span><span class="p">,</span>
  <span class="n">A_Boolean</span>   <span class="o">*</span><span class="n">selectedPB</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SelectItem</span></code></td>
<td><p class="first">Toggles the selection state of the item, and (depending on <code class="docutils literal notranslate"><span class="pre">deselect_othersB</span></code>) can deselect other items.
This call selects items in the Project panel.</p>
<p>To make selections in the Composition panel, use <code class="docutils literal notranslate"><span class="pre">AEGP_SetSelection</span></code> from <a class="reference internal" href="#aegps-aegp-suites-aegp-compsuite"><span class="std std-ref">AEGP_CompSuite11</span></a>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SelectItem</span><span class="p">(</span>
  <span class="n">AEGP_ItemH</span>  <span class="n">itemH</span><span class="p">,</span>
  <span class="n">A_Boolean</span>   <span class="n">selectB</span><span class="p">,</span>
  <span class="n">A_Boolean</span>   <span class="n">deselect_othersB</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetItemType</span></code></td>
<td><p class="first">Gets type of an item. Note: solids don’t appear in the project, but can be the source to a layer.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetItemType</span><span class="p">(</span>
  <span class="n">AEGP_ItemH</span>     <span class="n">itemH</span><span class="p">,</span>
  <span class="n">AEGP_ItemType</span>  <span class="o">*</span><span class="n">item_typeP</span><span class="p">);</span>
</pre></div>
</div>
<p>Items are one of the following types:</p>
<blockquote class="last">
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">AEGP_ItemType_NONE</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_ItemType_FOLDER</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_ItemType_COMP</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_ItemType_SOLID</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_ItemType_FOOTAGE</span></code></li>
</ul>
</div></blockquote>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetTypeName</span></code></td>
<td><p class="first">Get name of type. (name length up to <code class="docutils literal notranslate"><span class="pre">AEGP_MAX_TYPE_NAME_LEN</span> <span class="pre">+</span> <span class="pre">1</span></code>).</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetTypeName</span><span class="p">(</span>
  <span class="n">AEGP_ItemType</span>  <span class="n">item_type</span><span class="p">,</span>
  <span class="n">A_char</span>         <span class="o">*</span><span class="n">nameZ</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetItemName</span></code></td>
<td><p class="first">Get item name. (name length has no limit).
<code class="docutils literal notranslate"><span class="pre">unicode_namePH</span></code> points to <code class="docutils literal notranslate"><span class="pre">A_UTF16Char</span></code> (contains null terminated UTF16 string).</p>
<p>It must be disposed with <code class="docutils literal notranslate"><span class="pre">AEGP_FreeMemHandle</span></code> .</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetItemName</span><span class="p">(</span>
  <span class="n">AEGP_PluginID</span>  <span class="n">pluginID</span><span class="p">,</span>
  <span class="n">AEGP_ItemH</span>     <span class="n">itemH</span><span class="p">,</span>
  <span class="n">AEGP_MemHandle</span> <span class="o">*</span><span class="n">unicode_namePH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetItemName</span></code></td>
<td><p class="first">Specifies the name of the AEGP_ItemH. (name length has no limit). Undoable.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetItemName</span><span class="p">(</span>
  <span class="n">AEGP_ItemH</span>         <span class="n">itemH</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_UTF16Char</span>  <span class="o">*</span><span class="n">nameZ</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetItemID</span></code></td>
<td><p class="first">Returns the item’s unique ID, which persists across saves and loads of the project.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetItemID</span><span class="p">(</span>
  <span class="n">AEGP_ItemH</span>  <span class="n">itemH</span><span class="p">,</span>
  <span class="n">A_long</span>      <span class="o">*</span><span class="n">item_idPL</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetItemFlags</span></code></td>
<td><p class="first">Get properties of an item.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetItemFlags</span><span class="p">(</span>
  <span class="n">AEGP_ItemH</span>      <span class="n">itemH</span><span class="p">,</span>
  <span class="n">AEGP_ItemFlags</span>  <span class="o">*</span><span class="n">item_flagsP</span><span class="p">);</span>
</pre></div>
</div>
<p>Flag values (may be OR’d together):</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">AEGP_ItemFlag_MISSING</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_ItemFlag_HAS_PROXY</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_ItemFlag_USING_PROXY</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_ItemFlag_MISSING_PROXY</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_ItemFlag_HAS_VIDEO</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_ItemFlag_HAS_AUDIO</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_ItemFlag_STILL</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_ItemFlag_HAS_ACTIVE_AUDIO</span></code></li>
</ul>
</div></blockquote>
<p class="last">Unlike the <code class="docutils literal notranslate"><span class="pre">HAS_AUDIO</span></code> flag, this bit flag will set only if the comp has at least one layer where audio is actually on.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetItemUseProxy</span></code></td>
<td><p class="first">Toggle item’s proxy usage. Undoable.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetItemUseProxy</span><span class="p">(</span>
  <span class="n">AEGP_ItemH</span>  <span class="n">itemH</span><span class="p">,</span>
  <span class="n">A_Boolean</span>   <span class="n">use_proxyB</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetItemParentFolder</span></code></td>
<td><p class="first">Get folder containing item.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetItemParentFolder</span><span class="p">(</span>
  <span class="n">AEGP_ItemH</span>  <span class="n">itemH</span><span class="p">,</span>
  <span class="n">AEGP_ItemH</span>  <span class="o">*</span><span class="n">parent_itemPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetItemParentFolder</span></code></td>
<td><p class="first">Sets an item’s parent folder. Undoable.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetItemParentFolder</span><span class="p">(</span>
  <span class="n">AEGP_ItemH</span>  <span class="n">itemH</span><span class="p">,</span>
  <span class="n">AEGP_ItemH</span>  <span class="n">parent_folderH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetItemDuration</span></code></td>
<td><p class="first">Get duration of item, in seconds.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetItemDuration</span><span class="p">(</span>
  <span class="n">AEGP_ItemH</span>  <span class="n">itemH</span><span class="p">,</span>
  <span class="n">A_Time</span>      <span class="o">*</span><span class="n">durationPT</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetItemCurrentTime</span></code></td>
<td><p class="first">Get current time within item. Not updated while rendering.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetItemCurrentTime</span><span class="p">(</span>
  <span class="n">AEGP_ItemH</span>  <span class="n">itemH</span><span class="p">,</span>
  <span class="n">A_long</span>      <span class="o">*</span><span class="n">curr_timePT</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetItemDimensions</span></code></td>
<td><p class="first">Get width and height of item.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetItemDimensions</span><span class="p">(</span>
  <span class="n">AEGP_ItemH</span>  <span class="n">itemH</span><span class="p">,</span>
  <span class="n">A_long</span>      <span class="o">*</span><span class="n">widthPL</span><span class="p">)</span>
  <span class="n">A_long</span>      <span class="o">*</span><span class="n">heightPL</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetItemPixelAspectRatio</span></code></td>
<td><p class="first">Get the width of a pixel, assuming its height is 1.0, as numerator over denominator.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetItemPixelAspectRatio</span><span class="p">(</span>
  <span class="n">AEGP_ItemH</span>  <span class="n">itemH</span><span class="p">,</span>
  <span class="n">A_Ratio</span>     <span class="o">*</span><span class="n">ratioPRt</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_DeleteItem</span></code></td>
<td><p class="first">Removes item from all compositions. Undo-able.
Do not use the <code class="docutils literal notranslate"><span class="pre">AEGP_ItemH</span></code> after calling this function.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_DeleteItem</span><span class="p">(</span>
  <span class="n">AEGP_ItemH</span>  <span class="n">itemH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetItemSolidColor</span></code></td>
<td><p class="first">Removed in <code class="docutils literal notranslate"><span class="pre">AEGP_ItemSuite4</span></code>. See <code class="docutils literal notranslate"><span class="pre">AEGP_GetSolidFootageColor</span></code> from <a class="reference internal" href="#aegps-aegp-suites-aegp-footagesuite"><span class="std std-ref">AEGP_FootageSuite5</span></a></p>
<p>Given a solid item, return its color.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetItemSolidColor</span><span class="p">(</span>
  <span class="n">AEGP_ItemH</span>  <span class="n">itemH</span><span class="p">,</span>
  <span class="n">PF_Pixel</span>    <span class="o">*</span><span class="n">PF_Pixel</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetSolidColor</span></code></td>
<td><p class="first">Removed in <code class="docutils literal notranslate"><span class="pre">AEGP_ItemSuite4</span></code>. See <code class="docutils literal notranslate"><span class="pre">AEGP_SetSolidFootageColor</span></code> from <a class="reference internal" href="#aegps-aegp-suites-aegp-footagesuite"><span class="std std-ref">AEGP_FootageSuite5</span></a>.</p>
<p>Sets the color of an existing solid (error if <code class="docutils literal notranslate"><span class="pre">itemH</span></code> is not a solid).</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetSolidColor</span><span class="p">(</span>
  <span class="n">AEGP_ItemH</span>     <span class="n">itemH</span><span class="p">,</span>
  <span class="n">AEGP_ColorVal</span>  <span class="n">color</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetSolidDimensions</span></code></td>
<td><p class="first">Removed in <code class="docutils literal notranslate"><span class="pre">AEGP_ItemSuite4</span></code>. See <code class="docutils literal notranslate"><span class="pre">AEGP_SetSolidFootageDimensions</span></code> from <a class="reference internal" href="#aegps-aegp-suites-aegp-footagesuite"><span class="std std-ref">AEGP_FootageSuite5</span></a>.</p>
<p>Sets the dimensions of an existing solid (error if <code class="docutils literal notranslate"><span class="pre">itemH</span></code> is not a solid).</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetSolidDimensions</span><span class="p">(</span>
  <span class="n">AEGP_ItemH</span>  <span class="n">itemH</span><span class="p">,</span>
  <span class="n">A_short</span>     <span class="n">widthS</span><span class="p">,</span>
  <span class="n">A_short</span>     <span class="n">heightS</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_CreateNewFolder</span></code></td>
<td><p class="first">Creates a new folder in the project. The newly created folder is allocated and owned by After Effects.</p>
<p>Passing <code class="docutils literal notranslate"><span class="pre">NULL</span></code> for <code class="docutils literal notranslate"><span class="pre">parent_folderH0</span></code> creates the folder at the project’s root.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_CreateNewFolder</span><span class="p">(</span>
  <span class="k">const</span> <span class="n">A_UTF16Char</span>  <span class="o">*</span><span class="n">nameZ</span><span class="p">,</span>
  <span class="n">AEGP_ProjectH</span>      <span class="n">projH</span><span class="p">),</span>
  <span class="n">AEGP_ItemH</span>         <span class="n">parentH0</span><span class="p">),</span>
  <span class="n">AEGP_ItemH</span>         <span class="o">*</span><span class="n">new_folderPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetItemCurrentTime</span></code></td>
<td><p class="first">Sets the current time within a given <code class="docutils literal notranslate"><span class="pre">itemH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetItemCurrentTime</span><span class="p">(</span>
  <span class="n">AEGP_ItemH</span>    <span class="n">itemH</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_Time</span>  <span class="o">*</span><span class="n">new_timePT</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetItemCommentLength</span></code></td>
<td><p class="first">Removed in <code class="docutils literal notranslate"><span class="pre">ItemSuite9</span></code>. Retrieves the length (in characters) of the <code class="docutils literal notranslate"><span class="pre">itemH's</span></code> comment.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetItemCommentLength</span><span class="p">(</span>
  <span class="n">AEGP_ItemH</span>  <span class="n">itemH</span><span class="p">,</span>
  <span class="n">A_u_long</span>    <span class="o">*</span><span class="n">buf_sizePLu</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetItemComment</span></code></td>
<td><p class="first">Updated to support Unicode in <code class="docutils literal notranslate"><span class="pre">ItemSuite9</span></code>, available in 14.1. Retrieves the <code class="docutils literal notranslate"><span class="pre">itemH's</span></code> comment.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetItemComment</span><span class="p">(</span>
  <span class="n">AEGP_ItemH</span>      <span class="n">itemH</span><span class="p">,</span>
  <span class="n">AEGP_MemHandle</span>  <span class="o">*</span><span class="n">unicode_namePH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetItemComment</span></code></td>
<td><p class="first">Updated to support Unicode in <code class="docutils literal notranslate"><span class="pre">ItemSuite9</span></code>, available in 14.1. Sets the <code class="docutils literal notranslate"><span class="pre">itemH's</span></code> comment.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetItemComment</span><span class="p">(</span>
  <span class="n">AEGP_ItemH</span>         <span class="n">itemH</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_UTF16Char</span>  <span class="o">*</span><span class="n">commentZ</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetItemLabel</span></code></td>
<td><p class="first">Retrieves an item’s label.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetItemLabel</span><span class="p">(</span>
  <span class="n">AEGP_ItemH</span>    <span class="n">itemH</span><span class="p">,</span>
  <span class="n">AEGP_LabelID</span>  <span class="o">*</span><span class="n">labelP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetItemLabel</span></code></td>
<td><p class="first">Sets an item’s label.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetItemLabel</span><span class="p">(</span>
  <span class="n">AEGP_ItemH</span>    <span class="n">itemH</span><span class="p">,</span>
  <span class="n">AEGP_LabelID</span>  <span class="n">label</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetItemMRUView</span></code></td>
<td><p class="first">Gets an item’s most recently used view.
The view can be used with two calls in the <code class="docutils literal notranslate"><span class="pre">AEGP_ColorSettingsSuite</span></code>,
to perform a color transform on a pixel buffer from working to view color space.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetItemMRUView</span><span class="p">(</span>
  <span class="n">AEGP_ItemH</span>      <span class="n">itemH</span><span class="p">,</span>
  <span class="n">AEGP_ItemViewP</span>  <span class="o">*</span><span class="n">mru_viewP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><code class="docutils literal notranslate"><span class="pre">AEGP_RenderNewItemSoundData()</span></code> used to be here, but is now part of <a class="reference internal" href="#aegps-aegp-suites-aegp-rendersuite"><span class="std std-ref">AEGP_RenderSuite4</span></a>.</p>
</div>
<hr class="docutils" />
</div>
</div>
<div class="section" id="managing-selections">
<span id="aegps-aegp-suites-collection-suite"></span><h3>Managing Selections<a class="headerlink" href="#managing-selections" title="Permalink to this headline">¶</a></h3>
<p>This suite manages selection states, mirroring the functionality supplied by vectors in the C++ Standard Template Library.</p>
<p>Many types of items may be simultaneously selected in After Effects; <code class="docutils literal notranslate"><span class="pre">AEGP_CollectionItems</span></code> are unions of layer, mask, effect, stream, mask vertex, and keyframe items.</p>
<p>First acquire the current collection, then iterate across its members to ensure that whatever your AEGP does is applicable to each.</p>
<p>We’ve added <code class="docutils literal notranslate"><span class="pre">AEGP_Collection2H</span></code> and <code class="docutils literal notranslate"><span class="pre">AEGP_CollectionItemV2</span></code> so that selected dynamic streams can be handled with the <code class="docutils literal notranslate"><span class="pre">AEGP_CollectionSuite</span></code>.</p>
<div class="section" id="aegp-collectionsuite2">
<span id="aegps-aegp-suites-aegp-collectionsuite"></span><h4>AEGP_CollectionSuite2<a class="headerlink" href="#aegp-collectionsuite2" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="24%" />
<col width="76%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Function</strong></th>
<th class="head"><strong>Purpose</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_NewCollection</span></code></td>
<td><p class="first">Creates and returns a new, empty collection.
To obtain the current composition’s selection as a collection, use <code class="docutils literal notranslate"><span class="pre">AEGP_GetNewCollectionFromCompSelection</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_NewCollection</span><span class="p">(</span>
  <span class="n">AEGP_PluginID</span>      <span class="n">plugin_id</span><span class="p">,</span>
  <span class="n">AEGP_Collection2H</span>  <span class="o">*</span><span class="n">collectionPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_DisposeCollection</span></code></td>
<td><p class="first">Disposes of a collection.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_DisposeCollection</span><span class="p">(</span>
  <span class="n">AEGP_Collection2H</span>  <span class="n">collectionH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetCollectionNumItems</span></code></td>
<td><p class="first">Returns the number of items contained in the given collection.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetCollectionNumItems</span><span class="p">(</span>
  <span class="n">AEGP_Collection2H</span>  <span class="n">collectionH</span><span class="p">,</span>
  <span class="n">A_u_long</span>           <span class="o">*</span><span class="n">num_itemsPL</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetCollectionItemByIndex</span></code></td>
<td><p class="first">Retrieves (creates and populates) the index’d collection item.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetCollectionItemByIndex</span><span class="p">(</span>
  <span class="n">AEGP_Collection2H</span>      <span class="n">collectionH</span><span class="p">,</span>
  <span class="n">A_u_long</span>               <span class="n">indexL</span><span class="p">,</span>
  <span class="n">AEGP_CollectionItemV2</span>  <span class="o">*</span><span class="n">itemP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_CollectionPushBack</span></code></td>
<td><p class="first">Adds an item to the given collection.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_CollectionPushBack</span><span class="p">(</span>
  <span class="n">AEGP_Collection2H</span>            <span class="n">collectionH</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">AEGP_CollectionItemV2</span>  <span class="o">*</span><span class="n">itemP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_CollectionErase</span></code></td>
<td><p class="first">Removes an index’d item (or items) from a given collection. NOTE: this range is exclusive,
like STL iterators. To erase the first item, you would pass 0 and 1, respectively.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_CollectionErase</span><span class="p">(</span>
  <span class="n">AEGP_Collection2H</span>  <span class="n">collectionH</span><span class="p">,</span>
  <span class="n">A_u_long</span>           <span class="n">index_firstL</span><span class="p">,</span>
  <span class="n">A_u_long</span>           <span class="n">index_lastL</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="ownership-of-collection-items">
<h4>Ownership Of Collection Items<a class="headerlink" href="#ownership-of-collection-items" title="Permalink to this headline">¶</a></h4>
<p>When <code class="docutils literal notranslate"><span class="pre">AEGP_StreamRefHs</span></code> are inserted into a collection, they are adopted by the collection; do not free them.</p>
<p><code class="docutils literal notranslate"><span class="pre">AEGP_EffectRefHs</span></code>, on the other hand, are not adopted, and must be freed by the calling AEGP.</p>
<hr class="docutils" />
</div>
</div>
<div class="section" id="manipulate-compositions">
<span id="aegps-aegp-suites-composition-suite"></span><h3>Manipulate Compositions<a class="headerlink" href="#manipulate-compositions" title="Permalink to this headline">¶</a></h3>
<p>Provide information about the compositions in a project, and create cameras, lights, and solids.</p>
<div class="section" id="aegp-compsuite11">
<span id="aegps-aegp-suites-aegp-compsuite"></span><h4>AEGP_CompSuite11<a class="headerlink" href="#aegp-compsuite11" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="28%" />
<col width="72%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Function</strong></th>
<th class="head"><strong>Purpose</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetCompFromItem</span></code></td>
<td><p class="first">Retrieves the handle to the composition, given an item handle.
Returns <code class="docutils literal notranslate"><span class="pre">NULL</span></code> if <code class="docutils literal notranslate"><span class="pre">itemH</span></code> is not an <code class="docutils literal notranslate"><span class="pre">AEGP_CompH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetCompFromItem</span><span class="p">(</span>
  <span class="n">AEGP_ItemH</span>  <span class="n">itemH</span><span class="p">,</span>
  <span class="n">AEGP_CompH</span>  <span class="o">*</span><span class="n">compPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetItemFromComp</span></code></td>
<td><p class="first">Used to get the item handle, given a composition handle.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetItemFromComp</span><span class="p">(</span>
  <span class="n">AEGP_CompH</span>  <span class="n">compH</span><span class="p">,</span>
  <span class="n">AEGP_ItemH</span>  <span class="o">*</span><span class="n">itemPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetCompDownsampleFactor</span></code></td>
<td><p class="first">Returns current downsample factor. Measured in pixels X by Y.
Users can choose a custom downsample factor with independent X and Y.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetCompDownsampleFactor</span><span class="p">(</span>
  <span class="n">AEGP_CompH</span>             <span class="n">compH</span><span class="p">,</span>
  <span class="n">AEGP_DownsampleFactor</span>  <span class="o">*</span><span class="n">dsfP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetCompDownsampleFactor</span></code></td>
<td><p class="first">Sets the composition’s downsample factor.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetCompDownsampleFactor</span><span class="p">(</span>
  <span class="n">AEGP_CompH</span>             <span class="n">compH</span><span class="p">,</span>
  <span class="n">AEGP_DownsampleFactor</span>  <span class="o">*</span><span class="n">dsfP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetCompBGColor</span></code></td>
<td><p class="first">Returns the composition background color.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetCompBGColor</span><span class="p">(</span>
  <span class="n">AEGP_CompH</span>     <span class="n">compH</span><span class="p">,</span>
  <span class="n">AEGP_ColorVal</span>  <span class="o">*</span><span class="n">bg_colorP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetCompBGColor</span></code></td>
<td><p class="first">Sets a composition’s background color.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetCompBGColor</span><span class="p">(</span>
  <span class="n">AEGP_CompH</span>           <span class="n">compH</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">AEGP_ColorVal</span>  <span class="o">*</span><span class="n">bg_colorP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetCompFlags</span></code></td>
<td><p class="first">Returns composition flags, or’d together.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetCompFlags</span><span class="p">(</span>
  <span class="n">AEGP_CompH</span>      <span class="n">compH</span><span class="p">,</span>
  <span class="n">AEGP_CompFlags</span>  <span class="o">*</span><span class="n">AEGP_CompFlags</span><span class="p">);</span>
</pre></div>
</div>
<ul class="last simple">
<li><code class="docutils literal notranslate"><span class="pre">AEGP_CompFlag_SHOW_ALL_SHY</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_CompFlag_ENABLE_MOTION_BLUR</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_CompFlag_ENABLE_TIME_FILTER</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_CompFlag_GRID_TO_FRAME</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_CompFlag_GRID_TO_FIELDS</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_CompFlag_USE_LOCAL_DSF</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_CompFlag_DRAFT_3D</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_CompFlag_SHOW_GRAPH</span></code></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetShowLayerNameOrSourceName</span></code></td>
<td><p class="first">New in CC. Passes back true if the Comp’s timeline shows layer names, false if source names.
This will open the comp as a side effect.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetShowLayerNameOrSourceName</span><span class="p">(</span>
  <span class="n">AEGP_CompH</span>  <span class="n">compH</span><span class="p">,</span>
  <span class="n">A_Boolean</span>   <span class="o">*</span><span class="n">layer_names_shownPB</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetShowLayerNameOrSourceName</span></code></td>
<td><p class="first">New in CC. Pass in true to have the Comp’s timeline show layer names, false for source names.
This will open the comp as a side effect.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetShowLayerNameOrSourceName</span><span class="p">(</span>
  <span class="n">AEGP_CompH</span>  <span class="n">compH</span><span class="p">,</span>
  <span class="n">A_Boolean</span>   <span class="o">*</span><span class="n">layer_names_shownPB</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetShowBlendModes</span></code></td>
<td><p class="first">New in CC. Passes back true if the Comp’s timeline shows blend modes column, false if hidden.
This will open the comp as a side effect.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetShowBlendModes</span><span class="p">(</span>
  <span class="n">AEGP_CompH</span>  <span class="n">compH</span><span class="p">,</span>
  <span class="n">A_Boolean</span>   <span class="o">*</span><span class="n">blend_modes_shownPB</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetShowBlendModes</span></code></td>
<td><p class="first">New in CC. Pass in true to have the Comp’s timeline show the blend modes column, false to hide it.
This will open the comp as a side effect.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetCompFlags</span><span class="p">(</span>
  <span class="n">AEGP_CompH</span>  <span class="n">compH</span><span class="p">,</span>
  <span class="n">A_Boolean</span>   <span class="n">show_blend_modesB</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetCompFramerate</span></code></td>
<td><p class="first">Returns the composition’s frames per second.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetCompFramerate</span><span class="p">(</span>
  <span class="n">AEGP_CompH</span>  <span class="n">compH</span><span class="p">,</span>
  <span class="n">A_FpLong</span>    <span class="o">*</span><span class="n">fpsPF</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetCompFramerate</span></code></td>
<td><p class="first">Sets the composition’s frames per second.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetCompFramerate</span><span class="p">(</span>
  <span class="n">AEGP_CompH</span>  <span class="n">compH</span><span class="p">,</span>
  <span class="n">A_FpLong</span>    <span class="o">*</span><span class="n">fpsPF</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetCompShutterAnglePhase</span></code></td>
<td><p class="first">The composition shutter angle and phase.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetCompShutterAnglePhase</span><span class="p">(</span>
  <span class="n">AEGP_CompH</span>  <span class="n">compH</span><span class="p">,</span>
  <span class="n">A_Ratio</span>     <span class="o">*</span><span class="n">angle</span><span class="p">,</span>
  <span class="n">A_Ratio</span>     <span class="o">*</span><span class="n">phase</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetCompShutterFrameRange</span></code></td>
<td><p class="first">The duration of the shutter frame, in seconds.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetCompShutterFrameRange</span><span class="p">(</span>
  <span class="n">AEGP_CompH</span>    <span class="n">compH</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_Time</span>  <span class="o">*</span><span class="n">comp_timeP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetCompSuggestedMotionBlurSamples</span></code></td>
<td><p class="first">Retrieves the number of motion blur samples After Effects will perform in the given composition.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetCompSuggestedMotionBlurSamples</span><span class="p">(</span>
  <span class="n">AEGP_CompH</span>  <span class="n">compH</span><span class="p">,</span>
  <span class="n">A_long</span>      <span class="o">*</span><span class="n">samplesPL</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetCompSuggestedMotionBlurSamples</span></code></td>
<td><p class="first">Specifies the number of motion blur samples After Effects will perform in the given composition. Undoable.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetCompSuggestedMotionBlurSamples</span><span class="p">(</span>
  <span class="n">AEGP_CompH</span>  <span class="n">compH</span><span class="p">,</span>
  <span class="n">A_long</span>      <span class="n">samplesL</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetCompMotionBlurAdaptiveSampleLimit</span></code></td>
<td><p class="first">New in CC. Retrieves the motion blur adaptive sample limit for the given composition.
As of CC, a new comp defaults to 128.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetCompMotionBlurAdaptiveSampleLimit</span><span class="p">(</span>
  <span class="n">AEGP_CompH</span>  <span class="n">compH</span><span class="p">,</span>
  <span class="n">A_long</span>      <span class="o">*</span><span class="n">samplesPL</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetCompMotionBlurAdaptiveSampleLimit</span></code></td>
<td><p class="first">New in CC. Specifies the motion blur adaptive sample limit for the given composition.
As of CC, both the limit and the suggested values are clamped to [2,256] range
and the limit value will not be allowed less than the suggested value.</p>
<p>Undoable.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetCompMotionBlurAdaptiveSampleLimit</span><span class="p">(</span>
  <span class="n">AEGP_CompH</span>  <span class="n">compH</span><span class="p">,</span>
  <span class="n">A_long</span>      <span class="n">samplesL</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetCompWorkAreaStart</span></code></td>
<td><p class="first">Get the time where the current work area starts.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetCompWorkAreaStart</span><span class="p">(</span>
  <span class="n">AEGP_CompH</span>  <span class="n">compH</span><span class="p">,</span>
  <span class="n">A_Time</span>      <span class="o">*</span><span class="n">startPT</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetCompWorkAreaDuration</span></code></td>
<td><p class="first">Get the duration of a composition’s current work area, in seconds.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetCompWorkAreaDuration</span><span class="p">(</span>
  <span class="n">AEGP_CompH</span>  <span class="n">compH</span><span class="p">,</span>
  <span class="n">A_Time</span>      <span class="o">*</span><span class="n">durationPT</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetCompWorkAreaStartAndDuration</span></code></td>
<td><p class="first">Set the work area start and duration, in seconds. Undo-able.
One call to this function is sufficient to set the layer’s in point and duration;
it’s not necessary to call it twice, once for each timespace.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetCompWorkAreaStartAndDuration</span><span class="p">(</span>
  <span class="n">AEGP_CompH</span>    <span class="n">compH</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_Time</span>  <span class="o">*</span><span class="n">startPT</span><span class="p">)</span>
  <span class="k">const</span> <span class="n">A_Time</span>  <span class="o">*</span><span class="n">durationPT</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_CreateSolidInComp</span></code></td>
<td><p class="first">Creates a new solid with a specified width, height, color, and duration in the composition. Undo-able.</p>
<p>If you pass <code class="docutils literal notranslate"><span class="pre">NULL</span></code> for the duration, After Effects uses its preference for the duration of a new still.
If you pass NULL, or an invalid time scale, duration is set to the length of the composition.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_CreateSolidInComp</span><span class="p">(</span>
  <span class="k">const</span> <span class="n">A_UTF16Char</span>  <span class="o">*</span><span class="n">utf_nameZ</span><span class="p">,</span>
  <span class="n">A_Long</span>             <span class="n">widthL</span><span class="p">,</span>
  <span class="n">A_Long</span>             <span class="n">heightL</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">PF_Pixel</span>     <span class="o">*</span><span class="n">color</span><span class="p">,</span>
  <span class="n">AEGP_CompH</span>         <span class="n">parent_compH</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_Time</span>       <span class="o">*</span><span class="n">durationPT0</span><span class="p">,</span>
  <span class="n">AEGP_LayerH</span>        <span class="o">*</span><span class="n">new_solidPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_CreateCameraInComp</span></code></td>
<td><p class="first">Creates and adds a camera to the specified composition.
Once created, you can manipulate the camera’s parameter streams using the AEGP <a class="reference internal" href="#aegps-aegp-suites-stream-suite"><span class="std std-ref">Stream Suite</span></a>.</p>
<p>To specify a two-node camera, use <code class="docutils literal notranslate"><span class="pre">AEGP_SetLayerFlag</span></code>
from <a class="reference internal" href="#aegps-aegp-suites-aegp-layersuite"><span class="std std-ref">AEGP_LayerSuite8</span></a> to set <code class="docutils literal notranslate"><span class="pre">AEGP_LayerFlag_LOOK_AT_POI</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_CreateCameraInComp</span><span class="p">(</span>
  <span class="k">const</span> <span class="n">A_UTF16Char</span>  <span class="o">*</span><span class="n">utf_nameZ</span><span class="p">,</span>
  <span class="n">A_FloatPoint</span>       <span class="n">center_point</span><span class="p">,</span>
  <span class="n">AEGP_CompH</span>         <span class="n">parent_compH</span><span class="p">,</span>
  <span class="n">AEGP_LayerH</span>        <span class="o">*</span><span class="n">new_cameraPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_CreateLightInComp</span></code></td>
<td><p class="first">Creates and adds a light to the specified composition.
Once created, you can manipulate the light’s parameter streams using the AEGP <a class="reference internal" href="#aegps-aegp-suites-stream-suite"><span class="std std-ref">Stream Suite</span></a>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_CreateLightInComp</span><span class="p">(</span>
  <span class="k">const</span> <span class="n">A_UTF16Char</span>  <span class="o">*</span><span class="n">utf_nameZ</span><span class="p">,</span>
  <span class="n">A_FloatPoint</span>       <span class="n">center_point</span><span class="p">,</span>
  <span class="n">AEGP_CompH</span>         <span class="n">parent_compH</span><span class="p">,</span>
  <span class="n">AEGP_LayerH</span>        <span class="o">*</span><span class="n">new_lightPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_CreateComp</span></code></td>
<td><p class="first">Creates a new composition for the project.
If you don’t provide a parent folder, the composition will be at the root level of the project. Undo-able.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_CreateComp</span><span class="p">(</span>
  <span class="n">AEGP_ItemH</span>         <span class="n">parent_folderHO</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_UTF16Char</span>  <span class="o">*</span><span class="n">utf_nameZ</span><span class="p">,</span>
  <span class="n">A_Long</span>             <span class="n">widthL</span><span class="p">,</span>
  <span class="n">A_Long</span>             <span class="n">heightL</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_Ratio</span>      <span class="o">*</span><span class="n">pixel_aspect_ratioPRt</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_Time</span>       <span class="o">*</span><span class="n">durationPT</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_Ratio</span>      <span class="o">*</span><span class="n">frameratePRt</span><span class="p">,</span>
  <span class="n">AEGP_CompH</span>         <span class="o">*</span><span class="n">new_compPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetNewCollectionFromCompSelection</span></code></td>
<td><p class="first">Creates a new AEGP_Collection2H from the items selected in the given composition.
The plug-in is responsible for disposing of the <code class="docutils literal notranslate"><span class="pre">AEGP_Collection2H</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetNewCollectionFromCompSelection</span><span class="p">(</span>
  <span class="n">AEGP_PluginID</span>      <span class="n">plugin_id</span><span class="p">,</span>
  <span class="n">AEGP_CompH</span>         <span class="n">compH</span><span class="p">,</span>
  <span class="n">AEGP_Collection2H</span>  <span class="o">*</span><span class="n">collectionPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetSelection</span></code></td>
<td><p class="first">Sets the selection within the given composition to the given <code class="docutils literal notranslate"><span class="pre">AEGP_Collection2H</span></code>.
Will return an error if members of the <code class="docutils literal notranslate"><span class="pre">AEGP_Collection2H</span></code> are not available.
Don’t assume that a composition hasn’t changed between operations; always use a fresh <code class="docutils literal notranslate"><span class="pre">AEGP_Collection2H</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetSelection</span><span class="p">(</span>
  <span class="n">AEGP_CompH</span>         <span class="n">compH</span><span class="p">,</span>
  <span class="n">AEGP_Collection2H</span>  <span class="n">collectionH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetCompDisplayStartTime</span></code></td>
<td><p class="first">Gets the displayed start time of a composition.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetCompDisplayStartTime</span><span class="p">(</span>
  <span class="n">AEGP_CompH</span>    <span class="n">compH</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_Time</span>  <span class="o">*</span><span class="n">start_timePT</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetCompDisplayStartTime</span></code></td>
<td><p class="first">Not undo-able. Sets the displayed start time of a composition (has no effect on the duration of the composition).</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetCompDisplayStartTime</span><span class="p">(</span>
  <span class="n">AEGP_CompH</span>    <span class="n">compH</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_Time</span>  <span class="o">*</span><span class="n">start_timePT</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetCompDuration</span></code></td>
<td><p class="first">Undoable. Sets the duration of the given composition.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetCompDuration</span><span class="p">(</span>
  <span class="n">AEGP_CompH</span>    <span class="n">compH</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_Time</span>  <span class="o">*</span><span class="n">durationPT</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_CreateNullInComp</span></code></td>
<td><p class="first">Creates a “null object” in the composition (useful for translating projects from 3D applications into After Effects).</p>
<p>If you pass <code class="docutils literal notranslate"><span class="pre">NULL</span></code> for the duration, After Effects uses its preference for the duration of a new still.
If you pass 0, or an invalid time scale, duration is set to the length of the composition.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_CreateNullInComp</span><span class="p">(</span>
  <span class="k">const</span> <span class="n">A_UTF16Char</span>  <span class="o">*</span><span class="n">utf_nameZ</span><span class="p">,</span>
  <span class="n">AEGP_CompH</span>         <span class="n">parent_compH</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_Time</span>       <span class="o">*</span><span class="n">durationPT0</span><span class="p">,</span>
  <span class="n">AEGP_LayerH</span>        <span class="o">*</span><span class="n">new_null_solidPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetCompPixelAspectRatio</span></code></td>
<td><p class="first">Sets the pixel aspect ratio of a composition.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetCompPixelAspectRatio</span><span class="p">(</span>
  <span class="n">AEGP_CompH</span>     <span class="n">compH</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_Ratio</span>  <span class="o">*</span><span class="n">parPRt</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_CreateTextLayerInComp</span></code></td>
<td><p class="first">Updated in CS6. Creates a text layer in the composition, and returns its <code class="docutils literal notranslate"><span class="pre">AEGP_LayerH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_CreateTextLayerInComp</span><span class="p">(</span>
  <span class="n">AEGP_CompH</span>   <span class="n">parent_compH</span><span class="p">,</span>
  <span class="n">A_Boolean</span>    <span class="n">select_new_layerB</span><span class="p">,</span>
  <span class="n">AEGP_LayerH</span>  <span class="o">*</span><span class="n">new_text_lyrPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_CreateBoxTextLayerInComp</span></code></td>
<td><p class="first">Updated in CS6. Creates a new box text layer, and returns its <code class="docutils literal notranslate"><span class="pre">AEGP_LayerH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_CreateBoxTextLayerInComp</span><span class="p">(</span>
  <span class="n">AEGP_CompH</span>    <span class="n">parent_compH</span><span class="p">,</span>
  <span class="n">A_Boolean</span>     <span class="n">select_new_layerB</span><span class="p">,</span>
  <span class="n">A_FloatPoint</span>  <span class="n">box_dimensions</span><span class="p">,</span>
  <span class="n">AEGP_LayerH</span>   <span class="o">*</span><span class="n">new_text_layerPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetCompDimensions</span></code></td>
<td><p class="first">Sets the dimensions of the composition. Undoable.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetCompDimensions</span><span class="p">(</span>
  <span class="n">AEGP_CompH</span>  <span class="n">compH</span><span class="p">,</span>
  <span class="n">A_long</span>      <span class="n">widthL</span><span class="p">,</span>
  <span class="n">A_long</span>      <span class="n">heightL</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_DuplicateComp</span></code></td>
<td><p class="first">Duplicates the composition. Undoable.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_DuplicateComp</span><span class="p">(</span>
  <span class="n">AEGP_CompH</span>  <span class="n">compH</span><span class="p">,</span>
  <span class="n">AEGP_CompH</span>  <span class="o">*</span><span class="n">new_compPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetCompFrameDuration</span></code></td>
<td><p class="first">Retrieves the duration of a frame in a composition.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetCompFrameDuration</span><span class="p">(</span>
  <span class="n">AEGP_CompH</span>  <span class="n">compH</span><span class="p">,</span>
  <span class="n">A_Time</span>      <span class="o">*</span><span class="n">timeP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetMostRecentlyUsedComp</span></code></td>
<td><p class="first">Returns the most-recently-used composition.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetMostRecentlyUsedComp</span><span class="p">(</span>
  <span class="n">AEGP_CompH</span>  <span class="o">*</span><span class="n">compPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_CreateVectorLayerInComp</span></code></td>
<td><p class="first">Creates and returns a handle to a new vector layer.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_CreateVectorLayerInComp</span><span class="p">(</span>
  <span class="n">AEGP_CompH</span>   <span class="n">parent_compH</span><span class="p">,</span>
  <span class="n">AEGP_LayerH</span>  <span class="o">*</span><span class="n">new_vec_layerPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetNewCompMarkerStream</span></code></td>
<td><p class="first">Returns an AEGP_StreamRefH to the composition’s marker stream.
Must be disposed by caller.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetNewCompMarkerStream</span><span class="p">(</span>
  <span class="n">AEGP_PluginID</span>    <span class="n">aegp_plugin_id</span><span class="p">,</span>
  <span class="n">AEGP_CompH</span>       <span class="n">parent_compH</span><span class="p">,</span>
  <span class="n">AEGP_StreamRefH</span>  <span class="o">*</span><span class="n">streamPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetCompDisplayDropFrame</span></code></td>
<td><p class="first">Passes back a boolean that indicates whether the specified comp uses drop-frame timecode or not.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetCompDisplayDropFrame</span><span class="p">(</span>
  <span class="n">AEGP_CompH</span>  <span class="n">compH</span><span class="p">,</span>
  <span class="n">A_Boolean</span>   <span class="o">*</span><span class="n">dropFramePB</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetCompDisplayDropFrame</span></code></td>
<td><p class="first">Sets the dropness of the timecode in the specified composition.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetCompDisplayDropFrame</span><span class="p">(</span>
  <span class="n">AEGP_CompH</span>  <span class="n">compH</span><span class="p">,</span>
  <span class="n">A_Boolean</span>   <span class="n">dropFrameB</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_ReorderCompSelection</span></code></td>
<td><p class="first">Move the selection to a certain layer index. Use along with <code class="docutils literal notranslate"><span class="pre">AEGP_SetSelection().</span></code></p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetCompDisplayDropFrame</span><span class="p">(</span>
  <span class="n">AEGP_CompH</span>  <span class="n">compH</span><span class="p">,</span>
  <span class="n">A_long</span>      <span class="n">index</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
</div>
</div>
<div class="section" id="work-with-footage">
<span id="aegps-aegp-suites-footage-suite"></span><h3>Work with Footage<a class="headerlink" href="#work-with-footage" title="Permalink to this headline">¶</a></h3>
<p>Provides information about footage, or items in a project or composition. When getting and setting footage’s interpretation, it is possible to specify incompatible options.</p>
<p>If you encounter warnings and errors during development, be sure to make all related changes atomically, and reassess the logic of the operation you’re performing.</p>
<p>For example, changing the pull-down interpretation of footage won’t work unless there’s a difference between it’s native and conformed frame rate.</p>
<p>Depending on what you’re trying to accomplish, it may make sense to abort all of your operations at that point, inform the user of the problem encountered.</p>
<div class="section" id="aegp-footagesuite5">
<span id="aegps-aegp-suites-aegp-footagesuite"></span><h4>AEGP_FootageSuite5<a class="headerlink" href="#aegp-footagesuite5" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Function</strong></th>
<th class="head"><strong>Purpose</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetMainFootageFromItem</span></code></td>
<td><p class="first">Returns an error if item isn’t a footage item.
Used to convert an item handle to a footage handle.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetMainFootageFromItem</span><span class="p">(</span>
  <span class="n">AEGP_ItemH</span>     <span class="n">itemH</span><span class="p">,</span>
  <span class="n">AEGP_FootageH</span>  <span class="o">*</span><span class="n">footagePH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetProxyFootageFromItem</span></code></td>
<td><p class="first">Returns an error if item has no proxy. Returns the proxy footage handle.
Note: a composition can have a proxy.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetProxyFootageFromItem</span><span class="p">(</span>
  <span class="n">AEGP_ItemH</span>     <span class="n">itemH</span><span class="p">,</span>
  <span class="n">AEGP_FootageH</span>  <span class="o">*</span><span class="n">proxy_ftgPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetFootageNumFiles</span></code></td>
<td><p class="first">Returns the number of data (RGBA or audio) files, and the number of files per frame (may be greater than one if the footage has auxiliary channels).</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetFootageNumFiles</span><span class="p">(</span>
  <span class="n">AEGP_FootageH</span>  <span class="n">footageH</span><span class="p">,</span>
  <span class="n">A_long</span>         <span class="o">*</span><span class="n">num_filesPL0</span><span class="p">,</span>
  <span class="n">A_long</span>         <span class="o">*</span><span class="n">files_per_frmPL0</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetFootagePath</span></code></td>
<td><p class="first">Get fully realized path to footage source file.</p>
<p>Retrieves the footage path for a piece of footage (or for the specified frame of a footage sequence).
<code class="docutils literal notranslate"><span class="pre">frame_numL</span></code> ranges from <code class="docutils literal notranslate"><span class="pre">0</span> <span class="pre">to</span> <span class="pre">num_main_files</span></code>, as obtained using <code class="docutils literal notranslate"><span class="pre">AEGP_GetFootageNumFiles</span></code> from <a class="reference internal" href="#aegps-aegp-suites-aegp-footagesuite"><span class="std std-ref">AEGP_FootageSuite5</span></a>.</p>
<p><code class="docutils literal notranslate"><span class="pre">AEGP_FOOTAGE_MAIN_FILE_INDEX</span></code> is the main file.
The path is a handle to a NULL-terminated <code class="docutils literal notranslate"><span class="pre">A_UTF16Char</span></code> string, and must be disposed with <cite>AEGP_FreeMemHandle</cite>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetFootagePath</span><span class="p">(</span>
  <span class="n">AEGP_FootageH</span>   <span class="n">footageH</span><span class="p">,</span>
  <span class="n">A_long</span>          <span class="n">frame_numL</span><span class="p">,</span>
  <span class="n">A_long</span>          <span class="n">file_indexL</span><span class="p">,</span>
  <span class="n">AEGP_MemHandle</span>  <span class="o">*</span><span class="n">unicode_pathPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetFootageSignature</span></code></td>
<td><p class="first">Retrieves the footage signature of specified footage.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetFootageSignature</span><span class="p">(</span>
  <span class="n">AEGP_FootageH</span>          <span class="n">footageH</span><span class="p">,</span>
  <span class="n">AEGP_FootageSignature</span>  <span class="o">*</span><span class="n">sigP</span><span class="p">);</span>
</pre></div>
</div>
<p>The signature will be one of the following:</p>
<blockquote class="last">
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">AEGP_FootageSignature_NONE</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_FootageSignature_MISSING</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_FootageSignature_SOLID</span></code></li>
</ul>
</div></blockquote>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_NewFootage</span></code></td>
<td><p class="first">Creates a new footage item. The file path is a NULL-terminated UTF-16 string with platform separators.
Note that footage filenames with colons are not allowed, since colons are used as path separators in the HFS+ file system.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_NewFootage</span><span class="p">(</span>
  <span class="n">AEGP_PluginID</span>                         <span class="n">aegp_plugin_id</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_UTF16Char</span>                     <span class="o">*</span><span class="n">pathZ</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">AEGP_FootageLayerKey</span>            <span class="o">*</span><span class="n">layer_infoP0</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">AEGP_FileSequenceImportOptions</span>  <span class="o">*</span><span class="n">sequence_optionsP0</span><span class="p">,</span>
  <span class="n">AEGP_InterpretationStyle</span>              <span class="n">interp_style</span><span class="p">,</span>
  <span class="kt">void</span>                                  <span class="o">*</span><span class="n">reserved</span><span class="p">,</span>
  <span class="n">AEGP_FootageH</span>                         <span class="o">*</span><span class="n">footagePH</span><span class="p">);</span>
</pre></div>
</div>
<p>Note the optional params. If <code class="docutils literal notranslate"><span class="pre">allow_interpretation_dialogB</span></code> is <cite>FALSE</cite>, After Effects will guess the alpha interpretation.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
  <span class="n">A_long</span>               <span class="n">layer_idL</span><span class="p">;</span>
  <span class="n">A_long</span>               <span class="n">layer_indexL</span>
  <span class="kt">char</span>                 <span class="o">*</span><span class="n">nameAC</span><span class="p">;</span>
  <span class="n">AEGP_LayerDrawStyle</span>  <span class="n">draw_style</span><span class="p">;</span>
<span class="p">}</span> <span class="n">AEGP_FootageLayerKey</span><span class="p">;</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">AEGP_LayerDrawStyle</span></code> can be:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerDrawStyle_LAYER_BOUNDS</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerDrawStyle_DOCUMENT_BOUNDS</span></code></li>
</ul>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">AEGP_InterpretationStyle</span></code> can be:</p>
<blockquote class="last">
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">AEGP_InterpretationStyle_NO_DIALOG_GUESS</span></code> Will guess alpha interpretation even if file contains unknown alpha interpretation and user pref says to ask user.</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_InterpretationStyle_DIALOG_OK</span></code> Optionally can show a dialog.</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_InterpretationStyle_NO_DIALOG_NO_GUESS</span></code> Used for replace footage implementation.</li>
</ul>
</div></blockquote>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_AddFootageToProject</span></code></td>
<td><p class="first">Adds a footage item to a project. Footage will be adopted by the project, and may be added only once.
This is Undo-able; do not dispose of the returned added item if it’s undone.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_AddFootageToProject</span><span class="p">(</span>
  <span class="n">AEGP_FootageH</span>  <span class="n">footageH</span><span class="p">,</span>
  <span class="n">AEGP_ItemH</span>     <span class="n">folderH</span><span class="p">,</span>
  <span class="n">AEGP_ItemH</span>     <span class="o">*</span><span class="n">add_itemPH0</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetItemProxyFootage</span></code></td>
<td><p class="first">Sets footage as the proxy for an item. Will be adopted by the project.
This is Undo-able; do not dispose of the returned added item if it’s undone.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetItemProxyFootage</span><span class="p">(</span>
  <span class="n">AEGP_FootageH</span>  <span class="n">footageH</span><span class="p">,</span>
  <span class="n">AEGP_ItemH</span>     <span class="n">itemH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_ReplaceItemMainFootage</span></code></td>
<td><p class="first">Replaces footage for an item. The item will replace the main footage for this item.
This is Undo-able; do not dispose of the returned added item if it’s undone.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_ReplaceItemMainFootage</span><span class="p">(</span>
  <span class="n">AEGP_FootageH</span>  <span class="n">footageH</span><span class="p">,</span>
  <span class="n">AEGP_ItemH</span>     <span class="n">itemH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_DisposeFootage</span></code></td>
<td><p class="first">Deletes a footage item. Do not dispose of footage you did not create, or that has been added to the project.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_DisposeFootage</span><span class="p">(</span>
  <span class="n">AEGP_FootageH</span>  <span class="n">footageH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetFootageInterpretation</span></code></td>
<td><p class="first">Populates an AEGP_FootageInterp describing the settings of the <code class="docutils literal notranslate"><span class="pre">AEGP_FootageH</span></code>.
There is no way to create a valid <code class="docutils literal notranslate"><span class="pre">AEGP_FootageInterp</span></code> other than by using this function.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetFootageInterpretation</span><span class="p">(</span>
  <span class="k">const</span> <span class="n">AEGP_ItemH</span>    <span class="n">itemH</span><span class="p">,</span>
  <span class="n">A_Boolean</span>           <span class="n">proxyB</span><span class="p">,</span>
  <span class="n">AEGP_FootageInterp</span>  <span class="o">*</span><span class="n">interpP</span><span class="p">);</span>
</pre></div>
</div>
<p class="last">If proxyB is <code class="docutils literal notranslate"><span class="pre">TRUE</span></code>, the proxy footage’s settings are retrieved.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetFootageInterpretation</span></code></td>
<td><p class="first">Apply the settings in the <code class="docutils literal notranslate"><span class="pre">AEGP_FootageInterp</span></code> to the <code class="docutils literal notranslate"><span class="pre">AEGP_FootageH</span></code>. Undo-able.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetFootageInterpreta</span> <span class="nf">tion</span><span class="p">(</span>
  <span class="k">const</span> <span class="n">AEGP_ItemH</span>          <span class="n">itemH</span><span class="p">,</span>
  <span class="n">A_Boolean</span>                 <span class="n">proxyB</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">AEGP_FootageInterp</span>  <span class="o">*</span><span class="n">interpP</span><span class="p">);</span>
</pre></div>
</div>
<p class="last">If <code class="docutils literal notranslate"><span class="pre">proxyB</span></code> is <code class="docutils literal notranslate"><span class="pre">TRUE</span></code>, the proxy footage’s settings are modified.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetFootageLayerKey</span></code></td>
<td><p class="first">Populates an <code class="docutils literal notranslate"><span class="pre">AEGP_FootageLayerKey</span></code> describing the footage.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetFootageLayerKey</span><span class="p">(</span>
  <span class="n">AEGP_FootageH</span>          <span class="n">footageH</span><span class="p">,</span>
  <span class="n">AEGP_FootageLayerKey</span><span class="o">*</span>  <span class="n">layerKeyP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_NewPlaceholderFootage</span></code></td>
<td><p class="first">Deprecated. Adds a new placeholder footage item to the project.
Using this function for missing footage will cause the user to search for each individual missing file, regardless of whether or not they’re all in the same directory.
Undo-able.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_NewPlaceholderFootage</span><span class="p">(</span>
  <span class="n">AEGP_PluginID</span>  <span class="n">plugin_id</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_char</span>   <span class="o">*</span><span class="n">nameZ</span><span class="p">,</span>
  <span class="n">A_long</span>         <span class="n">width</span><span class="p">,</span>
  <span class="n">A_long</span>         <span class="n">height</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_Time</span>   <span class="o">*</span><span class="n">durationPT</span><span class="p">,</span>
  <span class="n">AEGP_FootageH</span>  <span class="o">*</span><span class="n">footagePH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_NewPlaceholderFootageWithPath</span></code></td>
<td><p class="first">This is the hip new way to add references to footage that can’t be found right this moment.
The file path is a NULL-terminated UTF-16 string with platform separators.</p>
<p>In CS6 and earlier, file_type was ignored and we previously recommendedsetting it to <code class="docutils literal notranslate"><span class="pre">AEIO_FileType_NONE</span></code>.
Starting in CC, <code class="docutils literal notranslate"><span class="pre">AEIO_FileType_NONE</span></code> is now a warning condition.
If you pass <code class="docutils literal notranslate"><span class="pre">AEIO_FileType_ANY</span></code>, then path MUST exist.</p>
<p>If the path may not exist, pass <code class="docutils literal notranslate"><span class="pre">AEIO_FileType_DIR</span></code> for folder, or <code class="docutils literal notranslate"><span class="pre">AEIO_FileType_GENERIC</span></code> for a file.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_NewPlaceholderFootageWithPath</span><span class="p">(</span>
  <span class="n">AEGP_PluginID</span>      <span class="n">plugin_id</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_UTF16Char</span>  <span class="o">*</span><span class="n">pathZ</span><span class="p">,</span>
  <span class="n">AEGP_Platform</span>      <span class="n">path_platform</span><span class="p">,</span>
  <span class="n">AEIO_FileType</span>      <span class="n">file_type</span><span class="p">,</span>
  <span class="n">A_long</span>             <span class="n">widthL</span><span class="p">,</span>
  <span class="n">A_long</span>             <span class="n">heightL</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_Time</span>       <span class="o">*</span><span class="n">durationPT</span><span class="p">,</span>
  <span class="n">AEGP_FootageH</span>      <span class="o">*</span><span class="n">footagePH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_NewSolidFootage</span></code></td>
<td><p class="first">This is the way to add a solid.
Until the footage is added to the project, the caller owns the <code class="docutils literal notranslate"><span class="pre">AEGP_FootageH</span></code>
(and must dispose of it if, and only if, it isn’t added to the project).</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_NewSolidFootage</span><span class="p">(</span>
  <span class="k">const</span> <span class="n">A_char</span>         <span class="o">*</span><span class="n">nameZ</span><span class="p">,</span>
  <span class="n">A_long</span>               <span class="n">width</span><span class="p">,</span>
  <span class="n">A_long</span>               <span class="n">height</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">AEGP_ColorVal</span>  <span class="o">*</span><span class="n">colorP</span><span class="p">,</span>
  <span class="n">AEGP_FootageH</span>        <span class="o">*</span><span class="n">footagePH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetSolidFootageColor</span></code></td>
<td><p class="first">Returns the color of a given solid. Returns an error if the <code class="docutils literal notranslate"><span class="pre">AEGP_ItemH</span></code> is not a solid.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetSolidFootageColor</span><span class="p">(</span>
  <span class="n">AEGP_ItemH</span>     <span class="n">itemH</span><span class="p">,</span>
  <span class="n">A_Boolean</span>      <span class="n">proxyB</span><span class="p">,</span>
  <span class="n">AEGP_ColorVal</span>  <span class="o">*</span><span class="n">colorP</span><span class="p">);</span>
</pre></div>
</div>
<p class="last">If <code class="docutils literal notranslate"><span class="pre">proxyB</span></code> is <code class="docutils literal notranslate"><span class="pre">TRUE</span></code>, the proxy solid’s color is retrieved.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetSolidFootageColor</span></code></td>
<td><p class="first">Sets the color of a solid. Undo-able.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetSolidFootageColor</span><span class="p">(</span>
  <span class="n">AEGP_ItemH</span>     <span class="n">itemH</span><span class="p">,</span>
  <span class="n">A_Boolean</span>      <span class="n">proxyB</span><span class="p">,</span>
  <span class="n">AEGP_ColorVal</span>  <span class="o">*</span><span class="n">colorP</span><span class="p">);</span>
</pre></div>
</div>
<p class="last">If <code class="docutils literal notranslate"><span class="pre">proxyB</span></code> is <code class="docutils literal notranslate"><span class="pre">TRUE</span></code>, the proxy solid’s color is set.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetSolidFootageDimensions</span></code></td>
<td><p class="first">Sets the dimensions of a solid. Undo-able.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetSolidFootageDimensions</span><span class="p">(</span>
  <span class="n">AEGP_ItemH</span>  <span class="n">itemH</span><span class="p">,</span>
  <span class="n">A_Boolean</span>   <span class="n">proxyB</span><span class="p">,</span>
  <span class="n">A_long</span>      <span class="n">widthL</span><span class="p">,</span>
  <span class="n">A_long</span>      <span class="n">heightL</span><span class="p">);</span>
</pre></div>
</div>
<p class="last">If <code class="docutils literal notranslate"><span class="pre">proxyB</span></code> is <code class="docutils literal notranslate"><span class="pre">TRUE</span></code>, the proxy solid’s dimensions are modified. Returns an error if the item isn’t a solid.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetFootageSoundDataFormat</span></code></td>
<td><p class="first">Retrieves information about the audio data in the footage item (by populating the <code class="docutils literal notranslate"><span class="pre">AEGP_SoundDataFormat</span></code> you passed in).</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetFootageSoundDataFormat</span><span class="p">(</span>
  <span class="n">AEGP_FootageH</span>         <span class="n">footageH</span><span class="p">,</span>
  <span class="n">AEGP_SoundDataFormat</span>  <span class="o">*</span><span class="n">formatP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetFootageSequenceImportOptions</span></code></td>
<td><p class="first">Populates and returns a <code class="docutils literal notranslate"><span class="pre">AEGP_FileSequenceImportOptions</span></code> describing the given <code class="docutils literal notranslate"><span class="pre">AEGP_FootageH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetFootageSequenceImportOptions</span><span class="p">(</span>
  <span class="n">AEGP_FootageH</span>                   <span class="n">footageH</span><span class="p">,</span>
  <span class="n">AEGP_FileSequenceImportOptions</span>  <span class="o">*</span><span class="n">optionsP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="aegp-footageinterp-structure">
<h4>AEGP_FootageInterp Structure<a class="headerlink" href="#aegp-footageinterp-structure" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="26%" />
<col width="74%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Member</strong></th>
<th class="head"><strong>Purpose</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_InterlaceLabel</span> <span class="pre">il;</span></code></td>
<td><p class="first">The interlace settings for the footage item.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">A_u_long</span> <span class="n">signature</span><span class="p">;</span> <span class="c1">// &#39;FIEL&#39;</span>
<span class="n">A_short</span> <span class="n">version</span><span class="p">;</span>
<span class="n">FIEL_Type</span> <span class="n">type</span><span class="p">;</span>
<span class="n">FIEL_Order</span> <span class="n">order</span><span class="p">;</span>
<span class="n">A_u_long</span> <span class="n">reserved</span><span class="p">;</span>
</pre></div>
</div>
<p>FIEL_Type is one of the following:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">FIEL_Type_FRAME_RENDERED</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">FIEL_Type_INTERLACED</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">FIEL_Type_HALF_HEIGHT</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">FIEL_Type_FIELD_DOUBLED</span></code></li>
</ul>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">FIEL_Type_FIELD_DOUBLED</span></code> means 60 full-sized field doubled frames per second.</p>
<p class="last"><code class="docutils literal notranslate"><span class="pre">FIEL_Order</span></code> is either <code class="docutils literal notranslate"><span class="pre">FIEL_Order_UPPER_FIRST</span></code> or <code class="docutils literal notranslate"><span class="pre">FIEL_Order_LOWER_FIRST</span></code>.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_AlphaLabel</span> <span class="pre">al;</span></code></td>
<td><div class="first highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_AlphaFlag</span> <span class="n">flags</span><span class="p">;</span>
<span class="n">A_u_char</span> <span class="n">redCu</span><span class="p">;</span>
<span class="n">A_u_char</span> <span class="n">greenCu</span><span class="p">;</span>
<span class="n">A_u_char</span> <span class="n">blueCu</span><span class="p">;</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">AEGP_AlphaFlags</span></code> is one or more of the following, OR’d together:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">AEGP_AlphaPremul</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_AlphaInverted</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_AlphaIgnore</span></code></li>
</ul>
</div></blockquote>
<p class="last">If <code class="docutils literal notranslate"><span class="pre">AEGP_AlphaPremul</span></code> is not set, straight alpha is assumed.
<code class="docutils literal notranslate"><span class="pre">AEGP_AlphaInverted</span></code> indicates that higher values are transparent, instead of lower.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_PulldownPhase</span> <span class="pre">pd;</span></code></td>
<td><p class="first">Indicates the phase for use in 3:2 pulldown. One of the following:</p>
<blockquote class="last">
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">AEGP_PulldownPhase_NO_PULLDOWN</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_PulldownPhase_WSSWW</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_PulldownPhase_SSWWW</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_PulldownPhase_SWWWS</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_PulldownPhase_WWWSS</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_PulldownPhase_WWSSW</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_PulldownPhase_WWWSW</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_PulldownPhase_WWSWW</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_PulldownPhase_WSWWW</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_PulldownPhase_SWWWW</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_PulldownPhase_WWWWS</span></code></li>
</ul>
</div></blockquote>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_LoopBehavior</span> <span class="pre">loop;</span></code></td>
<td><p class="first">Indicates the number of times the footage should loop.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">A_long</span> <span class="n">loops</span><span class="p">;</span>
<span class="n">A_long</span> <span class="n">reserved</span><span class="p">;</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">A_Ratio</span> <span class="pre">pix_aspect_ratio;</span></code></td>
<td>Expresses the pixel aspect ratio of the footage (x over y).</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">A_FpLong</span> <span class="pre">native_fpsF;</span></code></td>
<td>The original framerate (in frames per second) of the footage item.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">A_FpLong</span> <span class="pre">conform_fpsF;</span></code></td>
<td>The framerate being used for the footage item.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">A_long</span> <span class="pre">depthL;</span></code></td>
<td><p class="first">The pixel depth of the footage. One of the following:</p>
<blockquote class="last">
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">AEGP_Footage_Depth_1</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_Footage_Depth_2</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_Footage_Depth_4</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_Footage_Depth_8</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_Footage_Depth_16</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_Footage_Depth_24</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_Footage_Depth_30</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_Footage_Depth_32</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_Footage_Depth_GRAY_2</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_Footage_Depth_GRAY_4</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_Footage_Depth_GRAY_8</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_Footage_Depth_48</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_Footage_Depth_64</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_Footage_Depth_GRAY_16</span></code></li>
</ul>
</div></blockquote>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">A_Boolean</span> <span class="pre">motion_dB;</span></code></td>
<td>Indicates whether motion de-interlacing is being applied to the footage item.</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
</div>
</div>
<div class="section" id="manage-layers">
<span id="aegps-aegp-suites-layer-suite"></span><h3>Manage Layers<a class="headerlink" href="#manage-layers" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">AEGP_LayerSuite</span></code> provides information about layers within a composition, and the relationship(s) between the source and layer times.</p>
<p>As most After Effects usage boils down to layer manipulation, this is among the largest function suites in our API.</p>
<div class="section" id="aegp-layersuite8">
<span id="aegps-aegp-suites-aegp-layersuite"></span><h4>AEGP_LayerSuite8<a class="headerlink" href="#aegp-layersuite8" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="21%" />
<col width="79%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Function</strong></th>
<th class="head"><strong>Purpose</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetCompNumLayers</span></code></td>
<td><p class="first">Obtains the number of layers in a composition.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetCompNumLayers</span><span class="p">(</span>
  <span class="n">AEGP_CompH</span>  <span class="n">compH</span><span class="p">,</span>
  <span class="n">A_long</span>      <span class="o">*</span><span class="n">num_layersPL</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetCompLayerByIndex</span></code></td>
<td><p class="first">Get a <code class="docutils literal notranslate"><span class="pre">AEGP_LayerH</span></code> from a composition. Zero is the foremost layer.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetCompLayerByIndex</span><span class="p">(</span>
  <span class="n">AEGP_CompH</span>   <span class="n">compH</span><span class="p">,</span>
  <span class="n">A_long</span>       <span class="n">layer_indexL</span><span class="p">,</span>
  <span class="n">AEGP_LayerH</span>  <span class="o">*</span><span class="n">layerPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetActiveLayer</span></code></td>
<td><p class="first">Get the active layer. If a Layer or effect controls palette is active, the active layer is that associated with the front-most tab in the window.
If a composition or timeline window is active, the active layer is the selected layer (if only one is selected; otherwise <code class="docutils literal notranslate"><span class="pre">NULL</span></code> is returned).</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetActiveLayer</span><span class="p">(</span>
  <span class="n">AEGP_LayerH</span>  <span class="o">*</span><span class="n">layerPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetLayerIndex</span></code></td>
<td><p class="first">Get the index of the layer (0 is the topmost layer in the composition).</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetLayerIndex</span><span class="p">(</span>
  <span class="n">AEGP_LayerH</span>  <span class="n">layerH</span><span class="p">,</span>
  <span class="n">A_long</span>       <span class="o">*</span><span class="n">layer_indexPL</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetLayerSourceItem</span></code></td>
<td><p class="first">Get the AEGP_ItemH of the layer’s source item.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetLayerSourceItem</span><span class="p">(</span>
  <span class="n">AEGP_LayerH</span>  <span class="n">layerH</span><span class="p">,</span>
  <span class="n">AEGP_ItemH</span>   <span class="o">*</span><span class="n">source_itemPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetLayerSourceItemID</span></code></td>
<td><p class="first">Retrieves the ID of the given <code class="docutils literal notranslate"><span class="pre">AEGP_LayerH</span></code>.
This is useful when hunting for a specific layer’s ID in an <code class="docutils literal notranslate"><span class="pre">AEGP_StreamVal</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetLayerSourceItemID</span><span class="p">(</span>
  <span class="n">AEGP_LayerH</span>  <span class="n">layerH</span><span class="p">,</span>
  <span class="n">A_long</span>       <span class="o">*</span><span class="n">source_idPL</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetLayerParentComp</span></code></td>
<td><p class="first">Get the AEGP_CompH of the composition containing the layer.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetLayerParentComp</span><span class="p">(</span>
  <span class="n">AEGP_LayerH</span>  <span class="n">layerH</span><span class="p">,</span>
  <span class="n">AEGP_CompH</span>   <span class="o">*</span><span class="n">compPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetLayerName</span></code></td>
<td><p class="first">Get the name of a layer.
Both <code class="docutils literal notranslate"><span class="pre">utf_layer_namePH0</span></code> and <code class="docutils literal notranslate"><span class="pre">utf_source_namePH0</span></code> point to null terminated UTF-16 strings.
They must be disposed with <code class="docutils literal notranslate"><span class="pre">AEGP_FreeMemHandle</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetLayerName</span><span class="p">(</span>
  <span class="n">AEGP_PluginID</span>   <span class="n">pluginID</span><span class="p">,</span>
  <span class="n">AEGP_LayerH</span>     <span class="n">layerH</span><span class="p">,</span>
  <span class="n">AEGP_MemHandle</span>  <span class="o">*</span><span class="n">utf_layer_namePH0</span><span class="p">,</span>
  <span class="n">AEGP_MemHandle</span>  <span class="o">*</span><span class="n">utf_source_namePH0</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetLayerQuality</span></code></td>
<td><p class="first">Get the quality of a layer.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetLayerQuality</span><span class="p">(</span>
  <span class="n">AEGP_LayerH</span>        <span class="n">layerH</span><span class="p">,</span>
  <span class="n">AEGP_LayerQuality</span>  <span class="o">*</span><span class="n">qualityP</span><span class="p">);</span>
</pre></div>
</div>
<p>Layer quality is one of the following flags:</p>
<blockquote class="last">
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerQual_NONE</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerQual_WIREFRAME</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerQual_DRAFT</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerQual_BEST</span></code></li>
</ul>
</div></blockquote>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetLayerQuality</span></code></td>
<td><p class="first">Sets the quality of a layer (see flag values above). Undoable.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetLayerQuality</span><span class="p">(</span>
  <span class="n">AEGP_LayerH</span>        <span class="n">layerH</span><span class="p">,</span>
  <span class="n">AEGP_LayerQuality</span>  <span class="n">quality</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetLayerFlags</span></code></td>
<td><p class="first">Get flags for a layer.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetLayerFlags</span><span class="p">(</span>
  <span class="n">AEGP_LayerH</span>      <span class="n">layerH</span><span class="p">,</span>
  <span class="n">AEGP_LayerFlags</span>  <span class="o">*</span><span class="n">layer_flagsP</span><span class="p">);</span>
</pre></div>
</div>
<ul class="last simple">
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerFlag_NONE</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerFlag_VIDEO_ACTIVE</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerFlag_AUDIO_ACTIVE</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerFlag_EFFECTS_ACTIVE</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerFlag_MOTION_BLUR</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerFlag_FRAME_BLENDING</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerFlag_LOCKED</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerFlag_SHY</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerFlag_COLLAPSE</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerFlag_AUTO_ORIENT_ROTATION</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerFlag_ADJUSTMENT_LAYER</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerFlag_TIME_REMAPPING</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerFlag_LAYER_IS_3D</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerFlag_LOOK_AT_CAMERA</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerFlag_LOOK_AT_POI</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerFlag_SOLO</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerFlag_MARKERS_LOCKED</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerFlag_NULL_LAYER</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerFlag_HIDE_LOCKED_MASKS</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerFlag_GUIDE_LAYER</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerFlag_ENVIRONMENT_LAYER</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerFlag_ADVANCED_FRAME_BLENDING</span></code>, <code class="docutils literal notranslate"><span class="pre">True</span></code> only if pixel motion frame blending is on for the layer.</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerFlag_SUBLAYERS_RENDER_SEPARATELY</span></code>, Used to get/set the state of per-character 3D enablement on a text layer.</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerFlag_ENVIRONMENT_LAYER</span></code>, New in CS6.</li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetLayerFlag</span></code></td>
<td><p class="first">Sets one layer flag at a time. Undoable.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetLayerFlag</span><span class="p">(</span>
  <span class="n">AEGP_LayerH</span>      <span class="n">layerH</span><span class="p">,</span>
  <span class="n">AEGP_LayerFlags</span>  <span class="n">single_flag</span><span class="p">,</span>
  <span class="n">A_Boolean</span>        <span class="n">valueB</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_IsLayerVideoReallyOn</span></code></td>
<td><p class="first">Determines whether the layer’s video is visible.
This is necessary to account for ‘solo’ status of other layers in the composition; non-solo’d layers are still on.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_IsLayerVideoReallyOn</span><span class="p">(</span>
  <span class="n">AEGP_LayerH</span>  <span class="n">layerH</span><span class="p">,</span>
  <span class="n">A_Boolean</span>    <span class="o">*</span><span class="n">onPB</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_IsLayerAudioReallyOn</span></code></td>
<td><p class="first">Accounts for solo status of other layers in the composition.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_IsLayerAudioReallyOn</span><span class="p">(</span>
  <span class="n">AEGP_LayerH</span>  <span class="n">layerH</span><span class="p">,</span>
  <span class="n">A_Boolean</span>    <span class="o">*</span><span class="n">onPB</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetLayerCurrentTime</span></code></td>
<td><p class="first">Get current time, in layer or composition timespace. This value is not updated during rendering.</p>
<p>NOTE: If a layer starts at other than time 0 or is time-stretched other than 100%, layer time and composition time are distinct.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetLayerCurrentTime</span><span class="p">(</span>
  <span class="n">AEGP_LayerH</span>     <span class="n">layerH</span><span class="p">,</span>
  <span class="n">AEGP_LTimeMode</span>  <span class="n">time_mode</span><span class="p">,</span>
  <span class="n">A_Time</span>          <span class="o">*</span><span class="n">curr_timePT</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetLayerInPoint</span></code></td>
<td><p class="first">Get time of first visible frame in composition or layer time.
In layer time, the <code class="docutils literal notranslate"><span class="pre">in_pointPT</span></code> is always 0.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetLayerInPoint</span><span class="p">(</span>
  <span class="n">AEGP_LayerH</span>     <span class="n">layerH</span><span class="p">,</span>
  <span class="n">AEGP_LTimeMode</span>  <span class="n">time_mode</span><span class="p">,</span>
  <span class="n">A_Time</span>          <span class="o">*</span><span class="n">in_pointPT</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetLayerDuration</span></code></td>
<td><p class="first">Get duration of layer, in composition or layer time, in seconds.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetLayerDuration</span><span class="p">(</span>
  <span class="n">AEGP_LayerH</span>     <span class="n">layerH</span><span class="p">,</span>
  <span class="n">AEGP_LTimeMode</span>  <span class="n">time_mode</span><span class="p">,</span>
  <span class="n">A_Time</span>          <span class="o">*</span><span class="n">durationPT</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetLayerInPointAndDuration</span></code></td>
<td><p class="first">Set duration and in point of layer in composition or layer time. Undo-able.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetLayerInPointAndDuration</span><span class="p">(</span>
  <span class="n">AEGP_LayerH</span>     <span class="n">layerH</span><span class="p">,</span>
  <span class="n">AEGP_LTimeMode</span>  <span class="n">time_mode</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_Time</span>    <span class="o">*</span><span class="n">in_pointPT</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_Time</span>    <span class="o">*</span><span class="n">durationPT</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetLayerOffset</span></code></td>
<td><p class="first">Get the offset from the start of the composition to layer time 0, in composition time.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetLayerOffset</span><span class="p">(</span>
  <span class="n">AEGP_LayerH</span>  <span class="n">layerH</span><span class="p">,</span>
  <span class="n">A_Time</span>       <span class="o">*</span><span class="n">offsetPT</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetLayerOffset</span></code></td>
<td><p class="first">Set the offset from the start of the composition to the first frame of the layer, in composition time. Undoable.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetLayerOffset</span><span class="p">(</span>
  <span class="n">AEGP_LayerH</span>  <span class="n">layerH</span><span class="p">,</span>
  <span class="n">A_Time</span>       <span class="o">*</span><span class="n">offsetPT</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetLayerStretch</span></code></td>
<td><p class="first">Get stretch factor of a layer.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetLayerStretch</span><span class="p">(</span>
  <span class="n">AEGP_LayerH</span>  <span class="n">layerH</span><span class="p">,</span>
  <span class="n">A_Ratio</span>      <span class="o">*</span><span class="n">stretchPRt</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetLayerStretch</span></code></td>
<td><p class="first">Set stretch factor of a layer.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetLayerStretch</span><span class="p">(</span>
  <span class="n">AEGP_LayerH</span>  <span class="n">layerH</span><span class="p">,</span>
  <span class="n">A_Ratio</span>      <span class="o">*</span><span class="n">stretchPRt</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetLayerTransferMode</span></code></td>
<td><p class="first">Get transfer mode of a layer.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetLayerTransferMode</span><span class="p">(</span>
  <span class="n">AEGP_LayerH</span>             <span class="n">layerH</span><span class="p">,</span>
  <span class="n">AEGP_LayerTransferMode</span>  <span class="o">*</span><span class="n">modeP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetLayerTransferMode</span></code></td>
<td><p class="first">Set transfer mode of a layer. Undoable.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGPSetLayerTransferMode</span><span class="p">(</span>
  <span class="n">AEGP_LayerH</span>             <span class="n">layerH</span><span class="p">,</span>
  <span class="n">AEGP_LayerTransferMode</span>  <span class="o">*</span><span class="n">modeP</span><span class="p">);</span>
</pre></div>
</div>
<p class="last">As of 6.5, when you make a layer a track matte, the layer in front of it will be disabled,
as when you do this via the interface.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_IsAddLayerValid</span></code></td>
<td><p class="first">Tests whether it’s currently valid to add a given item to a composition.
A composition cannot be added to itself, or to any compositions which it contains; other conditions can preclude successful adding too.
Adding a layer without first using this function will produce undefined results.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_IsAddLayerValid</span><span class="p">(</span>
  <span class="n">AEGP_ItemH</span>  <span class="n">item_to_addH</span><span class="p">,</span>
  <span class="n">AEGP_CompH</span>  <span class="n">into_compH</span><span class="p">,</span>
  <span class="n">A_Boolean</span>   <span class="o">*</span><span class="n">validPB</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_AddLayer</span></code></td>
<td><p class="first">Add an item to the composition, above all other layers. Undo-able.
Use <code class="docutils literal notranslate"><span class="pre">AEGP_IsAddLayerValid()</span></code> first, to confirm that it’s possible.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_AddLayer</span><span class="p">(</span>
  <span class="n">AEGP_ItemH</span>  <span class="n">item_to_addH</span><span class="p">,</span>
  <span class="n">AEGP_CompH</span>  <span class="n">into_compH</span><span class="p">,</span>
  <span class="n">A_Boolean</span>   <span class="o">*</span><span class="n">added_layerPH0</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_ReorderLayer</span></code></td>
<td><p class="first">Change the order of layers. Undoable.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_ReorderLayer</span><span class="p">(</span>
  <span class="n">AEGP_LayerH</span>  <span class="n">layerH</span><span class="p">,</span>
  <span class="n">A_long</span>       <span class="n">layer_indexL</span><span class="p">);</span>
</pre></div>
</div>
<p class="last">To add a layer to the end of the composition, to use <code class="docutils literal notranslate"><span class="pre">layer_indexL</span> <span class="pre">=</span> <span class="pre">AEGP_REORDER_LAYER_TO_END</span></code></p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetLayerMaskedBounds</span></code></td>
<td><p class="first">Given a layer’s handle and a time, returns the bounds of area visible with masks applied.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetLayerMaskedBounds</span><span class="p">(</span>
  <span class="n">AEGP_LayerH</span>   <span class="n">layerH</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_Time</span>  <span class="o">*</span><span class="n">comp_timePT</span><span class="p">,</span>
  <span class="n">A_FloatRect</span>   <span class="o">*</span><span class="n">boundsPR</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetLayerObjectType</span></code></td>
<td><p class="first">Returns a layer’s object type.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetLayerObjectType</span><span class="p">(</span>
  <span class="n">AEGP_LayerH</span>      <span class="n">layerH</span><span class="p">,</span>
  <span class="n">AEGP_ObjectType</span>  <span class="o">*</span><span class="n">object_type</span><span class="p">);</span>
</pre></div>
</div>
<ul class="last simple">
<li><code class="docutils literal notranslate"><span class="pre">AEGP_ObjectType_AV</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_ObjectType_LIGHT</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_ObjectType_CAMERA</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_ObjectType_TEXT</span></code></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_IsLayer3D</span></code></td>
<td><p class="first">Is the footage item a 3D layer. All AV layers are either 2D or 3D.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_IsLayer3D</span><span class="p">(</span>
  <span class="n">AEGP_LayerH</span>  <span class="n">layerH</span><span class="p">,</span>
  <span class="n">A_Boolean</span>    <span class="o">*</span><span class="n">is_3DPB</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_IsLayer2D</span></code></td>
<td><p class="first">Is the footage item a 2D layer. All AV layers are either 2D or 3D.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_IsLayer2D</span><span class="p">(</span>
  <span class="n">AEGP_LayerH</span>  <span class="n">layerH</span><span class="p">,</span>
  <span class="n">A_Boolean</span>    <span class="o">*</span><span class="n">is_2DPB</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_IsVideoActive</span></code></td>
<td><p class="first">Given composition time and a layer, see if the layer will render.
Time mode is either <code class="docutils literal notranslate"><span class="pre">AEGP_LTimeMode_LayerTime</span></code> or <code class="docutils literal notranslate"><span class="pre">AEGP_LTimeMode_CompTime</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_IsVideoActive</span><span class="p">(</span>
  <span class="n">AEGP_LayerH</span>     <span class="n">layerH</span><span class="p">,</span>
  <span class="n">AEGP_LTimeMode</span>  <span class="n">time_mode</span><span class="p">,</span>
  <span class="n">A_Time</span>          <span class="o">*</span><span class="n">comp_timePT</span><span class="p">,</span>
  <span class="n">A_Boolean</span>       <span class="o">*</span><span class="n">is_activePB</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_IsLayerUsedAsTrackMatte</span></code></td>
<td><p class="first">Is the layer used as a track matte?</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_IsLayerUsedAsTrackMatte</span><span class="p">(</span>
  <span class="n">AEGP_LayerH</span>  <span class="n">layerH</span><span class="p">,</span>
  <span class="n">A_Boolean</span>    <span class="n">fill_must_be_activeB</span><span class="p">,</span>
  <span class="n">A_Boolean</span>    <span class="o">*</span><span class="n">is_track_mattePB</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_DoesLayerHaveTrackMatte</span></code></td>
<td><p class="first">Does this layer have a Track Matte?</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_DoesLayerHaveTrackMatte</span><span class="p">(</span>
  <span class="n">AEGP_LayerH</span>  <span class="n">layerH</span><span class="p">,</span>
  <span class="n">A_Boolean</span>    <span class="o">*</span><span class="n">has_track_mattePB</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_ConvertCompToLayerTime</span></code></td>
<td><p class="first">Given a time in composition space, returns the time relative to the layer source footage.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_ConvertCompToLayerTime</span><span class="p">(</span>
  <span class="n">AEGP_LayerH</span>   <span class="n">layerH</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_Time</span>  <span class="o">*</span><span class="n">comp_timeP</span><span class="p">,</span>
  <span class="n">A_Time</span>        <span class="o">*</span><span class="n">layer_timeP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_ConvertLayerToCompTime</span></code></td>
<td><p class="first">Given a time in layer space, find the corresponding time in composition space.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_ConvertLayerToCompTime</span><span class="p">(</span>
  <span class="n">AEGP_LayerH</span>   <span class="n">layerH</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_Time</span>  <span class="o">*</span><span class="n">layer_timePT</span><span class="p">,</span>
  <span class="n">A_Time</span>        <span class="o">*</span><span class="n">comp_timePT</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetLayerDancingRandValue</span></code></td>
<td><p class="first">Used by the dancing dissolve transfer function.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetLayerDancingRandValue</span><span class="p">(</span>
  <span class="n">AEGP_LayerH</span>   <span class="n">layerH</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_Time</span>  <span class="o">*</span><span class="n">comp_timePT</span><span class="p">,</span>
  <span class="n">A_long</span>        <span class="o">*</span><span class="n">rand_valuePL</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetLayerID</span></code></td>
<td><p class="first">Supplies the layer’s unique ID. This ID never changes during the lifetime of the project.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetLayerID</span><span class="p">(</span>
  <span class="n">AEGP_LayerH</span>      <span class="n">layerH</span><span class="p">,</span>
  <span class="n">AEGP_LayerIDVal</span>  <span class="o">*</span><span class="n">id_valP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetLayerToWorldXform</span></code></td>
<td><p class="first">Given a layer handle and time, returns the layer-to-world transformation matrix.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetLayerToWorldXform</span><span class="p">(</span>
  <span class="n">AEGP_LayerH</span>   <span class="n">aegp_layerH</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_Time</span>  <span class="o">*</span><span class="n">comp_timeP</span><span class="p">,</span>
  <span class="n">A_Matrix4</span>     <span class="o">*</span><span class="n">transform</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetLayerToWorldXformFromView</span></code></td>
<td><p class="first">Given a layer handle, the current (composition) time, and the requested view time,
returns the translation between the user’s view and the layer, corrected for the composition’s current aspect ratio.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetLayerToWorldXformFromView</span><span class="p">(</span>
  <span class="n">AEGP_LayerH</span>   <span class="n">aegp_layerH</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_Time</span>  <span class="o">*</span><span class="n">view_timeP</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_Time</span>  <span class="o">*</span><span class="n">comp_timeP</span><span class="p">,</span>
  <span class="n">A_Matrix4</span>     <span class="o">*</span><span class="n">transform</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetLayerName</span></code></td>
<td><p class="first">Sets the name of a layer. Undo-able. new_nameZ points to a null terminated UTF-16 string.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetLayerName</span><span class="p">(</span>
  <span class="n">AEGP_LayerH</span>        <span class="n">aegp_layerH</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_UTF16Char</span>  <span class="o">*</span><span class="n">new_nameZ</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetLayerParent</span></code></td>
<td><p class="first">Retrieves the handle to a layer’s parent (none if not parented).</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetLayerParent</span><span class="p">(</span>
  <span class="n">AEGP_LayerH</span>  <span class="n">layerH</span><span class="p">,</span>
  <span class="n">AEGP_LayerH</span>  <span class="o">*</span><span class="n">parent_layerPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetLayerParent</span></code></td>
<td><p class="first">Sets a layer’s parent layer.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetLayerParent</span><span class="p">(</span>
  <span class="n">AEGP_LayerH</span>        <span class="n">layerH</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">AEGP_LayerH</span>  <span class="n">parent_layerH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_DeleteLayer</span></code></td>
<td><p class="first">Deletes a layer. Can you believe it took us three suite versions to add a delete function? Neither can we.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_DeleteLayer</span><span class="p">(</span>
  <span class="n">AEGP_LayerH</span>  <span class="n">layerH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_DuplicateLayer</span></code></td>
<td><p class="first">Duplicates the layer. Undoable.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_DuplicateLayer</span><span class="p">(</span>
  <span class="n">AEGP_LayerH</span>  <span class="n">orig_layerH</span><span class="p">,</span>
  <span class="n">AEGP_LayerH</span>  <span class="o">*</span><span class="n">dupe_layerPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetLayerFromLayerID</span></code></td>
<td><p class="first">Retrieves the <code class="docutils literal notranslate"><span class="pre">AEGP_LayerH</span></code> associated with a given <code class="docutils literal notranslate"><span class="pre">AEGP_LayerIDVal</span></code> (which is what you get when accessing an effect’s layer parameter stream).</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetLayerFromLayerID</span><span class="p">(</span>
  <span class="n">AEGP_CompH</span>       <span class="n">parent_compH</span><span class="p">,</span>
  <span class="n">AEGP_LayerIDVal</span>  <span class="n">id</span><span class="p">,</span>
  <span class="n">AEGP_LayerH</span>      <span class="o">*</span><span class="n">layerPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetLayerLabel</span></code></td>
<td><p class="first">Gets a layer’s <code class="docutils literal notranslate"><span class="pre">AEGP_LabelID</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetLayerLabel</span><span class="p">(</span>
  <span class="n">AEGP_LayerH</span>   <span class="n">layerH</span><span class="p">,</span>
  <span class="n">AEGP_LabelID</span>  <span class="o">*</span><span class="n">labelP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetLayerLabel</span></code></td>
<td><p class="first">Sets a layer’s <code class="docutils literal notranslate"><span class="pre">AEGP_LabelID</span></code>. Undoable.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetLayerLabel</span><span class="p">(</span>
  <span class="n">AEGP_LayerH</span>   <span class="n">layerH</span><span class="p">,</span>
  <span class="n">AEGP_LabelID</span>  <span class="n">label</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetLayerSamplingQuality</span></code></td>
<td><p class="first">New in CC. Get the sampling quality of a layer.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetLayerSamplingQuality</span><span class="p">(</span>
  <span class="n">AEGP_LayerH</span>                <span class="n">layerH</span><span class="p">,</span>
  <span class="n">AEGP_LayerSamplingQuality</span>  <span class="o">*</span><span class="n">label</span><span class="p">);</span>
</pre></div>
</div>
<p>Layer sampling quality is one of the following flags:</p>
<blockquote class="last">
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerSamplingQual_BILINEAR</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerSamplingQual_BICUBIC</span></code></li>
</ul>
</div></blockquote>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetLayerSamplingQuality</span></code></td>
<td><p class="first">New in CC. Sets the sampling quality of a layer (see flag values above).
Option is explicitly set on the layer independent of layer quality.
If you want to force it on you must also set the layer quality to <code class="docutils literal notranslate"><span class="pre">AEGP_LayerQual_BEST</span></code> with <code class="docutils literal notranslate"><span class="pre">AEGP_SetLayerQuality</span></code>.
Otherwise it will only be using the specified layer sampling quality whenever the layer quality is set to <code class="docutils literal notranslate"><span class="pre">AEGP_LayerQual_BEST</span></code>.
Undoable.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetLayerSamplingQuality</span><span class="p">(</span>
  <span class="n">AEGP_LayerH</span>                <span class="n">layerH</span><span class="p">,</span>
  <span class="n">AEGP_LayerSamplingQuality</span>  <span class="n">label</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<hr class="docutils" />
<div class="section" id="layer-creation-notes">
<h3>Layer Creation Notes<a class="headerlink" href="#layer-creation-notes" title="Permalink to this headline">¶</a></h3>
<p>All layers created using AEGP calls will start at composition time 0, and have the duration of the composition.</p>
<p>Use <code class="docutils literal notranslate"><span class="pre">AEGP_SetLayerOffset()</span></code> and <code class="docutils literal notranslate"><span class="pre">AEGP_SetLayerInPointAndDuration()</span></code> from <a class="reference internal" href="#aegps-aegp-suites-aegp-layersuite"><span class="std std-ref">AEGP_LayerSuite8</span></a> to properly set the layer’s time information.</p>
<p>When the layer stretch factor (obtained using <code class="docutils literal notranslate"><span class="pre">AEGP_GetLayerStretch</span></code> in <a class="reference internal" href="#aegps-aegp-suites-aegp-layersuite"><span class="std std-ref">AEGP_LayerSuite8</span></a>, naturally) is not 100%, the following computation will be needed to yield the correct layer offset:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">offset</span> <span class="o">=</span> <span class="n">compIn</span> <span class="o">-</span> <span class="n">stretch</span> <span class="o">*</span> <span class="n">layerIn</span><span class="p">;</span>
</pre></div>
</div>
<hr class="docutils" />
</div>
<div class="section" id="communication-with-a-layer-s-effects">
<span id="aegps-aegp-suites-effect-suite"></span><h3>Communication With A Layer’s Effects<a class="headerlink" href="#communication-with-a-layer-s-effects" title="Permalink to this headline">¶</a></h3>
<p>Access the effects applied to a layer. This suite provides access to all parameter data streams.</p>
<p>Use the <a class="reference internal" href="#aegps-aegp-suites-stream-suite"><span class="std std-ref">Stream Suite</span></a> to work with those streams.</p>
<p>An <code class="docutils literal notranslate"><span class="pre">AEGP_Effect_RefH</span></code> is a reference to an applied effect. An <code class="docutils literal notranslate"><span class="pre">AEGP_InstalledEffectKey</span></code> is a reference to an installed effect, which may or may not be currently applied to anything.</p>
<p>If Foobarocity is applied to a layer twice, there will be two distinct <code class="docutils literal notranslate"><span class="pre">AEGP_Effect_RefHs</span></code>, but they’ll both return the same <code class="docutils literal notranslate"><span class="pre">AEGP_InstalledEffectKey</span></code>.</p>
<div class="section" id="aegp-effectsuite4">
<span id="aegps-aegp-suites-aegp-effectsuite"></span><h4>AEGP_EffectSuite4<a class="headerlink" href="#aegp-effectsuite4" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="21%" />
<col width="79%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Function</strong></th>
<th class="head"><strong>Purpose</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetLayerNumEffects</span></code></td>
<td><p class="first">Get number of effects applied to a layer.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetLayerNumEffects</span><span class="p">(</span>
  <span class="n">AEGP_LayerH</span>  <span class="n">layerH</span><span class="p">,</span>
  <span class="n">A_long</span>       <span class="o">*</span><span class="n">num_effectsPL</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetLayerEffectByIndex</span></code></td>
<td><p class="first">Retrieves (by index) a reference to an effect applied to the layer.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetLayerEffectByIndex</span><span class="p">(</span>
  <span class="n">AEGP_PluginID</span>     <span class="n">aegp_plugin_id</span><span class="p">,</span>
  <span class="n">AEGP_LayerH</span>       <span class="n">layerH</span><span class="p">,</span>
  <span class="n">AEGP_EffectIndex</span>  <span class="n">effect_indexL</span><span class="p">,</span>
  <span class="n">AEGP_EffectRefH</span>   <span class="o">*</span><span class="n">effectPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetInstalledKeyFromLayerEffect</span></code></td>
<td><p class="first">Given an <code class="docutils literal notranslate"><span class="pre">AEGP_EffectRefH</span></code>, retrieves its associated <code class="docutils literal notranslate"><span class="pre">AEGP_InstalledEffectKey</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetInstalledKeyFromLayerEffect</span><span class="p">(</span>
  <span class="n">AEGP_EffectRefH</span>          <span class="n">effect_refH</span><span class="p">,</span>
  <span class="n">AEGP_InstalledEffectKey</span>  <span class="o">*</span><span class="n">installed_keyP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetEffectParamUnionByIndex</span></code></td>
<td><p class="first">Returns description of effect parameter.
Do not use the value(s) in the ParamDef returned by this function (Use <code class="docutils literal notranslate"><span class="pre">AEGP_GetNewStreamValue()</span></code> instead);
it’s provided so AEGPs can access parameter defaults, checkbox names, and pop-up strings.</p>
<p>Use <code class="docutils literal notranslate"><span class="pre">AEGP_GetEffectNumParamStreams()</span></code> from <a class="reference internal" href="#aegps-aegp-suites-aegp-streamsuite"><span class="std std-ref">AEGP_StreamSuite5</span></a> to get the stream count,
useful for determining the maximum <code class="docutils literal notranslate"><span class="pre">param_index</span></code>.
The last parameter is optional;</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetEffectParamUnionByIndex</span><span class="p">(</span>
  <span class="n">AEGP_PluginID</span>     <span class="n">aegp_plugin_id</span><span class="p">,</span>
  <span class="n">AEGP_EffectRefH</span>   <span class="n">effectH</span><span class="p">,</span>
  <span class="n">PF_ParamIndex</span>     <span class="n">param_index</span><span class="p">,</span>
  <span class="n">PF_ParamType</span>      <span class="o">*</span><span class="n">param_typeP</span>
  <span class="n">PF_ParamDefUnion</span>  <span class="o">*</span><span class="n">uP0</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetEffectFlags</span></code></td>
<td><p class="first">Obtains the flags for the given <code class="docutils literal notranslate"><span class="pre">AEGP_EffectRefH</span></code>.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetEffectFlags</span><span class="p">(</span>
  <span class="n">AEGP_EffectRefH</span>   <span class="n">effect_refH</span><span class="p">,</span>
  <span class="n">AEGP_EffectFlags</span>  <span class="o">*</span><span class="n">effect_flagsP</span><span class="p">);</span>
</pre></div>
</div>
<p>Flags will be a combination of the following:</p>
<blockquote class="last">
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">AEGP_EffectFlags_NONE</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_EffectFlags_ACTIVE</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_EffectFlags_AUDIO_ONLY</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_EffectFlags_AUDIO_TOO</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_EffectFlags_MISSING</span></code></li>
</ul>
</div></blockquote>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetEffectFlags</span></code></td>
<td><p class="first">Sets the flags (enumerated above) for the given <code class="docutils literal notranslate"><span class="pre">AEGP_EffectRefH</span></code>, masked by a different set of effect flags.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetEffectFlags</span><span class="p">(</span>
  <span class="n">AEGP_EffectRefH</span>   <span class="n">effect_refH</span><span class="p">,</span>
  <span class="n">AEGP_EffectFlags</span>  <span class="n">mask</span><span class="p">,</span>
  <span class="n">AEGP_EffectFlags</span>  <span class="n">effect_flags</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_ReorderEffect</span></code></td>
<td><p class="first">Change the order of applied effects (pass the requested index).</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_ReorderEffect</span><span class="p">(</span>
  <span class="n">AEGP_EffectRefH</span>  <span class="n">effect_refH</span><span class="p">,</span>
  <span class="n">A_long</span>           <span class="n">effect_indexL</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_EffectCallGeneric</span></code></td>
<td><p class="first">Call an effect plug-in, and pass it a pointer to any data you like; the effect can modify it.
This is how AEGPs communicate with effects.
Pass <code class="docutils literal notranslate"><span class="pre">PF_Cmd_COMPLETELY_GENERAL</span></code> for <code class="docutils literal notranslate"><span class="pre">effect_cmd</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_EffectCallGeneric</span><span class="p">(</span>
  <span class="n">AEGP_PluginID</span>    <span class="n">aegp_plugin_id</span><span class="p">,</span>
  <span class="n">AEGP_EffectRefH</span>  <span class="n">effectH</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_Time</span>     <span class="o">*</span><span class="n">timePT</span><span class="p">,</span>
  <span class="n">PF_Cmd</span>           <span class="n">effect_cmd</span><span class="p">,</span>
  <span class="kt">void</span>             <span class="o">*</span><span class="n">extraPV</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_DisposeEffect</span></code></td>
<td><p class="first">Disposes of an AEGP_EffectRefH. Use this to dispose of any AEGP_EffectRefH returned by After Effects.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_DisposeEffect</span><span class="p">(</span>
  <span class="n">AEGP_EffectRefH</span>  <span class="n">effectH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_ApplyEffect</span></code></td>
<td><p class="first">Apply an effect to a given layer. Returns the newly-created <code class="docutils literal notranslate"><span class="pre">AEGP_EffectRefH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_ApplyEffect</span><span class="p">(</span>
  <span class="n">AEGP_PluginID</span>            <span class="n">aegp_plugin_id</span><span class="p">,</span>
  <span class="n">AEGP_LayerH</span>              <span class="n">layerH</span><span class="p">,</span>
  <span class="n">AEGP_InstalledEffectKey</span>  <span class="n">installed_key</span><span class="p">,</span>
  <span class="n">AEGP_EffectRefH</span>          <span class="o">*</span><span class="n">effect_refPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_DeleteLayerEffect</span></code></td>
<td><p class="first">Remove an applied effect.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_DeleteLayerEffect</span><span class="p">(</span>
  <span class="n">AEGP_EffectRefH</span>  <span class="n">effect_refH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetNumInstalledEffects</span></code></td>
<td><p class="first">Returns the count of effects installed in After Effects.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetNumInstalledEffects</span><span class="p">(</span>
  <span class="n">A_long</span>  <span class="o">*</span><span class="n">num_installed_effectsPL</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetNextInstalledEffect</span></code></td>
<td><p class="first">Returns the <code class="docutils literal notranslate"><span class="pre">AEGP_InstalledEffectKey</span></code> of the next installed effect.
Pass <code class="docutils literal notranslate"><span class="pre">AEGP_InstalledEffectKey_NONE</span></code> as the first parameter to obtain the first <code class="docutils literal notranslate"><span class="pre">AEGP_InstalledEffectKey</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetNextInstalledEffect</span><span class="p">(</span>
  <span class="n">AEGP_InstalledEffectKey</span>  <span class="n">key</span><span class="p">,</span>
  <span class="n">AEGP_InstalledEffectKey</span>  <span class="o">*</span><span class="n">next_keyPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetEffectName</span></code></td>
<td><p class="first">Get name of the effect. <code class="docutils literal notranslate"><span class="pre">nameZ</span></code> can be up to <code class="docutils literal notranslate"><span class="pre">AEGP_MAX_EFFECT_NAME_SIZE</span> <span class="pre">+</span> <span class="pre">1</span></code> long.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetEffectName</span><span class="p">(</span>
  <span class="n">AEGP_InstalledEffectKey</span>  <span class="n">installed_key</span><span class="p">,</span>
  <span class="n">A_char</span>                   <span class="o">*</span><span class="n">nameZ</span><span class="p">);</span>
</pre></div>
</div>
<p class="last">Note: use <code class="docutils literal notranslate"><span class="pre">AEGP_SetStreamName</span></code> to change the display name of an effect.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetEffectMatchName</span></code></td>
<td><p class="first">Get match name of an effect (defined in PiPL). <code class="docutils literal notranslate"><span class="pre">match_nameZ</span></code> up to <code class="docutils literal notranslate"><span class="pre">AEGP_MAX_EFFECT_MATCH_NAME_SIZE</span> <span class="pre">+</span> <span class="pre">1</span></code> long.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetEffectMatchName</span><span class="p">(</span>
  <span class="n">AEGP_InstalledEffectKey</span>  <span class="n">installed_key</span><span class="p">,</span>
  <span class="n">A_char</span>                   <span class="o">*</span><span class="n">match_nameZ</span><span class="p">);</span>
</pre></div>
</div>
<p class="last">Match names are in 7-bit ASCII. UI names are in the current application runtime encoding;
for example, ISO 8859-1 for most languages on Windows.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetEffectCategory</span></code></td>
<td><p class="first">Menu category of effect. <code class="docutils literal notranslate"><span class="pre">categoryZ</span></code> can be up to <code class="docutils literal notranslate"><span class="pre">AEGP_MAX_EFFECT_CATEGORY_NAME_SIZE</span> <span class="pre">+</span> <span class="pre">1</span></code> long.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetEffectCategory</span><span class="p">(</span>
  <span class="n">AEGP_InstalledEffectKey</span>  <span class="n">installed_key</span><span class="p">,</span>
  <span class="n">A_char</span>                   <span class="o">*</span><span class="n">categoryZ</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_DuplicateEffect</span></code></td>
<td><p class="first">Duplicates a given <code class="docutils literal notranslate"><span class="pre">AEGP_EffectRefH</span></code>. Caller must dispose of duplicate when finished.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_DuplicateEffect</span><span class="p">(</span>
  <span class="n">AEGP_EffectRefH</span>  <span class="n">orig_effect_refH</span><span class="p">,</span>
  <span class="n">AEGP_EffectRefH</span>  <span class="o">*</span><span class="n">dupe_refPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_NumEffectMask</span></code></td>
<td><p class="first">New in CC 2014. How many masks are on this effect?</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_NumEffectMask</span><span class="p">(</span>
  <span class="n">AEGP_EffectRefH</span>  <span class="n">effect_refH</span><span class="p">,</span>
  <span class="n">A_u_long</span>         <span class="o">*</span><span class="n">num_masksPL</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetEffectMaskID</span></code></td>
<td><p class="first">New in CC 2014. For a given mask_indexL, returns the corresponding <code class="docutils literal notranslate"><span class="pre">AEGP_MaskIDVal</span></code> for use in uniquely identifying the mask.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetEffectMaskID</span><span class="p">(</span>
  <span class="n">AEGP_EffectRefH</span>  <span class="n">effect_refH</span><span class="p">,</span>
  <span class="n">A_u_long</span>         <span class="n">mask_indexL</span><span class="p">,</span>
  <span class="n">AEGP_MaskIDVal</span>   <span class="o">*</span><span class="n">id_valP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_AddEffectMask</span></code></td>
<td><p class="first">New in CC 2014. Add an effect mask, which may be created using the <a class="reference internal" href="#aegps-aegp-suites-mask-suite"><span class="std std-ref">Mask Management</span></a>.
Returns the local stream of the effect ref - useful if you want to add keyframes.
Caller must dispose of <code class="docutils literal notranslate"><span class="pre">AEGP_StreamRefH</span></code> when finished.
Undoable.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_AddEffectMask</span><span class="p">(</span>
  <span class="n">AEGP_EffectRefH</span>  <span class="n">effect_refH</span><span class="p">,</span>
  <span class="n">AEGP_MaskIDVal</span>   <span class="n">id_val</span><span class="p">,</span>
  <span class="n">AEGP_StreamRefH</span>  <span class="n">streamPH0</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_RemoveEffectMask</span></code></td>
<td><p class="first">New in CC 2014. Remove an effect mask.
Undoable.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_RemoveEffectMask</span><span class="p">(</span>
  <span class="n">AEGP_EffectRefH</span>  <span class="n">effect_refH</span><span class="p">,</span>
  <span class="n">AEGP_MaskIDVal</span>   <span class="n">id_val</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetEffectMask</span></code></td>
<td><p class="first">New in CC 2014. Set an effect mask on an existing index.
Returns the local stream of the effect ref - useful if you want to add keyframes.
Caller must dispose of <code class="docutils literal notranslate"><span class="pre">AEGP_StreamRefH</span></code> when finished.
Undoable.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetEffectMask</span><span class="p">(</span>
  <span class="n">AEGP_EffectRefH</span>  <span class="n">effect_refH</span><span class="p">,</span>
  <span class="n">A_u_long</span>         <span class="n">mask_indexL</span><span class="p">,</span>
  <span class="n">AEGP_MaskIDVal</span>   <span class="n">id_val</span><span class="p">,</span>
  <span class="n">AEGP_StreamRefH</span>  <span class="o">*</span><span class="n">streamPH0</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<hr class="docutils" />
<div class="section" id="exploiting-effect-ui-behavior-to-look-cool">
<h3>Exploiting Effect UI Behavior To Look Cool<a class="headerlink" href="#exploiting-effect-ui-behavior-to-look-cool" title="Permalink to this headline">¶</a></h3>
<p>Even if you manipulate a layer’s effects, its effect controls won’t necessarily become visible.</p>
<p>However, if you apply then immediately remove an effect, the layer’s effect controls will be made visible.</p>
<p>Tricky, eh?</p>
</div>
<hr class="docutils" />
<div class="section" id="streamrefs-and-effectrefs">
<h3>StreamRefs And EffectRefs<a class="headerlink" href="#streamrefs-and-effectrefs" title="Permalink to this headline">¶</a></h3>
<p>How do you get an AEGP_StreamRef for an effect? Start by getting the effect’s <code class="docutils literal notranslate"><span class="pre">AEGP_EffectRef</span></code>, by calling <code class="docutils literal notranslate"><span class="pre">AEGP_GetNewEffectForEffect()</span></code>.</p>
<p>Then call <code class="docutils literal notranslate"><span class="pre">AEGP_GetNewEffectStreamByIndex()</span></code>, say for param index 1, which passes back a parameter stream.</p>
<p>Then call <code class="docutils literal notranslate"><span class="pre">AEGP_GetNewParentStreamRef()</span></code> - voila, your <code class="docutils literal notranslate"><span class="pre">AEGP_StreamRef</span></code> sir!</p>
<p>If you acquire references to an effect’s streams, do not dispose of the <code class="docutils literal notranslate"><span class="pre">AEGP_EffectRefH</span></code> until you’re done with the streams, or you’ll unbalance After Effects’ checkout mechanism. Also remember that AEGP_StreamRefHs are opaque; <code class="docutils literal notranslate"><span class="pre">AEGP_StreamValue2s</span></code> are not (entirely).</p>
<p>To get an effect’s instance name (as renamed by the user), get the AEGP_StreamRef for the effect itself and call <code class="docutils literal notranslate"><span class="pre">AEGP_GetStreamName</span></code>.</p>
<hr class="docutils" />
</div>
<div class="section" id="diving-into-streams">
<span id="aegps-aegp-suites-diving-into-streams"></span><h3>Diving Into Streams!<a class="headerlink" href="#diving-into-streams" title="Permalink to this headline">¶</a></h3>
<p>Just about everything in After Effects is a stream. Effect parameters, layers, masks, and shapes are all internally represented by streams. The AEGP API can access nearly every aspect of every stream.</p>
<p>The After Effects timeline can contain numerous object types; each object supports a set of parameters called streams. All streams, regardless of which type of object to which they’re attached, are conceptually similar (and handled similarly by After Effects. But the way you access each type of stream varies because of their containment.</p>
<p>A stream, once acquired, represents a value which may change over time. Not all streams <em>can</em> vary over time, and a particular stream may not be time-variant at the time of access.</p>
<p>There are two ways to access the value of a stream. If the stream has keyframes, you can use the <a class="reference internal" href="#aegps-aegp-suites-keyframe-suite"><span class="std std-ref">Working With Keyframes</span></a>. The values provided won’t reflect the influence of expressions. Note: In any expression, the current keyframed value is always available as the variable value.</p>
<p>You can also use <code class="docutils literal notranslate"><span class="pre">AEGP_GetNewStreamValue</span></code> from <a class="reference internal" href="#aegps-aegp-suites-aegp-streamsuite"><span class="std std-ref">AEGP_StreamSuite5</span></a>, which samples the value of the stream at a particular time. For streams without expressions or keyframes, the time parameter is meaningless, and the function returns what essentially is the constant value of the stream. Use <code class="docutils literal notranslate"><span class="pre">AEGP_SetStreamValue</span></code> (which doesn’t take a time as a parameter) to set these streams.</p>
<p>Many StreamSuite functions populate a StreamH, which your AEGP must dispose. when done. After Effects allocates and passes you a copy of the values, not a direct handle to the original value. <code class="docutils literal notranslate"><span class="pre">AEGP_GetNewLayerStream()</span></code> is restricted to streams for which no memory allocation is required to access their values.</p>
</div>
<hr class="docutils" />
<div class="section" id="okay-what-did-i-just-get">
<h3>Okay, What Did I Just Get?<a class="headerlink" href="#okay-what-did-i-just-get" title="Permalink to this headline">¶</a></h3>
<p>A stream value is a large union, only one structure of which (depending on the stream type) is populated. Note the similarity to the <a class="reference internal" href="index.html#effect-basics-pf-paramdef"><span class="std std-ref">PF_ParamDef</span></a>.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span> <span class="k">union</span> <span class="p">{</span>
  <span class="n">AEGP_FourDVal</span>         <span class="n">four_d</span><span class="p">;</span>
  <span class="n">AEGP_ThreeDVal</span>        <span class="n">three_d</span><span class="p">;</span>
  <span class="n">AEGP_TwoDVal</span>          <span class="n">two_d</span><span class="p">;</span>
  <span class="n">AEGP_OneDVal</span>          <span class="n">one_d</span><span class="p">;</span>
  <span class="n">AEGP_ColorVal</span>         <span class="n">color</span><span class="p">;</span>
  <span class="n">AEGP_ArbBlockVal</span>      <span class="n">arbH</span><span class="p">;</span>
  <span class="n">AEGP_MarkerValP</span>       <span class="n">markerP</span><span class="p">;</span>
  <span class="n">AEGP_LayerIDVal</span>       <span class="n">layer_id</span><span class="p">;</span>
  <span class="n">AEGP_MaskIDVal</span>        <span class="n">mask_id</span><span class="p">;</span>
  <span class="n">AEGP_MaskOutlineValH</span>  <span class="n">mask</span><span class="p">;</span>
  <span class="n">AEGP_TextDocumentH</span>    <span class="n">text_documentH</span><span class="p">;</span>
<span class="p">}</span> <span class="n">AEGP_StreamVal2</span><span class="p">;</span>
</pre></div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="layers">
<h3>Layers<a class="headerlink" href="#layers" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">AEGP_GetLayerStreamValue</span></code> is used to access the parameters like anchor point and position, native to almost all layers in AE.</p>
<p>Use <code class="docutils literal notranslate"><span class="pre">IsStreamLegal</span></code> to allow you to determine if that stream type is offered on that layer.</p>
</div>
<hr class="docutils" />
<div class="section" id="masks">
<h3>Masks<a class="headerlink" href="#masks" title="Permalink to this headline">¶</a></h3>
<p>Since a layer can have multiple masks, access the masks using <code class="docutils literal notranslate"><span class="pre">AEGP_GetLayerMaskByIndex</span></code> from <a class="reference internal" href="#aegps-aegp-suites-aegp-masksuite"><span class="std std-ref">AEGP_MaskSuite6</span></a>.</p>
<p>Masks don’t have streams like layers do; they get their own enumeration. Access their streams using <code class="docutils literal notranslate"><span class="pre">AEGP_GetNewMaskStream</span></code> from <a class="reference internal" href="#aegps-aegp-suites-aegp-streamsuite"><span class="std std-ref">AEGP_StreamSuite5</span></a>.</p>
</div>
<hr class="docutils" />
<div class="section" id="effects">
<h3>Effects<a class="headerlink" href="#effects" title="Permalink to this headline">¶</a></h3>
<p>They can have a variable number of streams/parameters, and the order and definition of them is not known when the AEGP is written.</p>
<p>Therefore we cannot offer an enum for selecting them, and instead you must get them by index, hence <code class="docutils literal notranslate"><span class="pre">GetNewEffectStreamByIndex</span></code> from <a class="reference internal" href="#aegps-aegp-suites-aegp-streamsuite"><span class="std std-ref">AEGP_StreamSuite5</span></a>.</p>
<hr class="docutils" />
</div>
<div class="section" id="stream-suite">
<span id="aegps-aegp-suites-stream-suite"></span><h3>Stream Suite<a class="headerlink" href="#stream-suite" title="Permalink to this headline">¶</a></h3>
<p>Access and manipulate the values of a layer’s streams. For paint and text streams, use <a class="reference internal" href="#aegps-aegp-suites-dynamic-stream-suite"><span class="std std-ref">Dynamic Streams</span></a> instead.</p>
<div class="section" id="aegp-streamsuite5">
<span id="aegps-aegp-suites-aegp-streamsuite"></span><h4>AEGP_StreamSuite5<a class="headerlink" href="#aegp-streamsuite5" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="19%" />
<col width="81%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Function</strong></th>
<th class="head"><strong>Purpose</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_IsStreamLegal</span></code></td>
<td><p class="first">Determines if the given stream is appropriate for the given layer.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_IsStreamLegal</span><span class="p">(</span>
  <span class="n">AEGP_LayerH</span>       <span class="n">layerH</span><span class="p">,</span>
  <span class="n">AEGP_LayerStream</span>  <span class="n">which_stream</span><span class="p">,</span>
  <span class="n">A_Boolean</span><span class="o">*</span>        <span class="n">is_legalP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_CanVaryOverTime</span></code></td>
<td><p class="first">Given a stream, returns whether or not a stream is time-variant (and can be keyframed).</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_CanVaryOverTime</span><span class="p">(</span>
  <span class="n">AEGP_StreamRefH</span>  <span class="n">streamH</span><span class="p">,</span>
  <span class="n">A_Boolean</span>        <span class="o">*</span><span class="n">can_varyPB</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetValidInterpolations</span></code></td>
<td><p class="first">Retrieves an <code class="docutils literal notranslate"><span class="pre">AEGP_KeyInterpolationMask</span></code> indicating which interpolation types are valid for the <code class="docutils literal notranslate"><span class="pre">AEGP_StreamRefH</span></code>.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetValidInterpolations</span><span class="p">(</span>
  <span class="n">AEGP_StreamRefH</span>            <span class="n">streamH</span><span class="p">,</span>
  <span class="n">AEGP_KeyInterpolationMask</span>  <span class="o">*</span><span class="n">valid_interpP</span><span class="p">);</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">AEGP_KeyInterpolationMask</span></code> will be a combination of the following:</p>
<blockquote class="last">
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">AEGP_KeyInterpMask_NONE</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_KeyInterpMask_LINEAR</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_KeyInterpMask_BEZIER</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_KeyInterpMask_HOLD</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_KeyInterpMask_CUSTOM</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_KeyInterpMask_ANY</span></code></li>
</ul>
</div></blockquote>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetNewLayerStream</span></code></td>
<td><p class="first">Get a layer’s data stream. Plug-in must dispose of <code class="docutils literal notranslate"><span class="pre">streamPH</span></code>. Note that this will not provide keyframe access;
Use the <a class="reference internal" href="#aegps-aegp-suites-keyframe-suite"><span class="std std-ref">AEGP_KeyframeSuite</span></a> instead.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetNewLayerStream</span><span class="p">(</span>
  <span class="n">AEGP_PluginID</span>     <span class="n">id</span><span class="p">,</span>
  <span class="n">AEGP_LayerH</span>       <span class="n">layerH</span><span class="p">,</span>
  <span class="n">AEGP_LayerStream</span>  <span class="n">which_stream</span><span class="p">,</span>
  <span class="n">AEGP_StreamRefH</span>   <span class="o">*</span><span class="n">streamPH</span><span class="p">);</span>
</pre></div>
</div>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerStream_ANCHORPOINT</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerStream_POSITION</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerStream_SCALE</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerStream_ROTATION</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerStream_ROTATE_Z</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerStream_OPACITY</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerStream_AUDIO</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerStream_MARKER</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerStream_TIME_REMAP</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerStream_ROTATE_X</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerStream_ROTATE_Y</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerStream_ORIENTATION</span></code></li>
</ul>
<p>Only valid for <code class="docutils literal notranslate"><span class="pre">AEGP_ObjectType_CAMERA</span></code>:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">AEGP_ObjectType_CAMERA</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerStream_ZOOM</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerStream_DEPTH_OF_FIELD</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerStream_FOCUS_DISTANCE</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerStream_APERTURE</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerStream_BLUR_LEVEL</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerStream_IRIS_SHAPE</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerStream_IRIS_ROTATION</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerStream_IRIS_ROUNDNESS</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerStream_IRIS_ASPECT_RATIO</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerStream_IRIS_DIFFRACTION_FRINGE</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerStream_IRIS_HIGHLIGHT_GAIN</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerStream_IRIS_HIGHLIGHT_THRESHOLD</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerStream_IRIS_HIGHLIGHT_SATURATION</span></code>,</li>
</ul>
</div></blockquote>
<p>Only valid for <code class="docutils literal notranslate"><span class="pre">AEGP_ObjectType_LIGHT</span></code>:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerStream_INTENSITY</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerStream_COLOR</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerStream_CONE_ANGLE</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerStream_CONE_FEATHER</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerStream_SHADOW_DARKNESS</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerStream_SHADOW_DIFFUSION</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerStream_LIGHT_FALLOFF_TYPE</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerStream_LIGHT_FALLOFF_START</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerStream_LIGHT_FALLOFF_DISTANCE</span></code>,</li>
</ul>
</div></blockquote>
<p>Only valid for <code class="docutils literal notranslate"><span class="pre">AEGP_ObjectType_AV</span></code>:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerStream_ACCEPTS_SHADOWS</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerStream_ACCEPTS_LIGHTS</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerStream_AMBIENT_COEFF</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerStream_DIFFUSE_COEFF</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerStream_SPECULAR_INTENSITY</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerStream_SPECULAR_SHININESS</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerStream_METAL</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerStream_LIGHT_TRANSMISSION</span></code>,</li>
</ul>
</div></blockquote>
<dl class="docutils">
<dt>Only valid for <code class="docutils literal notranslate"><span class="pre">AEGP_ObjectType_AV</span></code>, new in CS6:</dt>
<dd><ul class="first last simple">
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerStream_REFLECTION_INTENSITY</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerStream_REFLECTION_SHARPNESS</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerStream_REFLECTION_ROLLOFF</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerStream_TRANSPARENCY_COEFF</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerStream_TRANSPARENCY_ROLLOFF</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerStream_INDEX_OF_REFRACTION</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerStream_EXTRUSION_BEVEL_STYLE</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerStream_EXTRUSION_BEVEL_DIRECTION</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerStream_EXTRUSION_BEVEL_DEPTH</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerStream_EXTRUSION_HOLE_BEVEL_DEPTH</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerStream_EXTRUSION_DEPTH</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerStream_PLANE_CURVATURE</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerStream_PLANE_SUBDIVISION</span></code>,</li>
</ul>
</dd>
</dl>
<p>Only valid for <code class="docutils literal notranslate"><span class="pre">LIGHT</span></code> and <code class="docutils literal notranslate"><span class="pre">AV</span></code> only:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerStream_CASTS_SHADOWS</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerStream_SOURCE_TEXT</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerStream_BEGIN</span></code> = <code class="docutils literal notranslate"><span class="pre">AEGP_LayerStream_ANCHORPOINT</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LayerStream_END</span></code> = <code class="docutils literal notranslate"><span class="pre">AEGP_LayerStream_LIGHT_FALLOFF_DISTANCE</span> <span class="pre">+</span> <span class="pre">1</span></code></li>
</ul>
</div></blockquote>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">enum</span> <span class="p">{</span>
  <span class="n">AEGP_LightFalloff_NONE</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
  <span class="n">AEGP_LightFalloff_SMOOTH</span><span class="p">,</span>
  <span class="n">AEGP_LightFalloff_INVERSE_SQUARE_CLAMPED</span>
<span class="p">};</span>

<span class="k">typedef</span> <span class="n">A_u_long</span> <span class="n">AEGP_LightFalloffType</span><span class="p">;</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetEffectNumParamStreams</span></code></td>
<td><p class="first">Get number of parameter streams associated with an effect.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetEffectNumParamStreams</span><span class="p">(</span>
  <span class="n">AEGP_EffectRefH</span>  <span class="n">effect_refH</span><span class="p">,</span>
  <span class="n">A_long</span>           <span class="o">*</span><span class="n">num_parmsPL</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetNewEffectStreamByIndex</span></code></td>
<td><p class="first">Get an effect’s parameter stream. Plug-in must dispose of <code class="docutils literal notranslate"><span class="pre">streamPH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetNewEffectStreamByIndex</span><span class="p">(</span>
  <span class="n">AEGP_PluginID</span>    <span class="n">id</span><span class="p">,</span>
  <span class="n">AEGP_EffectRefH</span>  <span class="n">effect_refH</span><span class="p">,</span>
  <span class="n">PF_ParamIndex</span>    <span class="n">param_index</span><span class="p">,</span>
  <span class="n">AEGP_StreamRefH</span>  <span class="o">*</span><span class="n">streamPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetNewMaskStream</span></code></td>
<td><p class="first">Get a mask’s stream. The stream must be disposed.
Also see the <a class="reference internal" href="#aegps-aegp-suites-mask-suite"><span class="std std-ref">AEGP_MaskSuite</span></a>
and <a class="reference internal" href="#aegps-aegp-suites-mask-outline-suite"><span class="std std-ref">AEGP_MaskOutlineSuite</span></a> for additional Mask functions.</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">AEGP_MaskStream_OUTLINE</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_MaskStream_OPACITY</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_MaskStream_FEATHER</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_MaskStream_EXPANSION</span></code>,</li>
</ul>
<p>Useful for iteration:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">AEGP_MaskStream_BEGIN</span></code> = <code class="docutils literal notranslate"><span class="pre">AEGP_MaskStream_OUTLINE</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_MaskStream_END</span></code> = <code class="docutils literal notranslate"><span class="pre">AEGP_MaskStream_EXPANSION</span> <span class="pre">+</span> <span class="pre">1</span></code></li>
</ul>
</div></blockquote>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetNewMaskStream</span><span class="p">(</span>
  <span class="n">AEGP_PluginID</span>    <span class="n">aegp_plugin_id</span><span class="p">,</span>
  <span class="n">AEGP_MaskRefH</span>    <span class="n">mask_refH</span><span class="p">,</span>
  <span class="n">AEGP_MaskStream</span>  <span class="n">which_stream</span><span class="p">,</span>
  <span class="n">AEGP_StreamRefH</span>  <span class="o">*</span><span class="n">mask_strmPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_DisposeStream</span></code></td>
<td><p class="first">Dispose of a stream (do this with all streams passed to the plug-in by these functions).</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_DisposeStream</span><span class="p">(</span>
  <span class="n">AEGP_StreamRefH</span>  <span class="n">streamH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetNewMaskOpacity</span></code></td>
<td><p class="first">Get the mask’s opacity stream. The stream must be disposed.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetNewMaskOpacity</span><span class="p">(</span>
  <span class="n">AEGP_PluginID</span>    <span class="n">aegp_plugin_id</span><span class="p">,</span>
  <span class="n">AEGP_MaskH</span>       <span class="n">maskH</span><span class="p">,</span>
  <span class="n">PF_ParamIndex</span>    <span class="n">param_index</span><span class="p">,</span>
  <span class="n">AEGP_StreamRefH</span>  <span class="o">*</span><span class="n">mask_opacity_streamPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetStreamName</span></code></td>
<td><p class="first">Get name of the stream (localized or forced English). is handle of <code class="docutils literal notranslate"><span class="pre">A_UTF16Char</span></code> (contains null terminated UTF16 string);
must be disposed with <code class="docutils literal notranslate"><span class="pre">AEGP_FreeMemHandle</span></code>.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetStreamName</span><span class="p">(</span>
  <span class="n">AEGP_PluginID</span>    <span class="n">pluginID</span><span class="p">,</span>
  <span class="n">AEGP_StreamRefH</span>  <span class="n">streamH</span><span class="p">,</span>
  <span class="n">A_Boolean</span>        <span class="n">force_englishB</span><span class="p">,</span>
  <span class="n">AEGP_MemHandle</span>   <span class="o">*</span><span class="n">utf_stream_namePH</span><span class="p">);</span>
</pre></div>
</div>
<p class="last">NOTE: if <code class="docutils literal notranslate"><span class="pre">force_englishB</span></code> is TRUE, the default name will override any stream renaming which has been done (either programatically, or by the user).</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetStreamUnitsText</span></code></td>
<td><p class="first">Get stream units, formatted as text (localized or forced English); <code class="docutils literal notranslate"><span class="pre">unitsZ</span></code> up to <code class="docutils literal notranslate"><span class="pre">AEGP_MAX_STREAM_NAME_LEN</span> <span class="pre">+</span> <span class="pre">1</span></code> long.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetStreamUnitsText</span><span class="p">(</span>
  <span class="n">AEGP_StreamRefH</span>  <span class="n">streamH</span><span class="p">,</span>
  <span class="n">A_Boolean</span>        <span class="n">force_englishB</span><span class="p">,</span>
  <span class="n">A_char</span>           <span class="o">*</span><span class="n">unitsZ</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetStreamProperties</span></code></td>
<td><p class="first">Get stream’s flags, as well as minimum and maximum values (as floats), if the stream <em>has</em> mins and maxes.</p>
<p>StreamFlags values:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">AEGP_StreamFlag_NONE</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_StreamFlag_HAS_MIN</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_StreamFlag_HAS_MAX</span></code></li>
</ul>
</div></blockquote>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetStreamProperties</span><span class="p">(</span>
  <span class="n">AEGP_StreamRefH</span>   <span class="n">streamH</span><span class="p">,</span>
  <span class="n">AEGP_StreamFlags</span>  <span class="o">*</span><span class="n">flagsP</span><span class="p">,</span>
  <span class="n">A_FpLong</span>          <span class="o">*</span><span class="n">minP0</span><span class="p">,</span>
  <span class="n">A_FpLong</span>          <span class="o">*</span><span class="n">maxP0</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_IsStreamTimevarying</span></code></td>
<td><p class="first">Returns whether or not the stream is affected by expressions.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_IsStreamTimevarying</span><span class="p">(</span>
  <span class="n">AEGP_StreamRefH</span>  <span class="n">streamH</span><span class="p">,</span>
  <span class="n">A_Boolean</span>        <span class="o">*</span><span class="n">is_timevaryPB</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetStreamType</span></code></td>
<td><p class="first">Get type (dimension) of a stream.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetStreamType</span><span class="p">(</span>
  <span class="n">AEGP_StreamRefH</span>  <span class="n">streamH</span><span class="p">,</span>
  <span class="n">AEGP_StreamType</span>  <span class="o">*</span><span class="n">stream_typeP</span><span class="p">);</span>
</pre></div>
</div>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">AEGP_StreamType_NO_DATA</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_StreamType_TwoD_SPATIAL</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_StreamType_TwoD</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_StreamType_ThreeD</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_StreamType_ThreeD_SPATIAL</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_StreamType_OneD</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_StreamType_COLOR</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_StreamType_ARB</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_StreamType_MARKER</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_StreamType_LAYER_ID</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_StreamType_MASK_ID</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_StreamType_MASK</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_StreamType_TEXT_DOCUMENT</span></code></li>
</ul>
<p class="last">NOTE: always returns <code class="docutils literal notranslate"><span class="pre">ThreeD_Spatial</span></code> for position, regardless of whether or not the layer is 3D.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetNewStreamValue</span></code></td>
<td><p class="first">Get value, at a time you specify, of stream. <code class="docutils literal notranslate"><span class="pre">valueP</span></code> must be disposed by the plug-in.
The <code class="docutils literal notranslate"><span class="pre">AEGP_LTimeMode</span></code> indicates whether the time is in compositions or layer time.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetNewStreamValue</span><span class="p">(</span>
  <span class="n">AEGP_PluginID</span>      <span class="n">aegp_plugin_id</span><span class="p">,</span>
  <span class="n">AEGP_StreamRefH</span>    <span class="n">streamH</span><span class="p">,</span>
  <span class="n">AEGP_LTimeMode</span>     <span class="n">time_mode</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_Time</span>       <span class="o">*</span><span class="n">timePT</span><span class="p">,</span>
  <span class="n">A_Boolean</span>          <span class="n">pre_exprB</span><span class="p">,</span>
  <span class="n">AEGP_StreamValue2</span>  <span class="o">*</span><span class="n">valueP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_DisposeStreamValue</span></code></td>
<td><p class="first">Dispose of stream value. Always deallocate values passed to the plug-in.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_DisposeStreamValue</span><span class="p">(</span>
  <span class="n">AEGP_StreamValue2</span>  <span class="o">*</span><span class="n">valueP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetStreamValue</span></code></td>
<td><p class="first">Only legal when stream is not time-variant.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetStreamValue</span><span class="p">(</span>
  <span class="n">AEGP_PluginID</span>      <span class="n">aegp_plugin_id</span><span class="p">,</span>
  <span class="n">AEGP_StreamRefH</span>    <span class="n">streamH</span><span class="p">,</span>
  <span class="n">AEGP_StreamValue2</span>  <span class="o">*</span><span class="n">valueP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetLayerStreamValue</span></code></td>
<td><p class="first">NOTE: This convenience function is only valid for streams with primitive data types,
and not for <code class="docutils literal notranslate"><span class="pre">AEGP_ArbBlockVal</span></code>, <code class="docutils literal notranslate"><span class="pre">AEGP_MarkerValH</span></code> or <code class="docutils literal notranslate"><span class="pre">AEGP_MaskOutlineValH</span></code>.
For these and other complex types, use <code class="docutils literal notranslate"><span class="pre">AEGP_GetNewStreamValue</span></code>, described above.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetLayerStreamValue</span><span class="p">(</span>
  <span class="n">AEGP_LayerH</span>       <span class="n">layerH</span><span class="p">,</span>
  <span class="n">AEGP_LayerStream</span>  <span class="n">which_stream</span><span class="p">,</span>
  <span class="n">AEGP_LTimeMode</span>    <span class="n">time_mode</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_Time</span>      <span class="o">*</span><span class="n">timePT</span><span class="p">,</span>
  <span class="n">A_Boolean</span>         <span class="n">pre_expB</span><span class="p">,</span>
  <span class="n">AEGP_StreamVal</span>    <span class="o">*</span><span class="n">stream_valP</span><span class="p">,</span>
  <span class="n">AEGP_StreamType</span>   <span class="o">*</span><span class="n">strm_typeP0</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetExpressionState</span></code></td>
<td><p class="first">Determines whether expressions are enabled on the given <code class="docutils literal notranslate"><span class="pre">AEGP_StreamRefH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetExpressionState</span><span class="p">(</span>
  <span class="n">AEGP_PluginID</span>    <span class="n">aegp_plugin_id</span><span class="p">,</span>
  <span class="n">AEGP_StreamRefH</span>  <span class="n">streamH</span><span class="p">,</span>
  <span class="n">A_Boolean</span>        <span class="o">*</span><span class="n">enabledPB</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetExpressionState</span></code></td>
<td><p class="first">Enables and disables expressions on the given <code class="docutils literal notranslate"><span class="pre">AEGP_StreamRefH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetExpressionState</span><span class="p">(</span>
  <span class="n">AEGP_PluginID</span>    <span class="n">aegp_plugin_id</span><span class="p">,</span>
  <span class="n">AEGP_StreamRefH</span>  <span class="n">streamH</span><span class="p">,</span>
  <span class="n">A_Boolean</span>        <span class="n">enabledB</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetExpression</span></code></td>
<td><p class="first">Obtains the expression’s text. Starting in suite version 5 (available in 15.0 and later), this now supports Unicode.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetExpression</span><span class="p">(</span>
  <span class="n">AEGP_PluginID</span>    <span class="n">aegp_plugin_id</span><span class="p">,</span>
  <span class="n">AEGP_StreamRefH</span>  <span class="n">streamH</span><span class="p">,</span>
  <span class="n">AEGP_MemHandle</span>   <span class="o">*</span><span class="n">unicodeHZ</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetExpression</span></code></td>
<td><p class="first">Sets the expression’s text. Starting in suite version 5 (available in 15.0 and later), this now supports Unicode.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetExpression</span><span class="p">(</span>
  <span class="n">AEGP_PluginID</span>      <span class="n">aegp_plugin_id</span><span class="p">,</span>
  <span class="n">AEGP_StreamRefH</span>    <span class="n">streamH</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_UTF16Char</span><span class="o">*</span>  <span class="n">expressionP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_DuplicateStreamRef</span></code></td>
<td><p class="first">Duplicates a given <code class="docutils literal notranslate"><span class="pre">AEGP_StreamRefH</span></code>. Dispose of the duplicate.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_DuplicateStreamRef</span><span class="p">(</span>
  <span class="n">AEGP_PluginID</span>    <span class="n">aegp_plugin_id</span><span class="p">,</span>
  <span class="n">AEGP_StreamRefH</span>  <span class="n">streamH</span><span class="p">,</span>
  <span class="n">AEGP_StreamRefH</span>  <span class="o">*</span><span class="n">dup_streamPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
</div>
</div>
<div class="section" id="dynamic-streams">
<span id="aegps-aegp-suites-dynamic-stream-suite"></span><h3>Dynamic Streams<a class="headerlink" href="#dynamic-streams" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">AEGP_DynamicStreamSuite</span></code> accesses and manipulates paint and text streams.</p>
<p>Use <code class="docutils literal notranslate"><span class="pre">AEGP_GetStreamGroupingType</span></code> and <code class="docutils literal notranslate"><span class="pre">AEGP_GetDynamicStreamFlags</span></code> to identify the stream before attempting to use functions which only work on certain stream types.</p>
<p>Also note that, often, you can simply use <a class="reference internal" href="#aegps-aegp-suites-stream-suite"><span class="std std-ref">Stream Suite</span></a> calls to work with dynamic streams. On the other hand, only those functions specific to dynamic streams are in this suite.</p>
<div class="section" id="aegp-dynamicstreamsuite4">
<h4>AEGP_DynamicStreamSuite4<a class="headerlink" href="#aegp-dynamicstreamsuite4" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="18%" />
<col width="82%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Function</strong></th>
<th class="head"><strong>Purpose</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetNewStreamRefForLayer</span></code></td>
<td><p class="first">Retrieves the AEGP_StreamRefH corresponding to the layer. This function is used to initiate a recursive walk of the layer’s streams.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetNewStreamRefForLayer</span><span class="p">(</span>
  <span class="n">AEGP_PluginID</span>    <span class="n">aegp_plugin_id</span><span class="p">,</span>
  <span class="n">AEGP_LayerH</span>      <span class="n">layerH</span><span class="p">,</span>
  <span class="n">AEGP_StreamRefH</span>  <span class="o">*</span><span class="n">streamPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetNewStreamRefForMask</span></code></td>
<td><p class="first">Retrieves the AEGP_StreamRefH corresponding to the mask.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetNewStreamRefForMask</span><span class="p">(</span>
  <span class="n">AEGP_PluginID</span>    <span class="n">aegp_plugin_id</span><span class="p">,</span>
  <span class="n">AEGP_MaskRefH</span>    <span class="n">maskH</span><span class="p">,</span>
  <span class="n">AEGP_StreamRefH</span>  <span class="o">*</span><span class="n">streamPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetStreamDepth</span></code></td>
<td><p class="first">Retrieves the number of sub-streams associated with the given <code class="docutils literal notranslate"><span class="pre">AEGP_StreamRefH</span></code>.
The initial layer has a depth of 0.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetStreamDepth</span><span class="p">(</span>
  <span class="n">AEGP_StreamRefH</span>  <span class="n">streamH</span><span class="p">,</span>
  <span class="n">A_long</span>           <span class="o">*</span><span class="n">depthPL</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetStreamGroupingType</span></code></td>
<td><p class="first">Retrieves the grouping type for the given <code class="docutils literal notranslate"><span class="pre">AEGP_StreamRefH</span></code>.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetStreamGroupingType</span><span class="p">(</span>
  <span class="n">AEGP_StreamRefH</span>          <span class="n">streamH</span><span class="p">,</span>
  <span class="n">AEGP_StreamGroupingType</span>  <span class="o">*</span><span class="n">group_typeP</span><span class="p">);</span>
</pre></div>
</div>
<p>AEGP_StreamGroupingType will be one of the following:</p>
<blockquote class="last">
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">AEGP_StreamGroupingType_NONE</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_StreamGroupingType_LEAF</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_StreamGroupingType_NAMED_GROUP</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_StreamGroupingType_INDEXED_GROUP</span></code></li>
</ul>
</div></blockquote>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetNumStreamsInGroup</span></code></td>
<td><p class="first">Retrieves the number of streams associated with the given <code class="docutils literal notranslate"><span class="pre">AEGP_StreamRefH</span></code>.
This function will return an error if called with an <code class="docutils literal notranslate"><span class="pre">AEGP_StreamRefH</span></code> with type <code class="docutils literal notranslate"><span class="pre">AEGP_StreamGroupingType_LEAF</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetNumStreamsInGroup</span><span class="p">(</span>
  <span class="n">AEGP_StreamRefH</span>  <span class="n">streamH</span><span class="p">,</span>
  <span class="n">A_long</span>           <span class="o">*</span><span class="n">num_streamsPL</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetDynamicStreamFlags</span></code></td>
<td><p class="first">Retrieves the flags for a given AEGP_StreamRefH.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetDynamicStreamFlags</span><span class="p">(</span>
  <span class="n">AEGP_StreamRefH</span>      <span class="n">streamH</span><span class="p">,</span>
  <span class="n">AEGP_DynStreamFlags</span>  <span class="o">*</span><span class="n">flagsP</span><span class="p">);</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">AEGP_DynStreamFlags</span></code> will be one of the following:</p>
<ul class="last simple">
<li><code class="docutils literal notranslate"><span class="pre">AEGP_DynStreamFlag_ACTIVE_EYEBALL</span></code> means that the stream is available for reading and writing.</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_DynStreamFlag_HIDDEN</span></code> means that, while the stream is still readable/writable, it may not currently be visible in the UI.</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_DynStreamFlag_DISABLED</span></code> A read-only flag. Indicates whether the <code class="docutils literal notranslate"><span class="pre">AEGP_StreamRefH</span></code> is grayed out in the UI.
Note that as of CS5, this flag will not be returned if a parameter is disabled.
Instead, check <code class="docutils literal notranslate"><span class="pre">PF_PUI_DISABLED</span></code> in <a class="reference internal" href="index.html#effect-basics-pf-paramdef-parameter-ui-flags"><span class="std std-ref">Parameter UI Flags</span></a>.</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_DynStreamFlag_ELIDED</span></code> A read-only flag. Indicates that the <code class="docutils literal notranslate"><span class="pre">AEGP_StreamRefH</span></code> is read-only, the user never sees it.
However, the children are still seen and not indented in the Timeline panel.</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_DynStreamFlag_SHOWN_WHEN_EMPTY</span></code> New in CS6. A read-only flag. Indicates that this stream group should be shown when empty.</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_DynStreamFlag_SKIP_REVEAL_WHEN_UNHIDDEN</span></code> New in CS6. A read-only flag. Indicates that this stream property will not be automatically revealed when un-hidden.</li>
</ul>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetDynamicStreamFlag</span></code></td>
<td><p class="first">Sets the specified flag for the <code class="docutils literal notranslate"><span class="pre">AEGP_StreamRefH</span></code>.</p>
<p>Note: flags must be set individually. Undoable if <code class="docutils literal notranslate"><span class="pre">undoableB</span></code> is <code class="docutils literal notranslate"><span class="pre">TRUE</span></code>.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetDynamicStreamFlag</span><span class="p">(</span>
  <span class="n">AEGP_StreamRefH</span>      <span class="n">streamH</span><span class="p">,</span>
  <span class="n">AEGP_DynStreamFlags</span>  <span class="n">one_flag</span><span class="p">,</span>
  <span class="n">A_Boolean</span>            <span class="n">undoableB</span><span class="p">,</span>
  <span class="n">A_Boolean</span>            <span class="n">setB</span><span class="p">);</span>
</pre></div>
</div>
<p class="last">This call may be used to dynamically show or hide parameters, by setting and clearing <code class="docutils literal notranslate"><span class="pre">AEGP_DynStreamFlag_HIDDEN</span></code>.
However, <code class="docutils literal notranslate"><span class="pre">AEGP_DynStreamFlag_DISABLED</span></code> may not be set.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetNewStreamRefByIndex</span></code></td>
<td><p class="first">Retrieves a sub-stream by index from a given <code class="docutils literal notranslate"><span class="pre">AEGP_StreamRefH</span></code>. Cannot be used on streams of type <code class="docutils literal notranslate"><span class="pre">AEGP_StreamGroupingType_LEAF</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetNewStreamRefByIndex</span><span class="p">(</span>
  <span class="n">AEGP_PluginID</span>    <span class="n">aegp_plugin_id</span><span class="p">,</span>
  <span class="n">AEGP_StreamRefH</span>  <span class="n">parent_groupH</span><span class="p">,</span>
  <span class="n">A_long</span>           <span class="n">indexL</span><span class="p">,</span>
  <span class="n">AEGP_StreamRefH</span>  <span class="o">*</span><span class="n">streamPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetNewStreamRefByMatchname</span></code></td>
<td><p class="first">Retrieves a sub-stream by match name from a given <code class="docutils literal notranslate"><span class="pre">AEGP_StreamRefH</span></code>. Only legal for <code class="docutils literal notranslate"><span class="pre">AEGP_StreamGroupingType_NAMED_GROUP</span></code>.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetNewStreamRefByMatchname</span><span class="p">(</span>
  <span class="n">AEGP_PluginID</span>    <span class="n">aegp_plugin_id</span><span class="p">,</span>
  <span class="n">AEGP_StreamRefH</span>  <span class="n">parent_groupH</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_char</span>     <span class="o">*</span><span class="n">match_nameZ</span><span class="p">,</span>
  <span class="n">AEGP_StreamRefH</span>  <span class="o">*</span><span class="n">streamPH</span><span class="p">);</span>
</pre></div>
</div>
<p>Here are some handy stream names, for which references may be retrieved:</p>
<blockquote class="last">
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">AEGP_StreamGroupName_MASK_PARADE</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_StreamGroupName_MASK_ATOM</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_StreamName_MASK_FEATHER</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_StreamName_MASK_OPACITY</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_StreamName_MASK_OFFSET</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_StreamGroupName_EFFECT_PARADE</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_StreamGroupName_LAYER</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_StreamGroupName_AV_LAYER</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_StreamGroupName_TEXT_LAYER</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_StreamGroupName_CAMERA_LAYER</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_StreamGroupName_LIGHT_LAYER</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_StreamGroupName_AUDIO</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_StreamGroupName_MATERIAL_OPTIONS</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_StreamGroupName_TRANSFORM</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_StreamGroupName_LIGHT_OPTIONS</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_StreamGroupName_CAMERA_OPTIONS</span></code></li>
</ul>
</div></blockquote>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_DeleteStream</span></code></td>
<td><p class="first">Deletes the specified stream from a stream grouping.
Note that the caller must still dispose of any <code class="docutils literal notranslate"><span class="pre">AEGP_StreamRefH</span></code> it’s already acquired (allocated) via the API. Undoable.
Only valid for children of type <code class="docutils literal notranslate"><span class="pre">AEGP_StreamGroupingType_INDEXED_GROUP</span></code>.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_DeleteStream</span><span class="p">(</span>
  <span class="n">AEGP_StreamRefH</span>  <span class="n">streamH</span><span class="p">);</span>
</pre></div>
</div>
<p class="last">Note: as of 6.5, if a stream is deleted while it or any child stream is selected, the current composition selection will become <code class="docutils literal notranslate"><span class="pre">NULL</span></code>.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_ReorderStream</span></code></td>
<td><p class="first">Sets the new index of the specified <code class="docutils literal notranslate"><span class="pre">AEGP_StreamRefH</span></code>. Undoable.
Only valid for children of <code class="docutils literal notranslate"><span class="pre">AEGP_StreamGroupingType_INDEXED_GROUP</span></code>.
The <code class="docutils literal notranslate"><span class="pre">AEGP_StreamRefH</span></code> is updated to refer to the newly-ordered stream.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_ReorderStream</span><span class="p">(</span>
  <span class="n">AEGP_StreamRefH</span>  <span class="n">streamH</span>
  <span class="n">A_long</span>           <span class="n">new_indexL</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_DuplicateStream</span></code></td>
<td><p class="first">Duplicates the specified stream and appends it to the stream group.
Undoable.
Only valid for children of <code class="docutils literal notranslate"><span class="pre">AEGP_StreamGroupingType_INDEXED_GROUP</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_DuplicateStream</span><span class="p">(</span>
  <span class="n">AEGP_PluginID</span>    <span class="n">aegp_plugin_id</span><span class="p">,</span>
  <span class="n">AEGP_StreamRefH</span>  <span class="n">streamH</span><span class="p">,</span>
  <span class="n">A_long</span>           <span class="o">*</span><span class="n">new_indexPL0</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetStreamName</span></code></td>
<td><p class="first">Sets the name of the given <code class="docutils literal notranslate"><span class="pre">AEGP_StreamRefH</span></code>. Undoable. nameZ points to a null terminated UTF-16 string.
Only valid for children of <code class="docutils literal notranslate"><span class="pre">AEGP_StreamGroupingType_INDEXED_GROUP</span></code>.</p>
<p>NOTE: If you retrieve the name with force_englishB set to <code class="docutils literal notranslate"><span class="pre">TRUE</span></code>, you will get the canonical, UNchanged name of the stream.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetStreamName</span><span class="p">(</span>
  <span class="n">AEGP_StreamRefH</span>    <span class="n">streamH</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_UTF16Char</span>  <span class="o">*</span><span class="n">nameZ</span><span class="p">);</span>
</pre></div>
</div>
<p class="last">Note: Use this on an effect stream’s group to change the display name of an effect.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_CanAddStream</span></code></td>
<td><p class="first">Returns whether or not it is currently possible to add a stream through the API.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_CanAddStream</span><span class="p">(</span>
  <span class="n">AEGP_StreamRefH</span>  <span class="n">group_streamH</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_char</span>     <span class="o">*</span><span class="n">match_nameZ</span><span class="p">,</span>
  <span class="n">A_Boolean</span>        <span class="o">*</span><span class="n">can_addPB</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_AddStream</span></code></td>
<td><p class="first">Adds a stream to the specified stream group. Undoable. Only valid for <code class="docutils literal notranslate"><span class="pre">AEGP_StreamGroupingType_INDEXED_GROUP</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_AddStream</span><span class="p">(</span>
  <span class="n">AEGP_PluginID</span>    <span class="n">aegp_plugin_id</span><span class="p">,</span>
  <span class="n">AEGP_StreamRefH</span>  <span class="n">indxd_grp_streamH</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_char</span>     <span class="o">*</span><span class="n">match_nameZ</span><span class="p">,</span>
  <span class="n">AEGP_StreamRefH</span>  <span class="o">*</span><span class="n">streamPH0</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetMatchName</span></code></td>
<td><p class="first">Retrieves the match name for the specified <code class="docutils literal notranslate"><span class="pre">AEGP_StreamRefH</span></code>.</p>
<p>Note that this may differ from the display name, which can be retrieves using <code class="docutils literal notranslate"><span class="pre">AEGP_GetStreamName</span></code>, in <a class="reference internal" href="#aegps-aegp-suites-aegp-streamsuite"><span class="std std-ref">AEGP_StreamSuite5</span></a>.
<code class="docutils literal notranslate"><span class="pre">nameZ</span></code> can be up to <code class="docutils literal notranslate"><span class="pre">AEGP_MAX_STREAM_MATCH_NAME_SIZE</span></code> in length.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetMatchName</span><span class="p">(</span>
  <span class="n">AEGP_StreamRefH</span>  <span class="n">streamH</span><span class="p">,</span>
  <span class="n">A_char</span>           <span class="o">*</span><span class="n">nameZ</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetNewParentStreamRef</span></code></td>
<td><p class="first">Retrieves an <code class="docutils literal notranslate"><span class="pre">AEGP_StreamRefH</span></code> for the parent of the specified <code class="docutils literal notranslate"><span class="pre">AEGP_StreamRefH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetNewParentStreamRef</span><span class="p">(</span>
  <span class="n">AEGP_PluginID</span>    <span class="n">plugin_id</span><span class="p">,</span>
  <span class="n">AEGP_StreamRefH</span>  <span class="n">streamH</span><span class="p">,</span>
  <span class="n">AEGP_StreamRefH</span>  <span class="o">*</span><span class="n">parentPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetStreamIsModified</span></code></td>
<td><p class="first">Returns whether or not the specified <code class="docutils literal notranslate"><span class="pre">AEGP_StreamRefH</span></code> has been modified.</p>
<p>Note: the same result is available throught the After Effect user interface by typing “UU” with the composition selected.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetStreamIsModified</span><span class="p">(</span>
  <span class="n">AEGP_StreamRefH</span>  <span class="n">streamH</span><span class="p">,</span>
  <span class="n">A_Boolean</span>        <span class="o">*</span><span class="n">modifiedPB</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetStreamIndexInParent</span></code></td>
<td><p class="first">Retrieves the index of a given stream, relative to its parent stream.
Only valid for children of <code class="docutils literal notranslate"><span class="pre">AEGP_StreamGroupingType_INDEXED_GROUP</span></code></p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetStreamIndexInParent</span><span class="p">(</span>
  <span class="n">AEGP_StreamRefH</span>  <span class="n">streamH</span><span class="p">,</span>
  <span class="n">A_long</span>           <span class="o">*</span><span class="n">indexPL</span><span class="p">);</span>
</pre></div>
</div>
<p class="last">NOTE: As mentioned <em>elsewhere</em>, <code class="docutils literal notranslate"><span class="pre">AEGP_StreamRefHs</span></code> don’t persist across function calls.
If streams are re-ordered, added or removed, all <code class="docutils literal notranslate"><span class="pre">AEGP_StreamRefHs</span></code> previously retrieved may be invalidated.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_IsSeparationLeader</span></code></td>
<td><p class="first">Valid on leaf streams only. Returns true if this stream is a multidimensional stream that can have its dimensions separated,
though they may not be currently separated.</p>
<p>Terminology: A Leader is the stream that can be separated,
a Follower is one of N automatic streams that correspond to the N dimensions of the Leader.</p>
<p>A Leader isn’t always separated, call <code class="docutils literal notranslate"><span class="pre">AEGP_AreDimensionsSeparated</span></code> to find out if it is.
As of CS4, the only stream that is ever separarated is the layer’s Position property.
Please <em>do not</em> write code assuming that, we anticipate allowing separation of more streams in the future.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_IsSeparationLeader</span><span class="p">(</span>
  <span class="n">AEGP_StreamRefH</span>  <span class="n">streamH</span><span class="p">,</span>
  <span class="n">A_Boolean</span>        <span class="o">*</span><span class="n">leaderPB</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_AreDimensionsSeparated</span></code></td>
<td><p class="first">Methods such as <code class="docutils literal notranslate"><span class="pre">AEGP_GetNewKeyframeValue</span></code> that work on keyframe indices will
most definitely <em>not</em> work on the Leader property, you will need to retrieve and operate on the Followers explicitly.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_AreDimensionsSeparated</span><span class="p">(</span>
  <span class="n">AEGP_StreamRefH</span>  <span class="n">streamH</span><span class="p">,</span>
  <span class="n">A_Boolean</span>        <span class="o">*</span><span class="n">separatedPB</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetDimensionsSeparated</span></code></td>
<td><p class="first">Valid only if <code class="docutils literal notranslate"><span class="pre">AEGP_IsSeparationLeader()</span></code> is <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_AreDimensionsSeparated</span><span class="p">(</span>
  <span class="n">AEGP_StreamRefH</span>  <span class="n">streamH</span><span class="p">,</span>
  <span class="n">A_Boolean</span>        <span class="o">*</span><span class="n">separatedPB</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetSeparationFollower</span></code></td>
<td><p class="first">Retrieve the Follower stream corresponding to a given dimension of the Leader stream.
<code class="docutils literal notranslate"><span class="pre">dimS</span></code> can range from <code class="docutils literal notranslate"><span class="pre">0</span></code> to <code class="docutils literal notranslate"><span class="pre">AEGP_GetStreamValueDimensionality(lea</span> <span class="pre">der_streamH)</span> <span class="pre">-</span> <span class="pre">1</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetSeparationFollower</span><span class="p">(</span>
  <span class="n">AEGP_StreamRefH</span>  <span class="n">leader_streamH</span>
  <span class="n">A_short</span>          <span class="n">dimS</span><span class="p">,</span>
  <span class="n">AEGP_StreamRefH</span>  <span class="o">*</span><span class="n">follower_streamPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_IsSeparationFollower</span></code></td>
<td><p class="first">Valid on leaf streams only.
Returns <code class="docutils literal notranslate"><span class="pre">true</span></code> if this stream is a one dimensional property that represents one of the dimensions of a Leader.
You can retrieve stream from the Leader using <code class="docutils literal notranslate"><span class="pre">AEGP_GetSeparationFollower()</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_IsSeparationFollower</span><span class="p">(</span>
  <span class="n">AEGP_StreamRefH</span>  <span class="n">streamH</span>
  <span class="n">A_Boolean</span>        <span class="o">*</span><span class="n">followerPB</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetSeparationLeader</span></code></td>
<td><p class="first">Valid on separation Followers only, returns the Leader it is part of.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetSeparationLeader</span><span class="p">(</span>
  <span class="n">AEGP_StreamRefH</span>  <span class="n">follower_streamH</span><span class="p">,</span>
  <span class="n">AEGP_StreamRefH</span>  <span class="o">*</span><span class="n">leader_streamPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetSeparationDimension</span></code></td>
<td><p class="first">Valid on separation Followers only, returns which dimension of the Leader it corresponds to.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetSeparationDimension</span><span class="p">(</span>
  <span class="n">AEGP_StreamRefH</span>  <span class="n">follower_streamH</span><span class="p">,</span>
  <span class="n">A_short</span>          <span class="o">*</span><span class="n">dimPS</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
</div>
</div>
<div class="section" id="working-with-keyframes">
<span id="aegps-aegp-suites-keyframe-suite"></span><h3>Working With Keyframes<a class="headerlink" href="#working-with-keyframes" title="Permalink to this headline">¶</a></h3>
<p>Keyframes make After Effects what it is. AEGPs (and…ssshh, don’t tell anyone…effects) can use this suite to add, manipulate and remove keyframes from any keyframe-able stream.</p>
<div class="section" id="aegp-keyframesuite3">
<span id="aegps-aegp-suites-aegp-keyframesuite"></span><h4>AEGP_KeyframeSuite3<a class="headerlink" href="#aegp-keyframesuite3" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="78%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Function</strong></th>
<th class="head"><strong>Purpose</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetStreamNumKFs</span></code></td>
<td><p class="first">Retrieves the number of keyframes on the given stream.
Returns <code class="docutils literal notranslate"><span class="pre">AEGP_NumKF_NO_DATA</span></code> if the stream is not keyframe-able.
Also, note that a stream without keyframes isn’t necessarily constant; it can be altered by expressions.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetStreamNumKFs</span><span class="p">(</span>
  <span class="n">AEGP_StreamRefH</span>  <span class="n">streamH</span><span class="p">,</span>
  <span class="n">A_long</span>           <span class="o">*</span><span class="n">num_kfsPL</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetKeyframeTime</span></code></td>
<td><p class="first">Retrieves the time of the specified keyframe.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetKeyframeTime</span><span class="p">(</span>
  <span class="n">AEGP_StreamRefH</span>     <span class="n">streamH</span><span class="p">,</span>
  <span class="n">AEGP_KeyframeIndex</span>  <span class="n">index</span><span class="p">,</span>
  <span class="n">AEGP_LTimeMode</span>      <span class="n">time_mode</span><span class="p">,</span>
  <span class="n">A_Time</span>              <span class="o">*</span><span class="n">timePT</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_InsertKeyframe</span></code></td>
<td><p class="first">Adds a keyframe to the specified stream (at the specified composition or layer time).
Returns the new keyframe’s index.
All indexes greater than the new index are now invalid (but you knew that).
If there is already a keyframe at that time, the values will be updated.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_InsertKeyframe</span><span class="p">(</span>
  <span class="n">AEGP_StreamRefH</span>     <span class="n">streamH</span><span class="p">,</span>
  <span class="n">AEGP_LTimeMode</span>      <span class="n">time_mode</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_Time</span>        <span class="o">*</span><span class="n">timePT</span><span class="p">,</span>
  <span class="n">AEGP_KeyframeIndex</span>  <span class="o">*</span><span class="n">key_indexP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_DeleteKeyframe</span></code></td>
<td><p class="first">Deletes the specified keyframe.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_DeleteKeyframe</span><span class="p">(</span>
  <span class="n">AEGP_StreamRefH</span>     <span class="n">streamH</span><span class="p">,</span>
  <span class="n">AEGP_KeyframeIndex</span>  <span class="n">key_index</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetNewKeyframeValue</span></code></td>
<td><p class="first">Creates and populates an <code class="docutils literal notranslate"><span class="pre">AEGP_StreamValue2</span></code> for the stream’s value at the time of the keyframe.
The returned <code class="docutils literal notranslate"><span class="pre">AEGP_StreamValue2</span></code> must be disposed of using <code class="docutils literal notranslate"><span class="pre">AEGP_DisposeStreamValue</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetNewKeyframeValue</span><span class="p">(</span>
  <span class="n">AEGP_PluginID</span>       <span class="n">plugin_id</span><span class="p">,</span>
  <span class="n">AEGP_StreamRefH</span>     <span class="n">streamH</span><span class="p">,</span>
  <span class="n">AEGP_KeyframeIndex</span>  <span class="n">key_index</span><span class="p">,</span>
  <span class="n">AEGP_StreamValue2</span>   <span class="o">*</span><span class="n">valueP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetKeyframeValue</span></code></td>
<td><p class="first">Sets the stream’s value at the time of the keyframe.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetKeyframeValue</span><span class="p">(</span>
  <span class="n">AEGP_StreamRefH</span>          <span class="n">streamH</span><span class="p">,</span>
  <span class="n">AEGP_KeyframeIndex</span>       <span class="n">index</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">AEGP_StreamValue2</span>  <span class="o">*</span><span class="n">valP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetStreamValueDimensionality</span></code></td>
<td><p class="first">Retrieves the dimensionality of the stream’s value.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetStreamValueDimensionality</span><span class="p">(</span>
  <span class="n">AEGP_StreamRefH</span>  <span class="n">streamH</span><span class="p">,</span>
  <span class="n">A_short</span>          <span class="o">*</span><span class="n">value_dimPS</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetStreamTemporalDimensionality</span></code></td>
<td><p class="first">Retrieves the temporal dimensionality of the stream.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetStreamTemporalDimensionality</span><span class="p">(</span>
  <span class="n">AEGP_StreamRefH</span>  <span class="n">streamH</span><span class="p">,</span>
  <span class="n">A_short</span>          <span class="o">*</span><span class="n">t_dimPS</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetNewKeyframeSpatialTangents</span></code></td>
<td><p class="first">Returns the <code class="docutils literal notranslate"><span class="pre">AEGP_StreamValue2s</span></code> representing the stream’s tangential values at the time of the keyframe.</p>
<p>The returned <code class="docutils literal notranslate"><span class="pre">AEGP_StreamValue2s</span></code> must be disposed of using <code class="docutils literal notranslate"><span class="pre">AEGP_DisposeStreamValue</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetNewKeyframeSpatialTangents</span><span class="p">(</span>
  <span class="n">AEGP_PluginID</span>       <span class="n">plugin_id</span><span class="p">,</span>
  <span class="n">AEGP_StreamRefH</span>     <span class="n">streamH</span><span class="p">,</span>
  <span class="n">AEGP_KeyframeIndex</span>  <span class="n">key_index</span><span class="p">,</span>
  <span class="n">AEGP_StreamValue2</span>   <span class="o">*</span><span class="n">in_tanP0</span><span class="p">,</span>
  <span class="n">AEGP_StreamValue2</span>   <span class="o">*</span><span class="n">out_tanP0</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetKeyframeSpatialTangents</span></code></td>
<td><p class="first">Specifies the tangential <code class="docutils literal notranslate"><span class="pre">AEGP_StreamValue2s</span></code> to be used for the stream’s value at the time of the keyframe.
The <code class="docutils literal notranslate"><span class="pre">AEGP_StreamValue2s</span></code> passed for in and out tangents are not adopted by After Effects, and must be disposed of using <code class="docutils literal notranslate"><span class="pre">AEGP_DisposeStreamValue</span></code>.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetKeyframeSpatialTangents</span><span class="p">(</span>
  <span class="n">AEGP_StreamRefH</span>          <span class="n">streamH</span><span class="p">,</span>
  <span class="n">AEGP_KeyframeIndex</span>       <span class="n">key_index</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">AEGP_StreamValue2</span>  <span class="o">*</span><span class="n">in_tP0</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">AEGP_StreamValue2</span>  <span class="o">*</span><span class="n">out_tP0</span><span class="p">);</span>
</pre></div>
</div>
<p class="last">NOTE: In <code class="docutils literal notranslate"><span class="pre">AEGP_KeyframeSuite2</span></code> and prior versions, the values returned from this function
were wrong when called on an effect point control stream or anchor point.
They were not multiplied by the layer size. Now they are.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetKeyframeTemporalEase</span></code></td>
<td><p class="first">Retrieves the <code class="docutils literal notranslate"><span class="pre">AEGP_KeyframeEases</span></code> associated with the specified dimension of the stream’s value at the time of the keyframe.
<code class="docutils literal notranslate"><span class="pre">dimensionL</span></code> ranges from <code class="docutils literal notranslate"><span class="pre">0</span></code> to <code class="docutils literal notranslate"><span class="pre">(temporal_dimensionality</span> <span class="pre">-1)</span></code>.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetKeyframeTemporalEase</span><span class="p">(</span>
  <span class="n">AEGP_StreamRefH</span>     <span class="n">streamH</span><span class="p">,</span>
  <span class="n">AEGP_KeyframeIndex</span>  <span class="n">key_index</span><span class="p">,</span>
  <span class="n">A_long</span>              <span class="n">dimensionL</span><span class="p">,</span>
  <span class="n">AEGP_KeyframeEase</span>   <span class="o">*</span><span class="n">in_easeP0</span><span class="p">,</span>
  <span class="n">AEGP_KeyframeEase</span>   <span class="o">*</span><span class="n">out_easeP0</span><span class="p">);</span>
</pre></div>
</div>
<p class="last">NOTE: the returned ease values must be multiplied by layer height to match the values displayed in the After Effects UI.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetKeyframeTemporalEase</span></code></td>
<td><p class="first">Specifies the <code class="docutils literal notranslate"><span class="pre">AEGP_KeyframeEases</span></code> to be used for the stream’s value at the time of the keyframe.
<code class="docutils literal notranslate"><span class="pre">dimensionL</span></code> ranges from <code class="docutils literal notranslate"><span class="pre">0</span></code> to <code class="docutils literal notranslate"><span class="pre">(temporal_dimensionality</span> <span class="pre">-1)</span></code>.
The <code class="docutils literal notranslate"><span class="pre">AEGP_KeyframeEases</span></code> passed are not adopted by After Effects.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetKeyframeTemporalEase</span><span class="p">(</span>
  <span class="n">AEGP_StreamRefH</span>           <span class="n">streamH</span><span class="p">,</span>
  <span class="n">AEGP_KeyframeIndex</span>        <span class="n">key_index</span><span class="p">,</span>
  <span class="n">A_long</span>                    <span class="n">dimL</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">AEGP_KeyframeEase</span>   <span class="o">*</span><span class="n">in_P0</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">AEGP_KeyframeEase</span>   <span class="o">*</span><span class="n">outP0</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetKeyframeFlags</span></code></td>
<td><p class="first">Retrieves the flags currently set for the keyframe.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetKeyframeFlags</span><span class="p">(</span>
  <span class="n">AEGP_StreamRefH</span>     <span class="n">streamH</span><span class="p">,</span>
  <span class="n">AEGP_KeyframeIndex</span>  <span class="n">key_index</span><span class="p">,</span>
  <span class="n">AEGP_KeyframeFlags</span>  <span class="o">*</span><span class="n">flagsP</span><span class="p">);</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">*flagsP</span></code> will be a combination of the following:</p>
<blockquote class="last">
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">AEGP_KeyframeFlag_NONE</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_KeyframeFlag_TEMPORAL_CONTINUOUS</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_KeyframeFlag_TEMPORAL_AUTOBEZIER</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_KeyframeFlag_SPATIAL_CONTINUOUS</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_KeyframeFlag_SPATIAL_AUTOBEZIER</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_KeyframeFlag_ROVING</span></code></li>
</ul>
</div></blockquote>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetKeyframeFlag</span></code></td>
<td><p class="first">Sets the specified flag for the keyframe. Flags must be set individually.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetKeyframeFlag</span><span class="p">(</span>
  <span class="n">AEGP_StreamRefH</span>     <span class="n">streamH</span><span class="p">,</span>
  <span class="n">AEGP_KeyframeIndex</span>  <span class="n">key_index</span><span class="p">,</span>
  <span class="n">AEGP_KeyframeFlags</span>  <span class="n">flag</span><span class="p">,</span>
  <span class="n">A_Boolean</span>           <span class="n">valueB</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetKeyframeInterpolation</span></code></td>
<td><p class="first">Retrieves the in and out <code class="docutils literal notranslate"><span class="pre">AEGP_KeyframeInterpolationTypes</span></code> for the specified keyframe.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetKeyframeInterpolation</span><span class="p">(</span>
  <span class="n">AEGP_StreamRefH</span>                 <span class="n">streamH</span><span class="p">,</span>
  <span class="n">AEGP_KeyframeIndex</span>              <span class="n">key_index</span><span class="p">,</span>
  <span class="n">AEGP_KeyframeInterpolationType</span>  <span class="o">*</span><span class="n">inP0</span><span class="p">,</span>
  <span class="n">AEGP_KeyframeInterpolationType</span>  <span class="o">*</span><span class="n">outP0</span><span class="p">);</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">AEGP_KeyframeInterpolationType</span></code> is one of the following:</p>
<blockquote class="last">
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">AEGP_KeyInterp_NONE</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_KeyInterp_LINEAR</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_KeyInterp_BEZIER</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_KeyInterp_HOLD</span></code></li>
</ul>
</div></blockquote>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetKeyframeInterpolation</span></code></td>
<td><p class="first">Specifies the in and out <code class="docutils literal notranslate"><span class="pre">AEGP_KeyframeInterpolationTypes</span></code> to be used for the given keyframe.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetKeyframeInterpolation</span><span class="p">(</span>
  <span class="n">AEGP_StreamRefH</span>                 <span class="n">streamH</span><span class="p">,</span>
  <span class="n">AEGP_KeyframeIndex</span>              <span class="n">key_index</span><span class="p">,</span>
  <span class="n">AEGP_KeyframeInterpolationType</span>  <span class="n">in_interp</span><span class="p">,</span>
  <span class="n">AEGP_KeyframeInterpolationType</span>  <span class="n">out_interp</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_StartAddKeyframes</span></code></td>
<td><p class="first">Informs After Effects that you’re going to be adding several keyframes to the specified stream.
After Effects will return an allocated opaque <code class="docutils literal notranslate"><span class="pre">AEGP_AddKeyframesInfoH</span></code>, for use with the calls below.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_StartAddKeyframes</span><span class="p">(</span>
  <span class="n">AEGP_StreamRefH</span>         <span class="n">streamH</span><span class="p">,</span>
  <span class="n">AEGP_AddKeyframesInfoH</span>  <span class="o">*</span><span class="n">akPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_AddKeyframes</span></code></td>
<td><p class="first">Adds a keyframe to the specified stream at the specified (layer or composition) time.</p>
<p>Note: this doesn’t actually do anything to the stream’s value.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_AddKeyframes</span><span class="p">(</span>
  <span class="n">AEGP_AddKeyframesInfoH</span>  <span class="n">akH</span><span class="p">,</span>
  <span class="n">AEGP_LTimeMode</span>          <span class="n">time_mode</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_Time</span>            <span class="o">*</span><span class="n">timePT</span><span class="p">,</span>
  <span class="n">A_long</span>                  <span class="o">*</span><span class="n">indexPL</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetAddKeyframe</span></code></td>
<td><p class="first">Sets the value of the specified keyframe.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetAddKeyframe</span><span class="p">(</span>
  <span class="n">AEGP_AddKeyframesInfoH</span>   <span class="n">akH</span><span class="p">,</span>
  <span class="n">A_long</span>                   <span class="n">indexL</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">AEGP_StreamValue2</span>  <span class="o">*</span><span class="n">valueP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_EndAddKeyframes</span></code></td>
<td><p class="first">Tells After Effects you’re done adding keyframes.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_EndAddKeyframes</span><span class="p">(</span>
  <span class="n">A_Boolean</span>               <span class="n">addB</span><span class="p">,</span>
  <span class="n">AEGP_AddKeyframesInfoH</span>  <span class="n">akH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<hr class="docutils" />
<div class="section" id="adding-multiple-keyframes">
<h3>Adding Multiple Keyframes<a class="headerlink" href="#adding-multiple-keyframes" title="Permalink to this headline">¶</a></h3>
<p>Each time you call <code class="docutils literal notranslate"><span class="pre">AEGP_InsertKeyframe()</span></code>, the entire stream is added to the undo stack.</p>
<p>If you’re adding one or two keyframes, this isn’t a problem. However, if you’re writing a keyframer, you’ll want to do things the <em>right</em> way.</p>
<p>Before you begin adding keyframes, call the (very-appropriately-named) <code class="docutils literal notranslate"><span class="pre">AEGP_StartAddKeyframes</span></code>, passing it an opaque <code class="docutils literal notranslate"><span class="pre">AEGP_AddKeyframesInfoH</span></code>.</p>
<p>For each keyframe to add, call <code class="docutils literal notranslate"><span class="pre">AEGP_AddKeyframes</span></code> to set the time to be used (and get the newly-added keyframe’s index), then <code class="docutils literal notranslate"><span class="pre">AEGP_SetAddKeyframe</span></code> to specify the value to be used.</p>
<p>Once you’re finished, call <code class="docutils literal notranslate"><span class="pre">AEGP_EndAddKeyframes</span></code> to let know After Effects know it’s time to add the changed parameter stream to the undo stack.</p>
<hr class="docutils" />
</div>
<div class="section" id="marker-streams">
<span id="aegps-aegp-suites-marker-suite"></span><h3>Marker Streams<a class="headerlink" href="#marker-streams" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">AEGP_MarkerSuite</span></code> allows for direct manipulation of marker data.</p>
<div class="section" id="aegp-markersuite2">
<h4>AEGP_MarkerSuite2<a class="headerlink" href="#aegp-markersuite2" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="78%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Function</strong></th>
<th class="head"><strong>Purpose</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_NewMarker</span></code></td>
<td><p class="first">Creates a new marker.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_NewMarker</span><span class="p">(</span>
  <span class="n">AEGP_MarkerValP</span>  <span class="o">*</span><span class="n">markerPP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_DisposeMarker</span></code></td>
<td><p class="first">Disposes of a marker.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_DisposeMarker</span><span class="p">(</span>
  <span class="n">AEGP_MarkerValP</span>  <span class="n">markerP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_DuplicateMarker</span></code></td>
<td><p class="first">Duplicates a marker (didn’t see <em>that</em> one coming, eh?).</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_DuplicateMarker</span><span class="p">(</span>
  <span class="n">AEGP_MarkerValP</span>  <span class="n">markerP</span><span class="p">,</span>
  <span class="n">AEGP_MarkerValP</span>  <span class="o">*</span><span class="n">new_markerP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetMarkerFlag</span></code></td>
<td><p class="first">Sets a marker flag’s value.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetMarkerFlag</span><span class="p">(</span>
  <span class="n">AEGP_MarkerValP</span>      <span class="n">markerP</span><span class="p">,</span>
  <span class="n">AEGP_MarkerFlagType</span>  <span class="n">flagType</span><span class="p">,</span>
  <span class="n">A_Boolean</span>            <span class="n">valueB</span><span class="p">);</span>
</pre></div>
</div>
<p>Currently, AEGP_MarkerFlagType is one of the following:</p>
<blockquote class="last">
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">AEGP_MarkerFlag_NONE</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_MarkerFlag_NAVIGATION</span></code></li>
</ul>
</div></blockquote>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetMarkerFlag</span></code></td>
<td><p class="first">Gets the value (see above) of a given <code class="docutils literal notranslate"><span class="pre">AEGP_MarkerFlagType</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetMarkerFlag</span><span class="p">(</span>
  <span class="n">AEGP_ConstMarkerValP</span>  <span class="n">markerP</span><span class="p">,</span>
  <span class="n">AEGP_MarkerFlagType</span>   <span class="n">flagType</span>
  <span class="n">A_Boolean</span>             <span class="o">*</span><span class="n">valueBP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetMarkerString</span></code></td>
<td><p class="first">Retrieves the UTF-16, NULL-terminated string located in the specified marker field.
Must be disposed of by caller using <code class="docutils literal notranslate"><span class="pre">AEGP_FreeMemHandle</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetMarkerString</span><span class="p">(</span>
  <span class="n">AEGP_PluginID</span>          <span class="n">id</span><span class="p">,</span>
  <span class="n">AEGP_ConstMarkerValP</span>   <span class="n">markerP</span><span class="p">,</span>
  <span class="n">AEGP_MarkerStringType</span>  <span class="n">strType</span><span class="p">,</span>
  <span class="n">AEGP_MemHandle</span>         <span class="o">*</span><span class="n">unicodePH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetMarkerString</span></code></td>
<td><p class="first">Sets the specified field of a marker to the provided text.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetMarkerString</span><span class="p">(</span>
  <span class="n">AEGP_MarkerValP</span>        <span class="n">markerP</span><span class="p">,</span>
  <span class="n">AEGP_MarkerStringType</span>  <span class="n">strType</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_u_short</span>        <span class="o">*</span><span class="n">unicodeP</span><span class="p">,</span>
  <span class="n">A_long</span>                 <span class="n">lengthL</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_CountCuePointParams</span></code></td>
<td><p class="first">Returns the number of cue point parameters.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_CountCuePointParams</span><span class="p">(</span>
  <span class="n">AEGP_ConstMarkerValP</span>  <span class="n">markerP</span><span class="p">,</span>
  <span class="n">A_long</span>                <span class="o">*</span><span class="n">paramsLP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetIndCuePointParam</span></code></td>
<td><p class="first">Returns the cue point param at the specified index (which must be between <code class="docutils literal notranslate"><span class="pre">0</span></code> and <code class="docutils literal notranslate"><span class="pre">(cue</span> <span class="pre">point</span> <span class="pre">params</span> <span class="pre">-1)</span></code>.
Returned handles are <cite>UTF-16</cite>, NULL-terminated strings, and must be disposed of by caller using <code class="docutils literal notranslate"><span class="pre">AEGP_FreeMemHandle</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetIndCuePointParam</span><span class="p">(</span>
  <span class="n">AEGP_PluginID</span>         <span class="n">id</span><span class="p">,</span>
  <span class="n">AEGP_ConstMarkerValP</span>  <span class="n">markerP</span><span class="p">,</span>
  <span class="n">A_long</span>                <span class="n">param_indexL</span><span class="p">,</span>
  <span class="n">AEGP_MemHandle</span>        <span class="o">*</span><span class="n">unicodeKeyPH</span><span class="p">,</span>
  <span class="n">AEGP_MemHandle</span>        <span class="o">*</span><span class="n">uni_ValuePH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetIndCuePointParam</span></code></td>
<td><p class="first">Set the value of an indexed cue point parameter to the specified value.
<code class="docutils literal notranslate"><span class="pre">key_lengthL</span></code> is “number of unicode characters”, and <code class="docutils literal notranslate"><span class="pre">value_lenL</span></code> is the length of the provided value.
<code class="docutils literal notranslate"><span class="pre">unicode_KeyP</span></code> and <code class="docutils literal notranslate"><span class="pre">unicode_ValueP</span></code> point to UTF-16 data.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetIndCuePointParam</span><span class="p">(</span>
  <span class="n">AEGP_MarkerValP</span>  <span class="n">markerP</span><span class="p">,</span>
  <span class="n">A_long</span>           <span class="n">param_idxL</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_u_short</span>  <span class="o">*</span><span class="n">unicode_KeyP</span><span class="p">,</span>
  <span class="n">A_long</span>           <span class="n">key_lengthL</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_u_short</span>  <span class="o">*</span><span class="n">unicode_ValueP</span><span class="p">,</span>
  <span class="n">A_long</span>           <span class="n">value_lengthL</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_InsertCuePointParam</span></code></td>
<td><p class="first">Inserts a cue point parameter.
This call is following by <code class="docutils literal notranslate"><span class="pre">AEGP_SetIndCuePointParam</span></code> to actually set the data.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_InsertCuePointParam</span><span class="p">(</span>
  <span class="n">AEGP_MarkerValP</span>  <span class="n">markerP</span><span class="p">,</span>
  <span class="n">A_long</span>           <span class="n">param_idxL</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_DeleteInd</span></code> CuePointParam</td>
<td><p class="first">Deletes the cue point param at the specified index.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_DeleteIndCuePointParam</span><span class="p">(</span>
  <span class="n">AEGP_MarkerValP</span>  <span class="n">markerP</span><span class="p">,</span>
  <span class="n">A_long</span>           <span class="n">param_idxL</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetMarkerDuration</span></code></td>
<td><div class="first last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetMarkerDuration</span><span class="p">(</span>
  <span class="n">AEGP_MarkerValP</span>  <span class="n">markerP</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_Time</span>     <span class="o">*</span><span class="n">durationPT</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetMarkerDuration</span></code></td>
<td><div class="first last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetMarkerDuration</span><span class="p">(</span>
  <span class="n">AEGP_ConstMarkerValP</span>  <span class="n">markerP</span><span class="p">,</span>
  <span class="n">A_Time</span>                <span class="o">*</span><span class="n">durationPT</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
</div>
</div>
<div class="section" id="mask-management">
<span id="aegps-aegp-suites-mask-suite"></span><h3>Mask Management<a class="headerlink" href="#mask-management" title="Permalink to this headline">¶</a></h3>
<p>Access, manipulate, and delete a layer’s masks.</p>
<div class="section" id="aegp-masksuite6">
<span id="aegps-aegp-suites-aegp-masksuite"></span><h4>AEGP_MaskSuite6<a class="headerlink" href="#aegp-masksuite6" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="19%" />
<col width="81%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Function</strong></th>
<th class="head"><strong>Purpose</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetLayerNumMasks</span></code></td>
<td><p class="first">Counts the masks applied to a layer,</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetLayerNumMasks</span><span class="p">(</span>
  <span class="n">AEGP_LayerH</span>  <span class="n">aegp_layerH</span><span class="p">,</span>
  <span class="n">A_long</span>       <span class="o">*</span><span class="n">num_masksPL</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetLayerMaskByIndex</span></code></td>
<td><p class="first">Given a layer handle and mask index, returns a pointer to the mask handle.
You must destroy the mask handle by using <code class="docutils literal notranslate"><span class="pre">AEGP_DisposeMask()</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetLayerMaskByIndex</span><span class="p">(</span>
  <span class="n">AEGP_LayerH</span>    <span class="n">aegp_layerH</span><span class="p">,</span>
  <span class="n">A_long</span>         <span class="n">mask_indexL</span><span class="p">,</span>
  <span class="n">AEGP_MaskRefH</span>  <span class="o">*</span><span class="n">maskPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_DisposeMask</span></code></td>
<td><p class="first">Dispose of a mask handle.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_DisposeMask</span><span class="p">(</span>
  <span class="n">AEGP_MaskRefH</span>  <span class="n">maskH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetMaskInvert</span></code></td>
<td><p class="first">Given a mask handle, determines if the mask is inverted or not.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetMaskInvert</span><span class="p">(</span>
  <span class="n">AEGP_MaskRefH</span>  <span class="n">maskH</span><span class="p">,</span>
  <span class="n">A_Boolean</span>      <span class="o">*</span><span class="n">invertPB</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetMaskInvert</span></code></td>
<td><p class="first">Sets the inversion state of a mask.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetMaskInvert</span><span class="p">(</span>
  <span class="n">AEGP_MaskRefH</span>  <span class="n">mask_refH</span><span class="p">,</span>
  <span class="n">A_Boolean</span>      <span class="n">invertB</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetMaskMode</span></code></td>
<td><p class="first">Given a mask handle, returns the current mode of the mask.</p>
<p><code class="docutils literal notranslate"><span class="pre">PF_MaskMode_NONE</span></code> does nothing,
<code class="docutils literal notranslate"><span class="pre">PF_MaskMode_ADD</span></code> is the default behavior.</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">PF_MaskMode_NONE</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">PF_MaskMode_ADD</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">PF_MaskMode_SUBTRACT</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">PF_MaskMode_INTERSECT</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">PF_MaskMode_LIGHTEN</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">PF_MaskMode_DARKEN</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">PF_MaskMode_DIFFERENCE</span></code>,</li>
</ul>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetMaskMode</span><span class="p">(</span>
  <span class="n">AEGP_MaskRefH</span>  <span class="n">maskH</span><span class="p">,</span>
  <span class="n">PF_MaskMode</span>    <span class="o">*</span><span class="n">modeP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetMaskMode</span></code></td>
<td><p class="first">Sets the mode of the given mask.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetMaskMode</span><span class="p">(</span>
  <span class="n">AEGP_MaskRefH</span>  <span class="n">maskH</span><span class="p">,</span>
  <span class="n">PF_MaskMode</span>    <span class="n">mode</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetMaskMotionBlurState</span></code></td>
<td><p class="first">Retrieves the motion blur setting for the given mask.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetMaskMotionBlurState</span><span class="p">(</span>
  <span class="n">AEGP_MaskRefH</span>   <span class="n">mask_refH</span><span class="p">,</span>
  <span class="n">AEGP_MaskMBlur</span>  <span class="o">*</span><span class="n">blur_stateP</span><span class="p">);</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">AEGP_MaskMBlur</span></code> will be one of the following:</p>
<blockquote class="last">
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">AEGP_MaskMBlur_SAME_AS_LAYER</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_MaskMBlur_OFF</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_MaskMBlur_ON</span></code></li>
</ul>
</div></blockquote>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetMaskMotionBlurState</span></code></td>
<td><p class="first">New in CS6. Sets the motion blur setting for the given mask.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetMaskMotionBlurState</span><span class="p">(</span>
  <span class="n">AEGP_MaskRefH</span>   <span class="n">mask_refH</span><span class="p">,</span>
  <span class="n">AEGP_MaskMBlur</span>  <span class="n">blur_state</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetMaskFeatherFalloff</span></code></td>
<td><p class="first">New in CS6. Gets the type of feather falloff for the given mask, either
<code class="docutils literal notranslate"><span class="pre">AEGP_MaskFeatherFalloff_SMOOTH</span></code> or <code class="docutils literal notranslate"><span class="pre">AEGP_MaskFeatherFalloff_LINEAR</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetMaskMotionBlurState</span><span class="p">(</span>
  <span class="n">AEGP_MaskRefH</span>            <span class="n">mask_refH</span><span class="p">,</span>
  <span class="n">AEGP_MaskFeatherFalloff</span>  <span class="o">*</span><span class="n">feather_falloffP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetMaskFeatherFalloff</span></code></td>
<td><p class="first">Sets the type of feather falloff for the given mask.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetMaskMotionBlurState</span><span class="p">(</span>
  <span class="n">AEGP_MaskRefH</span>            <span class="n">mask_refH</span><span class="p">,</span>
  <span class="n">AEGP_MaskFeatherFalloff</span>  <span class="n">feather_falloff</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetMaskName</span></code></td>
<td>Removed in CS4. Use <code class="docutils literal notranslate"><span class="pre">AEGP_GetNewStreamRefForMask</span></code> and the name functions in the Dynamic Stream Suite instead.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetMaskName</span></code></td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetMaskID</span></code></td>
<td><p class="first">Retrieves the <code class="docutils literal notranslate"><span class="pre">AEGP_MaskIDVal</span></code> for the given <code class="docutils literal notranslate"><span class="pre">AEGP_MaskRefH</span></code>, for use in uniquely identifying the mask.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetMaskID</span><span class="p">(</span>
  <span class="n">AEGP_MaskRefH</span>   <span class="n">mask_refH</span><span class="p">,</span>
  <span class="n">AEGP_MaskIDVal</span>  <span class="o">*</span><span class="n">id_valP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_CreateNewMask</span></code></td>
<td><p class="first">Creates a new mask on the referenced <code class="docutils literal notranslate"><span class="pre">AEGP_LayerH</span></code>, with zero nodes. The new mask’s index is returned.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_CreateNewMask</span><span class="p">(</span>
  <span class="n">AEGP_LayerH</span>    <span class="n">layerH</span><span class="p">,</span>
  <span class="n">AEGP_MaskRefH</span>  <span class="o">*</span><span class="n">mask_refPH</span><span class="p">,</span>
  <span class="n">A_long</span>         <span class="o">*</span><span class="n">mask_indexPL0</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_DeleteMaskFromLayer</span></code></td>
<td><div class="first highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_DeleteMaskFromLayer</span><span class="p">(</span>
  <span class="n">AEGP_MaskRefH</span>  <span class="n">mask_refH</span><span class="p">);</span>
</pre></div>
</div>
<p class="last">NOTE: As of 6.5, if you delete a mask and it or a child stream is selected, the current selection within the composition will become NULL.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetMaskColor</span></code></td>
<td><p class="first">Retrieves the color of the specified mask.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetMaskColor</span><span class="p">(</span>
  <span class="n">AEGP_MaskRefH</span>  <span class="n">mask_refH</span><span class="p">,</span>
  <span class="n">AEGP_ColorVal</span>  <span class="o">*</span><span class="n">colorP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetMaskColor</span></code></td>
<td><p class="first">Sets the color of the specified mask.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetMaskColor</span><span class="p">(</span>
  <span class="n">AEGP_MaskRefH</span>        <span class="n">mask_refH</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">AEGP_ColorVal</span>  <span class="o">*</span><span class="n">colorP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetMaskLockState</span></code></td>
<td><p class="first">Retrieves the lock state of the specified mask.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetMaskLockState</span><span class="p">(</span>
  <span class="n">AEGP_MaskRefH</span>  <span class="n">mask_refH</span><span class="p">,</span>
  <span class="n">A_Boolean</span>      <span class="o">*</span><span class="n">is_lockedPB</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetMaskLockState</span></code></td>
<td><p class="first">Sets the lock state of the specified mask.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetMaskLockState</span><span class="p">(</span>
  <span class="n">AEGP_MaskRefH</span>  <span class="n">mask_refH</span><span class="p">,</span>
  <span class="n">A_Boolean</span>      <span class="n">lockB</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetMaskIsRotoBezier</span></code></td>
<td><p class="first">Returns whether or not the given mask is used as a rotobezier.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetMaskIsRotoBezier</span><span class="p">(</span>
  <span class="n">AEGP_MaskRefH</span>  <span class="n">mask_refH</span><span class="p">,</span>
  <span class="n">A_Boolean</span>      <span class="o">*</span><span class="n">is_roto_bezierPB</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetMaskIsRotoBezier</span></code></td>
<td><p class="first">Sets whether a given mask is to be used as a rotobezier.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetMaskIsRotoBezier</span><span class="p">(</span>
  <span class="n">AEGP_MaskRefH</span>  <span class="n">mask_refH</span><span class="p">,</span>
  <span class="n">A_Boolean</span>      <span class="o">*</span><span class="n">is_roto_bezierPB</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_DuplicateMask</span></code></td>
<td><p class="first">Duplicates a given <code class="docutils literal notranslate"><span class="pre">AEGP_MaskRefH</span></code>. Caller must dispose of duplicate.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_DuplicateMask</span><span class="p">(</span>
  <span class="n">AEGP_MaskRefH</span>  <span class="n">orig_mask_refH</span><span class="p">,</span>
  <span class="n">AEGP_MaskRefH</span>  <span class="o">*</span><span class="n">dupe_mask_refPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
</div>
</div>
<div class="section" id="mask-outlines">
<span id="aegps-aegp-suites-mask-outline-suite"></span><h3>Mask Outlines<a class="headerlink" href="#mask-outlines" title="Permalink to this headline">¶</a></h3>
<p>The Mask Suite above tells plug-ins about the masks on a layer, but not about the details of those masks.</p>
<p>This is because processing is required on After Effects’ part to access the information; the information isn’t just lying around.</p>
<p>Plug-ins access that information using this Mask Outline Suite.</p>
<div class="section" id="aegp-maskoutlinesuite3">
<span id="aegps-aegp-suites-aegp-maskoutlinesuite"></span><h4>AEGP_MaskOutlineSuite3<a class="headerlink" href="#aegp-maskoutlinesuite3" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="23%" />
<col width="78%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Function</strong></th>
<th class="head"><strong>Purpose</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_IsMaskOutlineOpen</span></code></td>
<td><p class="first">Given an mask outline pointer (obtainable through the <a class="reference internal" href="#aegps-aegp-suites-stream-suite"><span class="std std-ref">Stream Suite</span></a>),
determines if the mask path is open or closed.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_IsMaskOutlineOpen</span><span class="p">(</span>
  <span class="n">AEGP_MaskOutlineVal</span>  <span class="o">*</span><span class="n">mask_outlineP</span><span class="p">,</span>
  <span class="n">A_Boolean</span>            <span class="o">*</span><span class="n">openPB</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetMaskOutlineOpen</span></code></td>
<td><p class="first">Sets the open state of the given mask outline.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetMaskOutlineOpen</span><span class="p">(</span>
  <span class="n">AEGP_MaskOutlineValH</span>  <span class="n">mask_outlineH</span><span class="p">,</span>
  <span class="n">A_Boolean</span>             <span class="n">openB</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetMaskOutlineNumSegments</span></code></td>
<td><p class="first">Given a mask outline pointer, returns the number of segments in the path.
<code class="docutils literal notranslate"><span class="pre">num_segmentsPL</span></code> is the total number of segments <code class="docutils literal notranslate"><span class="pre">[0...N-1]</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetMaskOutlineNumSegments</span><span class="p">(</span>
  <span class="n">AEGP_MaskOutlineVal</span>  <span class="o">*</span><span class="n">mask_outlineP</span><span class="p">,</span>
  <span class="n">A_long</span>               <span class="o">*</span><span class="n">num_segmentsPL</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetMaskOutlineVertexInfo</span></code></td>
<td><p class="first">Given a mask outline pointer and a point between 0 and the total number of segments.
For closed mask paths, <code class="docutils literal notranslate"><span class="pre">vertex[0]</span></code> is the same as <code class="docutils literal notranslate"><span class="pre">vertex[num_segments]</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetMaskOutlineVertexInfo</span><span class="p">(</span>
  <span class="n">AEGP_MaskOutlineVal</span>  <span class="o">*</span><span class="n">mask_outlineP</span><span class="p">,</span>
  <span class="n">A_long</span>               <span class="n">which_pointL</span><span class="p">,</span>
  <span class="n">AEGP_MaskVertex</span>      <span class="o">*</span><span class="n">vertexP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetMaskOutlineVertexInfo</span></code></td>
<td><p class="first">Sets the vertex information for a given index.
Setting vertex 0 is special; its in tangent will actually set the out tangent of the last vertex in the outline.
Of course, <code class="docutils literal notranslate"><span class="pre">which_pointL</span></code> must be valid for the mask outline, or the function will return an error.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetMaskOutlineVertexInfo</span><span class="p">(</span>
  <span class="n">AEGP_MaskOutlineValH</span>  <span class="n">mask_outlineH</span><span class="p">,</span>
  <span class="n">AEGP_VertexIndex</span>      <span class="n">which_pointL</span><span class="p">,</span>
  <span class="n">AEGP_MaskVertex</span>       <span class="o">*</span><span class="n">vertexP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_CreateVertex</span></code></td>
<td><p class="first">Creates a vertex at index position.
All vertices which formerly had an <code class="docutils literal notranslate"><span class="pre">AEGP_VertexIndex</span></code> of position or greater will have their indices incremented by one.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_CreateVertex</span><span class="p">(</span>
  <span class="n">AEGP_MaskOutlineValH</span>  <span class="n">mask_outlineH</span><span class="p">,</span>
  <span class="n">AEGP_VertexIndex</span>      <span class="n">position</span><span class="p">);.</span>
</pre></div>
</div>
<p class="last">NOTE: All masks must have at least one vertex.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_DeleteVertex</span></code></td>
<td><p class="first">Removes a vertex from a mask.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_DeleteVertex</span><span class="p">(</span>
  <span class="n">AEGP_MaskOutlineValH</span>  <span class="n">mask_outlineH</span><span class="p">,</span>
  <span class="n">AEGP_VertexIndex</span>      <span class="n">index</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetMaskOutlineNumFeathers</span></code></td>
<td><p class="first">New in CS6.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_DeleteVertex</span><span class="p">(</span>
  <span class="n">AEGP_MaskOutlineValH</span>  <span class="n">mask_outlineH</span><span class="p">,</span>
  <span class="n">A_long</span>                <span class="o">*</span><span class="n">num_feathersPL</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetMaskOutlineFeatherInfo</span></code></td>
<td><p class="first">New in CS6.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetMaskOutlineFeatherInfo</span><span class="p">(</span>
  <span class="n">AEGP_MaskOutlineValH</span>  <span class="n">mask_outlineH</span><span class="p">,</span>
  <span class="n">AEGP_FeatherIndex</span>     <span class="n">which_featherL</span><span class="p">,</span>
  <span class="n">AEGP_MaskFeather</span>      <span class="o">*</span><span class="n">featherP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetMaskOutlineFeatherInfo</span></code></td>
<td><p class="first">New in CS6. Feather must already exist; use <code class="docutils literal notranslate"><span class="pre">AEGP_CreateMaskOutlineFeather</span></code> first, if needed.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetMaskOutlineFeatherInfo</span><span class="p">(</span>
  <span class="n">AEGP_MaskOutlineValH</span>    <span class="n">mask_outlineH</span><span class="p">,</span>
  <span class="n">AEGP_VertexIndex</span>        <span class="n">which_featherL</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">AEGP_MaskFeather</span>  <span class="o">*</span><span class="n">featherP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_CreateMaskOutlineFeather</span></code></td>
<td><p class="first">New in CS6. Index of new feather is passed back in <code class="docutils literal notranslate"><span class="pre">insert_positionP</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_CreateMaskOutlineFeather</span><span class="p">(</span>
  <span class="n">AEGP_MaskOutlineValH</span>    <span class="n">mask_outlineH</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">AEGP_MaskFeather</span>  <span class="o">*</span><span class="n">featherP0</span><span class="p">,</span>
  <span class="n">AEGP_FeatherIndex</span>       <span class="o">*</span><span class="n">insert_positionP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_DeleteMaskOutlineFeather</span></code></td>
<td><p class="first">New in CS6.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_DeleteMaskOutlineFeather</span><span class="p">(</span>
  <span class="n">AEGP_MaskOutlineValH</span>  <span class="n">mask_outlineH</span><span class="p">,</span>
  <span class="n">AEGP_FeatherIndex</span>     <span class="n">index</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<hr class="docutils" />
<div class="section" id="mask-feathering">
<h3>Mask Feathering<a class="headerlink" href="#mask-feathering" title="Permalink to this headline">¶</a></h3>
<p>New for CS6, masks can be feathered.</p>
<p><code class="docutils literal notranslate"><span class="pre">AEGP_MaskFeather</span></code> is defined as follows:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
  <span class="n">A_long</span>                  <span class="n">segment</span><span class="p">;</span>          <span class="c1">// mask segment where feather is</span>
  <span class="n">PF_FpLong</span>               <span class="n">segment_sF</span><span class="p">;</span>       <span class="c1">// 0-1: feather location on segment</span>
  <span class="n">PF_FpLong</span>               <span class="n">radiusF</span><span class="p">;</span>          <span class="c1">// negative value allowed if type == AEGP_MaskFeatherType_INNER</span>
  <span class="n">PF_FpShort</span>              <span class="n">ui_corner_angleF</span><span class="p">;</span> <span class="c1">// 0-1: angle of UI handle on corners</span>
  <span class="n">PF_FpShort</span>              <span class="n">tensionF</span><span class="p">;</span>         <span class="c1">// 0-1: tension of boundary at feather pt</span>
  <span class="n">AEGP_MaskFeatherInterp</span>  <span class="n">interp</span><span class="p">;</span>
  <span class="n">AEGP_MaskFeatherType</span>    <span class="n">type</span><span class="p">;</span>
<span class="p">}</span> <span class="n">AEGP_MaskFeather</span><span class="p">;</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">AEGP_MaskFeatherInterp</span></code> is either <code class="docutils literal notranslate"><span class="pre">AEGP_MaskFeatherInterp_NORMAL</span></code> or <code class="docutils literal notranslate"><span class="pre">AEGP_MaskFeatherInterp_HOLD_CW</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">AEGP_MaskFeatherType</span></code> is either <code class="docutils literal notranslate"><span class="pre">AEGP_MaskFeatherType_OUTER</span></code> or <code class="docutils literal notranslate"><span class="pre">AEGP_MaskFeatherType_INNER</span></code>.</p>
<p>This suite enables AEGPs to get and set the text associated with text layers.</p>
<p>Note: to get started, retrieve an <code class="docutils literal notranslate"><span class="pre">AEGP_TextDocumentH</span></code> by calling <code class="docutils literal notranslate"><span class="pre">AEGP_GetLayerStreamValue</span></code>, above, and passing <code class="docutils literal notranslate"><span class="pre">AEGP_StreamType_TEXT_DOCUMENT</span></code> as the <code class="docutils literal notranslate"><span class="pre">AEGP_StreamType</span></code>.</p>
<hr class="docutils" />
</div>
<div class="section" id="working-with-text-layers">
<span id="aegps-aegp-suites-text-document-suite"></span><h3>Working With Text Layers<a class="headerlink" href="#working-with-text-layers" title="Permalink to this headline">¶</a></h3>
<p>This suite enables AEGPs to get and set the text associated with text layers.</p>
<div class="section" id="aegp-textdocumentsuite1">
<h4>AEGP_TextDocumentSuite1<a class="headerlink" href="#aegp-textdocumentsuite1" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Function</strong></th>
<th class="head"><strong>Purpose</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetNewText</span></code></td>
<td><p class="first">Retrieves the UTF-16, NULL-terminated string used in the <code class="docutils literal notranslate"><span class="pre">AEGP_TextDocumentH</span></code>.</p>
<p>Note: After Effects will allocate the <code class="docutils literal notranslate"><span class="pre">AEGP_MemHandle</span></code>;
your plug-in must dispose of it when done using <code class="docutils literal notranslate"><span class="pre">AEGP_FreeMemHandle</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetNewText</span><span class="p">(</span>
  <span class="n">AEGP_PluginID</span>       <span class="n">id</span><span class="p">,</span>
  <span class="n">AEGP_TextDocumentH</span>  <span class="n">text_docH</span><span class="p">,</span>
  <span class="n">AEGP_MemHandle</span>      <span class="o">*</span><span class="n">unicodePH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetText</span></code></td>
<td><p class="first">Specifies the text to be used by the <code class="docutils literal notranslate"><span class="pre">AEGP_TextDocumentH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetText</span><span class="p">(</span>
  <span class="n">AEGP_TextDocumentH</span>  <span class="n">text_docH</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_u_short</span>     <span class="o">*</span><span class="n">unicodePS</span><span class="p">,</span>
  <span class="kt">long</span>                <span class="n">lengthL</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
</div>
</div>
<div class="section" id="working-with-text-outlines">
<span id="aegps-aegp-suites-text-layer-suite"></span><h3>Working With Text Outlines<a class="headerlink" href="#working-with-text-outlines" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">AEGP_TextLayerSuite</span></code> provides access to the actual outlines of the text used by text layers.</p>
<p>Once you have a path, you can manipulate it with <a class="reference internal" href="index.html#effect-details-working-with-paths-pf-pathquerysuite"><span class="std std-ref">PF_PathQuerySuite1</span></a> and <a class="reference internal" href="index.html#effect-details-working-with-paths-pf-pathdatasuite"><span class="std std-ref">PF_PathDataSuite</span></a>.</p>
<div class="section" id="aegp-textlayersuite1">
<h4>AEGP_TextLayerSuite1<a class="headerlink" href="#aegp-textlayersuite1" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="19%" />
<col width="81%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Function</strong></th>
<th class="head"><strong>Purpose</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetNewTextOutlines</span></code></td>
<td><p class="first">Allocates and returns a handle to the <code class="docutils literal notranslate"><span class="pre">AEGP_TextOutlinesHs</span></code> associated with the specified layer.
<code class="docutils literal notranslate"><span class="pre">outlinesPH</span></code> will be NULL if there are no <code class="docutils literal notranslate"><span class="pre">AEGP_TextOutlinesHs</span></code> associated with <code class="docutils literal notranslate"><span class="pre">layerH</span></code> (in other words, if it’s not a text layer).</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetNewTextOutlines</span><span class="p">(</span>
  <span class="n">AEGP_LayerH</span>         <span class="n">layerH</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_Time</span>        <span class="o">*</span><span class="n">layer_timePT</span><span class="p">,</span>
  <span class="n">AEGP_TextOutlinesH</span>  <span class="o">*</span><span class="n">outlinesPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_DisposeTextOutlines</span></code></td>
<td><p class="first">Dispose of those outlines we allocated on your behalf!</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_DisposeTextOutlines</span><span class="p">(</span>
  <span class="n">AEGP_TextOutlinesH</span>  <span class="n">outlinesH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetNumTextOutlines</span></code></td>
<td><p class="first">Retrieves the number of text outlines for the layer.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetNumTextOutlines</span><span class="p">(</span>
  <span class="n">AEGP_TextOutlinesH</span>  <span class="n">outlinesH</span><span class="p">,</span>
  <span class="n">A_long</span>              <span class="o">*</span><span class="n">num_otlnsPL</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetIndexedTextOutline</span></code></td>
<td><p class="first">Returns a PF_PathOutlinePtr for the specifed text outline.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetIndexedTextOutline</span><span class="p">(</span>
  <span class="n">AEGP_TextOutlinesH</span>  <span class="n">outlinesH</span><span class="p">,</span>
  <span class="n">A_long</span>              <span class="n">path_indexL</span><span class="p">,</span>
  <span class="n">PF_PathOutlinePtr</span>   <span class="o">*</span><span class="n">pathPP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
</div>
</div>
<div class="section" id="utility-functions">
<span id="aegps-aegp-suites-utility-suite"></span><h3>Utility Functions<a class="headerlink" href="#utility-functions" title="Permalink to this headline">¶</a></h3>
<p>The Utility suite supplies error message handling, AEGP version checking and access to the undo stack.</p>
<p>Everything you need to keep After Effects and your plug-in tidy.</p>
<hr class="docutils" />
<div class="section" id="aegp-utilitysuite6">
<span id="aegps-aegp-suites-aegp-utilitysuite"></span><h4>AEGP_UtilitySuite6<a class="headerlink" href="#aegp-utilitysuite6" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="23%" />
<col width="77%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Function</strong></th>
<th class="head"><strong>Purpose</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_ReportInfo</span></code></td>
<td><p class="first">Displays dialog with name of the AEGP followed by the string passed.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_ReportInfo</span><span class="p">(</span>
  <span class="n">AEGP_PluginID</span>  <span class="n">aegp_plugin_id</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_char</span>   <span class="o">*</span><span class="n">info_stringZ</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_ReportInfoUnicode</span></code></td>
<td><p class="first">New in CC. Displays dialog with name of the AEGP followed by the unicode string passed.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_ReportInfoUnicode</span><span class="p">(</span>
  <span class="n">AEGP_PluginID</span>      <span class="n">aegp_plugin_id</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_UTF16Char</span>  <span class="o">*</span><span class="n">info_stringP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetDriverSpecVersion</span></code></td>
<td><p class="first">Returns version of <code class="docutils literal notranslate"><span class="pre">AEGPDriver</span></code> plug-in (use to determine supported features).</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetDriverSpecVersion</span><span class="p">(</span>
  <span class="n">A_short</span>  <span class="o">*</span><span class="n">major_versionPS</span><span class="p">,</span>
  <span class="n">A_short</span>  <span class="o">*</span><span class="n">minor_versionPS</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_StartQuietErrors</span></code></td>
<td><p class="first">Silences errors. Must be balanced with <code class="docutils literal notranslate"><span class="pre">AEGP_EndQuietErrors</span></code>.
The <code class="docutils literal notranslate"><span class="pre">AEGP_ErrReportState</span></code> is an opaque structure private to After Effects.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_StartQuietErrors</span><span class="p">(</span>
  <span class="n">AEGP_ErrReportState</span>  <span class="o">*</span><span class="n">err_stateP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_EndQuietErrors</span></code></td>
<td><p class="first">Re-enables errors.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_EndQuietErrors</span><span class="p">(</span>
  <span class="n">AEGP_ErrReportState</span>  <span class="o">*</span><span class="n">err_stateP</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_StartUndoGroup</span></code></td>
<td><p class="first">Add action(s) to the undo queue. The user may undo any actions between this and <code class="docutils literal notranslate"><span class="pre">AEGP_EndUndoGroup()</span></code>.
The <code class="docutils literal notranslate"><span class="pre">undo_nameZ</span></code> will appear in the edit menu.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_StartUndoGroup</span><span class="p">(</span>
  <span class="k">const</span> <span class="n">A_char</span>  <span class="o">*</span><span class="n">undo_nameZ</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_EndUndoGroup</span></code></td>
<td><p class="first">Ends the undo list.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_EndUndoGroup</span><span class="p">();</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_RegisterWithAEGP</span></code></td>
<td><p class="first">Returns an AEGP_PluginID, which effect plug-ins can then use in calls to many functions throughout the AEGP API.
Effects should only call this function once, during <code class="docutils literal notranslate"><span class="pre">PF_Cmd_GLOBAL_SETUP</span></code>, and save the <code class="docutils literal notranslate"><span class="pre">AEGP_PluginID</span></code> for later use.
The first parameter can be any value, and the second parameter should be the plug-in’s match name.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_RegisterWithAEGP</span><span class="p">(</span>
  <span class="n">AEGP_GlobalRefcon</span>  <span class="n">global_refcon</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_char</span>       <span class="o">*</span><span class="n">plugin_nameZ</span><span class="p">,</span>
  <span class="n">AEGP_PluginID</span>      <span class="o">*</span><span class="n">plugin_id</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetMainHWND</span></code></td>
<td><p class="first">Retrieves After Effects’ HWND; useful when displaying your own dialog on Windows.
If you don’t use After Effects’ HWND, your modal dialog will not prevent interaction with the windows behind, and pain will ensue.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetMainHWND</span><span class="p">(</span>
  <span class="kt">void</span>  <span class="o">*</span><span class="n">main_hwnd</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_ShowHideAllFloaters</span></code></td>
<td><p class="first">Toggles whether or not floating palettes are displayed.</p>
<p>Use this with care; users get twitchy when you unexpectedly change the UI on them.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_ShowHideAllFloaters</span><span class="p">(</span>
  <span class="n">A_Boolean</span>  <span class="n">include_tool_palB</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_PaintPalGetForeColor</span></code></td>
<td><p class="first">Retrieves the foreground color from the paint palette.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_PaintPalGetForeColor</span><span class="p">(</span>
  <span class="n">AEGP_ColorVal</span>  <span class="o">*</span><span class="n">fore_colorP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_PaintPalGetBackColor</span></code></td>
<td><p class="first">Retrieves the background color from the paint palette.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_PaintPalGetBackColor</span><span class="p">(</span>
  <span class="n">AEGP_ColorVal</span>  <span class="o">*</span><span class="n">back_colorP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_PaintPalSetForeColor</span></code></td>
<td><p class="first">Sets the foreground color in the paint palette.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_PaintPalSetForeColor</span><span class="p">(</span>
  <span class="k">const</span> <span class="n">AEGP_ColorVal</span>  <span class="o">*</span><span class="n">fore_colorP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_PaintPalSetBackColor</span></code></td>
<td><p class="first">Sets the background color in the paint palette.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_PaintPalSetBackColor</span><span class="p">(</span>
  <span class="k">const</span> <span class="n">AEGP_ColorVal</span>  <span class="o">*</span><span class="n">back_colorP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_CharPalGetFillColor</span></code></td>
<td><p class="first">Retrieves the fill color from the character palette.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_CharPalGetFillColor</span><span class="p">(</span>
  <span class="n">A_Boolean</span>     <span class="o">*</span><span class="n">is_fcolor_definedPB</span><span class="p">,</span>
  <span class="n">AEGP_ColorVal</span> <span class="o">*</span><span class="n">fill_colorP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_CharPalGetStrokeColor</span></code></td>
<td><p class="first">Retrieves the stroke color from the character palette.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_CharPalGetStrokeColor</span><span class="p">(</span>
  <span class="n">A_Boolean</span>      <span class="o">*</span><span class="n">is_scolor_definedPB</span><span class="p">,</span>
  <span class="n">AEGP_ColorVal</span>  <span class="o">*</span><span class="n">stroke_colorP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_CharPalSetFillColor</span></code></td>
<td><p class="first">Sets the fill color in the character palette.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_CharPalSetFillColor</span><span class="p">(</span>
  <span class="k">const</span> <span class="n">AEGP_ColorVal</span>  <span class="o">*</span><span class="n">fill_colorP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_CharPalSetStrokeColor</span></code></td>
<td><p class="first">Sets the stroke color in the character palette.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_CharPalSetStrokeColor</span><span class="p">(</span>
  <span class="k">const</span> <span class="n">AEGP_ColorVal</span>  <span class="o">*</span><span class="n">stroke_colorP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_CharPalIsFillColorUIFrontmost</span></code></td>
<td><p class="first">Returns whether or not the fill color is frontmost. If it isn’t, the stroke color is frontmost.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_CharPalIsFillColorUIFrontmost</span><span class="p">(</span>
  <span class="n">A_Boolean</span>  <span class="o">*</span><span class="n">is_fcolor_selectedPB</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_ConvertFpLongToHSFRatio</span></code></td>
<td><p class="first">Returns an <code class="docutils literal notranslate"><span class="pre">A_Ratio</span></code> interpretation of the given <code class="docutils literal notranslate"><span class="pre">A_FpLong</span></code>. Useful for horizontal scale factor interpretation.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_ConvertFpLongToHSFRatio</span><span class="p">(</span>
  <span class="n">A_FpLong</span>  <span class="n">numberF</span><span class="p">,</span>
  <span class="n">A_Ratio</span>   <span class="o">*</span><span class="n">ratioPR</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_ConvertHSFRatioToFpLong</span></code></td>
<td><p class="first">Returns an <code class="docutils literal notranslate"><span class="pre">A_FpLong</span></code> interpretation of the given <code class="docutils literal notranslate"><span class="pre">A_Ratio</span></code>. Useful for horizontal scale factor interpretation.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_ConvertHSFRatioToFpLong</span><span class="p">(</span>
  <span class="n">A_Ratio</span>    <span class="n">ratioR</span><span class="p">,</span>
  <span class="n">A_FpLong</span>  <span class="o">*</span><span class="n">numberPF</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_CauseIdleRoutinesToBeCalled</span></code></td>
<td><p class="first">This routine is safe to call from threads other than the main thread.
It is asynchronous and will return before the idle handler is called.</p>
<p>The suite functions to get this function pointer are not thread safe; save it off in the main thread for use by the child thread.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_CauseIdleRoutinesToBeCalled</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetSuppressInteractiveUI</span></code></td>
<td><p class="first">Returns whether After Effects is running without a user interface.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetSuppressInteractiveUI</span><span class="p">(</span>
  <span class="n">A_Boolean</span>  <span class="o">*</span><span class="n">ui_is_suppressedPB</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_WriteToOSConsole</span></code></td>
<td><p class="first">Sends a string to the OS console.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_WriteToOSConsole</span><span class="p">(</span>
  <span class="k">const</span> <span class="n">A_char</span>  <span class="o">*</span><span class="n">textZ</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_WriteToDebugLog</span></code></td>
<td><p class="first">Writes a message to the debug log, or to the OS command line if After Effects was launched with the “-debug” option.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_WriteToDebugLog</span><span class="p">(</span>
  <span class="k">const</span> <span class="n">A_char</span>  <span class="o">*</span><span class="n">subsystemZ</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_char</span>  <span class="o">*</span><span class="n">event_typeZ</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_char</span>  <span class="o">*</span><span class="n">infoZ</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetLastErrorMessage</span></code></td>
<td><p class="first">Retrieves the last error message displayed to the user, and its associated error number.
Pass in the size of the character buffer to be returned.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetLastErrorMessage</span><span class="p">(</span>
  <span class="n">A_long</span>  <span class="n">buffer_size</span><span class="p">,</span>
  <span class="n">A_char</span>  <span class="o">*</span><span class="n">error_string</span><span class="p">,</span>
  <span class="n">A_Err</span>   <span class="o">*</span><span class="n">error_num</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_IsScriptingAvailable</span></code></td>
<td><p class="first">Returns <code class="docutils literal notranslate"><span class="pre">TRUE</span></code> if scripting is available to the plug-in.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_IsScriptingAvailable</span><span class="p">(</span>
  <span class="n">A_Boolean</span>  <span class="o">*</span><span class="n">outAvailablePB</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_ExecuteScript</span></code></td>
<td><p class="first">Have After Effects execute a script.
The script passed in can be in either UTF-8 or the current application encoding (if platform_encodingB is passed in as TRUE).</p>
<p>The two out arguments are optional. The value of the last line of the script is what is passed back in outResultPH0.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_ExecuteScript</span><span class="p">(</span>
  <span class="n">AEGP_PluginID</span> <span class="n">inPlugin_id</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_char</span> <span class="o">*</span><span class="n">inScriptZ</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_Boolean</span> <span class="n">platform_encodingB</span><span class="p">,</span>
  <span class="n">AEGP_MemHandle</span> <span class="o">*</span><span class="n">outResultPH0</span><span class="p">,</span>
  <span class="n">AEGP_MemHandle</span> <span class="o">*</span><span class="n">outErrStringPH0</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_HostIsActivated</span></code></td>
<td><p class="first">Returns TRUE if the user has successfully activated After Effects.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_HostIsActivated</span><span class="p">(</span>
  <span class="n">A_Boolean</span>  <span class="o">*</span><span class="n">is_activatedPB</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetPluginPlatformRef</span></code></td>
<td><p class="first">On macOS, returns a <code class="docutils literal notranslate"><span class="pre">CFBundleRef</span></code> to your Mach-O plug-in, or NULL for a CFM plug-in.
Always returns <code class="docutils literal notranslate"><span class="pre">NULL</span></code> on Windows (you can use an OS-specific entry point to capture your DLLInstance).</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetPluginPlatformRef</span><span class="p">(</span>
  <span class="n">AEGP_PluginID</span>  <span class="n">plug_id</span><span class="p">,</span>
  <span class="kt">void</span>           <span class="o">**</span><span class="n">plat_refPPV</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_UpdateFontList</span></code></td>
<td><p class="first">Rescans the system font list.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_UpdateFontList</span><span class="p">();</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetPluginPaths</span></code></td>
<td><p class="first">New in CC. Returns a particular path associated with the plug-in:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">AEGP_GetPathTypes_PLUGIN</span></code> - (Not Implemented) The path to the location of the plug-in itself.</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_GetPathTypes_USER_PLUGIN</span></code> -The suite specific location of user specific plug-ins.</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_GetPathTypes_ALLUSER_PLUGIN</span></code> - The suite specific location of plug-ins shared by all users.</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_GetPathTypes_APP</span></code> - The After Effects .exe or .app location. Not plug-in specific.</li>
</ul>
</div></blockquote>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetPluginPaths</span><span class="p">(</span>
  <span class="n">AEGP_PluginID</span>      <span class="n">aegp_plugin_id</span><span class="p">,</span>
  <span class="n">AEGP_GetPathTypes</span>  <span class="n">path_type</span>
  <span class="n">AEGP_MemHandle</span>     <span class="o">*</span><span class="n">unicode_pathPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
</div>
</div>
<div class="section" id="persistent-data-suite">
<span id="aegps-aegp-suites-persistent-data-suite"></span><h3>Persistent Data Suite<a class="headerlink" href="#persistent-data-suite" title="Permalink to this headline">¶</a></h3>
<p>Plug-ins have read and write access to persistent data in After Effects’ preferences. AEGPs may add and manage their own persistent data using the following suite. The data entries are accessed by (section key, value key) pairs. It is recommended that plug-ins use their matchname as their section key, or as a prefix if using multiple section keys.</p>
<p>The available data types are <code class="docutils literal notranslate"><span class="pre">A_long</span></code>, <code class="docutils literal notranslate"><span class="pre">A_FpLong</span></code>, strings, and <code class="docutils literal notranslate"><span class="pre">void*</span></code>. <code class="docutils literal notranslate"><span class="pre">A_FpLongs</span></code> are stored with 6 decimal places of precision. There is no provision for specifying a different precision. String data supports the full 8-bit space. Only 0x00 is reserved for string ending. This makes them ideal for storing UTF-8 encoded strings, ISO 8859-1, and plain ASCII. Both section keys and value keys are of this type. For data types not represented by the simple data types provided, use data handles containing your custom data. void* unstructured data allows you to store any kind of data. You must pass in a size in bytes along with the data.</p>
<p>When calling any of the functions to retrieve the value of a key, if a given key is not found, the default value is both written to the blob and returned as the value; if no default is provided, a blank value will be written and returned.</p>
<p>Note that this data is stored in the application’s preferences, not in the project. As of 6.5, there is no way to store opaque AEGP-generated data in an After Effects project.</p>
<p>After Effects can handle plug-ins which change the preferences during their application; it checks the in-RAM copy of the prefs before acting upon pref-able settings, rather than relying on the saved prefs. It’s like we <em>planned</em> this, or something!</p>
<div class="section" id="aegp-persistentdatesuite4">
<h4>AEGP_PersistentDateSuite4<a class="headerlink" href="#aegp-persistentdatesuite4" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="24%" />
<col width="76%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Function</strong></th>
<th class="head"><strong>Purpose</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetApplicationBlob</span></code></td>
<td><p class="first">Obtains the handle to all persistent application data. Modifying this will modify the application.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">AEGP_PersistentType</span></code> parameter is new in CC, and should be set to one of the following:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">AEGP_PersistentType_MACHINE_SPECIFIC</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_PersistentType_MACHINE_INDEPENDENT</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_PersistentType_MACHINE_INDEPENDENT_RENDER</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_PersistentType_MACHINE_INDEPENDENT_OUTPUT</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_PersistentType_MACHINE_INDEPENDENT_COMPOSITION</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_PersistentType_MACHINE_SPECIFIC_TEXT</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_PersistentType_MACHINE_SPECIFIC_PAINT</span></code></li>
</ul>
</div></blockquote>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetApplicationBlob</span><span class="p">(</span>
  <span class="n">AEGP_PersistentType</span>   <span class="n">blob_type</span><span class="p">,</span>
  <span class="n">AEGP_PersistentBlobH</span>  <span class="o">*</span><span class="n">blobPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetNumSections</span></code></td>
<td><p class="first">Obtains the number of sections in the application blob.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetNumSections</span><span class="p">(</span>
  <span class="n">AEGP_PersistentBlobH</span>  <span class="n">blobH</span><span class="p">,</span>
  <span class="n">A_long</span>                <span class="o">*</span><span class="n">num_sectionPL</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetSectionKeyByIndex</span></code></td>
<td><p class="first">Obtains the key at the given index.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetSectionKeyByIndex</span><span class="p">(</span>
  <span class="n">AEGP_PersistentBlobH</span>  <span class="n">blobH</span><span class="p">,</span>
  <span class="n">A_long</span>                <span class="n">section_index</span><span class="p">,</span>
  <span class="n">A_long</span>                <span class="n">max_section_size</span><span class="p">,</span>
  <span class="n">A_char</span>                <span class="o">*</span><span class="n">section_keyZ</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_DoesKeyExist</span></code></td>
<td><p class="first">Returns whether or not a given key/value pair exists with the blob.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_DoesKeyExist</span><span class="p">(</span>
  <span class="n">AEGP_PersistentBlobH</span>  <span class="n">blobH</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_char</span>          <span class="o">*</span><span class="n">section_keyZ</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_char</span>          <span class="o">*</span><span class="n">value_keyZ</span><span class="p">,</span>
  <span class="n">A_Boolean</span>             <span class="o">*</span><span class="n">existsPB</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetNumKeys</span></code></td>
<td><p class="first">Retrieves the number of value keys in the section.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetNumKeys</span><span class="p">(</span>
  <span class="n">AEGP_PersistentBlobH</span>  <span class="n">blobH</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_char</span>          <span class="o">*</span><span class="n">section_keyZ</span><span class="p">,</span>
  <span class="n">A_long</span>                <span class="o">*</span><span class="n">num_keysPL</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetValueKeyByIndex</span></code></td>
<td><p class="first">Retrieves the value of the indexed key.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetValueKeyByIndex</span><span class="p">(</span>
  <span class="n">AEGP_PersistentBlobH</span>  <span class="n">blobH</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_char</span>          <span class="o">*</span><span class="n">section_keyZ</span><span class="p">,</span>
  <span class="n">A_long</span>                <span class="n">key_index</span><span class="p">,</span>
  <span class="n">A_long</span>                <span class="n">max_key_size</span><span class="p">,</span>
  <span class="n">A_char</span>                <span class="o">*</span><span class="n">value_keyZ</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For the functions below, if a given key is not found, the default value is both written to the blob and returned as the value;
if no default is provided, a blank value will be written and returned.</p>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="19%" />
<col width="81%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Function</strong></th>
<th class="head"><strong>Purpose</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetDataHandle</span></code></td>
<td><p class="first">Obtains the value associated with the given section’s key. If using in-memory data structures, watch for endian issues.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetDataHandle</span><span class="p">(</span>
  <span class="n">AEGP_PluginID</span>         <span class="n">plugin_id</span><span class="p">,</span>
  <span class="n">AEGP_PersistentBlobH</span>  <span class="n">blobH</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_char</span>          <span class="o">*</span><span class="n">section_keyZ</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_char</span>          <span class="o">*</span><span class="n">value_keyZ</span><span class="p">,</span>
  <span class="n">AEGP_MemHandle</span>        <span class="n">defaultH0</span><span class="p">,</span>
  <span class="n">AEGP_MemHandle</span>        <span class="o">*</span><span class="n">valuePH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetData</span></code></td>
<td><p class="first">Obtains the data located at a given section’s value.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetData</span><span class="p">(</span>
  <span class="n">AEGP_PersistentBlobH</span>  <span class="n">blobH</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_char</span>          <span class="o">*</span><span class="n">section_keyZ</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_char</span>          <span class="o">*</span><span class="n">value_keyZ</span><span class="p">,</span>
  <span class="n">A_u_long</span>              <span class="n">data_sizeLu</span><span class="p">,</span>
  <span class="k">const</span> <span class="kt">void</span>            <span class="o">*</span><span class="n">defaultPV0</span><span class="p">,</span>
  <span class="kt">void</span>                  <span class="o">*</span><span class="n">bufPV</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetString</span></code></td>
<td><p class="first">Obtains the string for a given section key’s value (and indicates its length in <code class="docutils literal notranslate"><span class="pre">actual_szLu0</span></code>).</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetString</span><span class="p">(</span>
  <span class="n">AEGP_PersistentBlobH</span>  <span class="n">blobH</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_char</span>          <span class="o">*</span><span class="n">section_keyZ</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_char</span>          <span class="o">*</span><span class="n">value_keyZ</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_char</span>          <span class="o">*</span><span class="n">defaultZ0</span><span class="p">,</span>
  <span class="n">A_u_long</span>              <span class="n">buf_sizeLu</span><span class="p">,</span>
  <span class="kt">char</span>                  <span class="o">*</span><span class="n">bufZ</span><span class="p">,</span>
  <span class="n">A_u_long</span>              <span class="o">*</span><span class="n">actual_szLu0</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetLong</span></code></td>
<td><p class="first">Obtains the <code class="docutils literal notranslate"><span class="pre">A_long</span></code> associated with a given section key’s value.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetLong</span><span class="p">(</span>
  <span class="n">AEGP_PersistentBlobH</span>  <span class="n">blobH</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_char</span>          <span class="o">*</span><span class="n">section_keyZ</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_char</span>          <span class="o">*</span><span class="n">value_keyZ</span><span class="p">,</span>
  <span class="n">A_long</span>                <span class="n">defaultL</span><span class="p">,</span>
  <span class="n">A_long</span>                <span class="o">*</span><span class="n">valuePL</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetFpLong</span></code></td>
<td><p class="first">Obtains the <code class="docutils literal notranslate"><span class="pre">A_FpLong</span></code> associated with a given section key’s value.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetFpLong</span><span class="p">(</span>
  <span class="n">AEGP_PersistentBlobH</span>  <span class="n">blobH</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_char</span>          <span class="o">*</span><span class="n">section_keyZ</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_char</span>          <span class="o">*</span><span class="n">value_keyZ</span><span class="p">,</span>
  <span class="n">A_FpLong</span>              <span class="n">defaultF</span><span class="p">,</span>
  <span class="n">A_FpLong</span>              <span class="o">*</span><span class="n">valuePF</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetTime</span></code></td>
<td><p class="first">New in CC. Obtains the <code class="docutils literal notranslate"><span class="pre">A_Time</span></code> associated with a given section key’s value.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetTime</span><span class="p">(</span>
  <span class="n">AEGP_PersistentBlobH</span>  <span class="n">blobH</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_char</span>          <span class="o">*</span><span class="n">section_keyZ</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_char</span>          <span class="o">*</span><span class="n">value_keyZ</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_Time</span>          <span class="o">*</span><span class="n">defaultPT0</span><span class="p">,</span>
  <span class="n">A_Time</span>                <span class="o">*</span><span class="n">valuePT</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetARGB</span></code></td>
<td><p class="first">New in CC. Obtains the <code class="docutils literal notranslate"><span class="pre">PF_PixelFloat</span></code> associated with a given section key’s value.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetARGB</span><span class="p">(</span>
  <span class="n">AEGP_PersistentBlobH</span>  <span class="n">blobH</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_char</span>          <span class="o">*</span><span class="n">section_keyZ</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_char</span>          <span class="o">*</span><span class="n">value_keyZ</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">PF_PixelFloat</span>   <span class="o">*</span><span class="n">defaultP0</span><span class="p">,</span>
  <span class="n">PF_PixelFloat</span>         <span class="o">*</span><span class="n">valueP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetDataHandle</span></code></td>
<td><p class="first">Sets the given section key’s value to the handle passed in.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetDataHandle</span><span class="p">(</span>
  <span class="n">AEGP_PersistentBlobH</span>  <span class="n">blobH</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_char</span>          <span class="o">*</span><span class="n">section_keyZ</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_char</span>          <span class="o">*</span><span class="n">value_keyZ</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">AEGP_MemHandle</span>  <span class="n">valueH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetData</span></code></td>
<td><p class="first">Sets the given section key’s value to the data contained in <code class="docutils literal notranslate"><span class="pre">dataPV</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetData</span><span class="p">(</span>
  <span class="n">AEGP_PersistentBlobH</span>  <span class="n">blobH</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_char</span>          <span class="o">*</span><span class="n">section_keyZ</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_char</span>          <span class="o">*</span><span class="n">value_keyZ</span><span class="p">,</span>
  <span class="n">A_u_long</span>              <span class="n">data_sizeLu</span><span class="p">,</span>
  <span class="k">const</span> <span class="kt">void</span>            <span class="o">*</span><span class="n">dataPV</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetString</span></code></td>
<td><p class="first">Sets the given section key’s string to <code class="docutils literal notranslate"><span class="pre">strZ</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetString</span><span class="p">(</span>
  <span class="n">AEGP_PersistentBlobH</span>  <span class="n">blobH</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_char</span>          <span class="o">*</span><span class="n">section_keyZ</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_char</span>          <span class="o">*</span><span class="n">value_keyZ</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_char</span>          <span class="o">*</span><span class="n">strZ</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetLong</span></code></td>
<td><p class="first">Sets the given section key’s value to <code class="docutils literal notranslate"><span class="pre">valueL</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetLong</span><span class="p">(</span>
  <span class="n">AEGP_PersistentBlobH</span>  <span class="n">blobH</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_char</span>          <span class="o">*</span><span class="n">section_keyZ</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_char</span>          <span class="o">*</span><span class="n">value_keyZ</span><span class="p">,</span>
  <span class="n">A_long</span>                <span class="n">valueL</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetFpLong</span></code></td>
<td><p class="first">Sets the given section key’s value to <code class="docutils literal notranslate"><span class="pre">valueF</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetFpLong</span><span class="p">(</span>
  <span class="n">AEGP_PersistentBlobH</span>  <span class="n">blobH</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_char</span>          <span class="o">*</span><span class="n">section_keyZ</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_char</span>          <span class="o">*</span><span class="n">value_keyZ</span><span class="p">,</span>
  <span class="n">A_FpLong</span>              <span class="n">valueF</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetTime</span></code></td>
<td><p class="first">New in CC. Sets the given section key’s value to <code class="docutils literal notranslate"><span class="pre">valuePT</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetTime</span><span class="p">(</span>
  <span class="n">AEGP_PersistentBlobH</span>  <span class="n">blobH</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_char</span>          <span class="o">*</span><span class="n">section_keyZ</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_char</span>          <span class="o">*</span><span class="n">value_keyZ</span><span class="p">,</span>
  <span class="n">A_Time</span>                <span class="o">*</span><span class="n">valuePT</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetARGB</span></code></td>
<td><p class="first">New in CC. Sets the given section key’s value to <code class="docutils literal notranslate"><span class="pre">valueP</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetARGB</span><span class="p">(</span>
  <span class="n">AEGP_PersistentBlobH</span>  <span class="n">blobH</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_char</span>          <span class="o">*</span><span class="n">section_keyZ</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_char</span>          <span class="o">*</span><span class="n">value_keyZ</span><span class="p">,</span>
  <span class="n">PF_PixelFloat</span>         <span class="o">*</span><span class="n">valueP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_DeleteEntry</span></code></td>
<td><p class="first">Removes the given section’s value from the blob.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_DeleteEntry</span><span class="p">(</span>
  <span class="n">AEGP_PersistentBlobH</span>  <span class="n">blobH</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_char</span>          <span class="o">*</span><span class="n">section_keyZ</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_char</span>          <span class="o">*</span><span class="n">value_keyZ</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetPrefsDirectory</span></code></td>
<td><p class="first">Get the path to the folder containing After Effects’ preference file.
The path is a handle to a NULL-terminated A_UTF16Char string, and must be disposed with <code class="docutils literal notranslate"><span class="pre">AEGP_FreeMemHandle</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetPrefsDirectory</span><span class="p">(</span>
  <span class="n">AEGP_MemHandle</span>  <span class="o">*</span><span class="n">unicode_pathPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
</div>
</div>
<div class="section" id="color-management">
<span id="aegps-aegp-suites-color-settings-suite"></span><h3>Color Management<a class="headerlink" href="#color-management" title="Permalink to this headline">¶</a></h3>
<p>We’ve provided a function so AEGPs can obtain information on After Effects’ current color management settings.</p>
<div class="section" id="aegp-colorsettingssuite2">
<span id="aegps-aegp-suites-aegp-colorsettingssuite"></span><h4>AEGP_ColorSettingsSuite2<a class="headerlink" href="#aegp-colorsettingssuite2" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="75%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Function</strong></th>
<th class="head"><strong>Purpose</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetBlendingTables</span></code></td>
<td><p class="first">Retrieves the current opaque <code class="docutils literal notranslate"><span class="pre">PF_EffectBlendingTables</span></code>, for use with <code class="docutils literal notranslate"><span class="pre">AEGP_TransferRect</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetBlendingTables</span><span class="p">(</span>
  <span class="n">PR_RenderContextH</span>        <span class="n">render_contextH</span><span class="p">,</span>
  <span class="n">PF_EffectBlendingTables</span>  <span class="o">*</span><span class="n">blending_tables</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_DoesViewHaveColorSpaceXform</span></code></td>
<td><p class="first">Returns whether there is a colorspace transform applied to the current item view.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_DoesViewHaveColorSpaceXform</span><span class="p">(</span>
  <span class="n">AEGP_ItemViewP</span>  <span class="n">viewP</span><span class="p">,</span>
  <span class="n">A_Boolean</span>       <span class="o">*</span><span class="n">has_xformPB</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_XformWorkingToViewColorSpace</span></code></td>
<td><p class="first">Changes the view colorspace of the source to be the working colorspace of the destination.
Source and destination can be the same.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_XformWorkingToViewColorSpace</span><span class="p">(</span>
  <span class="n">AEGP_ItemViewP</span>  <span class="n">viewP</span><span class="p">,</span>
  <span class="n">AEGP_WorldH</span>     <span class="n">srcH</span><span class="p">,</span>
  <span class="n">AEGP_WorldH</span>     <span class="n">dstH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetNewWorkingSpaceColorProfile</span></code></td>
<td><p class="first">Retrieves the opaque current working space ICC profile. Must be disposed.
The “New” in the name does not indicate that you’re making up a new profile; rather, it’s part of our function naming standard;
nything with “New” in the name allocates something which the caller must dispose.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetNewWorkingSpaceColorProfile</span><span class="p">(</span>
  <span class="n">AEGP_PluginID</span>   <span class="n">aegp_plugin_id</span><span class="p">,</span>
  <span class="n">AEGP_MemHandle</span>  <span class="o">*</span><span class="n">icc_profPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetNewColorProfileFromICCProfile</span></code></td>
<td><p class="first">Retrieves a new <code class="docutils literal notranslate"><span class="pre">AEGP_ColorProfileP</span></code> from After Effects, representing the specified ICC profile.
The caller must dispose of the returned <code class="docutils literal notranslate"><span class="pre">AEGP_ColorProfileP</span></code> using <code class="docutils literal notranslate"><span class="pre">AEGP_DisposeColorProfile()</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetNewColorProfile</span> <span class="nf">FromICCProfile</span><span class="p">(</span>
  <span class="n">AEGP_PluginID</span>       <span class="n">aegp_plugin_id</span><span class="p">,</span>
  <span class="n">A_long</span>              <span class="n">icc_sizeL</span><span class="p">,</span>
  <span class="k">const</span> <span class="kt">void</span>          <span class="o">*</span><span class="n">icc_dataPV</span><span class="p">,</span>
  <span class="n">AEGP_ColorProfileP</span>  <span class="o">*</span><span class="n">profilePP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetNewICCProfileFromColorProfile</span></code></td>
<td><p class="first">Retrieves a new ICC profile (stored in an <code class="docutils literal notranslate"><span class="pre">AEGP_MemHandle</span></code>) representing the specified color profile.
Returned <code class="docutils literal notranslate"><span class="pre">AEGP_MemHandle</span></code> must be disposed by the caller.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetNewICCProfile</span> <span class="nf">FromColorProfile</span><span class="p">(</span>
  <span class="n">AEGP_PluginID</span>            <span class="n">plugin_id</span><span class="p">,</span>
  <span class="n">AEGP_ConstColorProfileP</span>  <span class="n">profileP</span><span class="p">,</span>
  <span class="n">AEGP_MemHandle</span>           <span class="o">*</span><span class="n">profilePH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetNewColorProfileDescription</span></code></td>
<td><p class="first">Returns a textual description of the specified color profile.
Text will be a null-terminated UTF16 string, which must be disposed by the caller.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetNewColorProfileDescription</span><span class="p">(</span>
  <span class="n">AEGP_PluginID</span>            <span class="n">aegp_plugin_id</span><span class="p">,</span>
  <span class="n">AEGP_ConstColorProfileP</span>  <span class="n">profileP</span><span class="p">,</span>
  <span class="n">AEGP_MemHandle</span>           <span class="o">*</span><span class="n">unicode_descPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_DisposeColorProfile</span></code></td>
<td><p class="first">Disposes of a color profile, obtained using other functions in this suite.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_DisposeColorProfile</span><span class="p">(</span>
  <span class="n">AEGP_ColorProfileP</span>  <span class="n">profileP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetColorProfileApproximateGamma</span></code></td>
<td><p class="first">Returns a floating point number approximating the gamma setting used by the specified color profile.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetColorProfileApproximateGamma</span><span class="p">(</span>
  <span class="n">AEGP_ConstColorProfileP</span>  <span class="n">profileP</span><span class="p">,</span>
  <span class="n">A_FpShort</span>                <span class="o">*</span><span class="n">approx_gammaP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_IsRGBColorProfile</span></code></td>
<td><p class="first">Returns whether the specified color profile is RGB.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_IsRGBColorProfile</span><span class="p">(</span>
  <span class="n">AEGP_ConstColorProfileP</span>  <span class="n">profileP</span><span class="p">,</span>
  <span class="n">A_Boolean</span>                <span class="o">*</span><span class="n">is_rgbPB</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
</div>
</div>
<div class="section" id="render-suites">
<span id="aegps-aegp-suites-render-suite"></span><h3>Render Suites<a class="headerlink" href="#render-suites" title="Permalink to this headline">¶</a></h3>
<p>Since we introduced the AEGP API, we’ve been asked to provide functions for retrieving rendered frames.</p>
<p>These function suites allows you to do just that.</p>
<p>First, specify what you want rendered in the <a class="reference internal" href="#aegps-aegp-suites-render-options-suite"><span class="std std-ref">AEGP_RenderOptionsSuite4</span></a> or <a class="reference internal" href="#aegps-aegp-suites-aegp-layerrenderoptionssuite"><span class="std std-ref">AEGP_LayerRenderOptionsSuite1</span></a>.</p>
<p>Then do the rendering with <a class="reference internal" href="#aegps-aegp-suites-aegp-rendersuite"><span class="std std-ref">AEGP_RenderSuite4</span></a>.</p>
<div class="section" id="aegp-renderoptionssuite4">
<span id="aegps-aegp-suites-render-options-suite"></span><h4>AEGP_RenderOptionsSuite4<a class="headerlink" href="#aegp-renderoptionssuite4" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="84%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Function</strong></th>
<th class="head"><strong>Purpose</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_NewFromItem</span></code></td>
<td><p class="first">Returns the <code class="docutils literal notranslate"><span class="pre">AEGP_RenderOptionsH</span></code> associated with a given <code class="docutils literal notranslate"><span class="pre">AEGP_ItemH</span></code>.
If there are no options yet specified, After Effects passes back an <code class="docutils literal notranslate"><span class="pre">AEGP_RenderOptionsH</span></code> with render time set to 0,
time step set to the current frame duration, field render set to <code class="docutils literal notranslate"><span class="pre">PF_Field_FRAME</span></code>, and the depth set to the highest resolution specified within the item.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_NewFromItem</span><span class="p">(</span>
  <span class="n">AEGP_PluginID</span>        <span class="n">plugin_id</span><span class="p">,</span>
  <span class="n">AEGP_ItemH</span>           <span class="n">itemH</span><span class="p">,</span>
  <span class="n">AEGP_RenderOptionsH</span>  <span class="o">*</span><span class="n">optionsPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_Duplicate</span></code></td>
<td><p class="first">Duplicates an <code class="docutils literal notranslate"><span class="pre">AEGP_RenderOptionsH</span></code> into <code class="docutils literal notranslate"><span class="pre">copyPH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_Duplicate</span><span class="p">(</span>
  <span class="n">AEGP_PluginID</span>        <span class="n">plugin_id</span><span class="p">,</span>
  <span class="n">AEGP_RenderOptionsH</span>  <span class="n">optionsH</span><span class="p">,</span>
  <span class="n">AEGP_RenderOptionsH</span>  <span class="o">*</span><span class="n">copyPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_Dispose</span></code></td>
<td><p class="first">Deletes an <code class="docutils literal notranslate"><span class="pre">AEGP_RenderOptionsH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_Dispose</span><span class="p">(</span>
  <span class="n">AEGP_RenderOptionsH</span>  <span class="n">optionsH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetTime</span></code></td>
<td><p class="first">Sets the render time of an <code class="docutils literal notranslate"><span class="pre">AEGP_RenderOptionsH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetTime</span><span class="p">(</span>
  <span class="n">AEGP_RenderOptionsH</span>  <span class="n">optionsH</span><span class="p">,</span>
  <span class="n">A_Time</span>               <span class="n">time</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetTime</span></code></td>
<td><p class="first">Retrieves the render time of the given <code class="docutils literal notranslate"><span class="pre">AEGP_RenderOptionsH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetTime</span><span class="p">(</span>
  <span class="n">AEGP_RenderOptionsH</span>  <span class="n">optionsH</span><span class="p">,</span>
  <span class="n">A_Time</span>               <span class="o">*</span><span class="n">timeP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetTimeStep</span></code></td>
<td><p class="first">Specifies the time step (duration of a frame) for the referenced <code class="docutils literal notranslate"><span class="pre">AEGP_RenderOptionsH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetTimeStep</span><span class="p">(</span>
  <span class="n">AEGP_RenderOptionsH</span>  <span class="n">optionsH</span><span class="p">,</span>
  <span class="n">A_Time</span>               <span class="n">time_step</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetTimeStep</span></code></td>
<td><p class="first">Retrieves the time step (duration of a frame) for the given <code class="docutils literal notranslate"><span class="pre">AEGP_RenderOptionsH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetTimeStep</span><span class="p">(</span>
  <span class="n">AEGP_RenderOptionsH</span>  <span class="n">optionsH</span><span class="p">,</span>
  <span class="n">A_Time</span>               <span class="o">*</span><span class="n">timePT</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetFieldRender</span></code></td>
<td><p class="first">Specifies the field settings for the given <code class="docutils literal notranslate"><span class="pre">AEGP_RenderOptionsH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetFieldRender</span><span class="p">(</span>
  <span class="n">AEGP_RenderOptionsH</span>  <span class="n">optionsH</span><span class="p">,</span>
  <span class="n">PF_Field</span>             <span class="n">field_render</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetFieldRender</span></code></td>
<td><p class="first">Retrieves the field settings for the given <code class="docutils literal notranslate"><span class="pre">AEGP_RenderOptionsH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetFieldRender</span><span class="p">(</span>
  <span class="n">AEGP_RenderOptionsH</span>  <span class="n">optionsH</span><span class="p">,</span>
  <span class="n">PF_Field</span>             <span class="o">*</span><span class="n">field_renderP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetWorldType</span></code></td>
<td><p class="first">Specifies the AEGP_WorldType of the output of a given <code class="docutils literal notranslate"><span class="pre">AEGP_RenderOptionsH</span></code>.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetWorldType</span><span class="p">(</span>
  <span class="n">AEGP_RenderOptionsH</span>  <span class="n">optionsH</span><span class="p">,</span>
  <span class="n">AEGP_WorldType</span>       <span class="n">type</span><span class="p">);</span>
</pre></div>
</div>
<p class="last"><code class="docutils literal notranslate"><span class="pre">AEGP_WorldType</span></code> will be either <code class="docutils literal notranslate"><span class="pre">AEGP_WorldType_8</span></code> or <code class="docutils literal notranslate"><span class="pre">AEGP_WorldType_16</span></code></p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetWorldType</span></code></td>
<td><p class="first">Retrieves the <code class="docutils literal notranslate"><span class="pre">AEGP_WorldType</span></code> of the given <code class="docutils literal notranslate"><span class="pre">AEGP_RenderOptionsH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetWorldType</span><span class="p">(</span>
  <span class="n">AEGP_RenderOptionsH</span>  <span class="n">optionsH</span><span class="p">,</span>
  <span class="n">AEGP_WorldType</span>       <span class="o">*</span><span class="n">typeP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetDownsampleFactor</span></code></td>
<td><p class="first">Specifies the downsample factor (with independent horizontal and vertical settings) for the given <code class="docutils literal notranslate"><span class="pre">AEGP_RenderOptionsH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetDownsampleFactor</span><span class="p">(</span>
  <span class="n">AEGP_RenderOptionsH</span>  <span class="n">optionsH</span><span class="p">,</span>
  <span class="n">A_short</span>              <span class="n">x</span><span class="p">,</span>
  <span class="n">A_short</span>              <span class="n">y</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetDownsampleFactor</span></code></td>
<td><p class="first">Retrieves the downsample factor for the given <code class="docutils literal notranslate"><span class="pre">AEGP_RenderOptionsH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetDownsampleFactor</span><span class="p">(</span>
  <span class="n">AEGP_RenderOptionsH</span>  <span class="n">optionsH</span><span class="p">,</span>
  <span class="n">A_short</span>              <span class="o">*</span><span class="n">xP</span><span class="p">,</span>
  <span class="n">A_short</span>              <span class="o">*</span><span class="n">yP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetRegionOfInterest</span></code></td>
<td><p class="first">Specifies the region of interest sub-rectangle for the given <code class="docutils literal notranslate"><span class="pre">AEGP_RenderOptionsH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetRegionOfInterest</span><span class="p">(</span>
  <span class="n">AEGP_RenderOptionsH</span>  <span class="n">optionsH</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_LRect</span>        <span class="o">*</span><span class="n">roiP</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetRegionOfInterest</span></code></td>
<td><p class="first">Retrieves the region of interest sub-rectangle for the given <code class="docutils literal notranslate"><span class="pre">AEGP_RenderOptionsH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetRegionOfInterest</span><span class="p">(</span>
  <span class="n">AEGP_RenderOptionsH</span>  <span class="n">optionsH</span><span class="p">,</span>
  <span class="n">A_LRect</span>              <span class="o">*</span><span class="n">roiP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetMatteMode</span></code></td>
<td><p class="first">Specifies the <code class="docutils literal notranslate"><span class="pre">AEGP_MatteMode</span></code> for the given <code class="docutils literal notranslate"><span class="pre">AEGP_RenderOptionsH</span></code>.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetMatteMode</span><span class="p">(</span>
  <span class="n">AEGP_RenderOptionsH</span>  <span class="n">optionsH</span><span class="p">,</span>
  <span class="n">AEGP_MatteMode</span>       <span class="n">mode</span><span class="p">);</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">AEGP_MatteMode</span></code> will be one of the following:</p>
<blockquote class="last">
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">AEGP_MatteMode_STRAIGHT</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_MatteMode_PREMUL_BLACK</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_MatteMode_PREMUL_BG_COLOR</span></code></li>
</ul>
</div></blockquote>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetMatteMode</span></code></td>
<td><p class="first">Retrieves the <code class="docutils literal notranslate"><span class="pre">AEGP_MatteMode</span></code> for the given <code class="docutils literal notranslate"><span class="pre">AEGP_RenderOptionsH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetMatteMode</span><span class="p">(</span>
  <span class="n">AEGP_RenderOptionsH</span>  <span class="n">optionsH</span><span class="p">,</span>
  <span class="n">AEGP_MatteMode</span>       <span class="o">*</span><span class="n">modeP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetChannelOrder</span></code></td>
<td><p class="first">Gets the <code class="docutils literal notranslate"><span class="pre">AEGP_ChannelOrder</span></code> for the given <code class="docutils literal notranslate"><span class="pre">AEGP_RenderOptionsH</span></code>.
<code class="docutils literal notranslate"><span class="pre">AEGP_ChannelOrder</span></code> will be either <code class="docutils literal notranslate"><span class="pre">AEGP_ChannelOrder_ARGB</span></code> or <code class="docutils literal notranslate"><span class="pre">AEGP_ChannelOrder_BGRA</span></code>.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetChannelOrder</span><span class="p">(</span>
  <span class="n">AEGP_RenderOptionsH</span>  <span class="n">optionsH</span><span class="p">,</span>
  <span class="n">AEGP_ChannelOrder</span>    <span class="o">*</span><span class="n">orderP</span><span class="p">);</span>
</pre></div>
</div>
<p class="last">Factoid: this was added to facilitate live linking with Premiere Pro.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetChannelOrder</span></code></td>
<td><p class="first">Sets the <code class="docutils literal notranslate"><span class="pre">AEGP_ChannelOrder</span></code> of the <code class="docutils literal notranslate"><span class="pre">AEGP_RenderOptionsH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetChannelOrder</span><span class="p">(</span>
  <span class="n">AEGP_RenderOptionsH</span>  <span class="n">optionsH</span><span class="p">,</span>
  <span class="n">AEGP_ChannelOrder</span>    <span class="n">order</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetRenderGuideLayers</span></code></td>
<td><p class="first">Passes back a boolean that is true if the render guide layers setting is on.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetRenderGuideLayers</span><span class="p">)(</span>
  <span class="n">AEGP_RenderOptionsH</span>  <span class="n">optionsH</span><span class="p">,</span>
  <span class="n">A_Boolean</span>            <span class="o">*</span><span class="n">will_renderPB</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetRenderGuideLayers</span></code></td>
<td><p class="first">Specify whether or not to render guide layers.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetRenderGuideLayers</span><span class="p">)(</span>
  <span class="n">AEGP_RenderOptionsH</span>  <span class="n">optionsH</span><span class="p">,</span>
  <span class="n">A_Boolean</span>            <span class="n">render_themB</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetRenderQuality</span></code></td>
<td><p class="first">Get the render quality of the render queue item.
Quality can be either <code class="docutils literal notranslate"><span class="pre">AEGP_ItemQuality_DRAFT</span></code> or <code class="docutils literal notranslate"><span class="pre">AEGP_ItemQuality_BEST</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetRenderQuality</span><span class="p">)(</span>
  <span class="n">AEGP_RenderOptionsH</span>  <span class="n">optionsH</span><span class="p">,</span>
  <span class="n">AEGP_ItemQuality</span>     <span class="o">*</span><span class="n">qualityP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetRenderQuality</span></code></td>
<td><p class="first">Set the render quality of the render queue item.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetRenderQuality</span><span class="p">)(</span>
  <span class="n">AEGP_RenderOptionsH</span>  <span class="n">optionsH</span><span class="p">,</span>
  <span class="n">AEGP_ItemQuality</span>     <span class="n">quality</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="aegp-layerrenderoptionssuite1">
<span id="aegps-aegp-suites-aegp-layerrenderoptionssuite"></span><h4>AEGP_LayerRenderOptionsSuite1<a class="headerlink" href="#aegp-layerrenderoptionssuite1" title="Permalink to this headline">¶</a></h4>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">New in 13.0</p>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="21%" />
<col width="79%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Function</strong></th>
<th class="head"><strong>Purpose</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_NewFromLayer</span></code></td>
<td><p class="first">Returns the <code class="docutils literal notranslate"><span class="pre">AEGP_LayerRenderOptionsH</span></code> associated with a given <code class="docutils literal notranslate"><span class="pre">AEGP_LayerH</span></code>.
Render time is set to the layer’s current time, time step is set to layer’s frame duration,
ROI to the layer’s nominal bounds, and EffectsToRender to “all”.
<code class="docutils literal notranslate"><span class="pre">optionsPH</span></code> must be disposed by calling code.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_NewFromLayer</span><span class="p">(</span>
  <span class="n">AEGP_PluginID</span>             <span class="n">plugin_id</span><span class="p">,</span>
  <span class="n">AEGP_LayerH</span>               <span class="n">layerH</span><span class="p">,</span>
  <span class="n">AEGP_LayerRenderOptionsH</span>  <span class="o">*</span><span class="n">optionsPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_NewFromUpstreamOfEffect</span></code></td>
<td><p class="first">Returns the <code class="docutils literal notranslate"><span class="pre">AEGP_LayerRenderOptionsH</span></code> from the layer associated with a given <code class="docutils literal notranslate"><span class="pre">AEGP_EffectRefH</span></code>.
Render time is set to the layer’s current time, time step is set to layer’s frame duration,
ROI to the layer’s nominal bounds, and EffectsToRender to the index of <code class="docutils literal notranslate"><span class="pre">effectH</span></code>.
<code class="docutils literal notranslate"><span class="pre">optionsPH</span></code> must be disposed by calling code.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_NewFromUpstreamOfEffect</span><span class="p">(</span>
  <span class="n">AEGP_PluginID</span>             <span class="n">plugin_id</span><span class="p">,</span>
  <span class="n">AEGP_EffectRefH</span>           <span class="n">effectH</span><span class="p">,</span>
  <span class="n">AEGP_LayerRenderOptionsH</span>  <span class="o">*</span><span class="n">optionsPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_Duplicate</span></code></td>
<td><p class="first">Duplicates an <code class="docutils literal notranslate"><span class="pre">AEGP_LayerRenderOptionsH</span></code> into <code class="docutils literal notranslate"><span class="pre">copyPH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_Duplicate</span><span class="p">(</span>
  <span class="n">AEGP_PluginID</span>             <span class="n">plugin_id</span><span class="p">,</span>
  <span class="n">AEGP_LayerRenderOptionsH</span>  <span class="n">optionsH</span><span class="p">,</span>
  <span class="n">AEGP_LayerRenderOptionsH</span>  <span class="o">*</span><span class="n">copyPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_Dispose</span></code></td>
<td><p class="first">Deletes an <code class="docutils literal notranslate"><span class="pre">AEGP_LayerRenderOptionsH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_Dispose</span><span class="p">(</span>
  <span class="n">AEGP_LayerRenderOptionsH</span>  <span class="n">optionsH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetTime</span></code></td>
<td><p class="first">Sets the render time of an <code class="docutils literal notranslate"><span class="pre">AEGP_LayerRenderOptionsH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetTime</span><span class="p">(</span>
  <span class="n">AEGP_LayerRenderOptionsH</span>  <span class="n">optionsH</span><span class="p">,</span>
  <span class="n">A_Time</span>                    <span class="n">time</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetTime</span></code></td>
<td><p class="first">Retrieves the render time of the given <code class="docutils literal notranslate"><span class="pre">AEGP_LayerRenderOptionsH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetTime</span><span class="p">(</span>
  <span class="n">AEGP_LayerRenderOptionsH</span>  <span class="n">optionsH</span><span class="p">,</span>
  <span class="n">A_Time</span>                    <span class="o">*</span><span class="n">timeP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetTimeStep</span></code></td>
<td><p class="first">Specifies the time step (duration of a frame) for the referenced <code class="docutils literal notranslate"><span class="pre">AEGP_LayerRenderOptionsH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetTimeStep</span><span class="p">(</span>
  <span class="n">AEGP_LayerRenderOptionsH</span>  <span class="n">optionsH</span><span class="p">,</span>
  <span class="n">A_Time</span>                    <span class="n">time_step</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetTimeStep</span></code></td>
<td><p class="first">Retrieves the time step (duration of a frame) for the given <code class="docutils literal notranslate"><span class="pre">AEGP_LayerRenderOptionsH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetTimeStep</span><span class="p">(</span>
  <span class="n">AEGP_LayerRenderOptionsH</span>  <span class="n">optionsH</span><span class="p">,</span>
  <span class="n">A_Time</span>                    <span class="o">*</span><span class="n">timePT</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetWorldType</span></code></td>
<td><p class="first">Specifies the AEGP_WorldType of the output of a given <code class="docutils literal notranslate"><span class="pre">AEGP_LayerRenderOptionsH</span></code>.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetWorldType</span><span class="p">(</span>
  <span class="n">AEGP_LayerRenderOptionsH</span>  <span class="n">optionsH</span><span class="p">,</span>
  <span class="n">AEGP_WorldType</span>            <span class="n">type</span><span class="p">);</span>
</pre></div>
</div>
<p class="last"><code class="docutils literal notranslate"><span class="pre">AEGP_WorldType</span></code> will be either <code class="docutils literal notranslate"><span class="pre">AEGP_WorldType_8</span></code> or <code class="docutils literal notranslate"><span class="pre">AEGP_WorldType_16</span></code></p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetWorldType</span></code></td>
<td><p class="first">Retrieves the AEGP_WorldType of the given <code class="docutils literal notranslate"><span class="pre">AEGP_LayerRenderOptionsH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetWorldType</span><span class="p">(</span>
  <span class="n">AEGP_LayerRenderOptionsH</span>  <span class="n">optionsH</span><span class="p">,</span>
  <span class="n">AEGP_WorldType</span>            <span class="o">*</span><span class="n">typeP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetDownsampleFactor</span></code></td>
<td><p class="first">Specifies the downsample factor (with independent horizontal and vertical settings) for the given <code class="docutils literal notranslate"><span class="pre">AEGP_LayerRenderOptionsH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetDownsampleFactor</span><span class="p">(</span>
  <span class="n">AEGP_LayerRenderOptionsH</span>  <span class="n">optionsH</span><span class="p">,</span>
  <span class="n">A_short</span>                   <span class="n">x</span><span class="p">,</span>
  <span class="n">A_short</span>                   <span class="n">y</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetDownsampleFactor</span></code></td>
<td><p class="first">Retrieves the downsample factor for the given <code class="docutils literal notranslate"><span class="pre">AEGP_LayerRenderOptionsH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetDownsampleFactor</span><span class="p">(</span>
  <span class="n">AEGP_LayerRenderOptionsH</span>  <span class="n">optionsH</span><span class="p">,</span>
  <span class="n">A_short</span>                   <span class="o">*</span><span class="n">xP</span><span class="p">,</span>
  <span class="n">A_short</span>                   <span class="o">*</span><span class="n">yP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetMatteMode</span></code></td>
<td><p class="first">Specifies the AEGP_MatteMode for the given <code class="docutils literal notranslate"><span class="pre">AEGP_LayerRenderOptionsH</span></code>.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetMatteMode</span><span class="p">(</span>
  <span class="n">AEGP_LayerRenderOptionsH</span>  <span class="n">optionsH</span><span class="p">,</span>
  <span class="n">AEGP_MatteMode</span>            <span class="n">mode</span><span class="p">);</span>
</pre></div>
</div>
<p>AEGP_MatteMode will be one of the following:</p>
<blockquote class="last">
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">AEGP_MatteMode_STRAIGHT</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_MatteMode_PREMUL_BLACK</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_MatteMode_PREMUL_BG_COLOR</span></code></li>
</ul>
</div></blockquote>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetMatteMode</span></code></td>
<td><p class="first">Retrieves the AEGP_MatteMode for the given <code class="docutils literal notranslate"><span class="pre">AEGP_LayerRenderOptionsH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetMatteMode</span><span class="p">(</span>
  <span class="n">AEGP_LayerRenderOptionsH</span>  <span class="n">optionsH</span><span class="p">,</span>
  <span class="n">AEGP_MatteMode</span>            <span class="o">*</span><span class="n">modeP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="aegp-rendersuite4">
<span id="aegps-aegp-suites-aegp-rendersuite"></span><h4>AEGP_RenderSuite4<a class="headerlink" href="#aegp-rendersuite4" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="19%" />
<col width="81%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Function</strong></th>
<th class="head"><strong>Purpose</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_RenderAndCheckoutFrame</span></code></td>
<td><p class="first">Retrieves an <code class="docutils literal notranslate"><span class="pre">AEGP_FrameReceiptH</span></code> (not the actual pixels) for the frame requested.
Check in this receipt using <code class="docutils literal notranslate"><span class="pre">AEGP_CheckinFrame</span></code> to release memory.</p>
<p>Create the <code class="docutils literal notranslate"><span class="pre">AEGP_RenderOptionsH</span></code> using the <a class="reference internal" href="#aegps-aegp-suites-render-options-suite"><span class="std std-ref">AEGP_RenderOptionsSuite4</span></a>.</p>
<p>Optionally, the AEGP can pass a function to be called by After Effects if the user cancels the current render,
as well as a refcon (constant reference to opaque data) for use during that function.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_RenderAndCheckoutFrame</span><span class="p">(</span>
  <span class="n">AEGP_RenderOptionsH</span>             <span class="n">optionsH</span><span class="p">,</span>
  <span class="n">AEGP_RenderSuiteCheckForCancel</span>  <span class="n">cancel_functionP0</span><span class="p">,</span>
  <span class="n">AEGP_CancelRefcon</span>               <span class="n">cancel_function_refconP0</span><span class="p">,</span>
  <span class="n">AEGP_FrameReceiptH</span>              <span class="o">*</span><span class="n">receiptPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_RenderAndCheckoutLayerFrame</span></code></td>
<td><p class="first">New in CC 2014. This allows frame checkout of a layer with effects applied at non-render time.
This is useful for an operation that requires the frame, for example, when a button is clicked and it is acceptable to wait for a moment while it is rendering.</p>
<p>Note: Since it is not asynchronous, it will not solve the general problem where custom UI needs to draw based on the frame.</p>
<p>Retrieves an <code class="docutils literal notranslate"><span class="pre">AEGP_FrameReceiptH</span></code> (not the actual pixels) for the layer frame requested.
Check in this receipt using <code class="docutils literal notranslate"><span class="pre">AEGP_CheckinFrame</span></code> to release memory.</p>
<p>Create the <code class="docutils literal notranslate"><span class="pre">AEGP_LayerRenderOptionsH</span></code> using <code class="docutils literal notranslate"><span class="pre">AEGP_NewFromUpstreamOfEffect()</span></code>, in <a class="reference internal" href="#aegps-aegp-suites-aegp-layerrenderoptionssuite"><span class="std std-ref">AEGP_LayerRenderOptionsSuite1</span></a>.</p>
<p>You can actually use <code class="docutils literal notranslate"><span class="pre">AEGP_NewFromLayer()</span></code> to get other layer param’s layers with their effects applied.
However, be careful. If you do it in your effect A, and there’s an effect B on the other layer that does the same thing during rendering, you’d create an infinite loop.
If you’re not doing it for render purposes then it could be okay.</p>
<p>Optionally, the AEGP can pass a function to be called by After Effects if the user cancels the current render,
as well as a refcon (constant reference to opaque data) for use during that function.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_RenderAndCheckoutLayerFrame</span><span class="p">(</span>
  <span class="n">AEGP_LayerRenderOptionsH</span>        <span class="n">optionsH</span><span class="p">,</span>
  <span class="n">A_Boolean</span>                       <span class="n">render_plain_layer_frameB</span><span class="p">,</span>
  <span class="n">AEGP_RenderSuiteCheckForCancel</span>  <span class="n">cancel_functionP0</span><span class="p">,</span>
  <span class="n">AEGP_CancelRefcon</span>               <span class="n">cancel_function_refconP0</span><span class="p">,</span>
  <span class="n">AEGP_FrameReceiptH</span>              <span class="o">*</span><span class="n">receiptPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_CheckinFrame</span></code></td>
<td><p class="first">Call this function as soon as your AEGP is done accessing the frame.
After Effects makes caching decisions based on which frames are checked out, so don’t hog them!</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_CheckinFrame</span><span class="p">(</span>
  <span class="n">AEGP_FrameReceiptH</span>  <span class="n">receiptH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetReceiptWorld</span></code></td>
<td><p class="first">Retrieves the pixels (<code class="docutils literal notranslate"><span class="pre">AEGP_WorldH</span></code>) associated with the referenced <code class="docutils literal notranslate"><span class="pre">AEGP_FrameReceiptH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetReceiptWorld</span><span class="p">(</span>
  <span class="n">AEGP_FrameReceiptH</span>  <span class="n">receiptH</span><span class="p">,</span>
  <span class="n">AEGP_WorldH</span>         <span class="o">*</span><span class="n">worldPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetRenderedRegion</span></code></td>
<td><p class="first">Retrieves an <code class="docutils literal notranslate"><span class="pre">A_LRect</span></code> containing the region of the <code class="docutils literal notranslate"><span class="pre">AEGP_FrameReceiptH's</span></code> <code class="docutils literal notranslate"><span class="pre">AEGP_WorldH</span></code> that has already been rendered.
Remember that it’s possible for only those portions of an image that have been changed to be rendered,
so it’s important to be able to check whether or not that includes the portion you need.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetRenderedRegion</span><span class="p">(</span>
  <span class="n">AEGP_FrameReceiptH</span>  <span class="n">receiptH</span><span class="p">,</span>
  <span class="n">A_LRect</span>             <span class="o">*</span><span class="n">regionP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_IsRenderedFrameSufficient</span></code></td>
<td><p class="first">Given two sets of <code class="docutils literal notranslate"><span class="pre">AEGP_RenderOptionsH</span></code>, After Effects will return <code class="docutils literal notranslate"><span class="pre">TRUE</span></code> if the already-rendered pixels are still valid for the proposed <code class="docutils literal notranslate"><span class="pre">AEGP_RenderOptionsH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_IsRenderedFrameSufficient</span><span class="p">(</span>
  <span class="n">AEGP_RenderOptionsH</span>  <span class="n">rendered_optionsH</span><span class="p">,</span>
  <span class="n">AEGP_RenderOptionsH</span>  <span class="n">proposed_optionsH</span><span class="p">,</span>
  <span class="n">A_Boolean</span>            <span class="o">*</span><span class="n">is_sufficientPB</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_RenderNewItemSoundData</span></code></td>
<td><p class="first">Obtains an <code class="docutils literal notranslate"><span class="pre">AEGP_ItemH's</span></code> audio at the given time, of the given duration, in the given format.
The plug-in must dispose of the returned <code class="docutils literal notranslate"><span class="pre">AEGP_SoundDataH</span></code> (which may be NULL if no audio is available).</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_RenderNewItemSoundData</span><span class="p">(</span>
  <span class="n">AEGP_ItemH</span>                  <span class="n">itemH</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_Time</span>                <span class="o">*</span><span class="n">start_timePT</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_Time</span>                <span class="o">*</span><span class="n">durationPT</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">AEGP_SoundDataFormat</span>  <span class="o">*</span><span class="n">formatP</span><span class="p">,</span>
  <span class="n">AEGP_SoundDataH</span>             <span class="o">*</span><span class="n">new_dataPH</span><span class="p">);</span>
</pre></div>
</div>
<p class="last">NOTE: This function, if called as part of <code class="docutils literal notranslate"><span class="pre">AEGP_ItemSuite2</span></code>, provides a render interruptible using mouse clicks,
unlike the version published here in <code class="docutils literal notranslate"><span class="pre">AEGP_RenderSuite</span></code>.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetCurrentTimestamp</span></code></td>
<td><p class="first">Retrieves the current <code class="docutils literal notranslate"><span class="pre">AEGP_TimeStamp</span></code> of the project.
The <code class="docutils literal notranslate"><span class="pre">AEGP_TimeStamp</span></code> is updated whenever an item is touched in a way that affects rendering.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetCurrentTimestamp</span><span class="p">(</span>
  <span class="n">AEGP_TimeStamp</span>  <span class="o">*</span><span class="n">time_stampP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_HasItemChangedSinceTimestamp</span></code></td>
<td><p class="first">Returns whether the video of an AEGP_ItemH has changed since the given <code class="docutils literal notranslate"><span class="pre">AEGP_TimeStamp</span></code>.</p>
<p>Note: this does not track changes in audio.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_HasItemChangedSinceTimestamp</span><span class="p">(</span>
  <span class="n">AEGP_ItemH</span>            <span class="n">itemH</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_Time</span>          <span class="o">*</span><span class="n">start_timeP</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_Time</span>          <span class="o">*</span><span class="n">durationP</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">AEGP_TimeStamp</span>  <span class="o">*</span><span class="n">time_stampP</span><span class="p">,</span>
  <span class="n">A_Boolean</span>             <span class="o">*</span><span class="n">changedPB</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_IsItemWorthwhileToRender</span></code></td>
<td><p class="first">Returns whether this frame would be worth rendering externally and checking in to the cache.
A speculative renderer should check this twice: before sending the frame out to render and when it is complete,
before calling <code class="docutils literal notranslate"><span class="pre">AEGP_NewPlatformWorld()</span></code> and checking in.</p>
<p>This function is to be used with <code class="docutils literal notranslate"><span class="pre">AEGP_HasItemChangedSinceTimestamp()</span></code>, not alone.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_IsItemWorthwhileToRender</span><span class="p">(</span>
  <span class="n">AEGP_RenderOptionsH</span>   <span class="n">roH</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">AEGP_TimeStamp</span>  <span class="o">*</span><span class="n">time_stampP</span><span class="p">,</span>
  <span class="n">A_Boolean</span>             <span class="o">*</span><span class="n">worthwhilePB</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_CheckinRenderedFrame</span></code></td>
<td><p class="first">Provide a rendered frame (<code class="docutils literal notranslate"><span class="pre">AEGP_PlatformWorldH</span></code>) to After Effects, which adopts it.
<code class="docutils literal notranslate"><span class="pre">ticksL</span></code> is the approximate time required to render the frame.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_CheckinRenderedFrame</span><span class="p">(</span>
  <span class="n">AEGP_RenderOptionsH</span>    <span class="n">roH</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">AEGP_TimeStamp</span><span class="o">*</span>  <span class="n">time_stampP</span><span class="p">,</span>
  <span class="n">A_u_long</span>               <span class="n">ticksL</span><span class="p">,</span>
  <span class="n">AEGP_PlatformWorldH</span>    <span class="n">imageH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetReceiptGuid</span></code></td>
<td><p class="first">New in CS6. Retrieve a GUID for a rendered frame. The memory handle passed back must be disposed.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetReceiptGuid</span><span class="p">(</span>
  <span class="n">AEGP_FrameReceiptH</span>  <span class="n">receiptH</span><span class="p">,</span>
  <span class="n">AEGP_MemHandle</span>      <span class="o">*</span><span class="n">guidMH</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
</div>
</div>
<div class="section" id="the-aegp-world-as-we-know-it">
<span id="aegps-aegp-suites-world-suite"></span><h3>The AEGP_World As We Know It<a class="headerlink" href="#the-aegp-world-as-we-know-it" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">AEGP_Worlds</span></code> are the common format used throughout the AEGP APIs to describe frames of pixels.</p>
<div class="section" id="aegp-worldsuite3">
<span id="aegps-aegp-suites-aegp-worldsuite"></span><h4>AEGP_WorldSuite3<a class="headerlink" href="#aegp-worldsuite3" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="23%" />
<col width="77%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Function</strong></th>
<th class="head"><strong>Purpose</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_New</span></code></td>
<td><p class="first">Returns an allocated, initialized <code class="docutils literal notranslate"><span class="pre">AEGP_WorldH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_New</span><span class="p">(</span>
  <span class="n">AEGP_PluginID</span>   <span class="n">plugin_id</span><span class="p">,</span>
  <span class="n">AEGP_WorldType</span>  <span class="n">type</span><span class="p">,</span>
  <span class="n">A_long</span>          <span class="n">widthL</span><span class="p">,</span>
  <span class="n">A_long</span>          <span class="n">heightL</span><span class="p">,</span>
  <span class="n">AEGP_WorldH</span>     <span class="o">*</span><span class="n">worldPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_Dispose</span></code></td>
<td><p class="first">Disposes of an <code class="docutils literal notranslate"><span class="pre">AEGP_WorldH</span></code>. Use this on every world you allocate.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_Dispose</span><span class="p">(</span>
  <span class="n">AEGP_WorldH</span>  <span class="n">worldH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetType</span></code></td>
<td><p class="first">Returns the type of a given <code class="docutils literal notranslate"><span class="pre">AEGP_WorldH</span></code>.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetType</span><span class="p">(</span>
  <span class="n">AEGP_WorldH</span> <span class="n">worldH</span><span class="p">,</span>
  <span class="n">AEGP_WorldType</span> <span class="o">**</span><span class="n">typeP</span><span class="p">);</span>
</pre></div>
</div>
<p>AEGP_WorldType will be one of the following:</p>
<blockquote class="last">
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">AEGP_WorldType_8</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_WorldType_16</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_WorldType_32</span></code></li>
</ul>
</div></blockquote>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetSize</span></code></td>
<td><p class="first">Returns the width and height of the given <code class="docutils literal notranslate"><span class="pre">AEGP_WorldH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetSize</span><span class="p">(</span>
  <span class="n">AEGP_WorldH</span>  <span class="n">worldH</span><span class="p">,</span>
  <span class="n">A_long</span>       <span class="o">*</span><span class="n">widthPL</span><span class="p">,</span>
  <span class="n">A_long</span>       <span class="o">*</span><span class="n">heightPL</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetRowBytes</span></code></td>
<td><p class="first">Returns the rowbytes for the given <code class="docutils literal notranslate"><span class="pre">AEGP_WorldH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetRowBytes</span><span class="p">(</span>
  <span class="n">AEGP_WorldH</span>  <span class="n">worldH</span><span class="p">,</span>
  <span class="n">A_u_long</span>     <span class="o">*</span><span class="n">row_bytesPL</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetBaseAddr8</span></code></td>
<td><p class="first">Returns the base address of the <code class="docutils literal notranslate"><span class="pre">AEGP_WorldH</span></code> for use in pixel iteration functions.
Will return an error if used on a non-8bpc world.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetBaseAddr8</span><span class="p">(</span>
  <span class="n">AEGP_WorldH</span>  <span class="n">worldH</span><span class="p">,</span>
  <span class="n">PF_Pixel8</span>    <span class="o">**</span><span class="n">base_addrP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetBaseAddr16</span></code></td>
<td><p class="first">Returns the base address of the <code class="docutils literal notranslate"><span class="pre">AEGP_WorldH</span></code> for use in pixel iteration functions.
Will return an error if used on a non-16bpc world.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetBaseAddr16</span><span class="p">(</span>
  <span class="n">AEGP_WorldH</span>  <span class="n">worldH</span><span class="p">,</span>
  <span class="n">PF_Pixel16</span>   <span class="o">**</span><span class="n">base_addrP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetBaseAddr32</span></code></td>
<td><p class="first">Returns the base address of the <code class="docutils literal notranslate"><span class="pre">AEGP_WorldH</span></code> for use in pixel iteration functions.
Will return an error if used on a non-32bpc world.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetBaseAddr32</span><span class="p">(</span>
  <span class="n">AEGP_WorldH</span>    <span class="n">worldH</span><span class="p">,</span>
  <span class="n">PF_PixelFloat</span>  <span class="o">**</span><span class="n">base_addrP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_FillOutPFEffectWorld</span></code></td>
<td><p class="first">Populates and returns a PF_EffectWorld representing the given <code class="docutils literal notranslate"><span class="pre">AEGP_WorldH</span></code>, for use with numerous pixel processing callbacks.</p>
<p>NOTE: This does not give your plug-in ownership of the world referenced; destroy the source <code class="docutils literal notranslate"><span class="pre">AEGP_WorldH</span></code> only if you allocated it.
It just fills out the provided <code class="docutils literal notranslate"><span class="pre">PF_EffectWorld</span></code> to point to the same pixel buffer.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_FillOutPFEffectWorld</span><span class="p">(</span>
  <span class="n">AEGP_WorldH</span>     <span class="n">worldH</span><span class="p">,</span>
  <span class="n">PF_EffectWorld</span>  <span class="o">*</span><span class="n">pf_worldP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_FastBlur</span></code></td>
<td><p class="first">Performs a fast blur on a given <code class="docutils literal notranslate"><span class="pre">AEGP_WorldH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_FastBlur</span><span class="p">(</span>
  <span class="n">A_FpLong</span>      <span class="n">radiusF</span><span class="p">,</span>
  <span class="n">PF_ModeFlags</span>  <span class="n">mode</span><span class="p">,</span>
  <span class="n">PF_Quality</span>    <span class="n">quality</span><span class="p">,</span>
  <span class="n">AEGP_WorldH</span>   <span class="n">worldH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_NewPlatformWorld</span></code></td>
<td><p class="first">Creates a new <code class="docutils literal notranslate"><span class="pre">AEGP_PlatformWorldH</span></code> (a pixel world native to the execution platform).</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_NewPlatformWorld</span><span class="p">(</span>
  <span class="n">AEGP_PluginID</span>        <span class="n">plugin_id</span><span class="p">,</span>
  <span class="n">AEGP_WorldType</span>       <span class="n">type</span><span class="p">,</span>
  <span class="n">A_long</span>               <span class="n">widthL</span><span class="p">,</span>
  <span class="n">A_long</span>               <span class="n">heightL</span><span class="p">,</span>
  <span class="n">AEGP_PlatformWorldH</span>  <span class="o">*</span><span class="n">worldPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_DisposePlatformWorld</span></code></td>
<td><p class="first">Disposes of an <code class="docutils literal notranslate"><span class="pre">AEGP_PlatformWorldH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_DisposePlatformWorld</span><span class="p">(</span>
  <span class="n">AEGP_PlatformWorldH</span>  <span class="n">worldH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_NewReferenceFromPlatformWorld</span></code></td>
<td><p class="first">Retrieves an AEGP_WorldH referring to the given <code class="docutils literal notranslate"><span class="pre">AEGP_PlatformWorldH</span></code>.</p>
<p>NOTE: This doesn’t allocate a new world, it simply provides a reference to an existing one.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_NewReferenceFromPlatformWorld</span><span class="p">(</span>
  <span class="n">AEGP_PluginID</span>        <span class="n">plugin_id</span><span class="p">,</span>
  <span class="n">AEGP_PlatformWorldH</span>  <span class="n">plat_worldH</span><span class="p">,</span>
  <span class="n">AEGP_WorldH</span>          <span class="o">*</span><span class="n">worldPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
</div>
</div>
<div class="section" id="track-mattes-and-transform-functions">
<span id="aegps-aegp-suites-composite-suite"></span><h3>Track Mattes and Transform Functions<a class="headerlink" href="#track-mattes-and-transform-functions" title="Permalink to this headline">¶</a></h3>
<p>Use the <code class="docutils literal notranslate"><span class="pre">AEGP_CompositeSuite</span></code> to copy pixel worlds, operate on track mattes, and apply transfer functions.</p>
<div class="section" id="aegp-compositesuite2">
<h4>AEGP_CompositeSuite2<a class="headerlink" href="#aegp-compositesuite2" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="18%" />
<col width="82%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Function</strong></th>
<th class="head"><strong>Purpose</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_ClearAlphaExceptRect</span></code></td>
<td><p class="first">For the given <code class="docutils literal notranslate"><span class="pre">PF_EffectWorld</span></code>, sets the alpha to fully transparent except for the specified rectangle.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_ClearAlphaExceptRect</span><span class="p">(</span>
  <span class="n">A_Rect</span>          <span class="o">*</span><span class="n">clipped_dst_rectPR</span><span class="p">,</span>
  <span class="n">PF_EffectWorld</span>  <span class="o">*</span><span class="n">dstP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_PrepTrackMatte</span></code></td>
<td><p class="first">Mattes the pixels in a <code class="docutils literal notranslate"><span class="pre">PF_EffectWorld</span></code> with the <code class="docutils literal notranslate"><span class="pre">PF_Pixel</span></code> described in src_masks, putting the output into an array of pixels dst_mask.</p>
<p>NOTE: Unlike most of the other pixel mangling functions provided by After Effects, this one doesn’t take <code class="docutils literal notranslate"><span class="pre">PF_EffectWorld</span></code> arguments;
rather, you can simply pass the data pointer from within the <code class="docutils literal notranslate"><span class="pre">PF_EffectWorld</span></code>.
This can be confusing, but as a bonus, the function pads output appropriately so that <code class="docutils literal notranslate"><span class="pre">num_pix</span></code> pixels are always output.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_PrepTrackMatte</span><span class="p">(</span>
  <span class="n">A_long</span>          <span class="n">num_pix</span><span class="p">,</span>
  <span class="n">A_Boolean</span>       <span class="n">deepB</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">PF_Pixel</span>  <span class="o">*</span><span class="n">src_mask</span><span class="p">,</span>
  <span class="n">PF_MaskFlags</span>    <span class="n">mask_flags</span><span class="p">,</span>
  <span class="n">PF_Pixel</span>        <span class="o">*</span><span class="n">dst_mask</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_TransferRect</span></code></td>
<td><p class="first">Blends two <code class="docutils literal notranslate"><span class="pre">PF_EffectWorlds</span></code> using a transfer mode, with an optional mask.
Pass NULL for the <code class="docutils literal notranslate"><span class="pre">blend_tablesP0</span></code> parameter to perform blending in the current working color space.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_TransferRect</span><span class="p">(</span>
  <span class="n">PF_Quality</span>               <span class="n">quality</span><span class="p">,</span>
  <span class="n">PF_ModeFlags</span>             <span class="n">m_flags</span><span class="p">,</span>
  <span class="n">PF_Field</span>                 <span class="n">field</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_Rect</span>             <span class="o">*</span><span class="n">src_rec</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">PF_EffectWorld</span>     <span class="o">*</span><span class="n">src_world</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">PF_CompositeMode</span>   <span class="o">*</span><span class="n">comp_mode</span><span class="p">,</span>
  <span class="n">PF_EffectBlendingTables</span>  <span class="n">blend_tablesP0</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">PF_MaskWorld</span>       <span class="o">*</span><span class="n">mask_world0</span><span class="p">,</span>
  <span class="n">A_long</span>                   <span class="n">dest_x</span><span class="p">,</span>
  <span class="n">A_long</span>                   <span class="n">dest_y</span><span class="p">,</span>
  <span class="n">PF_EffectWorld</span>           <span class="o">*</span><span class="n">dst_world</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_CopyBits_LQ</span></code></td>
<td><p class="first">Copies a rectangle of pixels (pass a <code class="docutils literal notranslate"><span class="pre">NULL</span></code> rectangle to get all pixels) from one <code class="docutils literal notranslate"><span class="pre">PF_EffectWorld</span></code> to another, at low quality.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_CopyBits_LQ</span><span class="p">(</span>
  <span class="n">PF_EffectWorld</span>  <span class="o">*</span><span class="n">src_worldP</span><span class="p">,</span>
  <span class="n">A_Rect</span>          <span class="o">*</span><span class="n">src_r</span><span class="p">,</span>
  <span class="n">A_Rect</span>          <span class="o">*</span><span class="n">dst_r</span><span class="p">,</span>
  <span class="n">PF_EffectWorld</span>  <span class="o">*</span><span class="n">dst_worldP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_CopyBits_HQ_Straight</span></code></td>
<td><p class="first">Copies a rectangle of pixels (pass a <code class="docutils literal notranslate"><span class="pre">NULL</span></code> rectangle to get all pixels) from one <code class="docutils literal notranslate"><span class="pre">PF_EffectWorld</span></code> to another, at high quality,
with a straight alpha channel.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_CopyBits_HQ_Straight</span><span class="p">(</span>
  <span class="n">PF_EffectWorld</span>  <span class="o">*</span><span class="n">src</span><span class="p">,</span>
  <span class="n">A_Rect</span>          <span class="o">*</span><span class="n">src_r</span><span class="p">,</span>
  <span class="n">A_Rect</span>          <span class="o">*</span><span class="n">dst_r</span><span class="p">,</span>
  <span class="n">PF_EffectWorld</span>  <span class="o">*</span><span class="n">dst</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_CopyBits_HQ_Premul</span></code></td>
<td><p class="first">Copies a rectangle of pixels (pass a <code class="docutils literal notranslate"><span class="pre">NULL</span></code> rectangle to get all pixels) from one <code class="docutils literal notranslate"><span class="pre">PF_EffectWorld</span></code> to another, at high quality,
premultiplying the alpha channel.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_CopyBits_HQ_Premul</span><span class="p">(</span>
  <span class="n">PF_EffectWorld</span>  <span class="o">*</span><span class="n">src</span><span class="p">,</span>
  <span class="n">A_Rect</span>          <span class="o">*</span><span class="n">src_r</span><span class="p">,</span>
  <span class="n">A_Rect</span>          <span class="o">*</span><span class="n">dst_r</span><span class="p">,</span>
  <span class="n">PF_EffectWorld</span>  <span class="o">*</span><span class="n">dst</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
</div>
</div>
<div class="section" id="work-with-audio">
<span id="aegps-aegp-suites-sound-data-suite"></span><h3>Work With Audio<a class="headerlink" href="#work-with-audio" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">AEGP_SoundDataSuite</span></code> allows AEGPs to obtain and manipulate the audio associated with compositions and footage items.</p>
<p>Audio-only items may be added to the render queue using <code class="docutils literal notranslate"><span class="pre">AEGP_RenderNewItemSoundData()</span></code>.</p>
<div class="section" id="aegp-sounddatesuite1">
<h4>AEGP_SoundDateSuite1<a class="headerlink" href="#aegp-sounddatesuite1" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="32%" />
<col width="68%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Function</strong></th>
<th class="head"><strong>Purpose</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_NewSoundData</span></code></td>
<td><p class="first">Creates a new <code class="docutils literal notranslate"><span class="pre">AEGP_SoundDataH</span></code>, of which the plug-in must dispose.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_NewSoundData</span><span class="p">(</span>
  <span class="k">const</span> <span class="n">AEGP_SoundDataFormat</span>  <span class="o">*</span><span class="n">formatP</span><span class="p">,</span>
  <span class="n">AEGP_SoundDataH</span>             <span class="o">*</span><span class="n">new_dataPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_DisposeSoundData</span></code></td>
<td><p class="first">Frees an <code class="docutils literal notranslate"><span class="pre">AEGP_SoundDataH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_DisposeSoundData</span><span class="p">(</span>
  <span class="n">AEGP_SoundDataH</span>  <span class="n">sound_dataH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetSoundDataFormat</span></code></td>
<td><p class="first">Obtains information about the format of a given <code class="docutils literal notranslate"><span class="pre">AEGP_SoundDataH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetSoundDataFormat</span><span class="p">(</span>
  <span class="n">AEGP_SoundDataH</span>       <span class="n">soundH</span><span class="p">,</span>
  <span class="n">AEGP_SoundDataFormat</span>  <span class="o">*</span><span class="n">formatP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_LockSoundDataSamples</span></code></td>
<td><p class="first">Locks the <code class="docutils literal notranslate"><span class="pre">AEGP_SoundDataH</span></code> in memory.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_LockSoundDataSamples</span><span class="p">(</span>
  <span class="n">AEGP_SoundDataH</span>  <span class="n">soundH</span><span class="p">,</span>
  <span class="kt">void</span>             <span class="o">**</span><span class="n">samples</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_UnlockSoundDataSamples</span></code></td>
<td><p class="first">Unlocks an <code class="docutils literal notranslate"><span class="pre">AEGP_SoundDataH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_UnlockSoundDataSamples</span><span class="p">(</span>
  <span class="n">AEGP_SoundDataH</span>  <span class="n">soundH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetNumSamples</span></code></td>
<td><p class="first">Obtains the number of samples in the given <code class="docutils literal notranslate"><span class="pre">AEGP_SoundDataH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetNumSamples</span><span class="p">(</span>
  <span class="n">AEGP_SoundDataH</span>  <span class="n">soundH</span><span class="p">,</span>
  <span class="n">A_long</span>           <span class="o">*</span><span class="n">numsamplesPL</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<hr class="docutils" />
<div class="section" id="audio-settings">
<h3>Audio Settings<a class="headerlink" href="#audio-settings" title="Permalink to this headline">¶</a></h3>
<p>Audio render settings are represented using the <code class="docutils literal notranslate"><span class="pre">AEGP_SoundDataFormat</span></code>.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span> <span class="n">AEGP_SoundDataFormat</span> <span class="p">{</span>
  <span class="n">A_FpLong</span>            <span class="n">sample_rateF</span><span class="p">;</span>
  <span class="n">AEGP_SoundEncoding</span>  <span class="n">encoding</span><span class="p">;</span>
  <span class="n">A_long</span>              <span class="n">bytes_per_sampleL</span><span class="p">;</span>
  <span class="n">A_long</span>              <span class="n">num_channelsL</span><span class="p">;</span> <span class="c1">// 1 for mono, 2 for stereo</span>
<span class="p">}</span> <span class="n">AEGP_SoundDataFormat</span><span class="p">;</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">bytes_per_sampleL</span></code> is always either <code class="docutils literal notranslate"><span class="pre">1</span></code>, <code class="docutils literal notranslate"><span class="pre">2</span></code>, or <code class="docutils literal notranslate"><span class="pre">4</span></code>, and is ignored if float encoding is specified.</p>
<p><code class="docutils literal notranslate"><span class="pre">AEGP_SoundEncoding</span></code> is one of the following:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">AEGP_SoundEncoding_UNSIGNED_PCM</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_SoundEncoding_SIGNED_PCM</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_SoundEncoding_FLOAT</span></code></li>
</ul>
</div></blockquote>
<hr class="docutils" />
</div>
<div class="section" id="render-queue-suite">
<span id="aegps-aegp-suites-render-queue-suite"></span><h3>Render Queue Suite<a class="headerlink" href="#render-queue-suite" title="Permalink to this headline">¶</a></h3>
<p>This suite allows AEGPs to add items the to render queue (using default options), and control the basic state of the render queue.</p>
<div class="section" id="aegp-renderqueuesuite1">
<span id="aegps-aegp-suites-aegp-renderqueuesuite"></span><h4>AEGP_RenderQueueSuite1<a class="headerlink" href="#aegp-renderqueuesuite1" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="67%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Function</strong></th>
<th class="head"><strong>Purpose</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_AddCompToRenderQueue</span></code></td>
<td><p class="first">Adds a composition to the render queue, using default options.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_AddCompToRenderQueue</span><span class="p">(</span>
  <span class="n">AEGP_CompH</span>     <span class="n">compH</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_char</span><span class="o">*</span>  <span class="n">pathZ</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetRenderQueueState</span></code></td>
<td><p class="first">Sets the render queue to one of three valid states.
It is not possible to go from stopped to paused.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetRenderQueueState</span><span class="p">(</span>
  <span class="n">AEGP_RenderQueueState</span>  <span class="n">state</span><span class="p">);</span>
</pre></div>
</div>
<ul class="last simple">
<li><code class="docutils literal notranslate"><span class="pre">AEGP_RenderQueueState_STOPPED</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_RenderQueueState_PAUSED</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_RenderQueueState_RENDERING</span></code></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetRenderQueueState</span></code></td>
<td><p class="first">Obtains the current render queue state.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetRenderQueueState</span><span class="p">(</span>
  <span class="n">AEGP_RenderQueueState</span>  <span class="o">*</span><span class="n">stateP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
</div>
</div>
<div class="section" id="render-queue-item-suite">
<span id="aegps-aegp-suites-render-queue-item-suite"></span><h3>Render Queue Item Suite<a class="headerlink" href="#render-queue-item-suite" title="Permalink to this headline">¶</a></h3>
<p>Manipulate all aspects of render queue items using this suite.</p>
<div class="section" id="aegp-rqitemsuite4">
<h4>AEGP_RQItemSuite4<a class="headerlink" href="#aegp-rqitemsuite4" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="78%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Function</strong></th>
<th class="head"><strong>Purpose</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetNumRQItems</span></code></td>
<td><p class="first">Returns the number of items currently in the render queue.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetNumRQItems</span><span class="p">(</span>
  <span class="n">A_long</span>  <span class="o">*</span><span class="n">num_itemsPL</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetRQItemByIndex</span></code></td>
<td><p class="first">Returns an <code class="docutils literal notranslate"><span class="pre">AEGP_RQItemRefH</span></code> referencing the index’d item.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetRQItemByIndex</span><span class="p">(</span>
  <span class="n">A_long</span>           <span class="n">rq_item_index</span><span class="p">,</span>
  <span class="n">AEGP_RQItemRefH</span>  <span class="o">*</span><span class="n">rq_item_refPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetNextRQItem</span></code></td>
<td><p class="first">Returns the next <code class="docutils literal notranslate"><span class="pre">AEGP_RQItemRefH</span></code>, for iteration purposes.
To get the first <code class="docutils literal notranslate"><span class="pre">AEGP_RQItemRefH</span></code>, pass <code class="docutils literal notranslate"><span class="pre">RQ_ITEM_INDEX_NONE</span></code> for the <code class="docutils literal notranslate"><span class="pre">current_rq_itemH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetNextRQItem</span><span class="p">(</span>
  <span class="n">AEGP_RQItemRefH</span>  <span class="n">current_rq_itemH</span><span class="p">,</span>
  <span class="n">AEGP_RQItemRefH</span>  <span class="o">*</span><span class="n">next_rq_itemPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetNumOutputModulesForRQItem</span></code></td>
<td><p class="first">Returns the number of output modules applied to the given <code class="docutils literal notranslate"><span class="pre">AEGP_RQItemRefH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetNumOutputModulesForRQItem</span><span class="p">(</span>
  <span class="n">AEGP_RQItemRefH</span>  <span class="n">rq_itemH</span><span class="p">,</span>
  <span class="n">A_long</span>           <span class="o">*</span><span class="n">num_outmodsPL</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetRenderState</span></code></td>
<td><p class="first">Returns TRUE if the <code class="docutils literal notranslate"><span class="pre">AEGP_RQItemRefH</span></code> is set to render (once the user clicks the Render button).</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetRenderState</span><span class="p">(</span>
  <span class="n">AEGP_RQItemRefH</span>  <span class="n">rq_itemH</span><span class="p">,</span>
  <span class="n">A_Boolean</span>        <span class="o">*</span><span class="n">will_renderPB</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetRenderState</span></code></td>
<td><p class="first">Controls whether or not the <code class="docutils literal notranslate"><span class="pre">AEGP_RQItemRefH</span></code> will render when the user next clicks the Render button.
Returns an error if called during rendering.</p>
<p>This function will return:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">Err_PARAMETER</span></code> if you try to call while <code class="docutils literal notranslate"><span class="pre">AEGP_RenderQueueState</span></code> isn’t <code class="docutils literal notranslate"><span class="pre">AEGP_RenderQueueState_STOPPED</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">Err_RANGE</span></code> if you pass a status that is illegal in any case, and</li>
<li><code class="docutils literal notranslate"><span class="pre">Err_PARAMETER</span></code> if you try to pass a status that doesn’t make sense (like trying to queue something for which there’s no output path)</li>
</ul>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetRenderState</span><span class="p">(</span>
  <span class="n">AEGP_RQItemRefH</span>  <span class="n">rq_itemH</span><span class="p">,</span>
  <span class="n">A_Boolean</span>        <span class="n">renderB</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetStartedTime</span></code></td>
<td><p class="first">Returns the time (in seconds, since 1904) that rendering began.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetStartedTime</span><span class="p">(</span>
  <span class="n">AEGP_RQItemRefH</span>  <span class="n">rq_itemH</span><span class="p">,</span>
  <span class="n">A_Time</span>           <span class="o">*</span><span class="n">started_timePT</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetElapsedTime</span></code></td>
<td><p class="first">Returns the time elapsed since rendering began.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetElapsedTime</span><span class="p">(</span>
  <span class="n">AEGP_RQItemRefH</span>  <span class="n">rq_itemH</span><span class="p">,</span>
  <span class="n">A_Time</span>           <span class="o">*</span><span class="n">render_timePT</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetLogType</span></code></td>
<td><p class="first">Returns the log type for the referenced <code class="docutils literal notranslate"><span class="pre">AEGP_RQItemRefH</span></code>.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetLogType</span><span class="p">(</span>
  <span class="n">AEGP_RQItemRefH</span>  <span class="n">rq_itemH</span><span class="p">,</span>
  <span class="n">AEGP_LogType</span>     <span class="o">*</span><span class="n">logtypeP</span><span class="p">);</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">AEGP_LogtType</span></code> will have one of the following values:</p>
<blockquote class="last">
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LogType_NONE</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LogType_ERRORS_ONLY</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LogType_PLUS_SETTINGS</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LogType_PER_FRAME_INFO</span></code></li>
</ul>
</div></blockquote>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetLogType</span></code></td>
<td><p class="first">Specifies the log type to be used with the referenced <code class="docutils literal notranslate"><span class="pre">AEGP_RQItemRefH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetLogType</span><span class="p">(</span>
  <span class="n">AEGP_RQItemRefH</span>  <span class="n">rq_itemH</span><span class="p">,</span>
  <span class="n">AEGP_LogType</span>     <span class="n">logtype</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_RemoveOutputModule</span></code></td>
<td><p class="first">Removes the specified output module from the referenced <code class="docutils literal notranslate"><span class="pre">AEGP_RQItemRefH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_RemoveOutputModule</span><span class="p">(</span>
  <span class="n">AEGP_RQItemRefH</span>        <span class="n">rq_itemH</span><span class="p">,</span>
  <span class="n">AEGP_OutputModuleRefH</span>  <span class="n">outmodH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetComment</span></code></td>
<td><p class="first">Updated to support Unicode in <code class="docutils literal notranslate"><span class="pre">RQItemSuite4</span></code>, available in 14.1.
Retrieves the comment associated with the referenced <code class="docutils literal notranslate"><span class="pre">AEGP_RQItemRefH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetComment</span><span class="p">(</span>
  <span class="n">AEGP_RQItemRefH</span>  <span class="n">rq_itemH</span><span class="p">,</span>
  <span class="n">AEGP_MemHandle</span>   <span class="o">*</span><span class="n">unicodeH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetComment</span></code></td>
<td><p class="first">Updated to support Unicode in <code class="docutils literal notranslate"><span class="pre">RQItemSuite4</span></code>, available in 14.1.
Specifies the comment associated with the referenced <code class="docutils literal notranslate"><span class="pre">AEGP_RQItemRefH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetComment</span><span class="p">(</span>
  <span class="n">AEGP_RQItemRefH</span>    <span class="n">rq_itemH</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_UTF16Char</span>  <span class="o">*</span><span class="n">commentZ</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetCompFromRQItem</span></code></td>
<td><p class="first">Retrieves the <code class="docutils literal notranslate"><span class="pre">AEGP_CompH</span></code> associated with the <code class="docutils literal notranslate"><span class="pre">AEGP_RQItemRefH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetCompFromRQItem</span><span class="p">(</span>
  <span class="n">AEGP_RQItemRefH</span>  <span class="n">rq_itemH</span><span class="p">,</span>
  <span class="n">AEGP_CompH</span>       <span class="o">*</span><span class="n">compPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_DeleteRQItem</span></code></td>
<td><p class="first">Deletes the render queue item. Undoable.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_DeleteRQItem</span><span class="p">(</span>
  <span class="n">AEGP_RQItemRefH</span>  <span class="n">rq_itemH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
</div>
</div>
<div class="section" id="render-queue-monitor-suite">
<span id="aegps-aegp-suites-render-queue-monitor-suite"></span><h3>Render Queue Monitor Suite<a class="headerlink" href="#render-queue-monitor-suite" title="Permalink to this headline">¶</a></h3>
<p>New in CS6. This suite provides all the info a render queue manager needs to figure out what is happening at any point in a render.</p>
<div class="section" id="aegp-renderqueuemonitorsuite1">
<span id="aegps-aegp-suites-aegp-renderqueuemonitorsuite"></span><h4>AEGP_RenderQueueMonitorSuite1<a class="headerlink" href="#aegp-renderqueuemonitorsuite1" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="24%" />
<col width="76%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Function</strong></th>
<th class="head"><strong>Purpose</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_RegisterListener</span></code></td>
<td><p class="first">Register a set of plug-in-defined functions to be called by the render queue.
Use the refcon to pass in data that you want to use later on when your plug-in-defined functions in <code class="docutils literal notranslate"><span class="pre">AEGP_RQM_FunctionBlock1</span></code> are called later.
It may be set it to NULL if you don’t need it.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_RegisterListener</span><span class="p">(</span>
  <span class="n">AEGP_PluginID</span>                  <span class="n">aegp_plugin_id</span><span class="p">,</span>
  <span class="n">AEGP_RQM_Refcon</span>                <span class="n">aegp_refconP</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">AEGP_RQM_FunctionBlock1</span>  <span class="o">*</span><span class="n">fcn_blockP</span><span class="p">);</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">AEGP_RQM_FunctionBlock1</span></code> is defined as follows:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span> <span class="n">_AEGP_RQM_FunctionBlock1</span> <span class="p">{</span>
  <span class="n">A_Err</span> <span class="p">(</span><span class="o">*</span><span class="n">AEGP_RQM_RenderJobStarted</span><span class="p">)(</span>
    <span class="n">AEGP_RQM_BasicData</span>  <span class="o">*</span><span class="n">basic_dataP</span><span class="p">,</span>
    <span class="n">AEGP_RQM_SessionId</span>  <span class="n">jobid</span><span class="p">);</span>

  <span class="n">A_Err</span> <span class="p">(</span><span class="o">*</span><span class="n">AEGP_RQM_RenderJobEnded</span><span class="p">)(</span>
    <span class="n">AEGP_RQM_BasicData</span>  <span class="o">*</span><span class="n">basic_dataP</span><span class="p">,</span>
    <span class="n">AEGP_RQM_SessionId</span>  <span class="n">jobid</span><span class="p">);</span>

  <span class="n">A_Err</span> <span class="p">(</span><span class="o">*</span><span class="n">AEGP_RQM_RenderJobItemStarted</span><span class="p">)(</span>
    <span class="n">AEGP_RQM_BasicData</span>  <span class="o">*</span><span class="n">basic_dataP</span><span class="p">,</span>
    <span class="n">AEGP_RQM_SessionId</span>  <span class="n">jobid</span><span class="p">,</span>
    <span class="n">AEGP_RQM_ItemId</span>     <span class="n">itemid</span><span class="p">);</span>

  <span class="n">A_Err</span> <span class="p">(</span><span class="o">*</span><span class="n">AEGP_RQM_RenderJobItemUpdated</span><span class="p">)(</span>
    <span class="n">AEGP_RQM_BasicData</span>  <span class="o">*</span><span class="n">basic_dataP</span><span class="p">,</span>
    <span class="n">AEGP_RQM_SessionId</span>  <span class="n">jobid</span><span class="p">,</span>
    <span class="n">AEGP_RQM_ItemId</span>     <span class="n">itemid</span><span class="p">,</span>
    <span class="n">AEGP_RQM_FrameId</span>    <span class="n">frameid</span><span class="p">);</span>

  <span class="n">A_Err</span> <span class="p">(</span><span class="o">*</span><span class="n">AEGP_RQM_RenderJobItemEnded</span><span class="p">)(</span>
    <span class="n">AEGP_RQM_BasicData</span>       <span class="o">*</span><span class="n">basic_dataP</span><span class="p">,</span>
    <span class="n">AEGP_RQM_SessionId</span>       <span class="n">jobid</span><span class="p">,</span>
    <span class="n">AEGP_RQM_ItemId</span>          <span class="n">itemid</span><span class="p">,</span>
    <span class="n">AEGP_RQM_FinishedStatus</span>  <span class="n">fstatus</span><span class="p">);</span>

  <span class="n">A_Err</span> <span class="p">(</span><span class="o">*</span><span class="n">AEGP_RQM_RenderJobItemReportLog</span><span class="p">)(</span>
    <span class="n">AEGP_RQM_BasicData</span>  <span class="o">*</span><span class="n">basic_dataP</span><span class="p">,</span>
    <span class="n">AEGP_RQM_SessionId</span>  <span class="n">jobid</span><span class="p">,</span>
    <span class="n">AEGP_RQM_ItemId</span>     <span class="n">itemid</span><span class="p">,</span>
    <span class="n">A_Boolean</span>           <span class="n">isError</span><span class="p">,</span>
    <span class="n">AEGP_MemHandle</span>      <span class="n">logbuf</span><span class="p">);</span>
<span class="p">}</span> <span class="n">AEGP_RQM_FunctionBlock1</span><span class="p">;</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">AEGP_RQM_FinishedStatus</span></code> will be one of the following:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">AEGP_RQM_FinishedStatus_UNKNOWN</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_RQM_FinishedStatus_SUCCEEDED</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_RQM_FinishedStatus_ABORTED</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_RQM_FinishedStatus_ERRED</span></code></li>
</ul>
</div></blockquote>
<p>The AEGP_RQM_BasicData is defined below.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span> <span class="n">_AEGP_RQM_BasicData</span> <span class="p">{</span>
  <span class="k">const</span> <span class="k">struct</span> <span class="n">SPBasicSuite</span> <span class="o">*</span><span class="n">pica_basicP</span><span class="p">;</span>
  <span class="n">A_long</span>                    <span class="n">aegp_plug_id</span><span class="p">;</span>
  <span class="n">AEGP_RQM_Refcon</span>           <span class="n">aegp_refconPV</span><span class="p">;</span>
<span class="p">}</span> <span class="n">AEGP_RQM_BasicData</span><span class="p">;</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_DeregisterListener</span></code></td>
<td><p class="first">Deregister from the render queue.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_DeregisterListener</span><span class="p">(</span>
  <span class="n">AEGP_PluginID</span>    <span class="n">aegp_plugin_id</span><span class="p">,</span>
  <span class="n">AEGP_RQM_Refcon</span>  <span class="n">aegp_refconP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetProjectName</span></code></td>
<td><p class="first">Obtain the current project name.
The project name is a handle to a NULL-terminated A_UTF16Char string, and must be disposed with <code class="docutils literal notranslate"><span class="pre">AEGP_FreeMemHandle</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetProjectName</span><span class="p">(</span>
  <span class="n">AEGP_RQM_SessionId</span>  <span class="n">sessid</span><span class="p">,</span>
  <span class="n">AEGP_MemHandle</span>      <span class="o">*</span><span class="n">utf_project_namePH0</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetAppVersion</span></code></td>
<td><p class="first">Obtain the app version.
The app version is a handle to a NULL-terminated A_UTF16Char string, and must be disposed with <code class="docutils literal notranslate"><span class="pre">AEGP_FreeMemHandle</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetAppVersion</span><span class="p">(</span>
  <span class="n">AEGP_RQM_SessionId</span>  <span class="n">sessid</span><span class="p">,</span>
  <span class="n">AEGP_MemHandle</span>      <span class="o">*</span><span class="n">utf_app_versionPH0</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetNumJobItems</span></code></td>
<td><p class="first">Obtain the number of job items.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetNumJobItems</span><span class="p">(</span>
  <span class="n">AEGP_RQM_SessionId</span>  <span class="n">sessid</span><span class="p">,</span>
  <span class="n">A_long</span>              <span class="o">*</span><span class="n">num_jobitemsPL</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetJobItemID</span></code></td>
<td><p class="first">Get the job with the index specified.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetJobItemID</span><span class="p">(</span>
  <span class="n">AEGP_RQM_SessionId</span>  <span class="n">sessid</span><span class="p">,</span>
  <span class="n">A_long</span>              <span class="n">jobItemIndex</span><span class="p">,</span>
  <span class="n">AEGP_RQM_ItemId</span>     <span class="o">*</span><span class="n">jobItemID</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetNumJobItemRenderSettings</span></code></td>
<td><p class="first">Get the number of render settings for the job with the index specified.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetNumJobItemRenderSettings</span><span class="p">(</span>
  <span class="n">AEGP_RQM_SessionId</span>  <span class="n">sessid</span><span class="p">,</span>
  <span class="n">AEGP_RQM_ItemId</span>     <span class="n">itemid</span><span class="p">,</span>
  <span class="n">A_long</span>              <span class="o">*</span><span class="n">num_settingsPL</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetJobItemRenderSetting</span></code></td>
<td><p class="first">Get a specific render setting of a specific job.
The setting name and value are handles to NULL-terminated A_UTF16Char strings, and must be disposed with <code class="docutils literal notranslate"><span class="pre">AEGP_FreeMemHandle</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetJobItemRenderSetting</span><span class="p">(</span>
  <span class="n">AEGP_RQM_SessionId</span>  <span class="n">sessid</span><span class="p">,</span>
  <span class="n">AEGP_RQM_ItemId</span>     <span class="n">itemid</span><span class="p">,</span>
  <span class="n">A_long</span>              <span class="n">settingIndex</span><span class="p">,</span>
  <span class="n">AEGP_MemHandle</span>      <span class="o">*</span><span class="n">utf_setting_namePH0</span><span class="p">,</span>
  <span class="n">AEGP_MemHandle</span>      <span class="o">*</span><span class="n">utf_setting_valuePH0</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetNumJobItemOutputModules</span></code></td>
<td><p class="first">Get the number of output modules for the job with the index specified.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetNumJobItemOutputModules</span><span class="p">(</span>
  <span class="n">AEGP_RQM_SessionId</span>  <span class="n">sessid</span><span class="p">,</span>
  <span class="n">AEGP_RQM_ItemId</span>     <span class="n">itemid</span><span class="p">,</span>
  <span class="n">A_long</span>              <span class="o">*</span><span class="n">num_outputmodulesPL</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetNumJobItemOutputModuleSettings</span></code></td>
<td><p class="first">Get the number of settings for the output module with the index specified.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetNumJobItemOutputModuleSettings</span><span class="p">(</span>
  <span class="n">AEGP_RQM_SessionId</span>  <span class="n">sessid</span><span class="p">,</span>
  <span class="n">AEGP_RQM_ItemId</span>     <span class="n">itemid</span><span class="p">,</span>
  <span class="n">A_long</span>              <span class="n">outputModuleIndex</span><span class="p">,</span>
  <span class="n">A_long</span>              <span class="o">*</span><span class="n">num_settingsPL</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetJobItemOutputModuleSetting</span></code></td>
<td><p class="first">Get a specific setting of a job item output module.
The setting name and value are handles to NULL-terminated A_UTF16Char strings, and must be disposed with <code class="docutils literal notranslate"><span class="pre">AEGP_FreeMemHandle</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetJobItemOutputModuleSetting</span><span class="p">(</span>
  <span class="n">AEGP_RQM_SessionId</span>  <span class="n">sessid</span><span class="p">,</span>
  <span class="n">AEGP_RQM_ItemId</span>     <span class="n">itemid</span><span class="p">,</span>
  <span class="n">A_long</span>              <span class="n">outputModuleIndex</span><span class="p">,</span>
  <span class="n">A_long</span>              <span class="n">settingIndex</span><span class="p">,</span>
  <span class="n">AEGP_MemHandle</span>      <span class="o">*</span><span class="n">utf_setting_namePH0</span><span class="p">,</span>
  <span class="n">AEGP_MemHandle</span>      <span class="o">*</span><span class="n">utf_setting_valuePH0</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetNumJobItemOutputModuleWarnings</span></code></td>
<td><p class="first">Get the number of output module warnings for a job item.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetNumJobItemOutputModuleWarnings</span><span class="p">(</span>
  <span class="n">AEGP_RQM_SessionId</span>  <span class="n">sessid</span><span class="p">,</span>
  <span class="n">AEGP_RQM_ItemId</span>     <span class="n">itemid</span><span class="p">,</span>
  <span class="n">A_long</span>              <span class="n">outputModuleIndex</span><span class="p">,</span>
  <span class="n">A_long</span>              <span class="o">*</span><span class="n">num_warningsPL</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetJobItemOutputModuleWarning</span></code></td>
<td><p class="first">Get a specific warning of a specific output module for a specific job item.
The warning value is a handle to NULL-terminated A_UTF16Char string, and must be disposed with <code class="docutils literal notranslate"><span class="pre">AEGP_FreeMemHandle</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetJobItemOutputModuleWarning</span><span class="p">(</span>
  <span class="n">AEGP_RQM_SessionId</span>  <span class="n">sessid</span><span class="p">,</span>
  <span class="n">AEGP_RQM_ItemId</span>     <span class="n">itemid</span><span class="p">,</span>
  <span class="n">A_long</span>              <span class="n">outputModuleIndex</span><span class="p">,</span>
  <span class="n">A_long</span>              <span class="n">warningIndex</span><span class="p">,</span>
  <span class="n">AEGP_MemHandle</span>      <span class="o">*</span><span class="n">utf_warning_valuePH0</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetNumJobItemFrameProperties</span></code></td>
<td><p class="first">Get the number of properties for a job item frame.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetNumJobItemFrameProperties</span><span class="p">(</span>
  <span class="n">AEGP_RQM_SessionId</span>  <span class="n">sessid</span><span class="p">,</span>
  <span class="n">AEGP_RQM_ItemId</span>     <span class="n">itemid</span><span class="p">,</span>
  <span class="n">AEGP_RQM_FrameId</span>    <span class="n">frameid</span><span class="p">,</span>
  <span class="n">A_long</span>              <span class="o">*</span><span class="n">num_propertiesPL</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetJobItemFrameProperty</span></code></td>
<td><p class="first">Get a specific property on a job item frame.
The property name and values are handle to NULL-terminated A_UTF16Char strings, and must be disposed with <code class="docutils literal notranslate"><span class="pre">AEGP_FreeMemHandle</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetJobItemFrameProperty</span><span class="p">(</span>
  <span class="n">AEGP_RQM_SessionId</span>  <span class="n">sessid</span><span class="p">,</span>
  <span class="n">AEGP_RQM_ItemId</span>     <span class="n">itemid</span><span class="p">,</span>
  <span class="n">AEGP_RQM_FrameId</span>    <span class="n">frameid</span><span class="p">,</span>
  <span class="n">A_long</span>              <span class="n">propertyIndex</span><span class="p">,</span>
  <span class="n">AEGP_MemHandle</span>      <span class="o">*</span><span class="n">utf_property_namePH0</span><span class="p">,</span>
  <span class="n">AEGP_MemHandle</span>      <span class="o">*</span><span class="n">utf_property_valuePH0</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetNumJobItemOutputModuleProperties</span></code></td>
<td><p class="first">Get the number of properties for a job item output module.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetNumJobItemOutputModuleProperties</span><span class="p">(</span>
  <span class="n">AEGP_RQM_SessionId</span>  <span class="n">sessid</span><span class="p">,</span>
  <span class="n">AEGP_RQM_ItemId</span>     <span class="n">itemid</span><span class="p">,</span>
  <span class="n">A_long</span>              <span class="n">outputModuleIndex</span><span class="p">,</span>
  <span class="n">A_long</span>              <span class="o">*</span><span class="n">num_propertiesPL</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetJobItemOutputModuleProperty</span></code></td>
<td><p class="first">Get a specific property off a job item output module.
The property name and values are handle to NULL-terminated A_UTF16Char strings, and must be disposed with <code class="docutils literal notranslate"><span class="pre">AEGP_FreeMemHandle</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetJobItemOutputModuleProperty</span><span class="p">(</span>
  <span class="n">AEGP_RQM_SessionId</span>  <span class="n">sessid</span><span class="p">,</span>
  <span class="n">AEGP_RQM_ItemId</span>     <span class="n">itemid</span><span class="p">,</span>
  <span class="n">A_long</span>              <span class="n">outputModuleIndex</span><span class="p">,</span>
  <span class="n">A_long</span>              <span class="n">propertyIndex</span><span class="p">,</span>
  <span class="n">AEGP_MemHandle</span>      <span class="o">*</span><span class="n">utf_property_namePH0</span><span class="p">,</span>
  <span class="n">AEGP_MemHandle</span>      <span class="o">*</span><span class="n">utf_property_valuePH0</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetJobItemFrameThumbnail</span></code></td>
<td><p class="first">Get a buffer with a JPEG-encoded thumbnail of the job item frame.
Pass in the maximum width and height, and the actual dimensions will be passed back.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetJobItemFrameThumbnail</span><span class="p">(</span>
  <span class="n">AEGP_RQM_SessionId</span>  <span class="n">sessid</span><span class="p">,</span>
  <span class="n">AEGP_RQM_ItemId</span>     <span class="n">itemid</span><span class="p">,</span>
  <span class="n">AEGP_RQM_FrameId</span>    <span class="n">frameid</span><span class="p">,</span>
  <span class="n">A_long</span>              <span class="o">*</span><span class="n">widthPL</span><span class="p">,</span>
  <span class="n">A_long</span>              <span class="o">*</span><span class="n">heightPL</span><span class="p">,</span>
  <span class="n">AEGP_MemHandle</span>      <span class="o">*</span><span class="n">thumbnailPH0</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
</div>
</div>
<div class="section" id="output-module-suite">
<span id="aegps-aegp-suites-output-module-suite"></span><h3>Output Module Suite<a class="headerlink" href="#output-module-suite" title="Permalink to this headline">¶</a></h3>
<p>Every item in the render queue has at least one output module specified.</p>
<p>Use this suite to query and control all aspects of the output modules attached to a given render item.</p>
<p>You may also add and remove output modules.</p>
<p>Factoid: For each frame rendered for a given render item, the list of output modules is traversed. So, for frame 0, output module 0, then 1, then 2 are called.</p>
<div class="section" id="aegp-outputmodulesuite4">
<h4>AEGP_OutputModuleSuite4<a class="headerlink" href="#aegp-outputmodulesuite4" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="19%" />
<col width="81%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Function</strong></th>
<th class="head"><strong>Purpose</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetOutputModuleByIndex</span></code></td>
<td><p class="first">Retrieves the indexed output module.</p>
<p>NOTE: <code class="docutils literal notranslate"><span class="pre">AEGP_OutputModuleRefH</span></code> is an opaque data type, and can’t be manipulated directly; you must use our accessor functions to modify it.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetOutputModuleByIndex</span><span class="p">(</span>
  <span class="n">AEGP_RQItemRefH</span>        <span class="n">rq_itemH</span><span class="p">,</span>
  <span class="n">A_long</span>                 <span class="n">outmod_indexL</span><span class="p">,</span>
  <span class="n">AEGP_OutputModuleRefH</span>  <span class="o">*</span><span class="n">outmodPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetEmbedOptions</span></code></td>
<td><p class="first">Retrieves the embedding setting specified for the referenced <code class="docutils literal notranslate"><span class="pre">AEGP_OutputModuleRefH</span></code>.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetEmbedOptions</span><span class="p">(</span>
  <span class="n">AEGP_RQItemRefH</span>        <span class="n">rq_itemH</span><span class="p">,</span>
  <span class="n">AEGP_OutputModuleRefH</span>  <span class="n">outmodH</span><span class="p">,</span>
  <span class="n">AEGP_EmbeddingType</span>     <span class="o">*</span><span class="n">embed_optionsP</span><span class="p">);</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">AEGP_EmbeddingType</span></code> will be one of the following:</p>
<blockquote class="last">
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">AEGP_Embedding_NOTHING</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_Embedding_LINK</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_Embedding_LINK_AND_COPY</span></code></li>
</ul>
</div></blockquote>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetEmbedOptions</span></code></td>
<td><p class="first">Specifies the embedding setting for the referenced <code class="docutils literal notranslate"><span class="pre">AEGP_OutputModuleRefH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetEmbedOptions</span><span class="p">(</span>
  <span class="n">AEGP_RQItemRefH</span>        <span class="n">rq_itemH</span><span class="p">,</span>
  <span class="n">AEGP_OutputModuleRefH</span>  <span class="n">outmodH</span><span class="p">,</span>
  <span class="n">AEGP_EmbeddingType</span>     <span class="n">embed_options</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetPostRenderAction</span></code></td>
<td><p class="first">Retrieves the post-render action setting for the referenced <code class="docutils literal notranslate"><span class="pre">AEGP_OutputModuleRefH</span></code>.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetPostRenderAction</span><span class="p">(</span>
  <span class="n">AEGP_RQItemRefH</span>        <span class="n">rq_itemH</span><span class="p">,</span>
  <span class="n">AEGP_OutputModuleRefH</span>  <span class="n">outmodH</span><span class="p">,</span>
  <span class="n">AEGP_PostRenderAction</span>  <span class="o">*</span><span class="n">actionP</span><span class="p">);</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">AEGP_PostRenderAction</span></code> will be one of the following:</p>
<blockquote class="last">
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">AEGP_PostRenderOptions_IMPORT</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_PostRenderOptions_IMPORT_AND_REPLACE_USAGE</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_PostRenderOptions_SET_PROXY</span></code></li>
</ul>
</div></blockquote>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetPostRenderAction</span></code></td>
<td><p class="first">Specifies the post-render action setting for the referenced <code class="docutils literal notranslate"><span class="pre">AEGP_OutputModuleRefH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetPostRenderAction</span><span class="p">(</span>
  <span class="n">AEGP_RQItemRefH</span>        <span class="n">rq_itemH</span><span class="p">,</span>
  <span class="n">AEGP_OutputModuleRefH</span>  <span class="n">outmodH</span><span class="p">,</span>
  <span class="n">AEGP_PostRenderAction</span>  <span class="n">action</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetEnabledOutputs</span></code></td>
<td><p class="first">Retrieves which output types are enabled for the referenced <code class="docutils literal notranslate"><span class="pre">AEGP_OutputModuleRefH</span></code>.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetEnabledOutputs</span><span class="p">(</span>
  <span class="n">AEGP_RQItemRefH</span>        <span class="n">rq_itemH</span><span class="p">,</span>
  <span class="n">AEGP_OutputModuleRefH</span>  <span class="n">outmodH</span><span class="p">,</span>
  <span class="n">AEGP_OutputTypes</span>       <span class="o">*</span><span class="n">typesP</span><span class="p">);</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">AEGP_OutputTypes</span></code> will contain one or both of the following values:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">AEGP_OutputType_VIDEO</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_OutputType_AUDIO</span></code></li>
</ul>
</div></blockquote>
<p class="last">NOTE: These are flags, not an enumeration.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetEnabledOutputs</span></code></td>
<td><p class="first">Specifies which output types are enabled for the referenced <code class="docutils literal notranslate"><span class="pre">AEGP_OutputModuleRefH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetEnabledOutputs</span><span class="p">(</span>
  <span class="n">AEGP_RQItemRefH</span>        <span class="n">rq_itemH</span><span class="p">,</span>
  <span class="n">AEGP_OutputModuleRefH</span>  <span class="n">outmodH</span><span class="p">,</span>
  <span class="n">AEGP_OutputTypes</span>       <span class="n">enabled_types</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetOutputChannels</span></code></td>
<td><p class="first">Retrieves which video channels are enabled for output in the referenced AEGP_OutputModuleRefH.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetOutputChannels</span><span class="p">(</span>
  <span class="n">AEGP_RQItemRefH</span>        <span class="n">rq_itemH</span><span class="p">,</span>
  <span class="n">AEGP_OutputModuleRefH</span>  <span class="n">outmodH</span><span class="p">,</span>
  <span class="n">AEGP_VideoChannels</span>     <span class="o">*</span><span class="n">outchannelsP</span><span class="p">);</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">AEGP_VideoChannels</span></code> will be one of the following:</p>
<blockquote class="last">
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">AEGP_VideoChannels_RGB</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_VideoChannels_RGBA</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_VideoChannels_ALPHA</span></code></li>
</ul>
</div></blockquote>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetOutputChannels</span></code></td>
<td><p class="first">Specifies which video channels are enabled for output in the referenced <code class="docutils literal notranslate"><span class="pre">AEGP_OutputModuleRefH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetOutputChannels</span><span class="p">(</span>
  <span class="n">AEGP_RQItemRefH</span>        <span class="n">rq_itemH</span><span class="p">,</span>
  <span class="n">AEGP_OutputModuleRefH</span>  <span class="n">outmodH</span><span class="p">,</span>
  <span class="n">AEGP_VideoChannels</span>     <span class="n">outchannels</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetStretchInfo</span></code></td>
<td><p class="first">Retrieves the stretch information enabled for the referenced <code class="docutils literal notranslate"><span class="pre">AEGP_OutputModuleRefH</span></code>;
whether or not stretching is enabled, whether or not the frame aspect ratio is locked to the composition’s, and what quality setting is specified.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetStretchInfo</span><span class="p">(</span>
  <span class="n">AEGP_RQItemRefH</span>        <span class="n">rq_itemH</span><span class="p">,</span>
  <span class="n">AEGP_OutputModuleRefH</span>  <span class="n">outmodH</span><span class="p">,</span>
  <span class="n">A_Boolean</span>              <span class="o">*</span><span class="n">enabledPB</span><span class="p">,</span>
  <span class="n">AEGP_StretchQuality</span>    <span class="o">*</span><span class="n">qualP</span><span class="p">,</span>
  <span class="n">A_Boolean</span>              <span class="o">*</span><span class="n">lockedPB</span><span class="p">);</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">AEGP_StretchQuality</span></code> will be one of the following:</p>
<blockquote class="last">
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">AEGP_StretchQual_LOW</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_StretchQual_HIGH</span></code></li>
</ul>
</div></blockquote>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetStretchInfo</span></code></td>
<td><p class="first">Retrieves the stretch information enabled for the referenced <code class="docutils literal notranslate"><span class="pre">AEGP_OutputModuleRefH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetStretchInfo</span><span class="p">(</span>
  <span class="n">AEGP_RQItemRefH</span>        <span class="n">rq_itemH</span><span class="p">,</span>
  <span class="n">AEGP_OutputModuleRefH</span>  <span class="n">outmodH</span><span class="p">,</span>
  <span class="n">A_Boolean</span>              <span class="n">is_enabledB</span><span class="p">,</span>
  <span class="n">AEGP_StretchQuality</span>    <span class="n">quality</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetCropInfo</span></code></td>
<td><p class="first">Retrieves whether or not the cropping is enabled for the referenced <code class="docutils literal notranslate"><span class="pre">AEGP_OutputModuleRefH</span></code>, and the rectangle to be used.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetCropInfo</span><span class="p">(</span>
  <span class="n">AEGP_RQItemRefH</span>        <span class="n">rq_itemH</span><span class="p">,</span>
  <span class="n">AEGP_OutputModuleRefH</span>  <span class="n">outmodH</span><span class="p">,</span>
  <span class="n">A_Boolean</span>              <span class="o">*</span><span class="n">is_enabledBP</span><span class="p">,</span>
  <span class="n">A_Rect</span>                 <span class="o">*</span><span class="n">crop_rectP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetCropInfo</span></code></td>
<td><p class="first">Specifies whether cropping is enabled for the referenced <code class="docutils literal notranslate"><span class="pre">AEGP_OutputModuleRefH</span></code>, and the rectangle to be used.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetCropInfo</span><span class="p">(</span>
  <span class="n">AEGP_RQItemRefH</span>        <span class="n">rq_itemH</span><span class="p">,</span>
  <span class="n">AEGP_OutputModuleRefH</span>  <span class="n">outmodH</span><span class="p">,</span>
  <span class="n">A_Boolean</span>              <span class="n">enableB</span><span class="p">,</span>
  <span class="n">A_Rect</span>                 <span class="n">crop_rect</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetSoundFormatInfo</span></code></td>
<td><p class="first">Retrieves whether or not audio output is enabled for the referenced <code class="docutils literal notranslate"><span class="pre">AEGP_OutputModuleRefH</span></code>, and the settings to be used.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetSoundFormatInfo</span><span class="p">(</span>
  <span class="n">AEGP_RQItemRefH</span>        <span class="n">rq_itemH</span><span class="p">,</span>
  <span class="n">AEGP_OutputModuleRefH</span>  <span class="n">outmodH</span><span class="p">,</span>
  <span class="n">AEGP_SoundDataFormat</span>   <span class="o">*</span><span class="n">formatP</span><span class="p">,</span>
  <span class="n">A_Boolean</span>              <span class="o">*</span><span class="n">enabledPB</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetSoundFormatInfo</span></code></td>
<td><p class="first">Specifies whether or not audio output is enabled for the referenced <code class="docutils literal notranslate"><span class="pre">AEGP_OutputModuleRefH</span></code>, and the settings to be used.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetSoundFormatInfo</span><span class="p">(</span>
  <span class="n">AEGP_RQItemRefH</span>        <span class="n">rq_itemH</span><span class="p">,</span>
  <span class="n">AEGP_OutputModuleRefH</span>  <span class="n">outmodH</span><span class="p">,</span>
  <span class="n">AEGP_SoundDataFormat</span>   <span class="n">format_info</span><span class="p">,</span>
  <span class="n">A_Boolean</span>              <span class="n">enabledB</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetOutputFilePath</span></code></td>
<td><p class="first">Retrieves the path to which <code class="docutils literal notranslate"><span class="pre">AEGP_OutputModuleRefH's</span></code> output file will be written.
The path is a handle to a NULL-terminated A_UTF16Char string, and must be disposed with <code class="docutils literal notranslate"><span class="pre">AEGP_FreeMemHandle</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetOutputFilePath</span><span class="p">(</span>
  <span class="n">AEGP_RQItemRefH</span>        <span class="n">rq_itemH</span><span class="p">,</span>
  <span class="n">AEGP_OutputModuleRefH</span>  <span class="n">outmodH</span><span class="p">,</span>
  <span class="n">AEGP_MemHandle</span>         <span class="o">*</span><span class="n">unicode_pathPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetOutputFilePath</span></code></td>
<td><p class="first">Specifies the path to which <code class="docutils literal notranslate"><span class="pre">AEGP_OutputModuleRefH's</span></code> output file will be written.
The file path is a NULL-terminated UTF-16 string with platform separators.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetOutputFilePath</span><span class="p">(</span>
  <span class="n">AEGP_RQItemRefH</span>        <span class="n">rq_itemH</span><span class="p">,</span>
  <span class="n">AEGP_OutputModuleRefH</span>  <span class="n">outmodH</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_UTF16Char</span>      <span class="o">*</span><span class="n">pathZ</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_AddDefaultOutputModule</span></code></td>
<td><p class="first">Adds the default output module to the specified <code class="docutils literal notranslate"><span class="pre">AEGP_RQItemRefH</span></code>,
and returns the added output module’s <code class="docutils literal notranslate"><span class="pre">AEGP_OutputModuleRefH</span></code> (you wouldn’t add it if you didn’t plan to mess around with it, would you?).</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_AddDefaultOutputModule</span><span class="p">(</span>
  <span class="n">AEGP_RQItemRefH</span>        <span class="n">rq_itemH</span><span class="p">,</span>
  <span class="n">AEGP_OutputModuleRefH</span>  <span class="o">*</span><span class="n">outmodPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetExtraOutputModuleInfo</span></code></td>
<td><p class="first">Retrieves information about the output module.
<code class="docutils literal notranslate"><span class="pre">format_uniPH</span></code> and <code class="docutils literal notranslate"><span class="pre">info_uniPH</span></code> provide the textual description of, and information about, the output module, formatted as the user would see it.
<code class="docutils literal notranslate"><span class="pre">format_uniPH</span></code> and <code class="docutils literal notranslate"><span class="pre">info_uniPH</span></code> will contain NULL-terminated UTF16 strings, of which the caller must dispose.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetExtraOutputModuleInfo</span><span class="p">(</span>
  <span class="n">AEGP_RQItemRefH</span>        <span class="n">rq_itemH</span><span class="p">,</span>
  <span class="n">AEGP_OutputModuleRefH</span>  <span class="n">outmodH</span><span class="p">,</span>
  <span class="n">AEGP_MemHandle</span>         <span class="o">*</span><span class="n">format_uniPH</span><span class="p">,</span>
  <span class="n">AEGP_MemHandle</span>         <span class="o">*</span><span class="n">info_uniPH</span><span class="p">,</span>
  <span class="n">A_Boolean</span>              <span class="o">*</span><span class="n">is_sequenceBP</span><span class="p">,</span>
  <span class="n">A_Boolean</span>              <span class="o">*</span><span class="n">multi_frameBP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
</div>
</div>
<div class="section" id="working-with-effects">
<span id="aegps-aegp-suites-pf-interface-suite"></span><h3>Working With Effects<a class="headerlink" href="#working-with-effects" title="Permalink to this headline">¶</a></h3>
<p>These functions provide a way for effects (and AEGPs) to obtain information about the context of an applied effect.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Any time you modify or rely on data from outside the normal render pipeline, you run the risk of dependency problems.</p>
<p class="last">There is no way for After Effects to know that you depend on this external information; consequently, you will not be notified if it changes out from under you.</p>
</div>
<div class="section" id="aegp-pfinterfacesuite1">
<span id="aegps-aegp-suites-aegp-pfinterfacesuite"></span><h4>AEGP_PFInterfaceSuite1<a class="headerlink" href="#aegp-pfinterfacesuite1" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="23%" />
<col width="77%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Function</strong></th>
<th class="head"><strong>Purpose</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetEffectLayer</span></code></td>
<td><p class="first">Obtain the layer handle of the layer to which the effect is applied.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetEffectLayer</span><span class="p">(</span>
  <span class="n">PF_ProgPtr</span>   <span class="n">effect_ref</span><span class="p">,</span>
  <span class="n">AEGP_LayerH</span>  <span class="o">*</span><span class="n">layerPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetNewEffectForEffect</span></code></td>
<td><p class="first">Obtain the <code class="docutils literal notranslate"><span class="pre">AEGP_EffectRefH</span></code> corresponding to the effect.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetNewEffectForEffect</span><span class="p">(</span>
  <span class="n">AEGP_PluginID</span>    <span class="n">aegp_plugin_id</span><span class="p">,</span>
  <span class="n">PF_ProgPtr</span>       <span class="n">effect_ref</span><span class="p">,</span>
  <span class="n">AEGP_EffectRefH</span>  <span class="o">*</span><span class="n">effectPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_ConvertEffectToCompTime</span></code></td>
<td><p class="first">Retreive the composition time corresponding to the effect’s layer time.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_ConvertEffectToCompTime</span><span class="p">(</span>
  <span class="n">PF_ProgPtr</span>     <span class="n">effect_ref</span><span class="p">,</span>
  <span class="kt">long</span>           <span class="n">what_timeL</span><span class="p">,</span>
  <span class="kt">unsigned</span> <span class="kt">long</span>  <span class="n">time_scaleLu</span><span class="p">,</span>
  <span class="n">A_Time</span>         <span class="o">*</span><span class="n">comp_timePT</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetEffectCamera</span></code></td>
<td><p class="first">Obtain the camera (if any) being used by After Effects to view the effect’s layer.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetEffectCamera</span><span class="p">(</span>
  <span class="n">PF_ProgPtr</span>    <span class="n">effect_ref</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_Time</span>  <span class="o">*</span><span class="n">comp_timePT</span><span class="p">,</span>
  <span class="n">AEGP_LayerH</span>   <span class="n">camera_layerPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetEffectCameraMatrix</span></code></td>
<td><p class="first">Obtain the transform used to move between the layer’s coordinate space and that of the containing composition.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetEffectCameraMatrix</span><span class="p">(</span>
  <span class="n">PF_ProgPtr</span>    <span class="n">effect_ref</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_Time</span>  <span class="o">*</span><span class="n">comp_timePT</span><span class="p">,</span>
  <span class="n">A_Matrix4</span>     <span class="o">*</span><span class="n">camera_matrixP</span><span class="p">,</span>
  <span class="n">A_FpLong</span>      <span class="o">*</span><span class="n">dst_to_planePF</span><span class="p">,</span>
  <span class="n">A_short</span>       <span class="o">*</span><span class="n">plane_widthPL</span><span class="p">,</span>
  <span class="n">A_short</span>       <span class="o">*</span><span class="n">plane_heightPL</span><span class="p">);</span>
</pre></div>
</div>
<p class="last">NOTE: In cases where the effect’s input layer has square pixels, but is in a non-square pixel composition,
you must correct for the pixel aspect ratio by premultiplying the matrix by <code class="docutils literal notranslate"><span class="pre">(1/parF,</span> <span class="pre">1,</span> <span class="pre">1)</span></code>.</p>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="aegp-geteffectcameramatrix-notes">
<h4>AEGP_GetEffectCameraMatrix Notes<a class="headerlink" href="#aegp-geteffectcameramatrix-notes" title="Permalink to this headline">¶</a></h4>
<p>The model view for the camera matrix is inverse of the matrix obtained from <code class="docutils literal notranslate"><span class="pre">AEGP_GetEffectCameraMatrix()</span></code>.</p>
<p>Also note that our matrix is row-based; OpenGL’s is column-based.</p>
<hr class="docutils" />
</div>
</div>
<div class="section" id="do-this-many-times">
<span id="aegps-aegp-suites-aegp-iterate-suite"></span><h3>Do This Many Times<a class="headerlink" href="#do-this-many-times" title="Permalink to this headline">¶</a></h3>
<p>Utilizes multiple processors (if available) for your computations.</p>
<div class="section" id="aegp-iteratesuite1">
<h4>AEGP_IterateSuite1<a class="headerlink" href="#aegp-iteratesuite1" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="78%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Function</strong></th>
<th class="head"><strong>Purpose</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetNumThreads</span></code></td>
<td><p class="first">Ask After Effects how many threads are currently available.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetNumThreads</span><span class="p">(</span>
  <span class="n">A_long</span>  <span class="o">*</span><span class="n">num_threadsPL</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_IterateGeneric</span></code></td>
<td><p class="first">Specify a function for After Effects to manage on multiple processors.
Can be any function pointer specified by <code class="docutils literal notranslate"><span class="pre">fn_func</span></code>, taking the arguments listed below.
See <a class="reference internal" href="index.html#aegps-implementation-private-data"><span class="std std-ref">Private Data</span></a> for a description of how refconPV is used.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_IterateGeneric</span><span class="p">(</span>
  <span class="n">A_long</span>  <span class="n">iterationsL</span><span class="p">,</span>
  <span class="kt">void</span>    <span class="o">*</span><span class="n">refconPV</span><span class="p">,</span>
  <span class="n">A_Err</span>   <span class="p">(</span><span class="o">*</span><span class="n">fn_func</span><span class="p">)</span>
    <span class="p">(</span><span class="kt">void</span>   <span class="o">*</span><span class="n">refconPV</span><span class="p">,</span>
    <span class="n">A_long</span>  <span class="n">thread_indexL</span><span class="p">,</span>
    <span class="n">A_long</span>  <span class="n">i</span><span class="p">,</span>
    <span class="n">A_long</span>  <span class="n">iterationsL</span><span class="p">));</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<hr class="docutils" />
</div>
</div>
<div class="section" id="file-import-manager-suite">
<span id="aegps-aegp-suites-file-import-manager-suite"></span><h3>File Import Manager Suite<a class="headerlink" href="#file-import-manager-suite" title="Permalink to this headline">¶</a></h3>
<p>The FIMSuite allows file types handled by AEGPs to appear as part of the After Effects import dialog, and drag-and-drop messaging.</p>
<p>These are not for use by AEIOs! Rather, they are for importing projects which are best represented as After Effects compositions.</p>
<div class="section" id="aegp-fimsuite3">
<h4>AEGP_FIMSuite3<a class="headerlink" href="#aegp-fimsuite3" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="27%" />
<col width="73%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Function</strong></th>
<th class="head"><strong>Purpose</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_RegisterImportFlavor</span></code></td>
<td><p class="first">Registers the name of the file type(s) supported by the plug-in.
Upon return, <code class="docutils literal notranslate"><span class="pre">imp_refP</span></code> will be a valid opaque reference, or <code class="docutils literal notranslate"><span class="pre">AE_FIM_ImportFlavorRef_NONE</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_RegisterImportFlavor</span><span class="p">(</span>
  <span class="k">const</span> <span class="kt">char</span>              <span class="o">*</span><span class="n">nameZ</span><span class="p">,</span>
  <span class="n">AE_FIM_ImportFlavorRef</span>  <span class="o">*</span><span class="n">imp_refP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_RegisterImportFlavorFileTypes</span></code></td>
<td><p class="first">Registers an array of file types and file extensions (the two arrays need not be of equal length) supported by the AEGP.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_RegisterImportFlavorFileTypes</span><span class="p">(</span>
  <span class="n">AE_FIM_ImportFlavorRef</span>  <span class="n">imp_ref</span><span class="p">,</span>
  <span class="kt">long</span>                    <span class="n">num_filekindsL</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">AEIO_FileKind</span>     <span class="o">*</span><span class="n">kindsAP</span><span class="p">,</span>
  <span class="kt">long</span>                    <span class="n">num_fileextsL</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">AEIO_FileKind</span>     <span class="o">*</span><span class="n">extsAP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_RegisterImportFlavorImportCallbacks</span></code></td>
<td><p class="first">Register the AEGP functions which will respond to import of different filetypes.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_RegisterImportFlavorImportCallbacks</span><span class="p">(</span>
  <span class="n">AE_FIM_ImportFlavorRef</span>        <span class="n">ref</span><span class="p">,</span>
  <span class="n">AE_FIM_ImportFlags</span>            <span class="n">single_flag</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">AE_FIM_ImportCallbacks</span>  <span class="o">*</span><span class="n">imp_cbsP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetImportedItem</span></code></td>
<td><p class="first">Designates an item as having been imported (possibly replacing an existing item), and sets associated import options.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetImportedItem</span><span class="p">(</span>
  <span class="n">AE_FIM_ImportOptions</span>  <span class="n">imp_options</span><span class="p">,</span>
  <span class="n">AEGP_ItemH</span>            <span class="n">imported_itemH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<span id="document-aegps/cheating-effect-usage-of-aegp-suites"></span><div class="section" id="cheating-effect-usage-of-aegp-suites">
<span id="aegps-cheating-effect-usage-of-aegp-suites"></span><h2>Cheating Effect Usage of AEGP Suites<a class="headerlink" href="#cheating-effect-usage-of-aegp-suites" title="Permalink to this headline">¶</a></h2>
<p>As soon as we showed developers the initial implementation of AEGP suites, they wanted to “cheat” and use them from within effects. This is certainly possible, but please keep in mind that depending on factors outside the effect API (i.e., any information you get from the AEGP APIs) can lead to trouble. If After Effects thinks an effect has all the information it needs to render, it won’t (for example) update its parameters based on changes made through an AEGP function. We’re actively working on this dependency issue for future versions, but bear it in mind as you write effects which “masquerade” as AEGPs.</p>
<p>Effects can use some AEGP suites to take advantage of camera and lighting information, as well as the <code class="docutils literal notranslate"><span class="pre">AEGP_GetLayerParentComp</span></code> and <code class="docutils literal notranslate"><span class="pre">AEGP_GetCompBGColor</span></code> functions, from <a class="reference internal" href="index.html#aegps-aegp-suites-aegp-compsuite"><span class="std std-ref">AEGP_CompSuite11</span></a>. This should not be interpreted to mean that effects can use <em>any</em> AEGP suite calls. Also, see <a class="reference internal" href="index.html#effect-ui-events-effect-ui-events"><span class="std std-ref">Effect UI &amp; Events</span></a> for more information on effects adding keyframes.</p>
<p><a class="reference internal" href="index.html#aegps-aegp-suites-pf-interface-suite"><span class="std std-ref">AEGP_PFInterfaceSuite</span></a> is the starting point. The functions in this suite allow you to retrieve the AEGP_LayerH for the layer to which the effect is applied, and the AEGP_EffectRefH for the instance of your effect. <code class="docutils literal notranslate"><span class="pre">AEGP_RegisterWithAEGP</span></code> from <a class="reference internal" href="index.html#aegps-aegp-suites-aegp-utilitysuite"><span class="std std-ref">AEGP_UtilitySuite6</span></a> allows you to get an AEGP_PluginID, which is needed for many AEGP calls.</p>
<hr class="docutils" />
<div class="section" id="depending-on-aegp-queries">
<h3>Depending on AEGP Queries<a class="headerlink" href="#depending-on-aegp-queries" title="Permalink to this headline">¶</a></h3>
<p>One word: Don’t. Effects cannot allow the results of AEGP queries to control what is rendered, without appropriately storing those query results (usually in sequence data), cancelling their own render, and forcing a re-render using the queried information.</p>
<p>This is tricky.</p>
<p>Failure to do so will result in nasty, subtle caching bugs guaranteed to cause hair loss and weight gain.</p>
</div>
</div>
<span id="document-aegps/aegp-details"></span><div class="section" id="aegp-details">
<span id="aegps-aegp-details"></span><h2>AEGP Details<a class="headerlink" href="#aegp-details" title="Permalink to this headline">¶</a></h2>
<div class="section" id="have-a-cookie">
<h3>Have A Cookie<a class="headerlink" href="#have-a-cookie" title="Permalink to this headline">¶</a></h3>
<p>In cases where After Effects must preserve state information around the functions your AEGP calls (as when an artisan is rendering a frame, or a keyframer is adding and removing a series of keyframes from the same stream), you’ll call begin() and end() functions.</p>
<p>Typically, the begin function will return an opaque identifier, or ‘cookie’, which you must then pass to the functions being used. The end function will properly dispose of the cookie. See <code class="docutils literal notranslate"><span class="pre">AEGP_StartAddKeyframes()</span></code> (under <a class="reference internal" href="index.html#aegps-aegp-suites-aegp-keyframesuite"><span class="std std-ref">AEGP_KeyframeSuite3</span></a>) for an example.</p>
</div>
<hr class="docutils" />
<div class="section" id="modifying-items-in-the-render-queue">
<h3>Modifying Items In The Render Queue<a class="headerlink" href="#modifying-items-in-the-render-queue" title="Permalink to this headline">¶</a></h3>
<p>If you call <code class="docutils literal notranslate"><span class="pre">AEGP_AddCompToRenderQueue</span></code> (from <a class="reference internal" href="index.html#aegps-aegp-suites-aegp-renderqueuesuite"><span class="std std-ref">AEGP_RenderQueueSuite1</span></a>), or if the user manually adds or removes a composition from the render queue, all references to render queue items are invalidated. Similarly, adding or removing output modules invalidates any such references for each render queue item.</p>
</div>
<hr class="docutils" />
<div class="section" id="names-and-solids">
<h3>Names And Solids<a class="headerlink" href="#names-and-solids" title="Permalink to this headline">¶</a></h3>
<p>Solids have names in the After Effects UI, but not in their <code class="docutils literal notranslate"><span class="pre">PF_LayerDef</span></code> <a class="reference internal" href="index.html#effect-basics-pf-effectworld"><span class="std std-ref">PF_EffectWorld / PF_LayerDef</span></a>. Consequently, their names cannot be retrieved by <code class="docutils literal notranslate"><span class="pre">AEGP_GetItemName</span></code> (in <a class="reference internal" href="index.html#aegps-aegp-suites-aegp-itemsuite"><span class="std std-ref">AEGP_ItemSuite9</span></a>) or <code class="docutils literal notranslate"><span class="pre">AEGP_GetLayerName</span></code> (in <a class="reference internal" href="index.html#aegps-aegp-suites-aegp-layersuite"><span class="std std-ref">AEGP_LayerSuite8</span></a>).</p>
<p>However, you can use the ItemH associated with them to <code class="docutils literal notranslate"><span class="pre">AEGP_GetItemName</span></code> (from <a class="reference internal" href="index.html#aegps-aegp-suites-aegp-itemsuite"><span class="std std-ref">AEGP_ItemSuite9</span></a>).</p>
</div>
<hr class="docutils" />
<div class="section" id="reporting-errors-and-problems">
<h3>Reporting Errors And Problems<a class="headerlink" href="#reporting-errors-and-problems" title="Permalink to this headline">¶</a></h3>
<p>Use <code class="docutils literal notranslate"><span class="pre">AEGP_ItemSuite&gt;AEGP_ReportInfo()</span></code> to report information to users, and identify your plug-in. AEIO plug-ins use the msg_func pointer contained in the AEIO_BasicData they’re passed (with every function) instead.</p>
</div>
<hr class="docutils" />
<div class="section" id="transforms-what-happens-first">
<h3>Transforms: What Happens First?<a class="headerlink" href="#transforms-what-happens-first" title="Permalink to this headline">¶</a></h3>
<p>After Effects computes rotation based on auto-orientation (towards path, or point of interest), then computes Orientation, then computes X, Y, and Z rotation.</p>
</div>
<hr class="docutils" />
<div class="section" id="accessing-pixels-from-effect-layer-parameters">
<h3>Accessing Pixels From Effect Layer Parameters<a class="headerlink" href="#accessing-pixels-from-effect-layer-parameters" title="Permalink to this headline">¶</a></h3>
<p>Use <code class="docutils literal notranslate"><span class="pre">AEGP_GetNewStreamValue</span></code> (in <a class="reference internal" href="index.html#aegps-aegp-suites-aegp-streamsuite"><span class="std std-ref">AEGP_StreamSuite5</span></a>) to get the layer’s <code class="docutils literal notranslate"><span class="pre">layer_id</span></code>, then the new <code class="docutils literal notranslate"><span class="pre">AEGP_GetLayerFromLayerID</span></code> (in <a class="reference internal" href="index.html#aegps-aegp-suites-aegp-layersuite"><span class="std std-ref">AEGP_LayerSuite8</span></a>) to get the <code class="docutils literal notranslate"><span class="pre">AEGP_LayerH</span></code>.</p>
</div>
</div>
</div>
<div class="toctree-wrapper compound">
<span id="document-artisans/artisans"></span><div class="section" id="artisans">
<span id="artisans-artisans"></span><h2>Artisans<a class="headerlink" href="#artisans" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you’re considering developing an Artisan, please talk it over with us first.</p>
</div>
<p>The Artisan API exposes function hooks necessary for a plug-in to provide rendered output of 3D layers, taking over completely from After Effects (which still handles all rendering of 2D layers). There can be only one Artisan per composition, chosen from within the <em>Composition Settings</em> &gt; <em>Advanced</em> dialog. Artisans render the 3D environment, asking After Effects for information about each element in the composition. As you might guess, this is a vast and tedious process. This API is not recommended for anyone without a strong need to override After Effects’ 3D rendering.</p>
<p>Artisans may share information with effects written to communicate with them, but effects may not initiate this communication. Many of the suites used by Artisans require a rendering context which is generated only after all effects have been applied to the layer.</p>
<hr class="docutils" />
<div class="section" id="interactive-artisans">
<h3>Interactive Artisans<a class="headerlink" href="#interactive-artisans" title="Permalink to this headline">¶</a></h3>
<p>These differ from standard artisans in that they handle all layers in a composition (not just those which the user has made 3D), and they will only ever be called for onscreen display, never for rendered final output (the rendering calls “fall through” to the default artisan).</p>
</div>
</div>
<span id="document-artisans/artisan-data-types"></span><div class="section" id="artisan-data-types">
<span id="artisans-artisan-data-types"></span><h2>Artisan Data Types<a class="headerlink" href="#artisan-data-types" title="Permalink to this headline">¶</a></h2>
<p>Below are the data types most commonly used in the Artisan API.</p>
<hr class="docutils" />
<div class="section" id="data-types-used-in-the-artisan-api">
<h3>Data Types Used In The Artisan API<a class="headerlink" href="#data-types-used-in-the-artisan-api" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="75%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Type</strong></th>
<th class="head"><strong>Describes</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_RenderLayerContextH</span></code></td>
<td>State information at the time of a render request, sent to an Artisan by After Effects.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PR_RenderContextH</span></code></td>
<td>A collection of settings defining what is to be rendered, and how.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SoundDataH</span></code></td>
<td>The audio settings used for a given layer.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_RenderReceiptH</span></code>
<code class="docutils literal notranslate"><span class="pre">AEGP_FrameReceiptH</span></code></td>
<td>Used by Artisans when rendering.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_WorldH</span></code></td>
<td>A frame of pixels.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_RenderOptionsH</span></code></td>
<td>The settings associated with a render queue item.</td>
</tr>
</tbody>
</table>
</div>
<hr class="docutils" />
<div class="section" id="horz-vert">
<h3>Horz? Vert?<a class="headerlink" href="#horz-vert" title="Permalink to this headline">¶</a></h3>
<p>After Effects’ matrix is row based; OpenGL’s is column based. This means more work for you. Yay, billable hours!</p>
</div>
<hr class="docutils" />
<div class="section" id="implementation-and-design">
<h3>Implementation And Design<a class="headerlink" href="#implementation-and-design" title="Permalink to this headline">¶</a></h3>
<p>An Artisan is nearly an application unto itself. Because we realized early in the After Effects 5.0 that there are many ways to approach the problems inherent in 3D rendering; intersections and shading, for example.</p>
<p>We provided an API with which we and third parties (yes, we really do use our own APIs) could implement any 3D rendering scheme desired.</p>
</div>
<hr class="docutils" />
<div class="section" id="d-compositing-not-modeling">
<h3>3D Compositing, Not Modeling<a class="headerlink" href="#d-compositing-not-modeling" title="Permalink to this headline">¶</a></h3>
<p>After Effects is <em>not</em> a 3D modeling application. Users work in a responsive mode, switching to higher quality only at for proofing or final output. Consider providing at least two quality modes, one for layout and another for final output. Be conscious of render time in low quality mode.</p>
</div>
<hr class="docutils" />
<div class="section" id="registering-an-artisan">
<h3>Registering An Artisan<a class="headerlink" href="#registering-an-artisan" title="Permalink to this headline">¶</a></h3>
<p>An Artisan is an AEGP, and has a single entry point. Artisans must also register their own function entry points and have a special callback for this purpose. See <code class="docutils literal notranslate"><span class="pre">AEGP_RegisterArtisan()</span></code> from <a class="reference internal" href="index.html#aegps-aegp-suites-aegp-registersuites"><span class="std std-ref">AEGP_RegisterSuites5</span></a>.</p>
<p>This tables shows the functions that Artisans can support as defined by <code class="docutils literal notranslate"><span class="pre">PR_ArtisanEntryPoints</span></code>: only <code class="docutils literal notranslate"><span class="pre">render_func</span></code> is required.</p>
<div class="section" id="artisan-entry-points">
<h4>Artisan Entry Points<a class="headerlink" href="#artisan-entry-points" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="18%" />
<col width="82%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>PR_ArtisanEntryPoints</strong></th>
<th class="head">&#160;</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">global_setup_func0</span></code></td>
<td><p class="first">Called only once, right after <code class="docutils literal notranslate"><span class="pre">GP_Main</span></code>. The global data is common across all instances of the plug-in.
If you allocate memory during Global Setup, you must free it during your <code class="docutils literal notranslate"><span class="pre">global_setdown_func</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PR_GlobalSetupFunc</span><span class="p">(</span>
  <span class="k">const</span> <span class="n">PR_InData</span>    <span class="o">*</span><span class="n">in_dataP</span><span class="p">,</span>
  <span class="n">PR_GlobalContextH</span>  <span class="n">global_contextH</span><span class="p">,</span>
  <span class="n">PR_GlobalDataH</span>     <span class="o">*</span><span class="n">global_dataPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">global_setdown_func0</span></code></td>
<td><p class="first">Dispose of any global data you allocated.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PR_GlobalSetdownFunc</span><span class="p">(</span>
  <span class="k">const</span> <span class="n">PR_InData</span>    <span class="o">*</span><span class="n">in_dataP</span><span class="p">,</span>
  <span class="n">PR_GlobalContextH</span>  <span class="n">global_contextH</span><span class="p">,</span>
  <span class="n">PR_GlobalDataH</span>     <span class="n">global_dataH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">global_do_about_func0</span></code></td>
<td><p class="first">Tell the world about yourself! Use <code class="docutils literal notranslate"><span class="pre">in_dataP&gt;msg_func</span></code> to display your dialog.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PR_GlobalDoAboutFunc</span><span class="p">(</span>
  <span class="k">const</span> <span class="n">PR_InData</span>    <span class="o">*</span><span class="n">in_dataP</span><span class="p">,</span>
  <span class="n">PR_GlobalContextH</span>  <span class="n">global_contextH</span><span class="p">,</span>
  <span class="n">PR_GlobalDataH</span>     <span class="n">global_dataH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">setup_instance_func0</span></code></td>
<td><p class="first">Allocate and instantiate any data specific to this instance of your Artisan.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PR_InstanceSetupFunc</span><span class="p">(</span>
  <span class="k">const</span> <span class="n">PR_InData</span>      <span class="o">*</span><span class="n">in_dataP</span><span class="p">,</span>
  <span class="n">PR_GlobalContextH</span>    <span class="n">global_contextH</span><span class="p">,</span>
  <span class="n">PR_InstanceContextH</span>  <span class="n">instance_contextH</span><span class="p">,</span>
  <span class="n">PR_GlobalDataH</span>       <span class="n">global_dataH</span><span class="p">,</span>
  <span class="n">PR_InstanceFlags</span>     <span class="n">flags</span><span class="p">,</span>
  <span class="n">PR_FlatHandle</span>        <span class="n">flat_dataH0</span><span class="p">,</span>
  <span class="n">PR_InstanceDataH</span>     <span class="o">*</span><span class="n">instance_dataPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">setdown_instance_func0</span></code></td>
<td><p class="first">Deallocate and free any data specific to this instance of your Artisan.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PR_InstanceSetdownFunc</span><span class="p">(</span>
  <span class="k">const</span> <span class="n">PR_InData</span>      <span class="o">*</span><span class="n">in_dataP</span><span class="p">,</span>
  <span class="n">PR_GlobalContextH</span>    <span class="n">global_contextH</span><span class="p">,</span>
  <span class="n">PR_InstanceContextH</span>  <span class="n">instance_contextH</span><span class="p">,</span>
  <span class="n">PR_GlobalDataH</span>       <span class="n">global_dataH</span><span class="p">,</span>
  <span class="n">PR_InstanceDataH</span>     <span class="n">instance_dataH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">flatten_instance_func0</span></code></td>
<td><p class="first">Flatten your data in preparation to being written to disk. (making sure it’s OS independent, if your Artisan is).</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PR_FlattenInstanceFunc</span><span class="p">(</span>
  <span class="k">const</span> <span class="n">PR_InData</span>      <span class="o">*</span><span class="n">in_dataP</span><span class="p">,</span>
  <span class="n">PR_GlobalContextH</span>    <span class="n">global_contextH</span><span class="p">,</span>
  <span class="n">PR_InstanceContextH</span>  <span class="n">instance_contextH</span><span class="p">,</span>
  <span class="n">PR_GlobalDataH</span>       <span class="n">global_dataH</span><span class="p">,</span>
  <span class="n">PR_InstanceDataH</span>     <span class="n">instance_dataH</span><span class="p">,</span>
  <span class="n">PR_FlatHandle</span>        <span class="o">*</span><span class="n">flatH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">do_instance_dialog_func0</span></code></td>
<td><p class="first">If your Artisan has a additional parameters (accessed through its Options dialog), this function will be called to get and set them.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PR_DoInstanceDialogFunc</span><span class="p">(</span>
  <span class="k">const</span> <span class="n">PR_InData</span>      <span class="o">*</span><span class="n">in_dataP</span><span class="p">,</span>
  <span class="n">PR_GlobalContextH</span>    <span class="n">global_contextH</span><span class="p">,</span>
  <span class="n">PR_InstanceContextH</span>  <span class="n">instance_contextH</span><span class="p">,</span>
  <span class="n">PR_GlobalDataH</span>       <span class="n">global_dataH</span><span class="p">,</span>
  <span class="n">PR_InstanceDataH</span>     <span class="n">instance_dataH</span><span class="p">,</span>
  <span class="n">PR_DialogResult</span>      <span class="o">*</span><span class="n">resultP</span><span class="p">);</span>
</pre></div>
</div>
<p class="last"><code class="docutils literal notranslate"><span class="pre">PR_DialogResultis</span></code> is either <code class="docutils literal notranslate"><span class="pre">PR_DialogResult_NO_CHANGE</span></code> or <code class="docutils literal notranslate"><span class="pre">PR_DialogResult_CHANGE_MADE</span></code>.</p>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">frame_setup_func0</span></code></td>
<td><p class="first">Perform any setup necessary to render a frame (called immediately before rendering).</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PR_FrameSetupFunc</span><span class="p">(</span>
  <span class="k">const</span> <span class="n">PR_InData</span>      <span class="o">*</span><span class="n">in_dataP</span><span class="p">,</span>
  <span class="n">PR_GlobalContextH</span>    <span class="n">global_contextH</span><span class="p">,</span>
  <span class="n">PR_InstanceContextH</span>  <span class="n">instance_contextH</span>
  <span class="n">PR_RenderContextH</span>    <span class="n">render_contextH</span><span class="p">,</span>
  <span class="n">PR_GlobalDataH</span>       <span class="n">global_dataH</span><span class="p">,</span>
  <span class="n">PR_InstanceDataH</span>     <span class="n">instance_dataH</span><span class="p">,</span>
  <span class="n">PR_RenderDataH</span>       <span class="o">*</span><span class="n">render_dataPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">frame_setdown_func0</span></code></td>
<td><p class="first">Dispose of any setup data allocated during <code class="docutils literal notranslate"><span class="pre">frame_setup</span></code> (sent immediately after rendering).</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PR_FrameSetdownFunc</span><span class="p">(</span>
  <span class="k">const</span> <span class="n">PR_InData</span>      <span class="o">*</span><span class="n">in_dataP</span><span class="p">,</span>
  <span class="n">PR_GlobalContextH</span>    <span class="n">global_contextH</span><span class="p">,</span>
  <span class="n">PR_InstanceContextH</span>  <span class="n">instance_contextH</span>
  <span class="n">PR_RenderContextH</span>    <span class="n">render_contextH</span><span class="p">,</span>
  <span class="n">PR_GlobalDataH</span>       <span class="n">global_dataH</span><span class="p">,</span>
  <span class="n">PR_InstanceDataH</span>     <span class="n">instance_dataH</span><span class="p">,</span>
  <span class="n">PR_RenderDataH</span>       <span class="n">render_dataH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">render_func</span></code></td>
<td><p class="first">Render the scene.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PR_FrameRenderFunc</span><span class="p">(</span>
  <span class="k">const</span> <span class="n">PR_InData</span>      <span class="o">*</span><span class="n">in_dataP</span><span class="p">,</span>
  <span class="n">PR_GlobalContextH</span>    <span class="n">global_contextH</span><span class="p">,</span>
  <span class="n">PR_InstanceContextH</span>  <span class="n">instance_contextH</span>
  <span class="n">PR_RenderContextH</span>    <span class="n">render_contextH</span><span class="p">,</span>
  <span class="n">PR_GlobalDataH</span>       <span class="n">global_dataH</span><span class="p">,</span>
  <span class="n">PR_InstanceDataH</span>     <span class="n">instance_dataH</span><span class="p">,</span>
  <span class="n">PR_RenderDataH</span>       <span class="n">render_dataH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">query_func0</span></code></td>
<td><p class="first">Artisans can draw their own projection axes, should the need arise.
After Effects will call this function to obtain the transform between the composition world and those axes,
as well as for a number of other functions related to on- and off-screen
preview drawing (the former is relevant only to interactive artisans).</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PR_QueryFunc</span><span class="p">(</span>
  <span class="k">const</span> <span class="n">PR_InData</span>      <span class="o">*</span><span class="n">in_dataP</span><span class="p">,</span>
  <span class="n">PR_GlobalContextH</span>    <span class="n">global_contextH</span><span class="p">,</span>
  <span class="n">PR_InstanceContextH</span>  <span class="n">instance_contextH</span>
  <span class="n">PR_QueryContextH</span>     <span class="n">query_contextH</span><span class="p">,</span>
  <span class="n">PR_QueryType</span>         <span class="n">query_type</span><span class="p">,</span>
  <span class="n">PR_GlobalDataH</span>       <span class="n">global_dataH</span><span class="p">,</span>
  <span class="n">PR_InstanceDataH</span>     <span class="n">instance_dataH</span><span class="p">);</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">PR_QueryType</span></code> can be one of the following:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">PR_QueryType_NONE</span> <span class="pre">=</span> <span class="pre">0</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">PR_QueryType_TRANSFORM</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">PR_QueryType_INTERACTIVE_WINDOW_DISPOSE</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">PR_QueryType_INTERACTIVE_WINDOW_CLEAR</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">PR_QueryType_INTERACTIVE_WINDOW_FROZEN_PROXY</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">PR_QueryType_INTERACTIVE_SWAP_BUFFER</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">PR_QueryType_INTERACTIVE_DRAW_PROCS</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">PR_QueryType_PREPARE_FOR_LINE_DRAWING</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">PR_QueryType_UNPREPARE_FOR_LINE_DRAWING</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">PR_QueryType_GET_CURRENT_CONTEXT_SAFE_FOR_LINE_DRAWING</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">PR_QueryType_GET_ARTISAN_QUALITY</span></code></li>
</ul>
</div></blockquote>
<p class="last">New in CS6.</p>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<hr class="docutils" />
<div class="section" id="the-world-is-your-canvas">
<h3>The World Is Your Canvas<a class="headerlink" href="#the-world-is-your-canvas" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">AEGP_RenderTexture()</span></code> supplies the raw pixels of a layer, untransformed, into an arbitrarily-sized buffer.</p>
<p><code class="docutils literal notranslate"><span class="pre">AEGP_RenderLayer()</span></code> invokes the entire After Effects render pipeline, including transforms, masking, et cetera, providing the layer as it appears in its composition, in a composition-sized buffer.</p>
<p>If the layer being rendered is 3D, the default (Standard 3D) Artisan is invoked to perform any 3D geometrics.</p>
<p>Your Artisan can use this to render track matte layers, and apply them only in a strictly 2D sense, to the transformed 3D layer.</p>
<p>Before rendering, the Artisans that ship with After Effects apply an inverse transform to get square pixels, then re-apply the transform before display.</p>
<p>For example, if the pixel aspect ratio is 10/11 (DV NTSC), we multiply by 11/10 to get square pixels. We process and composite 3D layers, then re-divide to get back to the original pixel aspect ratio.</p>
<p>The following suite supplies the layers, compositions, texture and destination buffers. This is a vital suite for all artisans.</p>
<div class="section" id="aegp-canvassuite8">
<span id="artisans-artisan-data-types-aegp-canvassuite"></span><h4>AEGP_CanvasSuite8<a class="headerlink" href="#aegp-canvassuite8" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="27%" />
<col width="73%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Function</strong></th>
<th class="head"><strong>Purpose</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetCompToRender</span></code></td>
<td><p class="first">Given the render context provided to the Artisan at render time, returns a handle to the composition.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetCompToRender</span><span class="p">(</span>
  <span class="n">PR_RenderContextH</span>  <span class="n">render_contextH</span><span class="p">,</span>
  <span class="n">AEGP_CompH</span>         <span class="o">*</span><span class="n">compPH</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetNumLayersToRender</span></code></td>
<td><p class="first">Given the render context, returns the number of layers the Artisan needs to render.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetNumLayersToRender</span><span class="p">(</span>
  <span class="n">PR_RenderContextH</span>  <span class="n">render_contextH</span><span class="p">,</span>
  <span class="n">A_long</span>             <span class="o">*</span><span class="n">num_to_renderPL</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetNthLayerContextToRender</span></code></td>
<td><p class="first">Used to build a list of layers to render after determining the total number of layers that need rendering by the Artisan.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetNthLayerContextToRender</span><span class="p">(</span>
  <span class="n">PR_RenderContextH</span>         <span class="n">render_contextH</span><span class="p">,</span>
  <span class="n">A_long</span>                    <span class="n">n</span><span class="p">,</span>
  <span class="n">AEGP_RenderLayerContextH</span>  <span class="o">*</span><span class="n">layer_indexPH</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetLayerFromLayerContext</span></code></td>
<td><p class="first">Given a <code class="docutils literal notranslate"><span class="pre">AEGP_RenderLayerContextH</span></code>,retrieves the associated <code class="docutils literal notranslate"><span class="pre">AEGP_LayerH</span></code> (required by many suite functions).</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetLayerFromLayerContext</span><span class="p">(</span>
  <span class="k">const</span> <span class="n">PR_RenderContextH</span>   <span class="n">render_contextH</span><span class="p">,</span>
  <span class="n">AEGP_RenderLayerContextH</span>  <span class="n">layer_contextH</span><span class="p">,</span>
  <span class="n">AEGP_LayerH</span>               <span class="o">*</span><span class="n">layerPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetLayerAndSubLayerFromLayerContext</span></code></td>
<td><p class="first">Allows for rendering of sub-layers (as within a Photoshop file).</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetLayerAndSubLayerFromLayerContext</span><span class="p">(</span>
  <span class="k">const</span> <span class="n">PR_RenderContextH</span>   <span class="n">render_contextH</span><span class="p">,</span>
  <span class="n">AEGP_RenderLayerContextH</span>  <span class="n">layer_contextH</span><span class="p">,</span>
  <span class="n">AEGP_LayerH</span>               <span class="o">*</span><span class="n">layerPH</span><span class="p">,</span>
  <span class="n">AEGP_SubLayerIndex</span>        <span class="o">*</span><span class="n">sublayerP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetTopLayerFromLayerContext</span></code></td>
<td><p class="first">With collapsed geometrics “on” this gives the layer in the root composition containing the layer context.</p>
<p>With collapsed geometrics off this is the same as <code class="docutils literal notranslate"><span class="pre">AEGP_GetLayerFromLayerContext</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetTopLayerFromLayerContext</span><span class="p">(</span>
  <span class="k">const</span> <span class="n">PR_RenderContextH</span>   <span class="n">r_contextH</span><span class="p">,</span>
  <span class="n">AEGP_RenderLayerContextH</span>  <span class="n">l_contextH</span><span class="p">,</span>
  <span class="n">AEGP_LayerH</span>               <span class="o">*</span><span class="n">layerPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetCompRenderTime</span></code></td>
<td><p class="first">Given the render context, returns the current point in (composition) time to render.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetNthLayerIndexToRender</span><span class="p">(</span>
  <span class="n">PR_RenderContextH</span>  <span class="n">render_contextH</span><span class="p">,</span>
  <span class="n">A_long</span>             <span class="o">*</span><span class="n">time</span><span class="p">,</span>
  <span class="n">A_long</span>             <span class="o">*</span><span class="n">time_step</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetCompDestinationBuffer</span></code></td>
<td><p class="first">Given the render context, returns a buffer in which to place the final rendered output.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetCompToRender</span><span class="p">(</span>
  <span class="n">PR_RenderContextH</span>  <span class="n">render_contextH</span><span class="p">,</span>
  <span class="n">AEGP_CompH</span>         <span class="n">compH</span><span class="p">,</span>
  <span class="n">PF_EffectWorld</span>     <span class="o">*</span><span class="n">dst</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetROI</span></code></td>
<td><p class="first">Given the render context provided to the Artisan at render time, returns a handle to the composition.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetROI</span><span class="p">(</span>
  <span class="n">PR_RenderContextH</span>  <span class="n">render_contextH</span><span class="p">,</span>
  <span class="n">A_LegacyRect</span>       <span class="o">*</span><span class="n">roiPR</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_RenderTexture</span></code></td>
<td><p class="first">Given the render context and layer, returns the layer texture.</p>
<p>All parameters with a trailing ‘0’ are optional; the returned <code class="docutils literal notranslate"><span class="pre">PF_EffectWorld</span></code> can be NULL.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_RenderTexture</span><span class="p">(</span>
  <span class="n">PR_RenderContextH</span>  <span class="n">render_contextH</span><span class="p">,</span>
  <span class="n">AEGP_LayerH</span>        <span class="n">layerH</span><span class="p">,</span>
  <span class="n">AEGP_RenderHints</span>   <span class="n">render_hints</span><span class="p">,</span>
  <span class="n">A_FloatPoint</span>       <span class="o">*</span><span class="n">suggested_scaleP0</span><span class="p">,</span>
  <span class="n">A_FloatRect</span>        <span class="o">*</span><span class="n">suggsted_src_rectP0</span><span class="p">,</span>
  <span class="n">A_Matrix3</span>          <span class="o">*</span><span class="n">src_matrixP0</span><span class="p">,</span>
  <span class="n">PF_EffectWorld</span>     <span class="o">*</span><span class="n">render_bufferP</span><span class="p">);</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">AEGP_RenderHints</span></code> contains one or more of the following:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">AEGP_RenderHints_NONE</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_RenderHints_IGNORE_EXTENTS</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_RenderHints_NO_TRANSFER_MODE</span></code></li>
</ul>
</div></blockquote>
<p class="last"><code class="docutils literal notranslate"><span class="pre">AEGP_RenderHints_NO_TRANSFER_MODE</span></code> prevents application of opacity &amp; transfer mode; for use with <code class="docutils literal notranslate"><span class="pre">RenderLayer</span></code> calls.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_DisposeTexture</span></code></td>
<td><p class="first">Disposes of an acquired layer texture.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_DisposeTexture</span><span class="p">(</span>
  <span class="n">PR_RenderContextH</span>  <span class="n">render_contextH</span><span class="p">,</span>
  <span class="n">AEGP_LayerH</span>        <span class="n">layerH</span><span class="p">,</span>
  <span class="n">AEGP_WorldH</span>        <span class="o">*</span><span class="n">dst0</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetFieldRender</span></code></td>
<td><p class="first">Returns the field settings of the given <code class="docutils literal notranslate"><span class="pre">PR_RenderContextH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetFieldRender</span><span class="p">(</span>
  <span class="n">PR_RenderContextH</span>  <span class="n">render_contextH</span><span class="p">,</span>
  <span class="n">PF_Field</span>           <span class="o">*</span><span class="n">field</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_ReportArtisanProgress</span></code></td>
<td><p class="first">Given the render context provided to the Artisan at render time, returns a handle to the composition.</p>
<p>Note: this is NOT thread-safe on macOS; only use this function when the current thread ID is 0.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_ReportArtisanProgress</span><span class="p">(</span>
  <span class="n">PR_RenderContextH</span>  <span class="n">render_contextH</span><span class="p">,</span>
  <span class="n">A_long</span>             <span class="n">countL</span><span class="p">,</span>
  <span class="n">A_long</span>             <span class="n">totalL</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetRenderDownsampleFactor</span></code></td>
<td><p class="first">Returns the downsample factor of the <code class="docutils literal notranslate"><span class="pre">PR_RenderContextH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetRenderDownsampleFactor</span><span class="p">(</span>
  <span class="n">PR_RenderContextH</span>      <span class="n">render_contextH</span><span class="p">,</span>
  <span class="n">AEGP_DownsampleFactor</span>  <span class="o">*</span><span class="n">dsfP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_IsBlankCanvas</span></code></td>
<td><p class="first">Determines whether the <code class="docutils literal notranslate"><span class="pre">PR_RenderContextH</span></code> is blank (empty).</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_IsBlankCanvas</span><span class="p">(</span>
  <span class="n">PR_RenderContextH</span>  <span class="n">render_contextH</span><span class="p">,</span>
  <span class="n">A_Boolean</span>          <span class="o">*</span><span class="n">is_blankPB</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetRenderLayerToWorldXform</span></code></td>
<td><p class="first">Given a render context and a layer (at a given time), retrieves the 4 by 4 transform to move between their coordinate spaces.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetRenderLayerToWorldXform</span><span class="p">(</span>
  <span class="n">PR_RenderContextH</span>         <span class="n">render_contextH</span><span class="p">,</span>
  <span class="n">AEGP_RenderLayerContextH</span>  <span class="n">layer_contextH</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_Time</span>              <span class="o">*</span><span class="n">comp_timeP</span><span class="p">,</span>
  <span class="n">A_Matrix4</span>                 <span class="o">*</span><span class="n">transform</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetRenderLayerBounds</span></code></td>
<td><p class="first">Retrieves the bounding rectangle of the layer_contextH (at a given time) within the render_contextH.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetRenderLayerBounds</span><span class="p">(</span>
  <span class="n">PR_RenderContextH</span>         <span class="n">render_contextH</span><span class="p">,</span>
  <span class="n">AEGP_RenderLayerContextH</span>  <span class="n">layer_contextH</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_Time</span>              <span class="o">*</span><span class="n">comp_timeP</span><span class="p">,</span>
  <span class="n">A_LegacyRect</span>              <span class="o">*</span><span class="n">boundsP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetRenderOpacity</span></code></td>
<td><p class="first">Returns the opacity of the given layer context at the given time, within the render context.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetRenderOpacity</span><span class="p">(</span>
  <span class="n">PR_RenderContextH</span>         <span class="n">render_contextH</span><span class="p">,</span>
  <span class="n">AEGP_RenderLayerContextH</span>  <span class="n">layer_contextH</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_Time</span>              <span class="o">*</span><span class="n">comp_timePT</span><span class="p">,</span>
  <span class="n">A_FpLong</span>                  <span class="o">*</span><span class="n">opacityPF</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_IsRenderLayerActive</span></code></td>
<td><p class="first">Returns whether or not a given layer context is active within the render context, at the given time.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_IsRenderLayerActive</span><span class="p">(</span>
  <span class="n">PR_RenderContextH</span>         <span class="n">render_contextH</span><span class="p">,</span>
  <span class="n">AEGP_RenderLayerContextH</span>  <span class="n">layer_contextH</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_Time</span>              <span class="o">*</span><span class="n">comp_timePT</span><span class="p">,</span>
  <span class="n">A_Boolean</span>                 <span class="o">*</span><span class="n">activePB</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetArtisanLayerProgress</span></code></td>
<td><p class="first">Sets the progress information for a rendering Artisan. countL is the number of layers completed,</p>
<p><code class="docutils literal notranslate"><span class="pre">num_layersL</span></code> is the total number of layers the Artisan is rendering.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetArtisanLayerProgress</span><span class="p">(</span>
  <span class="n">PR_RenderContextH</span>  <span class="n">render_contextH</span><span class="p">,</span>
  <span class="n">A_long</span>             <span class="n">countL</span><span class="p">,</span>
  <span class="n">A_long</span>             <span class="n">num_layersL</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_RenderLayerPlus</span></code></td>
<td><p class="first">Similar to <code class="docutils literal notranslate"><span class="pre">AEGP_RenderLayer</span></code>, but takes into account the <code class="docutils literal notranslate"><span class="pre">AEGP_RenderLayerContextH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_RenderLayerPlus</span><span class="p">(</span>
  <span class="n">PR_RenderContextH</span>          <span class="n">r_contextH</span><span class="p">,</span>
  <span class="n">AEGP_LayerH</span>                <span class="n">layerH</span><span class="p">,</span>
  <span class="n">AEGP_RenderLayerContextH</span>   <span class="n">l_contextH</span><span class="p">,</span>
  <span class="n">AEGP_RenderHints</span>           <span class="n">render_hints</span><span class="p">,</span>
  <span class="n">AEGP_WorldH</span>                <span class="o">*</span><span class="n">bufferP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetTrackMatteContext</span></code></td>
<td><p class="first">Retrieves the <code class="docutils literal notranslate"><span class="pre">AEGP_RenderLayerContextH</span></code> for the specified render and fill contexts.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetTrackMatteContext</span><span class="p">(</span>
  <span class="n">PR_RenderContextH</span>         <span class="n">rnder_contextH</span><span class="p">,</span>
  <span class="n">AEGP_RenderLayerContextH</span>  <span class="n">fill_contextH</span><span class="p">,</span>
  <span class="n">AEGP_RenderLayerContextH</span>  <span class="o">*</span><span class="n">mattePH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_RenderTextureWithReceipt</span></code></td>
<td><p class="first">Renders a texture into an <code class="docutils literal notranslate"><span class="pre">AEGP_WorldH</span></code>, and provides an <code class="docutils literal notranslate"><span class="pre">AEGP_RenderReceiptH</span></code> for the operation.</p>
<p>The returned <code class="docutils literal notranslate"><span class="pre">receiptPH</span></code> must be disposed of with <code class="docutils literal notranslate"><span class="pre">AEGP_DisposeRenderReceipt</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_RenderTextureWithReceipt</span><span class="p">(</span>
  <span class="n">PR_RenderContextH</span>         <span class="n">render_contextH</span><span class="p">,</span>
  <span class="n">AEGP_RenderLayerContextH</span>  <span class="n">layer_contextH</span><span class="p">,</span>
  <span class="n">AEGP_RenderHints</span>          <span class="n">render_hints</span><span class="p">,</span>
  <span class="n">A_FloatPoint</span>              <span class="o">*</span><span class="n">suggested_scaleP0</span><span class="p">,</span>
  <span class="n">A_FloatRect</span>               <span class="o">*</span><span class="n">suggest_src_rectP0</span><span class="p">,</span>
  <span class="n">A_Matrix3</span>                 <span class="o">*</span><span class="n">src_matrixP0</span><span class="p">,</span>
  <span class="n">AEGP_RenderReceiptH</span>       <span class="o">*</span><span class="n">receiptPH</span><span class="p">,</span>
  <span class="n">AEGP_WorldH</span>               <span class="o">*</span><span class="n">dstPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetNumberOfSoftwareEffects</span></code></td>
<td><p class="first">Returns the number of software effects applied in the given <code class="docutils literal notranslate"><span class="pre">AEGP_RenderLayerContextH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetNumberOfSoftwareEffects</span><span class="p">(</span>
  <span class="n">PR_RenderContextH</span>         <span class="n">ren_contextH</span><span class="p">,</span>
  <span class="n">AEGP_RenderLayerContextH</span>  <span class="n">lyr_contextH</span><span class="p">,</span>
  <span class="n">A_short</span>                   <span class="o">*</span><span class="n">num_sft_FXPS</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_RenderLayerPlusWithReceipt</span></code></td>
<td><p class="first">An improvement over <code class="docutils literal notranslate"><span class="pre">AEGP_RenderLayerPlus</span></code>, this function also provides an <code class="docutils literal notranslate"><span class="pre">AEGP_RenderReceiptH</span></code> for caching purposes.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_RenderLayerPlusWithReceipt</span><span class="p">(</span>
  <span class="n">PR_RenderContextH</span>            <span class="n">render_contextH</span><span class="p">,</span>
  <span class="n">AEGP_LayerH</span>                  <span class="n">layerH</span><span class="p">,</span>
  <span class="n">AEGP_RenderLayerContextH</span>     <span class="n">layer_contextH</span><span class="p">,</span>
  <span class="n">AEGP_RenderHints</span>             <span class="n">render_hints</span><span class="p">,</span>
  <span class="n">AEGP_NumEffectsToRenderType</span>  <span class="n">num_effectsS</span><span class="p">,</span>
  <span class="n">AEGP_RenderReceiptH</span>          <span class="o">*</span><span class="n">receiptPH</span><span class="p">,</span>
  <span class="n">AEGP_WorldH</span>                  <span class="o">*</span><span class="n">bufferPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_DisposeRenderReceipt</span></code></td>
<td><p class="first">Frees an <code class="docutils literal notranslate"><span class="pre">AEGP_RenderReceiptH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_DisposeRenderReceipt</span><span class="p">(</span>
  <span class="n">AEGP_RenderReceiptH</span>  <span class="n">receiptH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_CheckRenderReceipt</span></code></td>
<td><p class="first">Checks with After Effects’ internal caching to determine whether a given <code class="docutils literal notranslate"><span class="pre">AEGP_RenderReceiptH</span></code> is still valid.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_CheckRenderReceipt</span><span class="p">(</span>
  <span class="n">PR_RenderContextH</span>            <span class="n">current_contextH</span><span class="p">,</span>
  <span class="n">AEGP_RenderLayerContextH</span>     <span class="n">current_lyr_ctxtH</span><span class="p">,</span>
  <span class="n">AEGP_RenderReceiptH</span>          <span class="n">old_receiptH</span><span class="p">,</span>
  <span class="n">A_Boolean</span>                    <span class="n">check_aceB</span><span class="p">,</span>
  <span class="n">AEGP_NumEffectsToRenderType</span>  <span class="n">num_effectsS</span><span class="p">,</span>
  <span class="n">AEGP_RenderReceiptStatus</span>     <span class="o">*</span><span class="n">receipt_statusP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GenerateRenderReceipt</span></code></td>
<td><p class="first">Generates a <code class="docutils literal notranslate"><span class="pre">AEGP_RenderReceiptH</span></code> for a layer as if the first <code class="docutils literal notranslate"><span class="pre">num_effectsS</span></code> have been rendered.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GenerateRenderReceipt</span><span class="p">(</span>
  <span class="n">PR_RenderContextH</span>            <span class="n">current_contextH</span><span class="p">,</span>
  <span class="n">AEGP_RenderLayerContextH</span>     <span class="n">current_lyr_contextH</span><span class="p">,</span>
  <span class="n">AEGP_NumEffectsToRenderType</span>  <span class="n">num_effectsS</span><span class="p">,</span>
  <span class="n">AEGP_RenderReceiptH</span>          <span class="o">*</span><span class="n">render_receiptPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetNumBinsToRender</span></code></td>
<td><p class="first">Returns the number of bins After Effects wants the artisan to render.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetNumBinsToRender</span><span class="p">(</span>
  <span class="k">const</span> <span class="n">PR_RenderContextH</span>  <span class="n">contextH</span><span class="p">,</span>
  <span class="n">A_long</span>                   <span class="o">*</span><span class="n">num_binsPL</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetNthBin</span></code></td>
<td><p class="first">Sets the given render context to be the n-th bin to be rendered by After Effects.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetNthBin</span><span class="p">(</span>
  <span class="k">const</span> <span class="n">PR_RenderContextH</span>  <span class="n">contextH</span><span class="p">,</span>
  <span class="n">A_long</span>                   <span class="n">n</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetBinType</span></code></td>
<td><p class="first">Retrieves the type of the given bin.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetBinType</span><span class="p">(</span>
  <span class="k">const</span> <span class="n">PR_RenderContextH</span>  <span class="n">contextH</span><span class="p">,</span>
  <span class="n">AEGP_BinType</span>             <span class="o">*</span><span class="n">bin_typeP</span><span class="p">);</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">AEGP_BinType</span></code> will be one of the following:</p>
<blockquote class="last">
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">AEGP_BinType_NONE</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_BinType_2D</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_BinType_3D</span></code></li>
</ul>
</div></blockquote>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetRenderLayerToWorldXform2D3D</span></code></td>
<td><p class="first">Retrieves the transform to correctly orient the layer being rendered with the output world.</p>
<p>Pass <code class="docutils literal notranslate"><span class="pre">TRUE</span></code> for <code class="docutils literal notranslate"><span class="pre">only_2dB</span></code> to constrain the transform to two dimensions.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetRenderLayerToWorldXform2D3D</span><span class="p">(</span>
  <span class="n">PR_RenderContextH</span>         <span class="n">render_contextH</span><span class="p">,</span>
  <span class="n">AEGP_RenderLayerContextH</span>  <span class="n">layer_contextH</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_Time</span>              <span class="o">*</span><span class="n">comp_timeP</span><span class="p">,</span>
  <span class="n">A_Boolean</span>                 <span class="n">only_2dB</span><span class="p">,</span>
  <span class="n">A_Matrix4</span>                 <span class="o">*</span><span class="n">transformP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Functions below are for interactive artisans only.</p>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="75%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Function</strong></th>
<th class="head"><strong>Purpose</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetPlatformWindowRef</span></code></td>
<td><p class="first">Retrieves the platform-specific window context into which to draw the given <code class="docutils literal notranslate"><span class="pre">PR_RenderContextH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetPlatformWindowRef</span><span class="p">(</span>
  <span class="k">const</span> <span class="n">PR_RenderContextH</span>  <span class="n">contextH</span><span class="p">,</span>
  <span class="n">AEGP_PlatformWindowRef</span>   <span class="o">*</span><span class="n">window_refP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetViewportScale</span></code></td>
<td><p class="first">Retrieves the source-to-frame downsample factor for the given <code class="docutils literal notranslate"><span class="pre">PR_RenderContextH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetViewportScale</span><span class="p">(</span>
  <span class="k">const</span> <span class="n">PR_RenderContextH</span>  <span class="n">contextH</span><span class="p">,</span>
  <span class="n">A_FpLong</span>                 <span class="o">*</span><span class="n">scale_xPF</span><span class="p">,</span>
  <span class="n">A_FpLong</span>                 <span class="o">*</span><span class="n">scale_yPF</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetViewportOrigin</span></code></td>
<td><p class="first">Retrieves to origin of the source, within the frame (necessary to translate between the two), for the given <code class="docutils literal notranslate"><span class="pre">PR_RenderContextH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetViewportOrigin</span><span class="p">(</span>
  <span class="k">const</span> <span class="n">PR_RenderContextH</span>  <span class="n">contextH</span><span class="p">,</span>
  <span class="n">A_long</span>                   <span class="o">*</span><span class="n">origin_xPL</span><span class="p">,</span>
  <span class="n">A_long</span>                   <span class="o">*</span><span class="n">origin_yPL</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetViewportRect</span></code></td>
<td><p class="first">Retrieves the bounding rectangle for the area to be drawn, for the given <code class="docutils literal notranslate"><span class="pre">PR_RenderContextH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetViewportRect</span><span class="p">(</span>
  <span class="k">const</span> <span class="n">PR_RenderContextH</span>  <span class="n">contextH</span><span class="p">,</span>
  <span class="n">A_LegacyRect</span>             <span class="o">*</span><span class="n">v_rectPR</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetFallowColor</span></code></td>
<td><p class="first">Retrieves the color used for the fallow regions in the given <code class="docutils literal notranslate"><span class="pre">PR_RenderContextH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetFallowColor</span><span class="p">(</span>
  <span class="k">const</span> <span class="n">PR_RenderContextH</span>  <span class="n">contextH</span><span class="p">,</span>
  <span class="n">PF_Pixel8</span>                <span class="o">*</span><span class="n">fallow_colorP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetInteractiveCheckerboard</span></code></td>
<td><p class="first">Retrieves whether or not the checkerboard is currently active for the given <code class="docutils literal notranslate"><span class="pre">PR_RenderContextH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetInteractiveCheckerboard</span><span class="p">(</span>
  <span class="k">const</span> <span class="n">PR_RenderContextH</span>  <span class="n">contextH</span><span class="p">,</span>
  <span class="n">A_Boolean</span>                <span class="o">*</span><span class="n">cboard_onPB</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetInteractiveCheckerboardColors</span></code></td>
<td><p class="first">Retrieves the colors used in the checkerboard.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetInteractiveCheckerboardColors</span><span class="p">(</span>
  <span class="k">const</span> <span class="n">PR_RenderContextH</span>  <span class="n">contextH</span><span class="p">,</span>
  <span class="n">PF_Pixel</span>                 <span class="o">*</span><span class="n">color1P</span><span class="p">,</span>
  <span class="n">PF_Pixel</span>                 <span class="o">*</span><span class="n">color2P</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetInteractiveCheckerboardSize</span></code></td>
<td><p class="first">Retrieves the width and height of one checkerboard square.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetInteractiveCheckerboardSize</span><span class="p">(</span>
  <span class="k">const</span> <span class="n">PR_RenderContextH</span>  <span class="n">contextH</span><span class="p">,</span>
  <span class="n">A_u_long</span>                 <span class="o">*</span><span class="n">cbd_widthPLu</span><span class="p">,</span>
  <span class="n">A_u_long</span>                 <span class="o">*</span><span class="n">cbd_heightPLu</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetInteractiveCachedBuffer</span></code></td>
<td><p class="first">Retrieves the cached AEGP_WorldH last used for the <code class="docutils literal notranslate"><span class="pre">PR_RenderContextH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetInteractiveCachedBuffer</span><span class="p">(</span>
  <span class="k">const</span> <span class="n">PR_RenderContextH</span>  <span class="n">contextH</span><span class="p">,</span>
  <span class="n">AEGP_WorldH</span>              <span class="o">*</span><span class="n">buffer</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_ArtisanMustRenderAsLayer</span></code></td>
<td><p class="first">Determines whether or not the artisan must render the current <code class="docutils literal notranslate"><span class="pre">AEGP_RenderLayerContextH</span></code> as a layer.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_ArtisanMustRenderAsLayer</span><span class="p">(</span>
  <span class="k">const</span> <span class="n">PR_RenderContextH</span>   <span class="n">contextH</span><span class="p">,</span>
  <span class="n">AEGP_RenderLayerContextH</span>  <span class="n">layer_contextH</span><span class="p">,</span>
  <span class="n">A_Boolean</span>                 <span class="o">*</span><span class="n">use_txturePB</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetInteractiveDisplayChannel</span></code></td>
<td><p class="first">Returns which channels should be displayed by the interactive artisan.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetInteractiveDisplayChannel</span><span class="p">(</span>
  <span class="k">const</span> <span class="n">PR_RenderContextH</span>  <span class="n">contextH</span><span class="p">,</span>
  <span class="n">AEGP_DisplayChannelType</span>  <span class="o">*</span><span class="n">channelP</span><span class="p">);</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">AEGP_DisplayChannelType</span></code> will be one of the following:</p>
<blockquote class="last">
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">AEGP_DisplayChannel_NONE</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_DisplayChannel_RED</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_DisplayChannel_GREEN</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_DisplayChannel_BLUE</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_DisplayChannel_ALPHA</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_DisplayChannel_RED_ALT</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_DisplayChannel_GREEN_ALT</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_DisplayChannel_BLUE_ALT</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_DisplayChannel_ALPHA_ALT</span></code></li>
</ul>
</div></blockquote>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetInteractiveExposure</span></code></td>
<td><p class="first">Returns the exposure for the given <code class="docutils literal notranslate"><span class="pre">PR_RenderContextH</span></code>, expressed as a floating point number.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetInteractiveExposure</span><span class="p">(</span>
  <span class="k">const</span> <span class="n">PR_RenderContextH</span>  <span class="n">rcH</span><span class="p">,</span>
  <span class="n">A_FpLong</span>                 <span class="o">*</span><span class="n">exposurePF</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetColorTransform</span></code></td>
<td><p class="first">Returns the color transform for the given <code class="docutils literal notranslate"><span class="pre">PR_RenderContextH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetColorTransform</span><span class="p">)(</span>
  <span class="k">const</span> <span class="n">PR_RenderContextH</span>  <span class="n">render_contextH</span><span class="p">,</span>
  <span class="n">A_Boolean</span>                <span class="o">*</span><span class="n">cms_onB</span><span class="p">,</span>
  <span class="n">A_u_long</span>                 <span class="o">*</span><span class="n">xform_keyLu</span><span class="p">,</span>
  <span class="kt">void</span>                      <span class="o">*</span><span class="n">xformP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetCompShutterTime</span></code></td>
<td><p class="first">Returns the shutter angle for the given <code class="docutils literal notranslate"><span class="pre">PR_RenderContextH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetCompShutterTime</span><span class="p">)(</span>
  <span class="n">PR_RenderContextH</span>  <span class="n">render_contextH</span><span class="p">,</span>
  <span class="n">A_Time</span>             <span class="o">*</span><span class="n">shutter_time</span><span class="p">,</span>
  <span class="n">A_Time</span>             <span class="o">*</span><span class="n">shutter_dur</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_MapCompToLayerTime</span></code></td>
<td><p class="first">New in CC. Unlike <a class="reference internal" href="index.html#aegps-aegp-suites-aegp-layersuite"><span class="std std-ref">AEGP_ConvertCompToLayerTime</span></a>,
this handles time remapping with collapsed or nested comps.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_MapCompToLayerTime</span><span class="p">(</span>
  <span class="n">PR_RenderContextH</span>         <span class="n">render_contextH</span><span class="p">,</span>
  <span class="n">AEGP_RenderLayerContextH</span>  <span class="n">layer_contextH</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_Time</span>              <span class="o">*</span><span class="n">comp_timePT</span><span class="p">,</span>
  <span class="n">A_Time</span>                    <span class="o">*</span><span class="n">layer_timePT</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<hr class="docutils" />
<div class="section" id="convert-between-different-contexts">
<h3>Convert Between Different Contexts<a class="headerlink" href="#convert-between-different-contexts" title="Permalink to this headline">¶</a></h3>
<p>Convert between render and instance contexts, and manage global data specific to the artisan.</p>
<div class="section" id="aegp-artisanutilsuite1">
<h4>AEGP_ArtisanUtilSuite1<a class="headerlink" href="#aegp-artisanutilsuite1" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="40%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Function</strong></th>
<th class="head"><strong>Purpose</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetGlobalContextFromInstanceContext</span></code></td>
<td><p class="first">Given an instance context, returns a handle to the global context.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetGlobalContextFromInstanceContext</span><span class="p">(</span>
  <span class="k">const</span> <span class="n">PR_InstanceContextH</span>  <span class="n">instance_contextH</span><span class="p">,</span>
  <span class="n">PR_GlobalContextH</span>          <span class="o">*</span><span class="n">global_contextPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetInstanceContextFromRenderContext</span></code></td>
<td><p class="first">Given the render context, returns a handle to the instance context.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetInstanceContextFromRenderContext</span><span class="p">(</span>
  <span class="k">const</span> <span class="n">PR_RenderContextH</span>  <span class="n">render_contextH</span><span class="p">,</span>
  <span class="n">PR_InstanceContextH</span>      <span class="o">*</span><span class="n">instnc_ctextPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetInstanceContextFromQueryContext</span></code></td>
<td><p class="first">Given a query context, returns a handle to the instance context.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetInstanceContextFromQueryContext</span><span class="p">(</span>
  <span class="k">const</span> <span class="n">PR_QueryContextH</span>  <span class="n">query_contextH</span><span class="p">,</span>
  <span class="n">PR_InstanceContextH</span>     <span class="o">*</span><span class="n">instnce_contextPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetGlobalData</span></code></td>
<td><p class="first">Given the global context, returns a handle to global data.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetGlobalData</span><span class="p">(</span>
  <span class="k">const</span> <span class="n">PR_GlobalContextH</span>  <span class="n">global_contextH</span><span class="p">,</span>
  <span class="n">PR_GlobalDataH</span>           <span class="o">*</span><span class="n">global_dataPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetInstanceData</span></code></td>
<td><p class="first">Given an instance context, return the associated instance data.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetInstanceData</span><span class="p">(</span>
  <span class="k">const</span> <span class="n">PR_InstanceContextH</span>  <span class="n">instance_contextH</span><span class="p">,</span>
  <span class="n">PR_InstanceDataH</span>           <span class="o">*</span><span class="n">instance_dataPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetRenderData</span></code></td>
<td><p class="first">Given a render context, returns the associated render data.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetRenderData</span><span class="p">(</span>
  <span class="k">const</span> <span class="n">PR_RenderContextH</span>  <span class="n">render_contextH</span><span class="p">,</span>
  <span class="n">PR_RenderDataH</span>           <span class="o">*</span><span class="n">render_dataPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<hr class="docutils" />
<div class="section" id="smile-cameras">
<h3>Smile! Cameras<a class="headerlink" href="#smile-cameras" title="Permalink to this headline">¶</a></h3>
<p>Obtains the camera geometry, including camera properties (type, lens, depth of field, focal distance, aperture, et cetera).</p>
<div class="section" id="aegp-camerasuite2">
<h4>AEGP_CameraSuite2<a class="headerlink" href="#aegp-camerasuite2" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="32%" />
<col width="68%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Function</strong></th>
<th class="head"><strong>Purpose</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetCamera</span></code></td>
<td><p class="first">Given a layer handle and time, returns the current camera layer handle.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetCamera</span><span class="p">(</span>
  <span class="n">PR_RenderContextH</span>  <span class="n">render_contextH</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_Time</span>       <span class="o">*</span><span class="n">comp_timeP</span><span class="p">,</span>
  <span class="n">AEGP_LayerH</span>        <span class="o">*</span><span class="n">camera_layerPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetCameraType</span></code></td>
<td><p class="first">Given a layer, returns the camera type of the layer.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetCameraType</span><span class="p">(</span>
  <span class="n">AEGP_LayerH</span>      <span class="n">aegp_layerH</span><span class="p">,</span>
  <span class="n">AEGP_CameraType</span>  <span class="o">*</span><span class="n">camera_typeP</span><span class="p">;</span>
</pre></div>
</div>
<p>The camera type can be the following:</p>
<blockquote class="last">
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">AEGP_CameraType_NONE</span> <span class="pre">=</span> <span class="pre">-1</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_CameraType_PERSPECTIVE</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_CameraType_ORTHOGRAPHIC</span></code></li>
</ul>
</div></blockquote>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetDefaultCameraDistanceToImagePlane</span></code></td>
<td><p class="first">Given a composition handle, returns the camera distance to the image plane.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetDefaultCamera</span> <span class="n">DistanceToImagePlane</span><span class="p">(</span>
  <span class="n">AEGP_CompH</span>  <span class="n">compH</span><span class="p">,</span>
  <span class="n">A_FpLong</span>    <span class="o">*</span><span class="n">dist_to_planePF</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetCameraFilmSize</span></code></td>
<td><p class="first">Retrieves the size (and units used to measure that size) of the film used by the designated camera.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetCameraFilmSize</span><span class="p">(</span>
  <span class="n">AEGP_LayerH</span>         <span class="n">camera_layerH</span><span class="p">,</span>
  <span class="n">AEGP_FilmSizeUnits</span>  <span class="o">*</span><span class="n">film_size_unitsP</span><span class="p">,</span>
  <span class="n">A_FpLong</span>            <span class="o">*</span><span class="n">film_sizePF0</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetCameraFilmSize</span></code></td>
<td><p class="first">Sets the size (and unites used to measure that size) of the film used by the designated camera.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetCameraFilmSize</span><span class="p">)(</span>
  <span class="n">AEGP_LayerH</span>         <span class="n">camera_layerH</span><span class="p">,</span>
  <span class="n">AEGP_FilmSizeUnits</span>  <span class="n">film_size_units</span><span class="p">,</span>
  <span class="n">A_FpLong</span>            <span class="o">*</span><span class="n">film_sizePF0</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<hr class="docutils" />
<div class="section" id="notes-regarding-camera-behavior">
<h3>Notes Regarding Camera Behavior<a class="headerlink" href="#notes-regarding-camera-behavior" title="Permalink to this headline">¶</a></h3>
<p>Camera orientation is in composition coordinates, and the rotations are in layer (the camera’s layer) coordinates.</p>
<p>If the camera layer has a parent, the position is in a coordinate space relative to the parent.</p>
</div>
<hr class="docutils" />
<div class="section" id="orthographic-camera-matrix">
<h3>Orthographic Camera Matrix<a class="headerlink" href="#orthographic-camera-matrix" title="Permalink to this headline">¶</a></h3>
<p>Internally, we use composition width and height to set the matrix described by the OpenGL specification as</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">glOrtho</span><span class="p">(</span><span class="o">-</span><span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="n">height</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">height</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">100</span><span class="p">);</span>
</pre></div>
</div>
<p>The orthographic matrix describes the projection. The position of the camera is described by another, scaled matrix. The inverse of the camera position matrix provides the “eye” coordinates.</p>
</div>
<hr class="docutils" />
<div class="section" id="focus-on-focal">
<h3>Focus On Focal<a class="headerlink" href="#focus-on-focal" title="Permalink to this headline">¶</a></h3>
<p>Remember, focal length affects field of view; focal distance only affects depth of field.</p>
</div>
<hr class="docutils" />
<div class="section" id="film-size">
<h3>Film Size<a class="headerlink" href="#film-size" title="Permalink to this headline">¶</a></h3>
<p>In the real world, film size is measured in millimeters. In After Effects, it’s measured in pixels. Multiply by 72 and divide by 25.4 to move from millimeters to pixels.</p>
<p>Field of view is more complex;</p>
<p>ϴ = 1/2 field of view</p>
<p>tan(ϴ) = 1/2 composition height / focal length</p>
<p>focal length = 2 tan(ϴ) / composition height</p>
</div>
<hr class="docutils" />
<div class="section" id="hit-the-lights">
<h3>Hit The Lights!<a class="headerlink" href="#hit-the-lights" title="Permalink to this headline">¶</a></h3>
<p>Get and set the type of lights in a composition.</p>
<div class="section" id="aegp-lightsuite2">
<h4>AEGP_LightSuite2<a class="headerlink" href="#aegp-lightsuite2" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="26%" />
<col width="74%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Function</strong></th>
<th class="head"><strong>Purpose</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetLightType</span></code></td>
<td><p class="first">Retrieves the <code class="docutils literal notranslate"><span class="pre">AEGP_LightType</span></code> of the specified camera layer.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetLightType</span><span class="p">(</span>
  <span class="n">AEGP_LayerH</span>     <span class="n">light_layerH</span><span class="p">,</span>
  <span class="n">AEGP_LightType</span>  <span class="o">*</span><span class="n">light_typeP</span><span class="p">);</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">AEGP_LightType</span></code> will be one of the following:</p>
<blockquote class="last">
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LightType_PARALLEL</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LightType_SPOT</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LightType_POINT</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_LightType_AMBIENT</span></code></li>
</ul>
</div></blockquote>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetLightType</span></code></td>
<td><p class="first">Sets the <code class="docutils literal notranslate"><span class="pre">AEGP_LightType</span></code> for the specified camera layer.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetLightType</span><span class="p">(</span>
  <span class="n">AEGP_LayerH</span>     <span class="n">light_layerH</span><span class="p">,</span>
  <span class="n">AEGP_LightType</span>  <span class="n">light_type</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="notes-on-light-behavior">
<h4>Notes On Light Behavior<a class="headerlink" href="#notes-on-light-behavior" title="Permalink to this headline">¶</a></h4>
<p>The formula for parallel lights is found in Foley and Van Dam’s “Introduction to Computer Graphics” (ISBN 0-201-60921-5) as is the formula for point lights.</p>
<p>We use the half angle variant proposed by Jim Blinn instead.</p>
<p>Suppose we have a point on a layer and want to shade it with the light.</p>
<p>Let V be the unit vector from the layer point to the eye point.
Let L be the unit vector to the light (in the parallel light case this is constant). Let H be (V+L)/2 (normalized).
Let N be the unit normal vector to the layer.</p>
<p>The amount of specular reflected light is S * power(H Dot N, shine), where S is the specular coefficient.</p>
</div>
</div>
<hr class="docutils" />
<div class="section" id="how-should-i-draw-that">
<h3>How Should I Draw That?<a class="headerlink" href="#how-should-i-draw-that" title="Permalink to this headline">¶</a></h3>
<p>After Effects relies upon Artisans to draw 3D layer handles. If your Artisan chooses not to respond to this call, the default Artisan will draw 3D layer handles for you. Querying transforms is important for optimization of After Effects’ caching.</p>
<p>The coordinate system is positive x to right, positive y down, positive z into the screen. The origin is the upper left corner. Rotations are x then y then z. For matrices the translate is the bottom row, orientations are quaternions (which are applied first), then any x-y-z rotation after that. As a general rule, use orientation or rotation but not both. Also use rotations if you need control over angular velocity.</p>
</div>
<hr class="docutils" />
<div class="section" id="query-transform-functions">
<h3>Query Transform Functions<a class="headerlink" href="#query-transform-functions" title="Permalink to this headline">¶</a></h3>
<p>These functions give artisans information about the transforms they’ll need in order to correctly place layers within a composition and respond appropriately to the various queries After Effects will send to their <code class="docutils literal notranslate"><span class="pre">PR_QueryFunc</span></code> entry point function.</p>
<p>As that entry point is optional, so is your artisan’s response to the queries; however, if you don’t, your users may be disappointed that (while doing interactive preview drawing) all the camera and light indicators vanish, until they stop moving! Artisans are complex beasts; contact us if you have any questions.</p>
<div class="section" id="aegp-queryxformsuite2">
<h4>AEGP_QueryXFormSuite2<a class="headerlink" href="#aegp-queryxformsuite2" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="21%" />
<col width="79%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Function</strong></th>
<th class="head"><strong>Purpose</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_QueryXformGetSrcType</span></code></td>
<td><p class="first">Given a query context, returns trasnsform source currently being modified.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_QueryXformGetSrcType</span><span class="p">(</span>
  <span class="n">PR_QueryContextH</span>     <span class="n">query_contextH</span><span class="p">,</span>
  <span class="n">AEGP_QueryXformType</span>  <span class="o">*</span><span class="n">src_type</span><span class="p">);</span>
</pre></div>
</div>
<p>The query context will be one of the following:</p>
<blockquote class="last">
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">AEGP_Query_Xform_LAYER</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_Query_Xform_WORLD</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_Query_Xform_VIEW</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEGP_Query_Xform_SCREEN</span></code></li>
</ul>
</div></blockquote>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_QueryXformGetDstType</span></code></td>
<td><p class="first">Given a query context, returns the currently requested transform destination.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_QueryXformGetDstType</span><span class="p">(</span>
  <span class="n">PR_QueryContextH</span>     <span class="n">query_contextH</span><span class="p">,</span>
  <span class="n">AEGP_QueryXformType</span>  <span class="o">*</span><span class="n">dst_type</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_QueryXformGetLayer</span></code></td>
<td><p class="first">Used if the source or destination type is a layer. Given a query context, returns the layer handle.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_QueryXformGetLayer</span><span class="p">(</span>
  <span class="n">PR_QueryContextH</span>  <span class="n">query_contextH</span><span class="p">,</span>
  <span class="n">AEGP_LayerH</span>       <span class="o">*</span><span class="n">layerPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_QueryXformGetComp</span></code></td>
<td><p class="first">Given a query context, returns the current composition handle.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_QueryXformGetComp</span><span class="p">(</span>
  <span class="n">PR_QueryContextH</span>  <span class="n">query_contextH</span><span class="p">,</span>
  <span class="n">AEGP_CompH</span>        <span class="o">*</span><span class="n">compPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_QueryXformGetTransformTime</span></code></td>
<td><p class="first">Given a query context, returns the time of the transformation.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_QueryXformGetTransformTime</span><span class="p">(</span>
  <span class="n">PR_QueryContextH</span>  <span class="n">query_contextH</span><span class="p">,</span>
  <span class="n">A_Time</span>            <span class="o">*</span><span class="n">time</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_QueryXformGetViewTime</span></code></td>
<td><p class="first">Given a query context, returns the time of the associated view.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_QueryXformGetViewTime</span><span class="p">(</span>
  <span class="n">PR_QueryContextH</span>  <span class="n">query_contextH</span><span class="p">,</span>
  <span class="n">A_Time</span>            <span class="o">*</span><span class="n">time</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_QueryXformGetCamera</span></code></td>
<td><p class="first">Given a query context, returns the current camera layer handle.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_QueryXformGetCamera</span><span class="p">(</span>
  <span class="n">PR_QueryContextH</span>  <span class="n">query_contextH</span><span class="p">,</span>
  <span class="n">AEGP_LayerH</span>       <span class="o">*</span><span class="n">camera_layerPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_QueryXformGetXform</span></code></td>
<td><p class="first">Given a query context, returns the current matrix transform.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_QueryXformGetXform</span><span class="p">(</span>
  <span class="n">PR_QueryContextH</span>  <span class="n">query_contextH</span><span class="p">,</span>
  <span class="n">A_Matrix4</span>         <span class="o">*</span><span class="n">xform</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_QueryXformSetXform</span></code></td>
<td><p class="first">Given a query context, return the matrix transform you compute in <code class="docutils literal notranslate"><span class="pre">xform</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_QueryXformSetXform</span><span class="p">(</span>
  <span class="n">PR_QueryContextH</span>  <span class="n">query_contextH</span><span class="p">,</span>
  <span class="n">A_Matrix4</span>         <span class="o">*</span><span class="n">xform</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_QueryWindowRef</span></code></td>
<td><p class="first">Sets the window reference to be used (by After Effects) for the given <code class="docutils literal notranslate"><span class="pre">PR_QueryContextH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_QueryWindowRef</span><span class="p">(</span>
  <span class="n">PR_QueryContextH</span>        <span class="n">q_contextH</span><span class="p">,</span>
  <span class="n">AEGP_PlatformWindowRef</span>  <span class="o">*</span><span class="n">window_refP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_QueryWindowClear</span></code></td>
<td><p class="first">Returns which <code class="docutils literal notranslate"><span class="pre">AEGP_PlatformWindowRef</span></code> (and <code class="docutils literal notranslate"><span class="pre">A_Rect</span></code>) to clear, for the given <code class="docutils literal notranslate"><span class="pre">PR_QueryContextH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_QueryWindowClear</span><span class="p">(</span>
  <span class="n">PR_QueryContextH</span>        <span class="n">q_contextH</span><span class="p">,</span>
  <span class="n">AEGP_PlatformWindowRef</span>  <span class="o">*</span><span class="n">window_refP</span><span class="p">,</span>
  <span class="n">A_LegacyRect</span>            <span class="o">*</span><span class="n">boundsPR</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_QueryFrozenProxy</span></code></td>
<td><p class="first">Returns whether or not the textures used in the given <code class="docutils literal notranslate"><span class="pre">PR_QueryContextH</span></code> should be frozen.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_QueryFrozenProxy</span><span class="p">(</span>
  <span class="n">PR_QueryContextH</span>  <span class="n">q_contextH</span><span class="p">,</span>
  <span class="n">A_Boolean</span>         <span class="o">*</span><span class="n">onPB</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_QuerySwapBuffer</span></code></td>
<td><p class="first">Sent after rendering and camera/light handle drawing is complete; After Effects returns the buffer into which the artisan should draw its output.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_QuerySwapBuffer</span><span class="p">(</span>
  <span class="n">PR_QueryContextH</span>        <span class="n">q_contextH</span><span class="p">,</span>
  <span class="n">AEGP_PlatformWindowRef</span>  <span class="o">*</span><span class="n">window_refP</span><span class="p">,</span>
  <span class="n">AEGP_WorldH</span>             <span class="o">*</span><span class="n">dest_bufferp</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_QueryDrawProcs</span></code></td>
<td><p class="first">Sets the interactive drawing functions After Effects will call while drawing camera and lighting handles into the artisan’s provided context.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_QueryDrawProcs</span><span class="p">(</span>
  <span class="n">PR_QueryContextH</span>         <span class="n">query_contextH</span><span class="p">,</span>
  <span class="n">PR_InteractiveDrawProcs</span>  <span class="o">*</span><span class="n">window_refP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_QueryPrepareForLineDrawing</span></code></td>
<td><p class="first">Informs After Effects about the context into which it will be drawing.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_QueryPrepareForLineDrawing</span><span class="p">(</span>
  <span class="n">PR_QueryContextH</span>        <span class="n">query_contextH</span><span class="p">,</span>
  <span class="n">AEGP_PlatformWindowRef</span>  <span class="o">*</span><span class="n">window_refP</span><span class="p">,</span>
  <span class="n">A_LegacyRect</span>            <span class="o">*</span><span class="n">viewportP</span><span class="p">,</span>
  <span class="n">A_LPoint</span>                <span class="o">*</span><span class="n">originP</span><span class="p">,</span>
  <span class="n">A_FloatPoint</span>            <span class="o">*</span><span class="n">scaleP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_QueryUnprepareForLineDrawing</span></code></td>
<td><p class="first">As far as After Effects is concerned, the artisan is done drawing lines.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_QueryUnprepareForLineDrawing</span><span class="p">(</span>
  <span class="n">PR_QueryContextH</span>        <span class="n">query_contextH</span><span class="p">,</span>
  <span class="n">AEGP_PlatformWindowRef</span>  <span class="o">*</span><span class="n">window_refP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<hr class="docutils" />
<div class="section" id="interactive-drawing-functions">
<h3>Interactive Drawing Functions<a class="headerlink" href="#interactive-drawing-functions" title="Permalink to this headline">¶</a></h3>
<p>We’ve added the ability for artisans to provide functions After Effects can use to do basic drawing functions for updating the comp window display during preview, including camera, light, and wireframe preview modeling.</p>
<div class="section" id="pr-interactivedrawprocs">
<h4>PR_InteractiveDrawProcs<a class="headerlink" href="#pr-interactivedrawprocs" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="47%" />
<col width="53%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Function</strong></th>
<th class="head"><strong>Purpose</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PR_Draw_MoveToFunc</span></code></td>
<td><div class="first last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PR_Draw_MoveToFunc</span><span class="p">(</span>
  <span class="kt">short</span>  <span class="n">x</span><span class="p">,</span>
  <span class="kt">short</span>  <span class="n">y</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PR_Draw_LineToFunc</span></code></td>
<td><div class="first last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PR_Draw_LineToFunc</span><span class="p">(</span>
  <span class="kt">short</span>  <span class="n">x</span><span class="p">,</span>
  <span class="kt">short</span>  <span class="n">y</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PR_Draw_ForeColorFunc</span></code></td>
<td><div class="first last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PR_Draw_ForeColorFunc</span><span class="p">(</span>
  <span class="k">const</span> <span class="n">A_Color</span>  <span class="o">*</span><span class="n">fore_colo</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PR_Draw_FrameRectFunc</span></code></td>
<td><div class="first last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PR_Draw_FrameRectFunc</span><span class="p">(</span>
  <span class="k">const</span> <span class="n">A_Rect</span>  <span class="o">*</span><span class="n">rectPR</span> <span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">PR_Draw_PaintRectFunc</span></code></td>
<td><div class="first last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">PR_Draw_PaintRectFunc</span><span class="p">(</span>
  <span class="k">const</span> <span class="n">A_Rect</span>  <span class="o">*</span><span class="n">rectPR</span> <span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<hr class="docutils" />
<div class="section" id="notes-on-query-time-functions">
<h3>Notes On Query Time Functions<a class="headerlink" href="#notes-on-query-time-functions" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">AEGP_QueryXformGetTransformTime()</span></code> and <code class="docutils literal notranslate"><span class="pre">AEGP_QueryXformGetViewTime()</span></code> are both necessary for an artisan to build a representation of the scene to render.</p>
<p><code class="docutils literal notranslate"><span class="pre">AEGP_QueryXformGetTransformTime()</span></code> gets the time of the transform, which is then passed to <code class="docutils literal notranslate"><span class="pre">AEGP_GetCompShutterFrameRange()</span></code> from <a class="reference internal" href="index.html#aegps-aegp-suites-aegp-compsuite"><span class="std std-ref">AEGP_CompSuite11</span></a>.</p>
<p><code class="docutils literal notranslate"><span class="pre">AEGP_QueryXformGetViewTime()</span></code> gets the time of the view, which is used in calling <code class="docutils literal notranslate"><span class="pre">AEGP_GetLayerToWorldXformFromView()</span></code> from <a class="reference internal" href="index.html#aegps-aegp-suites-aegp-layersuite"><span class="std std-ref">AEGP_LayerSuite8</span></a>.</p>
</div>
</div>
</div>
<div class="toctree-wrapper compound">
<span id="document-aeios/aeios"></span><div class="section" id="aeios">
<span id="aeios-aeios"></span><h2>AEIOs<a class="headerlink" href="#aeios" title="Permalink to this headline">¶</a></h2>
<p>AEIOs are AEGPs that perform media file import and/or export. AEIOs do everything for a file of a given type that After Effects (or the plug-ins which ship with After Effects) would normally do. On the import side, AEIOs can open existing files, manage file-specific interpretation options, and provide audio and frames from the file to After Effects in AEGP_SoundWorld and PF_EffectWorld format. Additionally, AEIOs can create files interactively, asking users for the settings they’d like instead of reading them from a file. On the export side, AEIOs can create and manage output options for render queue items, create output files and save frames (provided by After Effects as PF_EffectWorlds) into those files.</p>
<p>AEIOs work with uncompressed video with pixels in ARGB order from low to high-byte. Pixels can be 8-bit, 16-bit, or 32-bit float per channel. AEIOs must handle their own compression/decompression of any codecs supported.</p>
<hr class="docutils" />
<div class="section" id="aeio-or-aegp">
<h3>AEIO, or AEGP?<a class="headerlink" href="#aeio-or-aegp" title="Permalink to this headline">¶</a></h3>
<p>AEIOs provide pixels and audio data to After Effects.</p>
<p>If you’re writing an importer/exporter for a file format that represents timeline or project format (referencing file formats supported by After Effects or other installed AEIOs), write an AEGP and add its command to the Import/Export submenu.</p>
</div>
<hr class="docutils" />
<div class="section" id="aeio-for-import-or-mediacore-importer">
<h3>AEIO For Import, Or MediaCore Importer?<a class="headerlink" href="#aeio-for-import-or-mediacore-importer" title="Permalink to this headline">¶</a></h3>
<p>After Effects supports MediaCore importer plug-ins. MediaCore is a set of shared libraries that grew out of Premiere Pro; thus the MediaCore APIs are described in the <a class="reference external" href="http://ppro-plugin-sdk.aenhancers.com/">Premiere Pro SDK</a>.</p>
<p>Only MediaCore importer plug-ins support an importer priority system: The highest priority importer gets the first opportunity to import a file, and if the particular imported file isn’t supported, the next-highest priority importer will then have the opportunity to try importing it, and so on. MediaCore importers cannot defer file import to an AEIO. So if your goal is to take over file handling for any file type for which After Effects already provides a plug-in, you need to develop a MediaCore importer plug-in.</p>
<p>On the other hand, only AEIOs can display a setup dialog in the Interpret Footage &lt; Main &gt; More Options dialog.</p>
<p>If the above constraints haven’t already answered whether you need to build an AEIO or MediaCore importer, then you’ll likely want to build a MediaCore importer, which can be used across the video and audio applications including Premiere Pro, Media Encoder, Prelude, SpeedGrade, and Audition.</p>
</div>
<hr class="docutils" />
<div class="section" id="how-it-works">
<h3>How It Works<a class="headerlink" href="#how-it-works" title="Permalink to this headline">¶</a></h3>
<p>From within its entry point function, an AEIO populates a structure of function pointers with the names of the functions it wants called in response to certain events. Many of these function hooks are optional.</p>
</div>
<hr class="docutils" />
<div class="section" id="what-would-after-effects-do">
<h3>What Would After Effects Do?<a class="headerlink" href="#what-would-after-effects-do" title="Permalink to this headline">¶</a></h3>
<p>For many AEIO hook functions, you can ask After Effects to perform default processing (this capability is noted in each hook’s descriptions).</p>
<p>Unless you have compelling reasons to do otherwise, return <code class="docutils literal notranslate"><span class="pre">AEIO_Err_USE_DFLT_CALLBACK</span></code> from the function, and let After Effects do the work.</p>
<p>This is also a good way to learn the calling sequence before beginning implementation.</p>
</div>
<hr class="docutils" />
<div class="section" id="registering-your-aeio">
<h3>Registering Your AEIO<a class="headerlink" href="#registering-your-aeio" title="Permalink to this headline">¶</a></h3>
<p>During your plug-in’s entry point function, populate a AEIO_ModuleInfo describing the filetype(s) the AEIO supports, and an AEIO_FunctionBlock structure that points to your file handling functions. For some of these functions, you can rely on After Effects’ default behavior by returning AEIO_Err_USE_DFLT_CALLBACK. However, you must still provide a function matching the required signature, that does so. Once you’ve filled out both these structures, call <code class="docutils literal notranslate"><span class="pre">AEGP_RegisterIO()</span></code> from <a class="reference internal" href="index.html#aegps-aegp-suites-aegp-registersuites"><span class="std std-ref">AEGP_RegisterSuites5</span></a>.</p>
<p>In the AEIO_ModuleInfo that you pass in to the register call, you provide the file type and description information that After Effects uses in the Import dialog, for the “Files of type” drop-down on Windows, or the Enable drop-down on MacOS. As of CS6, file extensions cannot be more than three characters long, even though we have a few built-in importers with longer extensions.</p>
</div>
<hr class="docutils" />
<div class="section" id="inspec-outspec">
<h3>InSpec, OutSpec<a class="headerlink" href="#inspec-outspec" title="Permalink to this headline">¶</a></h3>
<p>On most import-related functions, an <code class="docutils literal notranslate"><span class="pre">AEIO_InSpecH</span></code> is passed. On most output-related functions, an <code class="docutils literal notranslate"><span class="pre">AEIO_OutSpecH</span></code> is passed.</p>
<p>What are these mysterious handles? These opaque data handles can be used with <a class="reference internal" href="index.html#aeios-new-kids-on-the-function-block-aegp-ioinsuite"><span class="std std-ref">AEGP_IOInSuite5</span></a> and <a class="reference internal" href="index.html#aeios-new-kids-on-the-function-block-aegpiooutsuite"><span class="std std-ref">AEGPIOOutSuite4</span></a>, to set or query for information about the import or output.</p>
<p>For example, on an import, you’ll use <code class="docutils literal notranslate"><span class="pre">AEIO_InSpecH</span></code> when calling <code class="docutils literal notranslate"><span class="pre">AEGP_SetInSpecDimensions</span></code> in AEGP_IOInSuite.</p>
<p>And during an export, you’ll use <code class="docutils literal notranslate"><span class="pre">AEIO_OutSpecH</span></code> when calling <code class="docutils literal notranslate"><span class="pre">AEGP_GetOutSpecDimensions</span></code> in <code class="docutils literal notranslate"><span class="pre">AEGP_IOOutSuite</span></code>. So use these handles to exchange information with After Effects about the details of the input or output.</p>
</div>
</div>
<span id="document-aeios/calling-sequence"></span><div class="section" id="calling-sequence">
<span id="aeios-calling-sequence"></span><h2>Calling Sequence<a class="headerlink" href="#calling-sequence" title="Permalink to this headline">¶</a></h2>
<p>As with all AEGPs, the entry point function exported in the plug-in’s PiPL is called during launch. During this function, the AEIO must provide function pointers to required functions and describe their capabilities, then pass the appropriate structures to <a class="reference internal" href="index.html#aegps-aegp-suites-aegp-registersuites"><span class="std std-ref">AEGP_RegisterIO()</span></a>.</p>
<hr class="docutils" />
<div class="section" id="import">
<h3>Import<a class="headerlink" href="#import" title="Permalink to this headline">¶</a></h3>
<p>When users select a file in the file import dialog which is of a type handled by your AEIO, its <a class="reference internal" href="index.html#aeios-new-kids-on-the-function-block-aeio-functionblock"><span class="std std-ref">AEIO_VerifyFileImportable()</span></a> function will be called; it’s called again for each such file the user imports. <a class="reference internal" href="index.html#aeios-new-kids-on-the-function-block-aeio-functionblock"><span class="std std-ref">AEIO_InitInSpecFromFile()</span></a> will be called for each file; parse the file, and use the various set functions to describe it to After Effects. Also, construct any options data associated with the file, and save that data using <a class="reference internal" href="index.html#aeios-new-kids-on-the-function-block-aegp-ioinsuite"><span class="std std-ref">AEGP_SetInSpecOptionsHandle()</span></a>.</p>
<p>After Effects then calls the plug-in’s <a class="reference internal" href="index.html#aeios-new-kids-on-the-function-block-aeio-functionblock"><span class="std std-ref">AEIO_GetInSpecInfo()</span></a> function, to get descriptive text about the file for display in the project window. As noted in the description of this function, it may be called for folders as well; we recommend that, if there is no valid options data for the file, you do nothing and return no error (that’s what our AEIOs do).</p>
<p><a class="reference internal" href="index.html#aeios-new-kids-on-the-function-block-aeio-functionblock"><span class="std std-ref">AEIO_CountUserData()</span></a> is then sent; if the AEIO indicates that there is user data present, <a class="reference internal" href="index.html#aeios-new-kids-on-the-function-block-aeio-functionblock"><span class="std std-ref">AEIO_GetUserData()</span></a> will follow. After Effects will then request that the plug-in draw a frame of video (for the project window thumbnail) by sending <a class="reference internal" href="index.html#aeios-new-kids-on-the-function-block-aeio-functionblock"><span class="std std-ref">AEIO_DrawSparseFrame()</span></a>.</p>
<p>Once the supported file is added to a composition, user interaction will generate calls to <code class="docutils literal notranslate"><span class="pre">AEIO_DrawSparseFrame()</span></code> and <a class="reference internal" href="index.html#aeios-new-kids-on-the-function-block-aeio-functionblock"><span class="std std-ref">AEIO_GetSound()</span></a>.</p>
<p>When the project is saved, and if there is options data associated with the AEIO_InSpec, After Effects will send <a class="reference internal" href="index.html#aeios-new-kids-on-the-function-block-aeio-functionblock"><span class="std std-ref">AEIO_FlattenOptions()</span></a> during which the AEIO parses the options data, and creates a representation of it that contains no references to external memory. Likewise, the presence of any AEIO_OutSpec options data will result in <a class="reference internal" href="index.html#aeios-new-kids-on-the-function-block-aeio-functionblock"><span class="std std-ref">AEIO_GetFlatOutputOptions()</span></a> being sent.</p>
</div>
<hr class="docutils" />
<div class="section" id="export">
<h3>Export<a class="headerlink" href="#export" title="Permalink to this headline">¶</a></h3>
<p>If the user adds an item to the render queue and chooses the AEIO’s supported output format, <a class="reference internal" href="index.html#aeios-new-kids-on-the-function-block-aeio-functionblock"><span class="std std-ref">AEIO_InitOutputSpec()</span></a> will be sent. Use the various get functions to obtain information about the output settings, and store any pertinent information using <a class="reference internal" href="index.html#aeios-new-kids-on-the-function-block-aeio-functionblock"><span class="std std-ref">AEGP_SetOutSpecOptionsHandle()</span></a>, followed by <code class="docutils literal notranslate"><span class="pre">AEIO_GetFlatOutputOptions()</span></code>. <a class="reference internal" href="index.html#aeios-new-kids-on-the-function-block-aeio-functionblock"><span class="std std-ref">AEIO_GetDepths()</span></a> is sent so After Effects can determine what output pixel bit depths the AEIO supports. <a class="reference internal" href="index.html#aeios-new-kids-on-the-function-block-aeio-functionblock"><span class="std std-ref">AEIO_GetOutputInfo()</span></a> is sent so that file name, type and subtype information can be displayed in the output module details.</p>
<p>When the user clicks on the Format Options button, in the render queue, <a class="reference internal" href="index.html#aeios-new-kids-on-the-function-block-aeio-functionblock"><span class="std std-ref">AEIO_UserOptionsDialog()</span></a> is called.</p>
<p>When the user actually clicks on the “Render” button, <a class="reference internal" href="index.html#aeios-new-kids-on-the-function-block-aeio-functionblock"><span class="std std-ref">AEIO_SetOutputFile()</span></a> will be called, followed by <a class="reference internal" href="index.html#aeios-new-kids-on-the-function-block-aeio-functionblock"><span class="std std-ref">AEIO_GetSizes()</span></a> (your AEIO is responsible for determining whether the destination has sufficient disk space available).</p>
<p>Before the video frames are sent, <a class="reference internal" href="index.html#aeios-new-kids-on-the-function-block-aeio-functionblock"><span class="std std-ref">AEIO_StartAdding()</span></a> is sent for the AEIO to open the file handle and write out the file header. If the AEIO supports a video or audio format, <a class="reference internal" href="index.html#aeios-new-kids-on-the-function-block-aeio-functionblock"><span class="std std-ref">AEIO_AddSoundChunk()</span></a> is sent for each audio chunk, and an <a class="reference internal" href="index.html#aeios-new-kids-on-the-function-block-aeio-functionblock"><span class="std std-ref">AEIO_AddFrame()</span></a> for each video frame.</p>
<p>If the AEIO supports sequences of still images, <a class="reference internal" href="index.html#aeios-new-kids-on-the-function-block-aeio-functionblock"><span class="std std-ref">AEIO_OutputFrame()</span></a> is called repeatedly. After Effects sends a PF_EffectWorld representation of the frame to be output.</p>
<p><a class="reference internal" href="index.html#aeios-new-kids-on-the-function-block-aeio-functionblock"><span class="std std-ref">AEIO_WriteLabels()</span></a> is called (for each frame) to give the plug-in a chance to write out field and alpha interpretation information. <a class="reference internal" href="index.html#aeios-new-kids-on-the-function-block-aeio-functionblock"><span class="std std-ref">AEIO_EndAdding()</span></a> is sent when there are no more frames (or audio) to be output. Close the output file.</p>
</div>
</div>
<span id="document-aeios/AEIO_ModuleInfo"></span><div class="section" id="aeio-moduleinfo">
<span id="aeios-aeio-moduleinfo"></span><h2>AEIO_ModuleInfo<a class="headerlink" href="#aeio-moduleinfo" title="Permalink to this headline">¶</a></h2>
<p>This is the structure where your AEIO will define its basic properties.</p>
<p>Notice that, in addition to describing the filetypes and extensions supported by your AEIO, you also describe your signature and behavior using the AEIO_ModuleFlags. We love flags.</p>
<hr class="docutils" />
<div class="section" id="aeio-moduleinfo-members">
<h3>AEIO_ModuleInfo Members<a class="headerlink" href="#aeio-moduleinfo-members" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="15%" />
<col width="85%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Member</strong></th>
<th class="head"><strong>Purpose</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">sig</span></code></td>
<td>A long, uniquely identifying your plug-in.
Many developers prefer to use a decidedly Mac-ish four character code here.
Please <a class="reference external" href="mailto:zlam&#37;&#52;&#48;adobe&#46;com">let us know</a> what sig you’re using.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">name</span></code></td>
<td>Descriptive name for your AEIO plug-in.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">flags</span></code></td>
<td>Set of <code class="docutils literal notranslate"><span class="pre">AEIO_ModuleFlags</span></code>.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">flags2</span></code></td>
<td>Set of <code class="docutils literal notranslate"><span class="pre">AEIO_ModuleFlags2</span></code>.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">max_width</span></code>, <code class="docutils literal notranslate"><span class="pre">max_height</span></code></td>
<td>The maximum dimensions supported by your format.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">num_filetypes</span></code></td>
<td>The number of filetypes supported by your AEIO.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">num_extensions</span></code></td>
<td>The number of file extensions supported by your AEIO.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">num_clips</span></code></td>
<td>The number of clipboard formats supported by your AEIO.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">create_kind</span></code></td>
<td>The macOS four character code for files created by your AEIO.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">create_ext</span></code></td>
<td>The file extension for files created by your AEIO.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">read_kinds</span></code></td>
<td>This array of 16 <code class="docutils literal notranslate"><span class="pre">AEIO_FileKinds</span></code> need not be entirely filled out, but the first <code class="docutils literal notranslate"><span class="pre">[num_filetypes</span> <span class="pre">+</span> <span class="pre">num_extensions</span> <span class="pre">+</span> <span class="pre">num_clips]</span></code> ones must be populated, in that order.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">num_aux_extensions</span></code></td>
<td><p class="first">The number of auxiliary extensions supported by your AEIO.</p>
<p>Say, for example, that you’re writing an AEIO to import information from a 3D program that saves scene information into a .123 file, and camera information into a .xyz file.</p>
<p class="last">The .xyz would be an auxiliary extension; it’s not necessary to get the rest of the scene information, but it’s associated with the .123 files.</p>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">aux_ext</span></code></td>
<td>The file extension of the auxiliary filetype(s) supported by your AEIO.</td>
</tr>
</tbody>
</table>
</div>
<hr class="docutils" />
<div class="section" id="behavior-flags">
<h3>Behavior Flags<a class="headerlink" href="#behavior-flags" title="Permalink to this headline">¶</a></h3>
<p>AEIOs set these flags (like effect plug-ins use global outflags) in AEIO_ModuleInfo.flags to indicate their behavior to After Effects. Some flags are only relevant to input, and some are only relevant to output.</p>
<div class="section" id="aeio-moduleflags">
<h4>AEIO_ModuleFlags<a class="headerlink" href="#aeio-moduleflags" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="74%" />
<col width="6%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Flag</strong></th>
<th class="head"><strong>Purpose</strong></th>
<th class="head"><strong>I or O?</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEIO_MFlag_INPUT</span></code></td>
<td>AEIO is an input module.</td>
<td>Input!</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEIO_MFlag_OUTPUT</span></code></td>
<td>AEIO is an output module (one plug-in can be both).</td>
<td>Output!</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEIO_MFlag_FILE</span></code></td>
<td>Each clip imported directly corresponds to a file, somewhere.</td>
<td>Both</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEIO_MFlag_STILL</span></code></td>
<td>Supports still images, not video.</td>
<td>Output</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEIO_MFlag_VIDEO</span></code></td>
<td>Supports video images, not stills.</td>
<td>Output</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEIO_MFlag_AUDIO</span></code></td>
<td>Supports audio.</td>
<td>Output</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEIO_MFlag_NO_TIME</span></code></td>
<td><p class="first">Time information isn’t part of the file format.</p>
<p class="last">This would be the case with numbered stills, with individual frames imported based on the composition’s time settings.</p>
</td>
<td>Input</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEIO_MFlag_INTERACTIVE_GET</span></code></td>
<td><p class="first">A new input sequence necessitates user interaction.</p>
<p class="last">This would be the case for a non-file-based input module.</p>
</td>
<td>Input</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEIO_MFlag_INTERACTIVE_PUT</span></code></td>
<td><p class="first">A new output sequence necessitates user interaction.</p>
<p class="last">This would be the case for a non-file-based output module.</p>
</td>
<td>Output</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEIO_MFlag_CANT_CLIP</span></code></td>
<td>The AEIO’s drawing functions cannot accept dimensions smaller than the requested dimensions.</td>
<td>Input</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEIO_MFlag_MUST_INTERACT_PUT</span></code></td>
<td>The AEIO must display a dialog box, even if a valid options data handle is available.</td>
<td>Output</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEIO_MFlag_CANT_SOUND_INTERLEAVE</span></code></td>
<td>The AEIO requires that all video data be processed, then sound data (instead of interleaving the processing the video and audio).</td>
<td>Output</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEIO_MFlag_CAN_ADD_FRAMES_NON_LINEAR</span></code></td>
<td>The AEIO supports adding non-sequential frames.</td>
<td>Output</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEIO_MFlag_HOST_DEPTH_DIALOG</span></code></td>
<td>The AEIO wants After Effects to display a bit-depth selection dialog.</td>
<td>Input</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEIO_MFlag_HOST_FRAME_START_DIALOG</span></code></td>
<td>The AEIO wants After Effects to display a dialog requesting that the user specify a starting frame.</td>
<td>Input</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEIO_MFlag_NO_OPTIONS</span></code></td>
<td>The AEIO does not accept output options.</td>
<td>Output</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEIO_MFlag_NO_PIXELS</span></code></td>
<td>The AEIO’s file format doesn’t actually store pixels. Currently unused as of CS6.</td>
<td>(unused)</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEIO_MFlag_SEQUENCE_OPTIONS_OK</span></code></td>
<td>The AEIO will adopt the sequence options of its parent if a folder is selected.</td>
<td>Input</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEIO_MFlag_INPUT_OPTIONS</span></code></td>
<td><p class="first">The AEIO has user options associated with each input sequence.</p>
<p class="last">NOTE: the options information must be flat (not referring to any data contained in external pointers or handles).</p>
</td>
<td>Input</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEIO_MFlag_HSF_AWARE</span></code></td>
<td><p class="first">The AEIO will provide horizontal scaling factor (pixel aspect ratio) information for each new sequence.</p>
<p class="last">This prevents After Effects from guessing.</p>
</td>
<td>Input</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEIO_MFlag_HAS_LAYERS</span></code></td>
<td>The AEIO supports multiple layers in a single document.</td>
<td>Input</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEIO_MFlag_SCRAP</span></code></td>
<td>The AEIO has a clipboard parsing component.</td>
<td>Input</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEIO_MFlag_NO_UI</span></code></td>
<td>After Effects should display no UI for this module (do not combine this flag with <code class="docutils literal notranslate"><span class="pre">AEIO_MFlag_HOST_DEPTH_DIALOG</span></code> or <code class="docutils literal notranslate"><span class="pre">AEIO_MFlag_HOST_FRAME_START_DIALOG</span></code>)</td>
<td>Input</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEIO_MFlag_SEQ_OPTIONS_DLG</span></code></td>
<td>The AEIO has sequence options accessible from the More Options button in the Interpret Footage dialog.</td>
<td>Input</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEIO_MFlag_HAS_AUX_DATA</span></code></td>
<td>The file format supported by the AEIO has depth information, normals, or some other non-color information related to each pixel.</td>
<td>Input</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEIO_MFlag_HAS_META_DATA</span></code></td>
<td><p class="first">The file format supported by the AEIO supports user-definable metadata.</p>
<p class="last">If this flag is set, the embed pop-up in the output module dialog will be enabled.</p>
</td>
<td>Output</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEIO_MFlag_CAN_DO_MARKERS</span></code></td>
<td>The file format support by the AEIO supports markers, url flips, and/or chapters.</td>
<td>Output</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEIO_MFlag_CAN_DRAW_DEEP</span></code></td>
<td>The AEIO can draw into 16bpc (“deep”) <code class="docutils literal notranslate"><span class="pre">PF_EffectWorlds</span></code>.</td>
<td>Input</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEIO_MFlag_RESERVED4</span></code></td>
<td><p class="first">Special super-secret flag. Doesn’t do anything…or does it?</p>
<p class="last">(<em>No, it doesn’t.</em>)</p>
</td>
<td>???</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="aeio-moduleflags2">
<h4>AEIO_ModuleFlags2<a class="headerlink" href="#aeio-moduleflags2" title="Permalink to this headline">¶</a></h4>
<p>Gotta have dem flags…</p>
<table border="1" class="docutils">
<colgroup>
<col width="29%" />
<col width="64%" />
<col width="7%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Flag</strong></th>
<th class="head"><strong>Purpose</strong></th>
<th class="head"><strong>I or O?</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEIO_MFlag2_AUDIO_OPTIONS</span></code></td>
<td>The AEIO has an audio options dialog.</td>
<td>Output</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEIO_MFlag2_SEND_ADDMARKER_BEFORE_ADDFRAME</span></code></td>
<td>The AEIO wants to receive marker data before outputting video or audio (useful for MPEG streams).</td>
<td>Output</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEIO_MFlag2_CAN_DO_MARKERS_2</span></code></td>
<td>The AEIO supports combined markers; URL flips, chapters, and comments.</td>
<td>Output</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEIO_MFlag2_CAN_DRAW_FLOAT</span></code></td>
<td>The AEIO can draw into float (32-bpc) worlds.</td>
<td>Input</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEIO_MFlag2_CAN_DO_AUDIO_32</span></code></td>
<td>Supports 32-bit audio output.</td>
<td>Output</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEIO_MFlag2_SUPPORTS_ICC_PROFILES</span></code></td>
<td>Supports ICC profiles.</td>
<td>Both</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEIO_MFlag2_CAN_DO_MARKERS_3</span></code></td>
<td>The AEIO supports combined markers; URL flips, chapters, comments, and cue points.</td>
<td>Output</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEIO_MFlag2_SEND_ADDMARKER_BEFORE_STARTADDING</span></code></td>
<td>The AEIO wants to process markers before video during export.</td>
<td>Output</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEIO_MFlag2_USES_QUICKTIME</span></code></td>
<td>On MacOS, prior to the host calling <code class="docutils literal notranslate"><span class="pre">AEIO_AddFrame</span></code> or <code class="docutils literal notranslate"><span class="pre">AEIO_OutputFrame</span></code>
from <a class="reference internal" href="index.html#aeios-new-kids-on-the-function-block-aeio-functionblock"><span class="std std-ref">AEIO_FunctionBlock4</span></a>, it will lock the global QuickTime mutex.</td>
<td>Output</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<span id="document-aeios/new-kids-on-the-function-block"></span><div class="section" id="new-kids-on-the-function-block">
<span id="aeios-new-kids-on-the-function-block"></span><h2>New Kids On The Function Block<a class="headerlink" href="#new-kids-on-the-function-block" title="Permalink to this headline">¶</a></h2>
<p>During its main entry point function, each AEIO plug-in must fill in an AEIO_FunctionBlock, providing pointers to the functions After Effects will call for different file-related tasks.</p>
<p>The table below shows which functions are needed for input, and which ones are needed for output. For a bare-bones implementation, start with the functions that are noted as “Required” in the right column. You can often invoke “best-case” behavior by having After Effects handle the call for you (by returning <code class="docutils literal notranslate"><span class="pre">AEIO_Err_USE_DFLT_CALLBACK</span></code>).</p>
<p>For a barebones AEIO for video input only, implement the following functions: <code class="docutils literal notranslate"><span class="pre">AEIO_InitInSpecFromFile</span></code> or <code class="docutils literal notranslate"><span class="pre">AEIO_InitInSpecInteractive</span></code> (depending on whether the source is a file or interactively generated), <code class="docutils literal notranslate"><span class="pre">AEIO_DisposeInSpec</span></code>, <code class="docutils literal notranslate"><span class="pre">AEIO_GetInSpecInfo</span></code>, <code class="docutils literal notranslate"><span class="pre">AEIO_DrawSparseFrame</span></code>, <code class="docutils literal notranslate"><span class="pre">AEIO_CloseSourceFiles</span></code>, and <code class="docutils literal notranslate"><span class="pre">AEIO_InqNextFrameTime</span></code> (using <code class="docutils literal notranslate"><span class="pre">AEIO_Err_USE_DFLT_CALLBACK</span></code> is fine).</p>
<p>Starting from the IO sample, it is best to leave the other functions defined too, and fill them in further as needed.</p>
<hr class="docutils" />
<div class="section" id="aeio-functionblock4">
<span id="aeios-new-kids-on-the-function-block-aeio-functionblock"></span><h3>AEIO_FunctionBlock4<a class="headerlink" href="#aeio-functionblock4" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="14%" />
<col width="58%" />
<col width="5%" />
<col width="23%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Function</strong></th>
<th class="head"><strong>Response</strong></th>
<th class="head"><strong>I or O?</strong></th>
<th class="head"><strong>Required?</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEIO_InitInSpecFromFile</span></code></td>
<td><p class="first">Given a file path, describe its contents to After Effects in the provided <code class="docutils literal notranslate"><span class="pre">AEIO_InSpecH</span></code>.
Use all appropriate “set” calls from the <a class="reference internal" href="#aeios-new-kids-on-the-function-block-aegp-ioinsuite"><span class="std std-ref">AEGP_IOInSuite</span></a>) to do so;
if there is image data, set its depth, dimensions, and alpha interpretation.
If there is audio, describe its channels and sample rate.</p>
<p>The file path is a NULL-terminated UTF-16 string with platform separators.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEIO_InitInSpecFromFile</span><span class="p">(</span>
  <span class="n">AEIO_BasicData</span>     <span class="o">*</span><span class="n">basic_dataP</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_UTF16Char</span>  <span class="o">*</span><span class="n">file_pathZ</span><span class="p">,</span>
  <span class="n">AEIO_InSpecH</span>       <span class="n">inH</span><span class="p">);</span>
</pre></div>
</div>
</td>
<td>Input</td>
<td>Yes, for file-based media</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEIO_InitInSpecInteractive</span></code></td>
<td><p class="first">Using some form of user interaction (and not a file path provided by After Effects),
describe the audio and video your generated AEIO_InSpecH contains.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEIO_InitInSpecInteractive</span><span class="p">(</span>
  <span class="n">AEIO_BasicData</span>  <span class="o">*</span><span class="n">basic_dataP</span><span class="p">,</span>
  <span class="n">AEIO_InSpecH</span>    <span class="n">inH</span><span class="p">);</span>
</pre></div>
</div>
</td>
<td>Input</td>
<td>Yes, for interactiv ely generated media</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEIO_DisposeInSpec</span></code></td>
<td><p class="first">Free an <code class="docutils literal notranslate"><span class="pre">AEIO_InSpecH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEIO_DisposeInSpec</span><span class="p">(</span>
  <span class="n">AEIO_BasicData</span>  <span class="o">*</span><span class="n">basic_dataP</span><span class="p">,</span>
  <span class="n">AEIO_InSpecH</span>    <span class="n">inH</span><span class="p">);</span>
</pre></div>
</div>
</td>
<td>Input</td>
<td>Yes</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEIO_FlattenOptions</span></code></td>
<td><p class="first">For the given <code class="docutils literal notranslate"><span class="pre">AEIO_InSpecH</span></code>, return a flattened version of the data contained in its options handle.
Obtain the unflattened options handle using <code class="docutils literal notranslate"><span class="pre">AEGP_GetInSpecOptionsHandle</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEIO_FlattenOptions</span><span class="p">(</span>
  <span class="n">AEIO_BasicData</span>  <span class="o">*</span><span class="n">basic_dataP</span><span class="p">,</span>
  <span class="n">AEIO_InSpecH</span>    <span class="n">inH</span><span class="p">,</span>
  <span class="n">AEIO_Handle</span>     <span class="o">*</span><span class="n">flat_optionsPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
<td>Input</td>
<td>No</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEIO_InflateOptions</span></code></td>
<td><p class="first">For the given <code class="docutils literal notranslate"><span class="pre">AEIO_InSpecH</span></code>, create (using <code class="docutils literal notranslate"><span class="pre">AEGP_SetInSpecOptionsHandle</span></code>)
an unflattened version of its flattened option data.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEIO_InflateOptions</span><span class="p">(</span>
  <span class="n">AEIO_BasicData</span>  <span class="o">*</span><span class="n">basic_dataP</span><span class="p">,</span>
  <span class="n">AEIO_InSpecH</span>    <span class="n">inH</span><span class="p">,</span>
  <span class="n">AEIO_Handle</span>     <span class="n">flat_optionsH</span><span class="p">);</span>
</pre></div>
</div>
</td>
<td>Input</td>
<td>No</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEIO_SynchInSpec</span></code></td>
<td><p class="first"><code class="docutils literal notranslate"><span class="pre">AEIO_Err_USE_DFLT_CALLBACK</span></code> allowed.
Inspect the <code class="docutils literal notranslate"><span class="pre">AEIO_InSpecH</span></code>, update its options if necessary), and indicate whether or not you made changes.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEIO_SynchInSpec</span><span class="p">(</span>
  <span class="n">AEIO_BasicData</span>  <span class="o">*</span><span class="n">basic_dataP</span><span class="p">,</span>
  <span class="n">AEIO_InSpecH</span>    <span class="n">inH</span><span class="p">,</span>
  <span class="n">A_Boolean</span>       <span class="o">*</span><span class="n">changed0</span><span class="p">);</span>
</pre></div>
</div>
</td>
<td>Input</td>
<td>No</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEIO_GetActiveExtent</span></code></td>
<td><p class="first"><code class="docutils literal notranslate"><span class="pre">AEIO_Err_USE_DFLT_CALLBACK</span></code> allowed.
Populate the provided <code class="docutils literal notranslate"><span class="pre">A_LRect</span></code> with the active extent of the file’s pixels at the given time.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEIO_GetActiveExtent</span><span class="p">(</span>
  <span class="n">AEIO_BasicData</span>  <span class="o">*</span><span class="n">basic_dataP</span><span class="p">,</span>
  <span class="n">AEIO_InSpecH</span>    <span class="n">inH</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_Time</span>    <span class="o">*</span><span class="n">tr</span><span class="p">,</span>
  <span class="n">A_LRect</span>         <span class="o">*</span><span class="n">extent</span><span class="p">);</span>
</pre></div>
</div>
</td>
<td>Input</td>
<td>Yes</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEIO_GetInSpecInfo</span></code></td>
<td><p class="first">Provide a few strings in <code class="docutils literal notranslate"><span class="pre">AEIO_Verbiage</span></code> to describe the file, which will appear in the Project panel.
This includes the strings used to describe the file type and subtype (the codec).</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEIO_GetInSpecInfo</span><span class="p">(</span>
  <span class="n">AEIO_BasicData</span>  <span class="o">*</span><span class="n">basic_dataP</span><span class="p">,</span>
  <span class="n">AEIO_InSpecH</span>    <span class="n">inH</span><span class="p">,</span>
  <span class="n">AEIO_Verbiage</span>   <span class="o">*</span><span class="n">verbiageP</span><span class="p">);</span>
</pre></div>
</div>
<p>This function gets called OFTEN; every time we refresh the project panel.
Keep allocations to a minimum.
In the AEIOs that ship with After Effects, we check for a valid <code class="docutils literal notranslate"><span class="pre">optionsH</span></code> (using <code class="docutils literal notranslate"><span class="pre">AEGP_GetInSpecOptionsHandle</span></code>);
if we find one, we use the information from within it. If not, we do nothing.</p>
<p class="last">This is important; if your AEIO handles still images, this function <em>will</em> get called for the folder containing the stills.
Hopefully, there won’t be an optionsH associated with it (unless you’re writing a truly bizarre AEIO).</p>
</td>
<td>Input</td>
<td>Yes</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEIO_DrawSparseFrame</span></code></td>
<td><p class="first">Draw a frame from the <code class="docutils literal notranslate"><span class="pre">AEIO_InSpecH</span></code>.
The <code class="docutils literal notranslate"><span class="pre">PF_EffectWorld*</span></code> contains the width and height to use, but make sure you take the required_region0 into account, if it’s not NULL.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEIO_DrawSparseFrame</span><span class="p">(</span>
  <span class="n">AEIO_BasicData</span>            <span class="o">*</span><span class="n">basic_dataP</span><span class="p">,</span>
  <span class="n">AEIO_InSpecH</span>              <span class="n">inH</span><span class="p">,</span>
  <span class="n">AEIO_Quality</span>              <span class="n">qual</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">AEIO_RationalScale</span>  <span class="o">*</span><span class="n">rs0</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_Time</span>              <span class="o">*</span><span class="n">tr</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_Time</span>              <span class="o">*</span><span class="n">duration0</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_Rect</span>               <span class="o">*</span><span class="n">required_region0</span><span class="p">,</span>
  <span class="n">PF_EffectWorld</span>            <span class="o">*</span><span class="n">wP</span><span class="p">,</span>
  <span class="n">A_long</span><span class="o">*</span>                   <span class="n">originx</span><span class="p">,</span>
  <span class="n">A_long</span><span class="o">*</span>                   <span class="n">originy</span><span class="p">,</span>
  <span class="n">AEIO_DrawingFlags</span>         <span class="o">*</span><span class="n">draw_flagsP</span><span class="p">);</span>
</pre></div>
</div>
<p class="last">NOTE: return data as linear light (1.0), and After Effects
will perform any necessary transformations to bring the footage into the working colorspace.</p>
</td>
<td>Input</td>
<td>Yes</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEIO_GetDimensions</span></code></td>
<td><p class="first">AEIO_Err_USE_DFLT_CALLBACK allowed. Provide the dimensions (and, if necessary, scaling factor) of the video in the AEIO_InSpecH.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEIO_GetDimensions</span><span class="p">(</span>
  <span class="n">AEIO_BasicData</span>            <span class="o">*</span><span class="n">basic_dataP</span><span class="p">,</span>
  <span class="n">AEIO_InSpecH</span>              <span class="n">inH</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">AEIO_RationalScale</span>  <span class="o">*</span><span class="n">rs0</span><span class="p">,</span>
  <span class="n">A_long</span>                    <span class="o">*</span><span class="n">width0</span><span class="p">,</span>
  <span class="n">A_long</span>                    <span class="o">*</span><span class="n">height0</span><span class="p">);</span>
</pre></div>
</div>
</td>
<td>Input</td>
<td>No</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEIO_GetDuration</span></code></td>
<td><p class="first"><code class="docutils literal notranslate"><span class="pre">AEIO_Err_USE_DFLT_CALLBACK</span></code> allowed. Provide the duration of an <code class="docutils literal notranslate"><span class="pre">AEIO_InSpecH</span></code>, in seconds.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEIO_GetDuration</span><span class="p">(</span>
  <span class="n">AEIO_BasicData</span>  <span class="o">*</span><span class="n">basic_dataP</span><span class="p">,</span>
  <span class="n">AEIO_InSpecH</span>    <span class="n">inH</span><span class="p">,</span>
  <span class="n">A_Time</span>          <span class="o">*</span><span class="n">trP</span><span class="p">);</span>
</pre></div>
</div>
</td>
<td>Input</td>
<td>No</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEIO_GetTime</span></code></td>
<td><p class="first"><code class="docutils literal notranslate"><span class="pre">AEIO_Err_USE_DFLT_CALLBACK</span></code> allowed. Provide the timebase of an <code class="docutils literal notranslate"><span class="pre">AEIO_InSpecH</span></code>.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEIO_GetTime</span><span class="p">(</span>
  <span class="n">AEIO_BasicData</span>  <span class="o">*</span><span class="n">basic_dataP</span><span class="p">,</span>
  <span class="n">AEIO_InSpecH</span>    <span class="n">inH</span><span class="p">,</span>
  <span class="n">A_Time</span>          <span class="o">*</span><span class="n">tr</span><span class="p">);</span>
</pre></div>
</div>
<p>Here are the values we use internally for common timebases:</p>
<p class="last">29.97 fps: scale = 100; value= 2997;
59.94 fps: scale = 50; value = 2997;
23.976 fps: scale = 125; value = 2997;
30 fps: scale = 1; value = 30;
25 fps: scale = 1; value = 25;</p>
</td>
<td>Input</td>
<td>No</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEIO_GetSound</span></code></td>
<td><p class="first"><code class="docutils literal notranslate"><span class="pre">AEIO_Err_USE_DFLT_CALLBACK</span></code> allowed. Provide sound from an <code class="docutils literal notranslate"><span class="pre">AEIO_InSpecH</span></code>, at the quality described.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEIO_GetSound</span><span class="p">(</span>
  <span class="n">AEIO_BasicData</span>             <span class="o">*</span><span class="n">basic_dataP</span><span class="p">,</span>
  <span class="n">AEIO_InSpecH</span>               <span class="n">inH</span><span class="p">,</span>
  <span class="n">AEIO_SndQuality</span>            <span class="n">quality</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">AEIO_InterruptFuncs</span>  <span class="o">*</span><span class="n">interrupt_funcsP0</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_Time</span>               <span class="o">*</span><span class="n">startPT</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_Time</span>               <span class="o">*</span><span class="n">durPT</span><span class="p">,</span>
  <span class="n">A_u_long</span>                   <span class="n">start_sampLu</span><span class="p">,</span>
  <span class="n">A_u_long</span>                   <span class="n">num_samplesLu</span><span class="p">,</span>
  <span class="kt">void</span>                       <span class="o">*</span><span class="n">dataPV</span><span class="p">);</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">AEIO_SndQuality</span></code> may be:</p>
<blockquote class="last">
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">AEIO_SndQuality_APPROX</span></code>, (this quality is used to draw the audio waveform)</li>
<li><code class="docutils literal notranslate"><span class="pre">AEIO_SndQuality_LO</span></code>,</li>
<li><code class="docutils literal notranslate"><span class="pre">AEIO_SndQuality_HI</span></code></li>
</ul>
</div></blockquote>
</td>
<td>Input</td>
<td>No</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEIO_InqNextFrameTime</span></code></td>
<td><p class="first"><code class="docutils literal notranslate"><span class="pre">AEIO_Err_USE_DFLT_CALLBACK</span></code> allowed.
Provide the time of the next frame (in the source footage’s timebase) within the <code class="docutils literal notranslate"><span class="pre">AEIO_InSpecH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEIO_InqNextFrameTime</span><span class="p">(</span>
  <span class="n">AEIO_BasicData</span>  <span class="o">*</span><span class="n">basic_dataP</span><span class="p">,</span>
  <span class="n">AEIO_InSpecH</span>    <span class="n">inH</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_Time</span>    <span class="o">*</span><span class="n">base_time_tr</span><span class="p">,</span>
  <span class="n">AEIO_TimeDir</span>    <span class="n">time_dir</span><span class="p">,</span>
  <span class="n">A_Boolean</span>       <span class="o">*</span><span class="n">found0</span><span class="p">,</span>
  <span class="n">A_Time</span>          <span class="o">*</span><span class="n">key_time_tr0</span><span class="p">);</span>
</pre></div>
</div>
</td>
<td>Input</td>
<td>Yes</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEIO_InitOutputSpec</span></code></td>
<td><p class="first"><code class="docutils literal notranslate"><span class="pre">AEIO_Err_USE_DFLT_CALLBACK</span></code> allowed.
Perform any initialization necessary for a new <code class="docutils literal notranslate"><span class="pre">AEIO_OutSpecH</span></code>, and indicate whether you made changes.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEIO_InitOutputSpec</span><span class="p">(</span>
  <span class="n">AEIO_BasicData</span>  <span class="o">*</span><span class="n">basic_dataP</span><span class="p">,</span>
  <span class="n">AEIO_OutSpecH</span>   <span class="n">outH</span><span class="p">,</span>
  <span class="n">A_Boolean</span>       <span class="o">*</span><span class="n">user_interacted</span><span class="p">);</span>
</pre></div>
</div>
<p class="last">NOTE: The first time your AEIO is used, After Effects caches the last-known-good optionsH in its preferences.
When testing this function, <a class="reference internal" href="index.html#intro-debugging-plug-ins-deleting-preferences"><span class="std std-ref">delete your preferences</span></a> often.</p>
</td>
<td>Output</td>
<td>Yes</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEIO_GetFlatOutputOptions</span></code></td>
<td><p class="first">Describe (in an <code class="docutils literal notranslate"><span class="pre">AEIO_Handle</span></code>) the output options for an <code class="docutils literal notranslate"><span class="pre">AEIO_OutSpecH</span></code>,
in a disk-safe flat data structure (one that does not reference external memory).
Note that your output options must be cross-platform, so pay attention to byte ordering issues.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEIO_GetFlatOutputOptions</span><span class="p">(</span>
  <span class="n">AEIO_BasicData</span>  <span class="o">*</span><span class="n">basic_dataP</span><span class="p">,</span>
  <span class="n">AEIO_OutSpecH</span>   <span class="n">outH</span><span class="p">,</span>
  <span class="n">AEIO_Handle</span>     <span class="o">*</span><span class="n">optionsH</span><span class="p">);</span>
</pre></div>
</div>
</td>
<td>Output</td>
<td>Yes</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEIO_DisposeOutputOptions</span></code></td>
<td><p class="first"><code class="docutils literal notranslate"><span class="pre">AEIO_Err_USE_DFLT_CALLBACK</span></code> allowed. Free the memory for the output options passed in.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEIO_DisposeOutputOptions</span><span class="p">(</span>
  <span class="n">AEIO_BasicData</span>  <span class="o">*</span><span class="n">basic_dataP</span><span class="p">,</span>
  <span class="kt">void</span>            <span class="o">*</span><span class="n">optionsPV</span><span class="p">);</span>
</pre></div>
</div>
</td>
<td>Output</td>
<td>No</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEIO_UserOptionsDialog</span></code></td>
<td><p class="first">Display an output settings dialog (select TIFF output within After Effects to see when this dialog will occur).
Store this information in an options handle using <code class="docutils literal notranslate"><span class="pre">AEGP_SetInSpecOptionsHandle</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEIO_UserOptionsDialog</span><span class="p">(</span>
  <span class="n">AEIO_BasicData</span>  <span class="o">*</span><span class="n">basic_dataP</span><span class="p">,</span>
  <span class="n">AEIO_OutSpecH</span>   <span class="n">outH</span><span class="p">,</span>
  <span class="n">PF_EffectWorld</span>  <span class="o">*</span><span class="n">sample0</span><span class="p">,</span>
  <span class="n">A_Boolean</span>       <span class="o">*</span><span class="n">interacted0</span><span class="p">);</span>
</pre></div>
</div>
</td>
<td>Output</td>
<td>No</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEIO_GetOutputInfo</span></code></td>
<td><p class="first">Describe (in text) the output options in an <code class="docutils literal notranslate"><span class="pre">AEIO_OutSpecH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEIO_GetOutputInfo</span><span class="p">(</span>
  <span class="n">AEIO_BasicData</span>  <span class="o">*</span><span class="n">basic_dataP</span><span class="p">,</span>
  <span class="n">AEIO_OutSpecH</span>   <span class="n">outH</span><span class="p">,</span>
  <span class="n">AEIO_Verbiage</span>   <span class="o">*</span><span class="n">verbiage</span><span class="p">);</span>
</pre></div>
</div>
</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEIO_OutputInfoChanged</span></code></td>
<td><p class="first">Update the <code class="docutils literal notranslate"><span class="pre">AEIO_OutSpecH</span></code> based on the current settings (using the various Get functions to obtain them).</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEIO_OutputInfoChanged</span><span class="p">(</span>
  <span class="n">AEIO_BasicData</span>  <span class="o">*</span><span class="n">basic_dataP</span><span class="p">,</span>
  <span class="n">AEIO_OutSpecH</span>   <span class="n">outH</span><span class="p">);</span>
</pre></div>
</div>
</td>
<td>Output</td>
<td>No</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEIO_SetOutputFile</span></code></td>
<td><p class="first"><code class="docutils literal notranslate"><span class="pre">AEIO_Err_USE_DFLT_CALLBACK</span></code> allowed. Set the file path for output of an <code class="docutils literal notranslate"><span class="pre">AEIO_OutSpecH</span></code>.
Return <code class="docutils literal notranslate"><span class="pre">AEIO_Err_USE_DEFAULT_CALLBACK</span></code> unless you’ve changed the path.</p>
<p>The file path is a NULL-terminated UTF-16 string with platform separators.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEIO_SetOutputFile</span><span class="p">(</span>
  <span class="n">AEIO_BasicData</span>  <span class="o">*</span><span class="n">basic_dataP</span><span class="p">,</span>
  <span class="n">AEIO_OutSpecH</span>   <span class="n">outH</span><span class="p">,</span>
  <span class="n">A_UTF16Char</span>     <span class="o">*</span><span class="n">file_pathZ</span><span class="p">);</span>
</pre></div>
</div>
</td>
<td>Output</td>
<td>Yes</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEIO_StartAdding</span></code></td>
<td><p class="first">Prepare to add frames to the output file.
This is a good time to create the ouput file(s) on disk, and to write any header information to such files.
This is also your first opportunity to allocate pixel buffers based on valid output spec values.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEIO_StartAdding</span><span class="p">(</span>
  <span class="n">AEIO_BasicData</span>  <span class="o">*</span><span class="n">basic_dataP</span><span class="p">,</span>
  <span class="n">AEIO_OutSpecH</span>   <span class="n">outH</span><span class="p">,</span>
  <span class="n">A_long</span>          <span class="n">flags</span><span class="p">);</span>
</pre></div>
</div>
</td>
<td>Output</td>
<td>Yes, for writing formats that support multiple frames</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEIO_AddFrame</span></code></td>
<td><p class="first">Add frame(s) to output file. You may pass a pointer to a function you want called if the user interrupts the render.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEIO_AddFrame</span><span class="p">(</span>
  <span class="n">AEIO_BasicData</span>       <span class="o">*</span><span class="n">basic_dataP</span><span class="p">,</span>
  <span class="n">AEIO_OutSpecH</span>        <span class="n">outH</span><span class="p">,</span>
  <span class="n">A_long</span>               <span class="n">frame_index</span><span class="p">,</span>
  <span class="n">A_long</span>               <span class="n">frames</span><span class="p">,</span>
  <span class="n">PF_EffectWorld</span>       <span class="o">*</span><span class="n">wP</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_LPoint</span>       <span class="o">*</span><span class="n">origin0</span><span class="p">,</span>
  <span class="n">A_Boolean</span>            <span class="n">was_compressedB</span><span class="p">,</span>
  <span class="n">AEIO_InterruptFuncs</span>  <span class="o">*</span><span class="n">inter0</span><span class="p">);</span>
</pre></div>
</div>
</td>
<td>Output</td>
<td>Yes, for writing formats that support multiple frames</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEIO_EndAdding</span></code></td>
<td><p class="first">Perform any clean-up associated with adding frames.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEIO_EndAdding</span><span class="p">(</span>
  <span class="n">AEIO_BasicData</span>  <span class="o">*</span><span class="n">basic_dataP</span><span class="p">,</span>
  <span class="n">AEIO_OutSpecH</span>   <span class="n">outH</span><span class="p">,</span>
  <span class="n">A_long</span>          <span class="n">flags</span><span class="p">);</span>
</pre></div>
</div>
</td>
<td>Output</td>
<td>Yes, for writing formats that support multiple frames</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEIO_OutputFrame</span></code></td>
<td><p class="first">Output a single frame.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEIO_OutputFrame</span><span class="p">(</span>
  <span class="n">AEIO_BasicData</span>  <span class="o">*</span><span class="n">basic_dataP</span><span class="p">,</span>
  <span class="n">AEIO_OutSpecH</span>   <span class="n">outH</span><span class="p">,</span>
  <span class="n">PF_EffectWorld</span>  <span class="o">*</span><span class="n">wP</span><span class="p">);</span>
</pre></div>
</div>
</td>
<td>Output</td>
<td>Yes, for writing formats that support a single frame</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEIO_WriteLabels</span></code></td>
<td><p class="first"><code class="docutils literal notranslate"><span class="pre">AEIO_Err_USE_DFLT_CALLBACK</span></code> allowed. Set alpha interpretation and field usage information for the <code class="docutils literal notranslate"><span class="pre">AEIO_OutSpecH</span></code>.
Indicate in <code class="docutils literal notranslate"><span class="pre">AEIO_LabelFlags</span></code> which flags you wrote.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEIO_WriteLabels</span><span class="p">(</span>
  <span class="n">AEIO_BasicData</span>   <span class="o">*</span><span class="n">basic_dataP</span><span class="p">,</span>
  <span class="n">AEIO_OutSpecH</span>    <span class="n">outH</span><span class="p">,</span>
  <span class="n">AEIO_LabelFlags</span>  <span class="o">*</span><span class="n">written</span><span class="p">);</span>
</pre></div>
</div>
</td>
<td>Output</td>
<td>Yes</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEIO_GetSizes</span></code></td>
<td><p class="first"><code class="docutils literal notranslate"><span class="pre">AEIO_Err_USE_DFLT_CALLBACK</span></code> allowed. Provide information about file size and remaining free space on output volume.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEIO_GetSizes</span><span class="p">(</span>
  <span class="n">AEIO_BasicData</span>  <span class="o">*</span><span class="n">basic_dataP</span><span class="p">,</span>
  <span class="n">AEIO_OutSpecH</span>   <span class="n">outH</span><span class="p">,</span>
  <span class="n">A_u_longlong</span>    <span class="o">*</span><span class="n">free_space</span><span class="p">,</span>
  <span class="n">A_u_longlong</span>    <span class="o">*</span><span class="n">file_size</span><span class="p">);</span>
</pre></div>
</div>
</td>
<td>Output</td>
<td>Yes</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEIO_Flush</span></code></td>
<td><p class="first">Destroy any options or user data associated with the <code class="docutils literal notranslate"><span class="pre">OutSpecH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEIO_Flush</span><span class="p">(</span>
  <span class="n">AEIO_BasicData</span>  <span class="o">*</span><span class="n">basic_dataP</span><span class="p">,</span>
  <span class="n">AEIO_OutSpecH</span>   <span class="n">outH</span><span class="p">);</span>
</pre></div>
</div>
</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEIO_AddSoundChunk</span></code></td>
<td><p class="first">Add the given sound to the output file.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEIO_AddSoundChunk</span><span class="p">(</span>
  <span class="n">AEIO_BasicData</span>  <span class="o">*</span><span class="n">basic_dataP</span><span class="p">,</span>
  <span class="n">AEIO_OutSpecH</span>   <span class="n">outH</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_Time</span>    <span class="o">*</span><span class="n">start</span><span class="p">,</span>
  <span class="n">AEIO_SndWorldH</span>  <span class="n">swH</span><span class="p">);</span>
</pre></div>
</div>
</td>
<td>Output</td>
<td>Yes, for writing formats with audio</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEIO_Idle</span></code></td>
<td><p class="first">Optional. Do something with idle time. <code class="docutils literal notranslate"><span class="pre">AEIO_Err_USE_DFLT_CALLBACK</span></code> is not supported.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEIO_Idle</span><span class="p">(</span>
  <span class="n">AEIO_BasicData</span>        <span class="o">*</span><span class="n">basic_dataP</span><span class="p">,</span>
  <span class="n">AEIO_ModuleSignature</span>  <span class="n">sig</span><span class="p">,</span>
  <span class="n">AEIO_IdleFlags</span>        <span class="o">*</span><span class="n">idle_flags0</span><span class="p">);</span>
</pre></div>
</div>
</td>
<td>Output</td>
<td>No</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEIO_GetDepths</span></code></td>
<td><p class="first">Set <code class="docutils literal notranslate"><span class="pre">AEIO_OptionsFlags</span></code> to indicate which pixel and color depths are valid for your output format.
See the discussion on <a class="reference internal" href="index.html#aeios-implementation-details"><span class="std std-ref">Export Bit-Depth</span></a>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEIO_GetDepths</span><span class="p">(</span>
  <span class="n">AEIO_BasicData</span>     <span class="o">*</span><span class="n">basic_dataP</span><span class="p">,</span>
  <span class="n">AEIO_OutSpecH</span>      <span class="n">outH</span><span class="p">,</span>
  <span class="n">AEIO_OptionsFlags</span>  <span class="o">*</span><span class="n">which</span><span class="p">);</span>
</pre></div>
</div>
</td>
<td>Output</td>
<td>Yes</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEIO_GetOutputSuffix</span></code></td>
<td><p class="first"><code class="docutils literal notranslate"><span class="pre">AEIO_Err_USE_DFLT_CALLBACK</span></code> allowed. Describe the three character extension for the output file.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEIO_GetOutputSuffix</span><span class="p">(</span>
  <span class="n">AEIO_BasicData</span>  <span class="o">*</span><span class="n">basic_dataP</span><span class="p">,</span>
  <span class="n">AEIO_OutSpecH</span>   <span class="n">outH</span><span class="p">,</span>
  <span class="n">A_char</span>          <span class="o">*</span><span class="n">suffix</span><span class="p">);</span>
</pre></div>
</div>
</td>
<td>Output</td>
<td>Yes</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEIO_SeqOptionsDlg</span></code></td>
<td><p class="first">Display a footage options dialog, and indicate whether the user made any changes.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEIO_SeqOptionsDlg</span><span class="p">(</span>
  <span class="n">AEIO_BasicData</span>  <span class="o">*</span><span class="n">basic_dataP</span><span class="p">,</span>
  <span class="n">AEIO_InSpecH</span>    <span class="n">inH</span><span class="p">,</span>
  <span class="n">A_Boolean</span>       <span class="o">*</span><span class="n">interactedPB</span><span class="p">);</span>
</pre></div>
</div>
</td>
<td>Input</td>
<td>No</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEIO_GetNumAuxChannels</span></code></td>
<td><p class="first">Enumerate the auxiliary (beyond red, green, blue and alpha) channels of data contained in an <code class="docutils literal notranslate"><span class="pre">AEIO_InSpecH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEIO_GetNumAuxChannels</span><span class="p">(</span>
  <span class="n">AEIO_BasicData</span>  <span class="o">*</span><span class="n">basic_dataP</span><span class="p">,</span>
  <span class="n">AEIO_InSpecH</span>    <span class="n">inH</span><span class="p">,</span>
  <span class="n">A_long</span>          <span class="o">*</span><span class="n">num_channelsPL</span><span class="p">);</span>
</pre></div>
</div>
</td>
<td>Input</td>
<td>No</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEIO_GetAuxChannelDesc</span></code></td>
<td><p class="first">Describe the data type, name, channel, and dimensionality of an auxiliary data channel.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEIO_GetAuxChannelDesc</span><span class="p">(</span>
  <span class="n">AEIO_BasicData</span>  <span class="o">*</span><span class="n">basic_dataP</span><span class="p">,</span>
  <span class="n">AEIO_InSpecH</span>    <span class="n">inH</span><span class="p">,</span>
  <span class="kt">long</span>            <span class="n">chan_indexL</span><span class="p">,</span>
  <span class="n">PF_ChannelDesc</span>  <span class="o">*</span><span class="n">descP</span><span class="p">);</span>
</pre></div>
</div>
</td>
<td>Input</td>
<td>No</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEIO_DrawAuxChannel</span></code></td>
<td><p class="first">Draw the auxiliary channel(s) from an <code class="docutils literal notranslate"><span class="pre">AEIO_InSpecH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEIO_DrawAuxChannel</span><span class="p">(</span>
  <span class="n">AEIO_BasicData</span>          <span class="o">*</span><span class="n">basic_dataP</span><span class="p">,</span>
  <span class="n">AEIO_InSpecH</span>            <span class="n">inH</span><span class="p">,</span>
  <span class="n">A_long</span>                  <span class="n">chan_indexL</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">AEIO_DrawFramePB</span>  <span class="o">*</span><span class="n">pbP</span><span class="p">,</span>
  <span class="n">PF_ChannelChunk</span>         <span class="o">*</span><span class="n">chunkP</span><span class="p">);</span>
</pre></div>
</div>
</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEIO_FreeAuxChannel</span></code></td>
<td><p class="first">Free data associated with an auxiliary channel.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEIO_FreeAuxChannel</span><span class="p">(</span>
  <span class="n">AEIO_BasicData</span>   <span class="o">*</span><span class="n">basic_dataP</span><span class="p">,</span>
  <span class="n">AEIO_InSpecH</span>     <span class="n">inH</span><span class="p">,</span>
  <span class="n">PF_ChannelChunk</span>  <span class="o">*</span><span class="n">chunkP</span><span class="p">);</span>
</pre></div>
</div>
</td>
<td>Input</td>
<td>No</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEIO_Num</span></code> AuxFiles</td>
<td><p class="first">Enumerate the files needed to render the given <code class="docutils literal notranslate"><span class="pre">AEIO_InSpecH</span></code>.
This function and <code class="docutils literal notranslate"><span class="pre">AEIO_GetNthAuxFileSpec</span></code> will be called when the user chooses <code class="docutils literal notranslate"><span class="pre">File</span> <span class="pre">&gt;</span> <span class="pre">Dependencies</span> <span class="pre">&gt;</span> <span class="pre">Collect</span> <span class="pre">Files…</span></code>
Here your AEIO tells AE what the associated files are.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEIO_NumAuxFiles</span><span class="p">(</span>
  <span class="n">AEIO_BasicData</span>  <span class="o">*</span><span class="n">basic_dataP</span><span class="p">,</span>
  <span class="n">AEIO_InSpecH</span>    <span class="n">seqH</span><span class="p">,</span>
  <span class="n">A_long</span>          <span class="o">*</span><span class="n">files_per_framePL</span><span class="p">);</span>
</pre></div>
</div>
</td>
<td>Input</td>
<td>No</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEIO_GetNthAuxFileSpec</span></code></td>
<td><p class="first">Retrieve data from the nth auxiliary file, for the specified frame.
The path is a handle to a NULL-terminated A_UTF16Char string, and must be disposed with <code class="docutils literal notranslate"><span class="pre">AEGP_FreeMemHandle</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEIO_GetNthAuxFileSpec</span><span class="p">(</span>
  <span class="n">AEIO_BasicData</span> <span class="o">*</span><span class="n">basic_dataP</span><span class="p">,</span>
  <span class="n">AEIO_InSpecH</span>   <span class="n">seqH</span><span class="p">,</span>
  <span class="n">A_long</span>         <span class="n">frame_numL</span><span class="p">,</span>
  <span class="n">A_long</span>         <span class="n">n</span><span class="p">,</span>
  <span class="n">AEGP_MemHandle</span> <span class="o">*</span><span class="n">pathPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
<td>Input</td>
<td>No, if no aux files</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEIO_CloseSourceFiles</span></code></td>
<td><p class="first">Close (or open, depending upon closeB) the source files for an <code class="docutils literal notranslate"><span class="pre">AEIO_InSpecH</span></code>.
When the user Collects Files, the AEIO will first be asked to close its source files, then re-open them.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEIO_CloseSourceFiles</span><span class="p">(</span>
  <span class="n">AEIO_BasicData</span>  <span class="o">*</span><span class="n">basic_dataP</span><span class="p">,</span>
  <span class="n">AEIO_InSpecH</span>    <span class="n">seqH</span><span class="p">,</span>
  <span class="n">A_Boolean</span>       <span class="n">closeB</span><span class="p">);</span>
</pre></div>
</div>
<p class="last"><code class="docutils literal notranslate"><span class="pre">TRUE</span></code> for close, <code class="docutils literal notranslate"><span class="pre">FALSE</span></code> for open.</p>
</td>
<td>Input</td>
<td>Yes</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEIO_CountUserData</span></code></td>
<td><p class="first">Enumerate the units of user data associated with the <code class="docutils literal notranslate"><span class="pre">AEIO_InSpecH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEIO_CountUserData</span><span class="p">(</span>
  <span class="n">AEIO_BasicData</span>  <span class="o">*</span><span class="n">basic_dataP</span><span class="p">,</span>
  <span class="n">AEIO_InSpecH</span>    <span class="n">inH</span><span class="p">,</span>
  <span class="n">A_u_long</span>        <span class="n">typeLu</span><span class="p">,</span>
  <span class="n">A_u_long</span>        <span class="n">max_sizeLu</span><span class="p">,</span>
  <span class="n">A_u_long</span>        <span class="o">*</span><span class="n">num_of_typePLu</span><span class="p">);</span>
</pre></div>
</div>
</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEIO_SetUserData</span></code></td>
<td><p class="first">Set user data (of the given index and type) for the given <code class="docutils literal notranslate"><span class="pre">AEIO_OutSpecH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEIO_SetUserData</span><span class="p">(</span>
  <span class="n">AEIO_BasicData</span>     <span class="o">*</span><span class="n">basic_dataP</span><span class="p">,</span>
  <span class="n">AEIO_OutSpecH</span>      <span class="n">outH</span><span class="p">,</span>
  <span class="n">A_u_long</span>           <span class="n">typeLu</span><span class="p">,</span>
  <span class="n">A_u_long</span>           <span class="n">indexLu</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">AEIO_Handle</span>  <span class="n">dataH</span><span class="p">);</span>
</pre></div>
</div>
</td>
<td>Output</td>
<td>No</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEIO_GetUserData</span></code></td>
<td><p class="first">Describe the user data (at the index and of the type given) associated with the <code class="docutils literal notranslate"><span class="pre">AEIO_InSpecH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEIO_GetUserData</span><span class="p">(</span>
  <span class="n">AEIO_BasicData</span>  <span class="o">*</span><span class="n">basic_dataP</span><span class="p">,</span>
  <span class="n">AEIO_InSpecH</span>    <span class="n">inH</span><span class="p">,</span>
  <span class="n">A_u_long</span>        <span class="n">typeLu</span><span class="p">,</span>
  <span class="n">A_u_long</span>        <span class="n">indexLu</span><span class="p">,</span>
  <span class="n">A_u_long</span>        <span class="n">max_sizeLu</span><span class="p">,</span>
  <span class="n">AEIO_Handle</span>     <span class="o">*</span><span class="n">dataPH</span><span class="p">);</span>
</pre></div>
</div>
</td>
<td>Input</td>
<td>No</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEIO_AddMarker</span></code></td>
<td><p class="first">Associate a marker of the specified type, at the specified frame, with the <code class="docutils literal notranslate"><span class="pre">AEIO_OutSpecH</span></code>.
You may provide an interrupt function to handle user cancellation of this action.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEIO_AddMarker</span><span class="p">(</span>
  <span class="n">AEIO_BasicData</span>       <span class="o">*</span><span class="n">basic_dataP</span><span class="p">,</span>
  <span class="n">AEIO_OutSpecH</span>        <span class="n">outH</span><span class="p">,</span>
  <span class="n">A_long</span>               <span class="n">frame_index</span><span class="p">,</span>
  <span class="n">AEIO_MarkerType</span>      <span class="n">marker_type</span><span class="p">,</span>
  <span class="kt">void</span>                 <span class="o">*</span><span class="n">marker_dataPV</span><span class="p">,</span>
  <span class="n">AEIO_InterruptFuncs</span>  <span class="o">*</span><span class="n">inter0</span><span class="p">);</span>
</pre></div>
</div>
</td>
<td>Output</td>
<td>No</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEIO_VerifyFileImportable</span></code></td>
<td><p class="first">Indicate (by setting importablePB) whether or not the plug-in can import the file.
Note that After Effects has already done basic extension checking; you may wish to open the file and determine whether or not it’s valid.
This can be a time-consuming process; most AEIOs that ship with After Effects simply return TRUE,
and deal with bad files during <code class="docutils literal notranslate"><span class="pre">AEIO_InitInSpecFromFile</span></code>.</p>
<p>The file path is a NULL-terminated UTF-16 string with platform separators.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEIO_VerifyFileImportable</span><span class="p">(</span>
  <span class="n">AEIO_BasicData</span>        <span class="o">*</span><span class="n">basic_dataP</span><span class="p">,</span>
  <span class="n">AEIO_ModuleSignature</span>  <span class="n">sig</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_UTF16Char</span>     <span class="o">*</span><span class="n">file_pathZ</span><span class="p">,</span>
  <span class="n">A_Boolean</span>             <span class="o">*</span><span class="n">importablePB</span><span class="p">);</span>
</pre></div>
</div>
</td>
<td>Input</td>
<td>No</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEIO_UserAudioOptionsDialog</span></code></td>
<td><p class="first">Display an audio options dialog.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEIO_UserAudioOptionsDialog</span><span class="p">(</span>
  <span class="n">AEIO_BasicData</span>  <span class="o">*</span><span class="n">basic_dataP</span><span class="p">,</span>
  <span class="n">AEIO_OutSpecH</span>   <span class="n">outH</span><span class="p">,</span>
  <span class="n">A_Boolean</span>       <span class="o">*</span><span class="n">interacted0</span><span class="p">);</span>
</pre></div>
</div>
</td>
<td>Output</td>
<td>No</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEIO_AddMarker3</span></code></td>
<td><p class="first">Add a marker, with a flag specifying whether or not this is a composition marker.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEIO_AddMarker3</span><span class="p">(</span>
  <span class="n">AEIO_BasicData</span>         <span class="o">*</span><span class="n">basic_dataP</span><span class="p">,</span>
  <span class="n">AEIO_OutSpecH</span>          <span class="n">outH</span><span class="p">,</span>
  <span class="n">A_long</span>                 <span class="n">frame_index</span><span class="p">,</span>
  <span class="n">AEGP_ConstMarkerValP</span>   <span class="n">marker_valP</span><span class="p">,</span>
  <span class="n">AEIO_RenderMarkerFlag</span>  <span class="n">marker_flag</span><span class="p">,</span>
  <span class="n">AEIO_InterruptFuncs</span>    <span class="o">*</span><span class="n">inter0</span><span class="p">);</span>
</pre></div>
</div>
</td>
<td>Output</td>
<td>No</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEIO_GetMimeType</span></code></td>
<td><p class="first">Describe the output mime type. This is used for XMP support.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEIO_GetMimeType</span><span class="p">(</span>
  <span class="n">AEIO_BasicData</span>  <span class="o">*</span><span class="n">basic_dataP</span><span class="p">,</span>
  <span class="n">AEIO_OutSpecH</span>   <span class="n">outH</span><span class="p">,</span>
  <span class="n">A_long</span>          <span class="n">mime_type_sizeL</span><span class="p">,</span>
  <span class="kt">char</span>            <span class="o">*</span><span class="n">mime_typeZ</span><span class="p">);</span>
</pre></div>
</div>
</td>
<td>Output</td>
<td>No</td>
</tr>
</tbody>
</table>
</div>
<hr class="docutils" />
<div class="section" id="what-goes-in">
<h3>What Goes In<a class="headerlink" href="#what-goes-in" title="Permalink to this headline">¶</a></h3>
<p>These functions manage an input specification, After Effects’ internal representation of data gathered from any source.</p>
<p>Any image or audio data in After Effects (except solids) is obtained from an input specification handle, or <code class="docutils literal notranslate"><span class="pre">AEIO_InSpecH</span></code>.</p>
<div class="section" id="aegp-ioinsuite5">
<span id="aeios-new-kids-on-the-function-block-aegp-ioinsuite"></span><h4>AEGP_IOInSuite5<a class="headerlink" href="#aegp-ioinsuite5" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Function</strong></th>
<th class="head"><strong>Purpose</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetInSpecOptionsHandle</span></code></td>
<td><p class="first">Retrieves the options data (created by your AEIO) for the given <code class="docutils literal notranslate"><span class="pre">AEIO_InSpecH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetInSpecOptionsHandle</span><span class="p">(</span>
  <span class="n">AEIO_InSpecH</span>  <span class="n">inH</span><span class="p">,</span>
  <span class="kt">void</span>          <span class="o">**</span><span class="n">optionsPPV</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetInSpecOptionsHandle</span></code></td>
<td><p class="first">Sets the options data for the given <code class="docutils literal notranslate"><span class="pre">AEIO_InSpecH</span></code>.
Must be allocated using the <a class="reference internal" href="index.html#aegps-aegp-suites-memory-suite"><span class="std std-ref">Memory Suite</span></a>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetInSpecOptionsHandle</span><span class="p">(</span>
  <span class="n">AEIO_InSpecH</span>  <span class="n">inH</span><span class="p">,</span>
  <span class="kt">void</span>          <span class="o">*</span><span class="n">optionsPV</span><span class="p">,</span>
  <span class="kt">void</span>          <span class="o">**</span><span class="n">old_optionsPPV</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetInSpecFilePath</span></code></td>
<td><p class="first">Retrieves the file path for the <code class="docutils literal notranslate"><span class="pre">AEIO_InSpecH</span></code>.
The file path is a handle to a NULL-terminated A_UTF16Char string, and must be disposed with <code class="docutils literal notranslate"><span class="pre">AEGP_FreeMemHandle</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetInSpecFilePath</span><span class="p">(</span>
  <span class="n">AEIO_InSpecH</span>    <span class="n">inH</span><span class="p">,</span>
  <span class="n">AEGP_MemHandle</span>  <span class="o">*</span><span class="n">file_nameZ</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetInSpecNativeFPS</span></code></td>
<td><p class="first">Retrieves the frame rate of the <code class="docutils literal notranslate"><span class="pre">AEIO_InSpecH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetInSpecNativeFPS</span><span class="p">(</span>
  <span class="n">AEIO_InSpecH</span>  <span class="n">inH</span><span class="p">,</span>
  <span class="n">A_Fixed</span>       <span class="o">*</span><span class="n">native_fpsP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetInSpecNativeFPS</span></code></td>
<td><p class="first">Sets the frame rate of the <code class="docutils literal notranslate"><span class="pre">AEIO_InSpecH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetInSpecNativeFPS</span><span class="p">(</span>
  <span class="n">AEIO_InSpecH</span>  <span class="n">inH</span><span class="p">,</span>
  <span class="n">A_Fixed</span>       <span class="n">native_fpsP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetInSpecDepth</span></code></td>
<td><p class="first">Retrieves the bit depth of the image data in the <code class="docutils literal notranslate"><span class="pre">AEIO_InSpecH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetInSpecDepth</span><span class="p">(</span>
  <span class="n">AEIO_InSpecH</span>  <span class="n">inH</span><span class="p">,</span>
  <span class="n">A_short</span>       <span class="o">*</span><span class="n">depthPS</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetInSpecDepth</span></code></td>
<td><p class="first">Indicates to After Effects the bit depth of the image data in the <code class="docutils literal notranslate"><span class="pre">AEIO_InSpecH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetInSpecDepth</span><span class="p">(</span>
  <span class="n">AEIO_InSpecH</span>  <span class="n">inH</span><span class="p">,</span>
  <span class="n">A_short</span>       <span class="n">depthS</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetInSpecSize</span></code></td>
<td><p class="first">Retrieves the size (in bytes) of the data referenced by the <code class="docutils literal notranslate"><span class="pre">AEIO_InSpecH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetInSpecSize</span><span class="p">(</span>
  <span class="n">AEIO_InSpecH</span>   <span class="n">inH</span><span class="p">,</span>
  <span class="n">AEIO_FileSize</span>  <span class="o">*</span><span class="n">sizePLLu</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetInSpecSize</span></code></td>
<td><p class="first">Indicates to After Effects the size (in bytes) of the data referenced by the <code class="docutils literal notranslate"><span class="pre">AEIO_InSpecH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetInSpecSize</span><span class="p">(</span>
  <span class="n">AEIO_InSpecH</span>   <span class="n">inH</span><span class="p">,</span>
  <span class="n">AEIO_FileSize</span>  <span class="n">sizeL</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetInSpecInterlaceLabel</span></code></td>
<td><p class="first">Retrieves field information for the <code class="docutils literal notranslate"><span class="pre">AEIO_InSpecH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetInSpecInterlaceLabel</span><span class="p">(</span>
  <span class="n">AEIO_InSpecH</span>  <span class="n">inH</span><span class="p">,</span>
  <span class="n">FIEL_Label</span>    <span class="o">*</span><span class="n">interlaceP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetInSpecInterlaceLabel</span></code></td>
<td><p class="first">Specifies field information for the <code class="docutils literal notranslate"><span class="pre">AEIO_InSpecH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetInSpecInterlaceLabel</span><span class="p">(</span>
  <span class="n">AEIO_InSpecH</span>      <span class="n">inH</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">FIEL_Label</span>  <span class="o">*</span><span class="n">interlaceP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetInSpecAlphaLabel</span></code></td>
<td><p class="first">Retrieves alpha channel interpretation information for the <code class="docutils literal notranslate"><span class="pre">AEIO_InSpecH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetInSpecAlphaLabel</span><span class="p">(</span>
  <span class="n">AEIO_InSpecH</span>     <span class="n">inH</span><span class="p">,</span>
  <span class="n">AEIO_AlphaLabel</span>  <span class="o">*</span><span class="n">alphaP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetInSpecAlphaLabel</span></code></td>
<td><p class="first">Sets alpha channel interpretation information for the <code class="docutils literal notranslate"><span class="pre">AEIO_InSpecH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetInSpecAlphaLabel</span><span class="p">(</span>
  <span class="n">AEIO_InSpecH</span>           <span class="n">inH</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">AEIO_AlphaLabel</span><span class="o">*</span> <span class="n">alphaP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetInSpecDuration</span></code></td>
<td><p class="first">Retrieves the duration of the <code class="docutils literal notranslate"><span class="pre">AEIO_InSpecH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetInSpecDuration</span><span class="p">(</span>
  <span class="n">AEIO_InSpecH</span>  <span class="n">inH</span><span class="p">,</span>
  <span class="n">A_Time</span>        <span class="o">*</span><span class="n">durationP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetInSpecDuration</span></code></td>
<td><p class="first">Sets the duration of the <code class="docutils literal notranslate"><span class="pre">AEIO_InSpecH</span></code>.</p>
<p>NOTE: As of 5.5, this must be called, even for frame-based file formats.
If you don’t set the <code class="docutils literal notranslate"><span class="pre">A_Time.scale</span></code> to something other than zero, your file(s) will not import.</p>
<p>This will be fixed in future versions.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetInSpecDuration</span><span class="p">(</span>
  <span class="n">AEIO_InSpecH</span>  <span class="n">inH</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_Time</span>  <span class="o">*</span><span class="n">durationP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetInSpecDimensions</span></code></td>
<td><p class="first">Retrieves the width and height of the image data in the <code class="docutils literal notranslate"><span class="pre">AEIO_InSpecH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetInSpecDimensions</span><span class="p">(</span>
  <span class="n">AEIO_InSpecH</span>  <span class="n">inH</span><span class="p">,</span>
  <span class="n">A_long</span>        <span class="o">*</span><span class="n">widthPL0</span><span class="p">,</span>
  <span class="n">A_long</span>        <span class="o">*</span><span class="n">heightPL0</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetInSpecDimensions</span></code></td>
<td><p class="first">Indicates to After Effects the width and height of the image data in the <code class="docutils literal notranslate"><span class="pre">AEIO_InSpecH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetInSpecDimensions</span><span class="p">(</span>
  <span class="n">AEIO_InSpecH</span>  <span class="n">inH</span><span class="p">,</span>
  <span class="n">A_long</span>        <span class="n">widthL</span><span class="p">,</span>
  <span class="n">A_long</span>        <span class="n">heightL</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_InSpecGetRational</span></code> Dimensions</td>
<td><p class="first">Retrieves the width, height, bounding rect, and scaling factor applied to an <code class="docutils literal notranslate"><span class="pre">AEIO_InSpecH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_InSpecGetRationalDimensions</span><span class="p">(</span>
  <span class="n">AEIO_InSpecH</span>              <span class="n">inH</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">AEIO_RationalScale</span>  <span class="o">*</span><span class="n">rs0</span><span class="p">,</span>
  <span class="n">A_long</span>                    <span class="o">*</span><span class="n">width0</span><span class="p">,</span>
  <span class="n">A_long</span>                    <span class="o">*</span><span class="n">height0</span><span class="p">,</span>
  <span class="n">A_Rect</span>                    <span class="o">*</span><span class="n">r0</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetInSpecHSF</span></code></td>
<td><p class="first">Retrieves the horizontal scaling factor applied to an <code class="docutils literal notranslate"><span class="pre">AEIO_InSpecH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetInSpecHSF</span><span class="p">(</span>
  <span class="n">AEIO_InSpecH</span>  <span class="n">inH</span><span class="p">,</span>
  <span class="n">A_Ratio</span>       <span class="o">*</span><span class="n">hsf</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetInSpecHSF</span></code></td>
<td><p class="first">Sets the horizontal scaling factor of an <code class="docutils literal notranslate"><span class="pre">AEIO_InSpecH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetInSpecHSF</span><span class="p">(</span>
  <span class="n">AEIO_InSpecH</span>   <span class="n">inH</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_Ratio</span>  <span class="o">*</span><span class="n">hsf</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetInSpecSoundRate</span></code></td>
<td><p class="first">Obtains the sampling rate (in samples per second) for the audio data referenced by the <code class="docutils literal notranslate"><span class="pre">AEIO_InSpecH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetInSpecSoundRate</span><span class="p">(</span>
  <span class="n">AEIO_InSpecH</span>  <span class="n">inH</span><span class="p">,</span>
  <span class="n">A_FpLong</span>      <span class="o">*</span><span class="n">ratePF</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetInSpecSoundRate</span></code></td>
<td><p class="first">Sets the sampling rate (in samples per second) for the audio data referenced by the <code class="docutils literal notranslate"><span class="pre">AEIO_InSpecH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetInSpecSoundRate</span><span class="p">(</span>
  <span class="n">AEIO_InSpecH</span>  <span class="n">inH</span><span class="p">,</span>
  <span class="n">A_FpLong</span>      <span class="n">rateF</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetInSpecSoundEncoding</span></code></td>
<td><p class="first">Obtains the encoding method (signed PCM, unsigned PCM, or floating point) from an AEIO_InSpecH.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetInSpecSoundEncoding</span><span class="p">(</span>
  <span class="n">AEIO_InSpecH</span>      <span class="n">inH</span><span class="p">,</span>
  <span class="n">AEIO_SndEncoding</span>  <span class="o">*</span><span class="n">encodingP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetInSpecSoundEncoding</span></code></td>
<td><p class="first">Sets the encoding method of an AEIO_InSpecH.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetInSpecSoundEncoding</span><span class="p">(</span>
  <span class="n">AEIO_InSpecH</span>      <span class="n">inH</span><span class="p">,</span>
  <span class="n">AEIO_SndEncoding</span>  <span class="n">encoding</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetInSpecSoundSampleSize</span></code></td>
<td><p class="first">Retrieves the bytes-per-sample (1,2, or 4) from an <code class="docutils literal notranslate"><span class="pre">AEIO_InSpecH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetInSpecSoundSampleSize</span><span class="p">(</span>
  <span class="n">AEIO_InSpecH</span>        <span class="n">inH</span><span class="p">,</span>
  <span class="n">AEIO_SndSampleSize</span>  <span class="o">*</span><span class="n">bytes_per_smpP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetInSpecSoundSampleSize</span></code></td>
<td><p class="first">Set the bytes per sample of an <code class="docutils literal notranslate"><span class="pre">AEIO_InSpecH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetInSpecSoundSampleSize</span><span class="p">(</span>
  <span class="n">AEIO_InSpecH</span>        <span class="n">inH</span><span class="p">,</span>
  <span class="n">AEIO_SndSampleSize</span>  <span class="n">bytes_per_sample</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetInSpecSoundChannels</span></code></td>
<td><p class="first">Determines whether the audio in the <code class="docutils literal notranslate"><span class="pre">AEIO_SndChannels</span></code> is mono or stereo.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetInSpecSoundChannels</span><span class="p">(</span>
  <span class="n">AEIO_InSpecH</span>      <span class="n">inH</span><span class="p">,</span>
  <span class="n">AEIO_SndChannels</span>  <span class="o">*</span><span class="n">num_channelsP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetInSpecSoundChannels</span></code></td>
<td><p class="first">Sets the audio in an <code class="docutils literal notranslate"><span class="pre">AEIO_SndChannels</span></code> to mono or stereo.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetInSpecSoundChannels</span><span class="p">(</span>
  <span class="n">AEIO_InSpecH</span>      <span class="n">inH</span><span class="p">,</span>
  <span class="n">AEIO_SndChannels</span>  <span class="n">num_channels</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_AddAuxExtMap</span></code></td>
<td><p class="first">If your file format has auxiliary files which you want to prevent users from opening directly,
pass it’s extension, file type and creator to this function to keep it from appearing in input dialogs.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_AddAuxExtMap</span><span class="p">(</span>
  <span class="k">const</span> <span class="n">A_char</span>  <span class="o">*</span><span class="n">extension</span><span class="p">,</span>
  <span class="n">A_long</span>        <span class="n">file_type</span><span class="p">,</span>
  <span class="n">A_long</span>        <span class="n">creator</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetInSpecEmbeddedColorProfile</span></code></td>
<td><p class="first">In case of RGB data, if there is an embedded icc profile, build an <code class="docutils literal notranslate"><span class="pre">AEGP_ColorProfile</span></code> out of
this icc profile using <code class="docutils literal notranslate"><span class="pre">AEGP_GetNewColorProfileFromICCProfile</span></code> from <a class="reference internal" href="index.html#aegps-aegp-suites-aegp-colorsettingssuite"><span class="std std-ref">AEGP_ColorSettingsSuite2</span></a>
and set the profile description set to NULL.</p>
<p>In case of non-RGB data, if there is an embedded non-RGB icc profile or you know the color space the data is in,
set the color profile set to NULL, and provide the description as a NULL-terminated unicode string.
Doing this disables color management UI that allows user to affect profile choice in the application UI.</p>
<p>If you are unpacking non-RGB data directly into working space (to get working space use <code class="docutils literal notranslate"><span class="pre">AEGP_GetNewWorkingSpaceColorProfile</span></code>), you are done.</p>
<p>If you are unpacking non-RGB data into specific RGB color space, you must pass the profile describing this space to <code class="docutils literal notranslate"><span class="pre">AEGP_SetInSpecAssignedColorProfile</span></code> below.
Otherwise, your RGB data will be incorrectly interpreted as being in working space.</p>
<p>Either color profile or profile description should be NULL in this function. You cannot use both.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetInSpecEmbeddedColorProfile</span><span class="p">(</span>
  <span class="n">AEIO_InSpecH</span>             <span class="n">inH</span><span class="p">,</span>
  <span class="n">AEGP_ConstColorProfileP</span>  <span class="n">color_profileP0</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_UTF16Char</span>        <span class="o">*</span><span class="n">profile_descP0</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetInSpecAssignedColorProfile</span></code></td>
<td><p class="first">Assign a valid RGB color profile to the footage.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetInSpecAssignedColorProfile</span><span class="p">(</span>
  <span class="n">AEIO_InSpecH</span>             <span class="n">inH</span><span class="p">,</span>
  <span class="n">AEGP_ConstColorProfileP</span>  <span class="n">color_profileP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetInSpecNativeStartTime</span></code></td>
<td><p class="first">New in CC. Retrieves the native start time of the footage.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetInSpecNativeStartTime</span><span class="p">(</span>
  <span class="n">AEIO_InSpecH</span>  <span class="n">inH</span><span class="p">,</span>
  <span class="n">A_Time</span>        <span class="o">*</span><span class="n">startTimeP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetInSpecNativeStartTime</span></code></td>
<td><p class="first">New in CC. Assign a native start time to the footage.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetInSpecNativeStartTime</span><span class="p">(</span>
  <span class="n">AEIO_InSpecH</span>  <span class="n">inH</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_Time</span>  <span class="o">*</span><span class="n">startTimeP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_ClearInSpecNativeStartTime</span></code></td>
<td><p class="first">New in CC. Clear the native start time of the footage.
Setting the native start time to 0 using <code class="docutils literal notranslate"><span class="pre">AEGP_SetInSpecNativeStartTime</span></code> doesn’t do this.
It still means there is a special native start time provided.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_ClearInSpecNativeStartTime</span><span class="p">(</span>
  <span class="n">AEIO_InSpecH</span>  <span class="n">inH</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetInSpecNativeDisplayDropFrame</span></code></td>
<td><p class="first">New in CC. Retrieve the drop-frame setting of the footage.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetInSpecNativeDisplayDropFrame</span><span class="p">(</span>
  <span class="n">AEIO_InSpecH</span>  <span class="n">inH</span><span class="p">,</span>
  <span class="n">A_Boolean</span>     <span class="o">*</span><span class="n">displayDropFrameBP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetInSpecNativeDisplayDropFrame</span></code></td>
<td><p class="first">New in CC. Assign the drop-frame setting of the footage.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetInSpecNativeDisplayDropFrame</span><span class="p">(</span>
  <span class="n">AEIO_InSpecH</span>  <span class="n">inH</span><span class="p">,</span>
  <span class="n">A_Boolean</span>     <span class="n">displayDropFrameB</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<hr class="docutils" />
<div class="section" id="what-goes-out">
<h3>What Goes Out<a class="headerlink" href="#what-goes-out" title="Permalink to this headline">¶</a></h3>
<p>These functions manage all interactions with an output specification in After Effects’ render queue.</p>
<div class="section" id="aegpiooutsuite4">
<span id="aeios-new-kids-on-the-function-block-aegpiooutsuite"></span><h4>AEGPIOOutSuite4<a class="headerlink" href="#aegpiooutsuite4" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="26%" />
<col width="74%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Function</strong></th>
<th class="head"><strong>Purpose</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetOutSpecOptionsHandle</span></code></td>
<td><p class="first">Retrieves the Options for the <code class="docutils literal notranslate"><span class="pre">AEIO_OutSpecH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetOutSpecOptionsHandle</span><span class="p">(</span>
  <span class="n">AEIO_OutSpecH</span>  <span class="n">outH</span><span class="p">,</span>
  <span class="kt">void</span>           <span class="o">**</span><span class="n">optionsPPV</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetOutSpecOptionsHandle</span></code></td>
<td><p class="first">Sets the Options for the <code class="docutils literal notranslate"><span class="pre">AEIO_OutSpecH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetOutSpecOptionsHandle</span><span class="p">(</span>
  <span class="n">AEIO_OutSpecH</span>  <span class="n">outH</span><span class="p">,</span>
  <span class="kt">void</span>           <span class="o">*</span><span class="n">optionsPV</span><span class="p">,</span>
  <span class="kt">void</span>           <span class="o">**</span><span class="n">old_optionsPPV</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetOutSpecFilePath</span></code></td>
<td><p class="first">Obtains the path for the <code class="docutils literal notranslate"><span class="pre">AEIO_OutSpecH</span></code>.
The file path is a handle to a NULL-terminated A_UTF16Char string, and must be disposed with <code class="docutils literal notranslate"><span class="pre">AEGP_FreeMemHandle</span></code>.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">file_rsrvdPB</span></code> returns <code class="docutils literal notranslate"><span class="pre">TRUE</span></code>, the plug-in should not overwrite it
(After Effects has already created an empty file); doing so can cause network renders to fail.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetOutSpecFilePath</span><span class="p">(</span>
  <span class="n">AEIO_OutSpecH</span>   <span class="n">outH</span><span class="p">,</span>
  <span class="n">AEGP_MemHandle</span>  <span class="o">*</span><span class="n">unicode_pathPH</span><span class="p">,</span>
  <span class="n">A_Boolean</span>       <span class="o">*</span><span class="n">file_rsrvdPB</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetOutSpecFPS</span></code></td>
<td><p class="first">Obtains the frames per second of the <code class="docutils literal notranslate"><span class="pre">AEIO_OutSpecH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetOutSpecFPS</span><span class="p">(</span>
  <span class="n">AEIO_OutSpecH</span>  <span class="n">outH</span><span class="p">,</span>
  <span class="n">A_Fixed</span>        <span class="o">*</span><span class="n">native_fpsP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetOutSpecNativeFPS</span></code></td>
<td><p class="first">Sets the frames per second of the <code class="docutils literal notranslate"><span class="pre">AEIO_OutSpecH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetOutSpecNativeFPS</span><span class="p">(</span>
  <span class="n">AEIO_OutSpecH</span>  <span class="n">outH</span><span class="p">,</span>
  <span class="n">A_Fixed</span>        <span class="n">native_fpsP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetOutSpecDepth</span></code></td>
<td><p class="first">Obtains the pixel bit depth of the <code class="docutils literal notranslate"><span class="pre">AEIO_OutSpecH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetOutSpecDepth</span><span class="p">(</span>
  <span class="n">AEIO_OutSpecH</span>  <span class="n">outH</span><span class="p">,</span>
  <span class="n">A_short</span>        <span class="o">*</span><span class="n">depthPS</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetOutSpecDepth</span></code></td>
<td><p class="first">Sets the pixel bit depth of the <code class="docutils literal notranslate"><span class="pre">AEIO_OutSpecH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetOutSpecDepth</span><span class="p">(</span>
  <span class="n">AEIO_OutSpecH</span>  <span class="n">outH</span><span class="p">,</span>
  <span class="n">A_short</span>        <span class="n">depthPS</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetOutSpecInterlaceLabel</span></code></td>
<td><p class="first">Obtains field information for the <code class="docutils literal notranslate"><span class="pre">AEIO_OutSpecH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetOutSpecInterlaceLabel</span><span class="p">(</span>
  <span class="n">AEIO_OutSpecH</span>  <span class="n">outH</span><span class="p">,</span>
  <span class="n">FIEL_Label</span>     <span class="o">*</span><span class="n">interlaceP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetOutSpecInterlaceLabel</span></code></td>
<td><p class="first">Set the field information for the <code class="docutils literal notranslate"><span class="pre">AEIO_OutSpecH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetOutSpecInterlaceLabel</span><span class="p">(</span>
  <span class="n">AEIO_OutSpecH</span>     <span class="n">outH</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">FIEL_Label</span>  <span class="o">*</span><span class="n">interlaceP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetOutSpecAlphaLabel</span></code></td>
<td><p class="first">Obtains alpha interpretation information for the <code class="docutils literal notranslate"><span class="pre">AEIO_OutSpecH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetOutSpecAlphaLabel</span><span class="p">(</span>
  <span class="n">AEIO_OutSpecH</span>    <span class="n">outH</span><span class="p">,</span>
  <span class="n">AEIO_AlphaLabel</span>  <span class="o">*</span><span class="n">alphaP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetOutSpecAlphaLabel</span></code></td>
<td><p class="first">Sets the alpha interpretation for the <code class="docutils literal notranslate"><span class="pre">AEIO_OutSpecH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetOutSpecAlphaLabel</span><span class="p">(</span>
  <span class="n">AEIO_OutSpecH</span>          <span class="n">outH</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">AEIO_AlphaLabel</span>  <span class="o">*</span><span class="n">alphaP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetOutSpecDuration</span></code></td>
<td><p class="first">Obtains the duration of the <code class="docutils literal notranslate"><span class="pre">AEIO_OutSpecH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetOutSpecDuration</span><span class="p">(</span>
  <span class="n">AEIO_OutSpecH</span>  <span class="n">outH</span><span class="p">,</span>
  <span class="n">A_Time</span>         <span class="o">*</span><span class="n">durationP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetOutSpecDuration</span></code></td>
<td><p class="first">Sets the duration of the <code class="docutils literal notranslate"><span class="pre">AEIO_OutSpecH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetOutSpecDuration</span><span class="p">(</span>
  <span class="n">AEIO_OutSpecH</span>  <span class="n">outH</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_Time</span>   <span class="o">*</span><span class="n">durationP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetOutSpecDimensions</span></code></td>
<td><p class="first">Obtains the dimensions of the <code class="docutils literal notranslate"><span class="pre">AEIO_OutSpecH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetOutSpecDimensions</span><span class="p">(</span>
  <span class="n">AEIO_OutSpecH</span>  <span class="n">outH</span><span class="p">,</span>
  <span class="n">A_long</span>         <span class="o">*</span><span class="n">widthPL0</span><span class="p">,</span>
  <span class="n">A_long</span>         <span class="o">*</span><span class="n">heightPL0</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetOutSpecHSF</span></code></td>
<td><p class="first">Obtains the horizontal scaling factor of the <code class="docutils literal notranslate"><span class="pre">AEIO_OutSpecH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetOutSpecHSF</span><span class="p">(</span>
  <span class="n">AEIO_OutSpecH</span>  <span class="n">outH</span><span class="p">,</span>
  <span class="n">A_Ratio</span>        <span class="o">*</span><span class="n">hsf</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetOutSpecHSF</span></code></td>
<td><p class="first">Sets the horizontal scaling factor of the <code class="docutils literal notranslate"><span class="pre">AEIO_OutSpecH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetOutSpecHSF</span><span class="p">(</span>
  <span class="n">AEIO_OutSpecH</span>  <span class="n">outH</span><span class="p">,</span>
  <span class="k">const</span> <span class="n">A_Ratio</span>  <span class="o">*</span><span class="n">hsf</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetOutSpecSoundRate</span></code></td>
<td><p class="first">Obtains the sampling rate for the <code class="docutils literal notranslate"><span class="pre">AEIO_OutSpecH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetOutSpecSoundRate</span><span class="p">(</span>
  <span class="n">AEIO_OutSpecH</span>  <span class="n">outH</span><span class="p">,</span>
  <span class="n">A_FpLong</span>       <span class="o">*</span><span class="n">ratePF</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetOutSpecSoundRate</span></code></td>
<td><p class="first">Sets the sampling rate for the <code class="docutils literal notranslate"><span class="pre">AEIO_OutSpecH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetOutSpecSoundRate</span><span class="p">(</span>
  <span class="n">AEIO_OutSpecH</span>  <span class="n">outH</span><span class="p">,</span>
  <span class="n">A_FpLong</span>       <span class="n">rateF</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetOutSpecSoundEncoding</span></code></td>
<td><p class="first">Obtains the sound encoding format of the <code class="docutils literal notranslate"><span class="pre">AEIO_OutSpecH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetOutSpecSoundEncoding</span><span class="p">(</span>
  <span class="n">AEIO_OutSpecH</span>     <span class="n">outH</span><span class="p">,</span>
  <span class="n">AEIO_SndEncoding</span>  <span class="o">*</span><span class="n">encodingP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetOutSpecSoundEncoding</span></code></td>
<td><p class="first">Sets the sound encoding format of the <code class="docutils literal notranslate"><span class="pre">AEIO_OutSpecH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetOutSpecSoundEncoding</span><span class="p">(</span>
  <span class="n">AEIO_OutSpecH</span>     <span class="n">outH</span><span class="p">,</span>
  <span class="n">AEIO_SndEncoding</span>  <span class="n">encoding</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetOutSpecSoundSampleSize</span></code></td>
<td><p class="first">Obtains the bytes-per-sample of the <code class="docutils literal notranslate"><span class="pre">AEIO_OutSpecH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetOutSpecSoundSampleSize</span><span class="p">(</span>
  <span class="n">AEIO_OutSpecH</span>       <span class="n">outH</span><span class="p">,</span>
  <span class="n">AEIO_SndSampleSize</span>  <span class="o">*</span><span class="n">bpsP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetOutSpecSoundSampleSize</span></code></td>
<td><p class="first">Sets the bytes-per-sample of the <code class="docutils literal notranslate"><span class="pre">AEIO_OutSpecH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetOutSpecSoundSampleSize</span><span class="p">(</span>
  <span class="n">AEIO_OutSpecH</span>       <span class="n">outH</span><span class="p">,</span>
  <span class="n">AEIO_SndSampleSize</span>  <span class="n">bpsP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetOutSpecSoundChannels</span></code></td>
<td><p class="first">Obtains the number of sounds channels in the  <code class="docutils literal notranslate"><span class="pre">AEIO_OutSpecH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetOutSpecSoundChannels</span><span class="p">(</span>
  <span class="n">AEIO_OutSpecH</span>     <span class="n">outH</span><span class="p">,</span>
  <span class="n">AEIO_SndChannels</span>  <span class="o">*</span><span class="n">channelsP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_SetOutSpecSoundChannels</span></code></td>
<td><p class="first">Sets the number of sounds channels in the <code class="docutils literal notranslate"><span class="pre">AEIO_OutSpecH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_SetOutSpecSoundChannels</span><span class="p">(</span>
  <span class="n">AEIO_OutSpecH</span>     <span class="n">outH</span><span class="p">,</span>
  <span class="n">AEIO_SndChannels</span>  <span class="n">channels</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetOutSpecIsStill</span></code></td>
<td><p class="first">Determines whether the <code class="docutils literal notranslate"><span class="pre">AEIO_OutSpecH</span></code> is a still.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetOutSpecIsStill</span><span class="p">(</span>
  <span class="n">AEIO_OutSpecH</span>  <span class="n">outH</span><span class="p">,</span>
  <span class="n">A_Boolean</span>      <span class="o">*</span><span class="n">is_stillPB</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetOutSpecPosterTime</span></code></td>
<td><p class="first">Obtains the time of the <code class="docutils literal notranslate"><span class="pre">AEIO_OutSpecH's</span></code> poster frame.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetOutSpecPosterTime</span><span class="p">(</span>
  <span class="n">AEIO_OutSpecH</span>  <span class="n">outH</span><span class="p">,</span>
  <span class="n">A_Time</span>         <span class="o">*</span><span class="n">poster_timeP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetOutSpecStartFrame</span></code></td>
<td><p class="first">Obtains the time of the first frame in the <code class="docutils literal notranslate"><span class="pre">AEIO_OutSpecH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetOutSpecStartFrame</span><span class="p">(</span>
  <span class="n">AEIO_OutSpecH</span>  <span class="n">outH</span><span class="p">,</span>
  <span class="n">A_long</span>         <span class="o">*</span><span class="n">start_frameP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetOutSpecPullDown</span></code></td>
<td><p class="first">Obtains the pulldown phase of the <code class="docutils literal notranslate"><span class="pre">AEIO_OutSpecH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetOutSpecPullDown</span><span class="p">(</span>
  <span class="n">AEIO_OutSpecH</span>  <span class="n">outH</span><span class="p">,</span>
  <span class="n">AEIO_Pulldown</span>  <span class="o">*</span><span class="n">pulldownP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetOutSpecIsMissing</span></code></td>
<td><p class="first">Passes back TRUE if there is no <code class="docutils literal notranslate"><span class="pre">AEIO_OutSpecH</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetOutSpecIsMissing</span><span class="p">(</span>
  <span class="n">AEIO_OutSpecH</span>  <span class="n">outH</span><span class="p">,</span>
  <span class="n">A_Boolean</span>      <span class="o">*</span><span class="n">missingPB</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetOutSpecShouldEmbedICCProfile</span></code></td>
<td><p class="first">Returns TRUE if the AEIO should embed a color profile in the output.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetOutSpecShouldEmbedICCProfile</span><span class="p">(</span>
  <span class="n">AEIO_OutSpecH</span>  <span class="n">outH</span><span class="p">,</span>
  <span class="n">A_Boolean</span>      <span class="o">*</span><span class="n">embedPB</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetNewOutSpecColorProfile</span></code></td>
<td><p class="first">Returns an (opaque) ICC color profile for embedding in the AEIO’s output.
Must be disposed with <code class="docutils literal notranslate"><span class="pre">AEGP_DisposeColorProfile</span></code>.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetNewOutSpecColorProfile</span><span class="p">(</span>
  <span class="n">AEGP_PluginID</span>       <span class="n">aegp_plugin_id</span><span class="p">,</span>
  <span class="n">AEIO_OutSpecH</span>       <span class="n">outH</span><span class="p">,</span>
  <span class="n">AEGP_ColorProfileP</span>  <span class="o">*</span><span class="n">color_profilePP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">AEGP_GetOutSpecOutputModule</span></code></td>
<td><p class="first">Returns the <code class="docutils literal notranslate"><span class="pre">AEGP_RQItemRefH</span></code> and <code class="docutils literal notranslate"><span class="pre">AEGP_OutputModuleRefH</span></code> associated with the given <code class="docutils literal notranslate"><span class="pre">AEIO_OutSpecH</span></code>.
Fails if the render queue item is not found, or if <code class="docutils literal notranslate"><span class="pre">AEIO_OutSpecH</span></code> is not a confirmed outH and is a copy,
i.e. if the Output Module settings dialog is open and the user hasn’t hit OK.</p>
<div class="last highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">AEGP_GetOutSpecOutputModule</span><span class="p">(</span>
  <span class="n">AEIO_OutSpecH</span>          <span class="n">outH</span><span class="p">,</span>
  <span class="n">AEGP_RQItemRefH</span>        <span class="o">*</span><span class="n">rq_itemP</span><span class="p">,</span>
  <span class="n">AEGP_OutputModuleRefH</span>  <span class="o">*</span><span class="n">om_refP</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<span id="document-aeios/implementation-details"></span><div class="section" id="implementation-details">
<span id="aeios-implementation-details"></span><h2>Implementation Details<a class="headerlink" href="#implementation-details" title="Permalink to this headline">¶</a></h2>
<div class="section" id="export-bit-depth">
<h3>Export Bit-Depth<a class="headerlink" href="#export-bit-depth" title="Permalink to this headline">¶</a></h3>
<p>In the Output Module Settings, the user can choose a Depth based on the options the AEIO declares support for in <code class="docutils literal notranslate"><span class="pre">AEIO_GetDepths()</span></code> from <a class="reference internal" href="index.html#aeios-new-kids-on-the-function-block-aeio-functionblock"><span class="std std-ref">AEIO_FunctionBlock4</span></a>.</p>
<p>If a plug-in supports higher bit-depth exports, it should be able to handle these higher bit-depth PF_EffectWorlds passed in <code class="docutils literal notranslate"><span class="pre">AEIO_AddFrame()</span></code> or <code class="docutils literal notranslate"><span class="pre">AEIO_OutputFrame()</span></code>, even when the export setting is not set to the same depth.</p>
<p>The frame delivered to the AEIO, and the final output will not necessarily be the same depth.</p>
<p>You may get frames passed in the project bit-depth instead of the final output if After Effects thinks that will be higher quality.</p>
</div>
<hr class="docutils" />
<div class="section" id="user-data-vs-options">
<h3>User Data vs. Options<a class="headerlink" href="#user-data-vs-options" title="Permalink to this headline">¶</a></h3>
<p>It’s possible to use either user data allocations or options handles to store metadata about a file.</p>
<p>We use user data for information that’s to be embedded in the file (presuming the file format supports such information); marker data, field labels, etc.</p>
<p>We use option handles for information about the file; output settings, dimensions, details of compression settings used.</p>
</div>
</div>
</div>
<div class="toctree-wrapper compound">
<span id="document-ppro/ppro"></span><div class="section" id="premiere-pro-other-hosts">
<span id="ppro-ppro"></span><h2>Premiere Pro &amp; Other Hosts<a class="headerlink" href="#premiere-pro-other-hosts" title="Permalink to this headline">¶</a></h2>
<p>Adobe Premiere Pro and Adobe Premiere Elements both support the After Effects effect API as described in chapters 2, 3, and 5.</p>
<p>They offer a thorough host implementation, some the key omissions being 3D-related calls (auxiliary channel information, cameras and lights), 16-bit and SmartFX support, and other utility functions provided by After Effects’ AEGP API.</p>
<p>Both Premiere Pro and Premiere Elements set <code class="docutils literal notranslate"><span class="pre">PF_InData&gt;appl_id</span></code> to ‘PrMr’.</p>
<p>In this chapter, we will describe the AE API support in Premiere Pro, but generally the same support exists in corresponding versions of Premiere Elements.</p>
<p>If you need to distinguish between Premiere Pro and Premiere Elements, you may use the Premiere-specific App Info Suite, available from the <a class="reference external" href="http://ppro-plugin-sdk.aenhancers.com">Premiere Pro SDK</a> headers.</p>
<table border="1" class="docutils">
<colgroup>
<col width="43%" />
<col width="28%" />
<col width="28%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Application Versions</strong></th>
<th class="head"><strong>PF_InData&gt; version.major</strong></th>
<th class="head"><strong>PF_InData&gt; version.minor</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Premiere Pro CC through Premiere Pro CC 2019</td>
<td>13</td>
<td>4</td>
</tr>
<tr class="row-odd"><td>Premiere Pro CS6</td>
<td>13</td>
<td>2</td>
</tr>
<tr class="row-even"><td>Premiere Pro CS5.5</td>
<td>13</td>
<td>1</td>
</tr>
<tr class="row-odd"><td>Premiere Pro CS5, Premiere Elements 9</td>
<td>13</td>
<td>0</td>
</tr>
<tr class="row-even"><td>Premiere Pro CS4, Premiere Elements 8</td>
<td>12</td>
<td>5</td>
</tr>
<tr class="row-odd"><td>Premiere Pro CS3, Premiere Elements 4 and 7</td>
<td>12</td>
<td>4</td>
</tr>
<tr class="row-even"><td>Premiere Pro 2.0, Premiere Elements 3</td>
<td>12</td>
<td>3</td>
</tr>
<tr class="row-odd"><td>Premiere Pro 1.5, Premiere Elements 2</td>
<td>12</td>
<td>2</td>
</tr>
<tr class="row-even"><td>Premiere Pro 1.0, Premiere Elements 1</td>
<td>12</td>
<td>1</td>
</tr>
</tbody>
</table>
<p>Note that the versioning used by Premiere Pro and Premiere Elements does not mean that they support the same API features After Effects did at the same version. It is simply meant to distinguish from one version to the next.</p>
</div>
<span id="document-ppro/plug-in-installation"></span><div class="section" id="plug-in-installation">
<span id="ppro-plug-in-installation"></span><h2>Plug-in Installation<a class="headerlink" href="#plug-in-installation" title="Permalink to this headline">¶</a></h2>
<p>Use the common plug-in folder as described here: <a class="reference internal" href="index.html#intro-where-installers-should-put-plug-ins"><span class="std std-ref">Where Installers Should Put Plug-ins</span></a>.</p>
<p>If you try to install an effect plug-in only to the Premiere Pro plug-ins directory, you will be surprised to find that your effect is not rendered when you export to disk through Adobe Media Encoder, an entirely separate application.</p>
<p>Oh, and you’ll also miss out on project interchange and copy / paste between Premiere Pro and After Effects.</p>
</div>
<span id="document-ppro/basic-host-differences"></span><div class="section" id="basic-host-differences">
<span id="ppro-basic-host-differences"></span><h2>Basic Host Differences<a class="headerlink" href="#basic-host-differences" title="Permalink to this headline">¶</a></h2>
<p>We’ve tried to provide robust compatibility for After Effects effect plug-ins in Premiere Pro.</p>
<p>There are underlying differences in the render pipeline that lead to differences, and we realize the API implementation may not be perfect.</p>
<p>Below is an overview of some differences the plug-in will encounter when running in Premiere Pro.</p>
<hr class="docutils" />
<div class="section" id="time-values">
<h3>Time Values<a class="headerlink" href="#time-values" title="Permalink to this headline">¶</a></h3>
<p>Premiere Pro uses slightly different time values in PF_InData. For example in CS4:</p>
<p>Rendering in NTSC, time_scale is 60000, time_step is 1001, field gives field order (in After Effects, for field rendering, scale is 2997, step is 50, or for progressive rendering, scale is 2997, step is 100).</p>
<p>Rendering in PAL, time_scale is 50, time_step is 1, field gives field order (in After Effects, for field rendering, scale is 3200, step is 64, or for progressive rendering, scale is 3200, step is 128.</p>
<p>It’s the ratio of time-related values that produces the time value, not specifically the time_scale value. It’s possible Premiere Pro will use different time_scales in the future, so please don’t hard code. Just be aware that it does not necessarily use the exact same values as After Effects.</p>
</div>
<hr class="docutils" />
<div class="section" id="rendering-frames">
<h3>Rendering Frames<a class="headerlink" href="#rendering-frames" title="Permalink to this headline">¶</a></h3>
<p>Premiere is optimized for responsive editing. When scrubbing in the timeline, and changing effect parameters, Premiere will immediately request a low-quality render for immediate display, followed by a high-quality render. So the effect may receive two requests for the same effective time, one at a low resolution, low bit-depth, followed by one at full-resolution, full bit-depth. The resolution requested for each render with take into account the Playback and Paused Resolution set in the Source and Program Monitors: The first request will be at the Playback Resolution, and the second request will be at the Paused Resolution.</p>
<p>Premiere will also perform speculative rendering, to render a set of frames ahead in the timeline, so that if/when the editor starts playback, the initial frames will be ready. This means that when repositioning the time needle, or when changing effect parameters, Premiere will ask the effect to render a set of frames ahead of the current time. If the frames have previously been rendered and cached, the effect will not see these render requests because the cached frames will be used.</p>
<p>When rendering frames in Premiere-native pixel formats, Premiere will send PF_Cmd_RENDER once for each field, rather than for each frame. The <code class="docutils literal notranslate"><span class="pre">PF_InData-&gt;field</span></code> will indicate which field is being rendered, the <code class="docutils literal notranslate"><span class="pre">PF_LayerDef-&gt;height</span></code> will be half of the frame height, and the <code class="docutils literal notranslate"><span class="pre">PF_LayerDef-&gt;rowbytes</span></code> will be double the normal value.</p>
</div>
<hr class="docutils" />
<div class="section" id="render-order">
<h3>Render Order<a class="headerlink" href="#render-order" title="Permalink to this headline">¶</a></h3>
<p>Premiere Pro was built to provide real-time playback of footage with effects wherever possible. The render scheduling is much more aggressive and multithreaded rendering is a basic requirement. This is quite different than After Effects, where users are building layers upon layers of effects and more willing to wait for a RAM preview.</p>
<p>Multithreaded rendering in Premiere applies to AE effects too. When rendering an AE effect, the request from Premiere passes through a critical section which is used for all commands, except those relating to arbitrary data. The critical section prevents two threads from calling the same instance of the effect at the same time. However, Premiere creates multiple instances of the effect, which can be called concurrently from separate threads.</p>
<p>Therefore, an effect should not expect to receive render requests in order of increasing time. Also, effects should not depend on static, non-constant variables.</p>
</div>
<hr class="docutils" />
<div class="section" id="frame-dimensions">
<h3>Frame Dimensions<a class="headerlink" href="#frame-dimensions" title="Permalink to this headline">¶</a></h3>
<p>Differences between source footage and the project/composition are handled differently.</p>
<p>For example, in CS4, when importing an NTSC clip in a PAL sequence, <code class="docutils literal notranslate"><span class="pre">PF_InData&gt;width,height</span></code> are <code class="docutils literal notranslate"><span class="pre">(598,480)</span></code> and <code class="docutils literal notranslate"><span class="pre">PF_InData-&gt;pixel_aspect_ratio</span></code> is <code class="docutils literal notranslate"><span class="pre">(768,702)</span></code>.</p>
<p>In AE, <code class="docutils literal notranslate"><span class="pre">width,height</span></code> are <code class="docutils literal notranslate"><span class="pre">(720,480)</span></code> and <code class="docutils literal notranslate"><span class="pre">pixel_aspect_ratio</span></code> is <code class="docutils literal notranslate"><span class="pre">(10,11)</span></code>.</p>
</div>
<hr class="docutils" />
<div class="section" id="pf-indata">
<h3>PF_InData<a class="headerlink" href="#pf-indata" title="Permalink to this headline">¶</a></h3>
<p>Premiere Pro handles field rendering differently than After Effects. While field rendering, PF_InData&gt;field gives the current field being rendered, ignoring whether or not PF_OutFlag_PIX_INDEPENDENT flag was set.</p>
<p>In Premiere Pro, effects receive the quality setting of the monitor window in <a class="reference internal" href="index.html#effect-basics-pf-indata-pf-indata-members"><span class="std std-ref">PF_InData&gt;quality</span></a>. This differs from After Effects, where the source layer’s quality setting is provided here.</p>
</div>
<hr class="docutils" />
<div class="section" id="parameter-ui">
<h3>Parameter UI<a class="headerlink" href="#parameter-ui" title="Permalink to this headline">¶</a></h3>
<p>Premiere Pro does not honor the <a class="reference internal" href="index.html#effect-basics-pf-paramdef-parameter-flags"><span class="std std-ref">PF_ParamFlag_START_COLLAPSED</span></a> flag. Parameters are always initialized with their twirlies collapsed, and cannot be automatically twirled open by parameter supervision.</p>
<p>Premiere Pro supports the macro <code class="docutils literal notranslate"><span class="pre">PF_ADD_FLOAT_EXPONENTIAL_SLIDER()</span></code>, which lets you define an exponent. Although this macro is newly added for the CC 2015 release 2 SDK, Premiere Pro has used this for some time in the Fast Color Corrector, in the Input Grey Level parameter. The exponent is used so that although the range is from 0.10 to 10, 1.0 is about in the middle of the slider. The exponent we used was 2.5. Typical values would be from 0.01 to 100.</p>
<p>Starting in CC 2015, effects will not be sent <code class="docutils literal notranslate"><span class="pre">PF_Cmd_UPDATE_PARAMS_UI</span></code> or <code class="docutils literal notranslate"><span class="pre">PF_Event_DRAW</span></code> when the time needle is moved and there are no keyframes, unless the effect sets <code class="docutils literal notranslate"><span class="pre">PF_OutFlag_NON_PARAM_VARY</span></code>. Effects such as those that draw histograms in the Effect Controls panel will need to be aware of this optimization.</p>
</div>
<hr class="docutils" />
<div class="section" id="missing-suites">
<h3>Missing Suites<a class="headerlink" href="#missing-suites" title="Permalink to this headline">¶</a></h3>
<p>Many suites supported by After Effects are not implemented in the Premiere Pro host. In several cases, even if a suite is missing in Premiere Pro, an equivalent macro function is available. Here are a few examples:</p>
<table border="1" class="docutils">
<colgroup>
<col width="53%" />
<col width="47%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>After Effects suite call</strong></th>
<th class="head"><strong>Premiere Pro equivalent function</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">WorldTransformSuite1()-&gt;copy()</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">PF_COPY()</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">WorldTransformSuite1()-&gt;convolve()</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">in_data-&gt;utils-&gt;convolve()</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">FillMatteSuite2()-&gt;fill()</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">PF_FILL()</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">PF_PixelDataSuite1-&gt;get_pixel_data8()</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">PF_GET_PIXEL_DATA8()</span></code></td>
</tr>
</tbody>
</table>
<p>The sample projects demonstrate alternate ways of handling a missing suite, by checking for the host application and version. The Portable sample project demonstrates both host application and version checking.</p>
</div>
<hr class="docutils" />
<div class="section" id="a-special-suite-for-ae-effects-running-in-premiere-pro">
<h3>A Special Suite for AE Effects Running in Premiere Pro<a class="headerlink" href="#a-special-suite-for-ae-effects-running-in-premiere-pro" title="Permalink to this headline">¶</a></h3>
<p>No AEGP calls are supported by Premiere Pro. However, there are some interesting parallels in the header PrSDKAESupport.h. For example, you can use the Utility Suite in that header to get the frame rate or field type of the source footage, or to get the speed applied to the clip.</p>
<p>Note that other suites from the Premiere Pro SDK cannot be used in AE effects.</p>
</div>
</div>
<span id="document-ppro/multithreading"></span><div class="section" id="multithreading">
<span id="ppro-multithreading"></span><h2>Multithreading<a class="headerlink" href="#multithreading" title="Permalink to this headline">¶</a></h2>
<p>You may have noticed this flag: <code class="docutils literal notranslate"><span class="pre">PF_OutFlag2_PPRO_DO_NOT_CLONE_SEQUENCE_DATA_FOR_RENDER</span></code>. We advise against setting this flag, as it has been found to cause parameter UI problems.</p>
</div>
<span id="document-ppro/bigger-differences"></span><div class="section" id="bigger-differences">
<span id="ppro-bigger-differences"></span><h2>Bigger Differences<a class="headerlink" href="#bigger-differences" title="Permalink to this headline">¶</a></h2>
<p>As long as an effect only supports the basic ARGB_8u pixel format supported by After Effects, Premiere Pro will try to imitate the After Effects hosting behavior and hide various differences because of the different render pipeline architecture. But if an effect wants to support additional pixel formats, such as 32-bit RGB, be prepared to handle further divergent behavior.</p>
<hr class="docutils" />
<div class="section" id="pixel-formats">
<h3>Pixel Formats<a class="headerlink" href="#pixel-formats" title="Permalink to this headline">¶</a></h3>
<p>Premiere Pro provides function suites for declaring support for pixel formats other than the 8-bit RGB format used by After Effects - ARGB_8u. These pixel formats include the Premiere Pro native 8-bit RGB format - BGRA_8u, as well as YUV, 32-bit formats, and more. For a more detailed discussion of the various pixel formats, see <a class="reference external" href="http://ppro-plugin-sdk.aenhancers.com/universals/pixel-formats-and-color-spaces.html">“Pixel Formats and Colorspaces” from the Premiere Pro SDK Guide</a>.</p>
<p>Use the PF Pixel Format Suite (defined in PrAESDKSupport.h) to register for <a class="reference internal" href="index.html#effect-basics-pf-effectworld"><span class="std std-ref">PF_EffectWorld / PF_LayerDef</span></a> in other pixel formats. Use the Premiere Pixel Format Suite (defined in the aptly-named PrSDKPixelFormatSuite.h) to get black and white values in those pixel formats.</p>
<p>After Effects functions such as PF_BLEND() have not been enhanced to work with pixel formats beyond 8-bit RGB.</p>
</div>
<hr class="docutils" />
<div class="section" id="bit-float-support">
<h3>32-Bit Float Support<a class="headerlink" href="#bit-float-support" title="Permalink to this headline">¶</a></h3>
<p>Premiere Pro does not support After Effects 16-bit rendering or SmartFX. For 32-bit rendering in Premiere Pro, you’ll need to declare support for one of the 32-bit pixel formats (see previous section), and then implement 32-bit rendering for PF_Cmd_RENDER. You can support multiple render depths this way. See the SDK Noise sample project for an example.</p>
<p>Depending on the clip(s) to which an effect is applied, 32-bit processing is not always necessary to preserve the quality of the source input. But there are settings to force 32-bit rendering, to give effects processing finer granularity and more headroom, if desired. Go to Settings&gt;Sequence Settings&gt; Video Previews&gt;Maximum Bit Depth, to control previewing from the timeline. For export to file, use Export Settings&gt;Video&gt;Basic Settings&gt;Render at Maximum Depth.</p>
</div>
<hr class="docutils" />
<div class="section" id="pf-checkout-param-and-pixel-formats">
<h3>PF_CHECKOUT_PARAM and Pixel Formats<a class="headerlink" href="#pf-checkout-param-and-pixel-formats" title="Permalink to this headline">¶</a></h3>
<p>Before CS6, PF_CHECKOUT_PARAM() only returned 8-bit ARGB buffers, regardless of the pixel format currently being used for rendering. Starting in CS6, an effect can opt in to get frames in the same format as the render request, whether it is 32-bit float, YUV, etc.</p>
<p>Plug-ins may request this behavior, but existing plug-ins will continue working receiving 8-bit ARGB frames. The call is EffectWantsCheckedOutFramesToMatch RenderPixelFormat(), in the PF Utility Suite, defined in PrSDKAESupport.h. The call should be made on PF_Cmd_GLOBAL_SETUP, the same selector where an effect would already advertise support beyond 8-bit RGB using AddSupportedPixelFormat().</p>
</div>
</div>
<span id="document-ppro/plug-ins-reloaded"></span><div class="section" id="plug-ins-reloaded">
<span id="ppro-plug-ins-reloaded"></span><h2>Plug-Ins… Reloaded<a class="headerlink" href="#plug-ins-reloaded" title="Permalink to this headline">¶</a></h2>
<p>On it’s first launch, Premiere Pro loads all the plug-ins, reads the PiPL, and sends PF_Cmd_GLOBAL_SETUP to determine the plug-ins’ capabilities. To save time on future application launches, it saves some of these capabilities in what we call the plug-in cache (the registry on Windows, a Property List file on macOS). The next time the application is launched, the cached information is used wherever possible, rather than loading the plug-ins.</p>
<p>When debugging, you can always force a reload of all the plug-ins by holding down the Shift key when launching Premiere Pro.</p>
<p>If your effect needs to be reloaded each time, there is a way to disable this caching. The plug-in can use the PF Cache On Load Suite in AE_CacheOnLoadSuite.h (from the <a class="reference external" href="http://ppro-plugin-sdk.aenhancers.com/">Premiere Pro SDK</a> headers) to call PF_SetNoCacheOnLoad() during PF_Cmd_GLOBAL_SETUP. For the second parameter of that function, pass a non-zero value if you want your effect to show up in the UI. Pass zero if loading failed, but you still want Premiere Pro to attempt to load it again on the next relaunch.</p>
</div>
<hr class="docutils" />
<div class="section" id="effects-presets">
<h2>Effects Presets<a class="headerlink" href="#effects-presets" title="Permalink to this headline">¶</a></h2>
<p>Premiere Pro uses a different preset scheme than After Effects.</p>
<p>From the Premiere Pro SDK Guide:</p>
<p>Effect presets appear in the Presets bin in the Effects panel, and can be applied just like Effects with specific parameter settings and keyframes. Effect presets can be created as follows:</p>
<ol class="arabic simple">
<li>Apply a filter to a clip</li>
<li>Set the parameters of the filter, adding keyframes if desired</li>
<li>Right-click on the filter name in the Effect Controls panel, and select “Save Preset…”</li>
<li>Create preset bins if desired by right-clicking in the Effects panel and choosing “New Presets Bin”</li>
<li>Organize the presets in the preset folders</li>
<li>Select the bins and/or presets you wish to export, right-click, and choose “Export Preset”</li>
</ol>
<p>Presets should be installed in the Plug-ins directory. Once they are installed in that directory, they will be read-only, and the user will not be able to move them to a different folder or change their names. User-created presets will be modifiable.</p>
<p>On Windows Vista, these are in the user’s hidden AppData folder (e.g. C:Users[user name]AppDataRoamingAdobePremiere Pro[version]Effect Presets and Custom Items.prfpset).</p>
<p>On macOS, they are in the user folder, at ~/Library/ Application Support/Adobe/Premiere Pro/[version]/Effect Presets and Custom Items.prfpset.</p>
</div>
<hr class="docutils" />
<div class="section" id="custom-ecw-ui-over-a-standard-data-type">
<h2>Custom ECW UI Over A Standard Data Type<a class="headerlink" href="#custom-ecw-ui-over-a-standard-data-type" title="Permalink to this headline">¶</a></h2>
<p>While this is logged as bug #1235407, there is a simple workaround: Create two separate parameters, and have the custom UI control the slider param using parameter supervision.</p>
</div>
<span id="document-ppro/premiere-elements"></span><div class="section" id="premiere-elements">
<span id="ppro-premiere-elements"></span><h2>Premiere Elements<a class="headerlink" href="#premiere-elements" title="Permalink to this headline">¶</a></h2>
<p>Premiere Elements (but not Premiere Pro) displays visual icons for each effect. You will need to provide icons for your effects, or else an empty black icon will be shown for your effects, or even worse behavior in Premiere Elements 8.</p>
<p>The icons are 60x45 PNG files, and are placed here:</p>
<p>[Program Files]AdobeAdobe Premiere Elements [version]Plug-inCommonEffectPreviews</p>
<p>The filename should be the match name of the effect, which you specify in the <a class="reference internal" href="index.html#intro-pipl-resources"><span class="std std-ref">PiPL Resources</span></a>, prefixed with “AE.” So if the match name was “MatchName”, then the filename should be “AE.MatchName.png”</p>
</div>
<span id="document-ppro/unsupported-features"></span><div class="section" id="unsupported-features">
<span id="ppro-unsupported-features"></span><h2>Unsupported Features<a class="headerlink" href="#unsupported-features" title="Permalink to this headline">¶</a></h2>
<p>Premiere Pro is currently known to not support the following features of the After Effects API:</p>
<p>(If you would like a feature with a “-” bullet, please email <a class="reference external" href="mailto:bbb&#37;&#52;&#48;adobe&#46;com">Premiere Pro API Engineering</a> with the feature request. Numbers preceded by an ‘F’ are feature request numbers, and the others are bug numbers)</p>
<ul class="simple">
<li>F7233 - extent_hint support</li>
<li>F7835 - Multiple PiPLs in a single plug-in</li>
<li>F7836 - AEGP support</li>
<li>F7517 - Audio support - if a plug-in sets PF_OutFlag_I_USE_AUDIO in PF_Cmd_GLOBAL_SETUP, it will not be loaded at all</li>
<li>F9355 - Support PF_ParamFlag_COLLAPSE_TWIRLY</li>
<li>PF World Transform Suite</li>
<li>PF AE Channel Suite</li>
<li>AE’s implementation of high bit color depth support</li>
<li>SmartFX</li>
<li>3D support</li>
<li>PF_SUBPIXEL_SAMPLE(), PF_GET_PIXEL_DATA16()</li>
</ul>
<hr class="docutils" />
<div class="section" id="but-why-d-you-load-it-if-you-can-t-run-it">
<h3>But… Why’d You LOAD It If You Can’t RUN It?!<a class="headerlink" href="#but-why-d-you-load-it-if-you-can-t-run-it" title="Permalink to this headline">¶</a></h3>
<p>Premiere Pro attempts to load AEGP plug-ins. To detect this and avoid any problem behavior, your command hook function can access a suite which is only provided by After Effects; AEGP_CanvasSuite is a fine candidate.</p>
<p>If the suite isn’t present, return an error. The plug-in will be placed on Premiere Pro’s “don’t load these” list.</p>
</div>
</div>
<span id="document-ppro/other-hosts"></span><div class="section" id="other-hosts">
<span id="ppro-other-hosts"></span><h2>Other Hosts<a class="headerlink" href="#other-hosts" title="Permalink to this headline">¶</a></h2>
<p>For third-party hosts, the Adobe policy remains:</p>
<p><em>“Adobe neither supports nor recommends the creation of Adobe-compatible third-party hosts. While it may be possible to create a partially functional host by reverse engineering from the plug-in API specification, we do not recommend it and will not support you in doing so.”</em></p>
<hr class="docutils" />
<div class="section" id="reality-sandwich">
<h3>Reality Sandwich<a class="headerlink" href="#reality-sandwich" title="Permalink to this headline">¶</a></h3>
<p>We realize that, for developers like you, one good way to grow your market is to ensure that your plug-ins work in as many hosts as possible.</p>
<p>Our SmartFX API has created quite a bit of distance between the After Effects API and the implementations available in the rest of the plug-in hosting world.</p>
<p>We will do what we can to help the other hosts support newer features. If you encounter problems in third party hosts, please refer them to us if they need assistance.</p>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 1992–2020 Adobe Systems Incorporated
      
        <span class="commit">
          Revision <code>0c06b631</code>.
        </span>
      

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Read the Docs</span>
      v: latest
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Versions</dt>
        
          <dd><a href="/en/latest/">latest</a></dd>
        
      </dl>
      <dl>
        <dt>Downloads</dt>
        
          <dd><a href="//ae-plugin-sdk-guide.readthedocs.io/_/downloads/en/latest/pdf/">pdf</a></dd>
        
          <dd><a href="//ae-plugin-sdk-guide.readthedocs.io/_/downloads/en/latest/htmlzip/">html</a></dd>
        
          <dd><a href="//ae-plugin-sdk-guide.readthedocs.io/_/downloads/en/latest/epub/">epub</a></dd>
        
      </dl>
      <dl>
        <dt>On Read the Docs</dt>
          <dd>
            <a href="//readthedocs.org/projects/ae-plugin-sdk-guide/?fromdocs=ae-plugin-sdk-guide">Project Home</a>
          </dd>
          <dd>
            <a href="//readthedocs.org/builds/ae-plugin-sdk-guide/?fromdocs=ae-plugin-sdk-guide">Builds</a>
          </dd>
      </dl>
      <hr/>
      Free document hosting provided by <a href="http://www.readthedocs.org">Read the Docs</a>.

    </div>
  </div>



  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
   

</body>
</html>